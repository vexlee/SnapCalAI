import{c as We,j as e,R as xe,e as he,w as Ue,S as pe,D as Be,x as Q,y as V,z as q,d as ue,E as Ge,g as Oe,F as He,G as Ye,H as qe,h as Je}from"./index-CouDGB-U.js";import{r as x}from"./vendor-react-wGySg1uH.js";import{C as ie}from"./Card-B2YpZbjn.js";import{C as Ve,U as Ke,c as Xe,d as Qe,M as ce,a as Ze}from"./MealDetailModal-CrbTPT8j.js";import{X as ge}from"./x-QdPRibKp.js";import{C as J}from"./calendar-BgJJa1Y9.js";import{A as et}from"./users-aBrXZHlS.js";import{T as fe}from"./trending-up-BgkTTCMB.js";import{S as tt}from"./scale-m-QzVbbz.js";import{C as st}from"./check-lROYYAx7.js";import{C as be}from"./chevron-left-CrCKCX3t.js";import{T as at}from"./target-BdV7N-ie.js";import{T as _,G as rt}from"./index-cQ6qJtkF.js";import{C as X}from"./chevron-right-zgTCPsVZ.js";import{L as nt}from"./loader-2-ByqJc0Jq.js";import"./vendor-charts-Bdt_fL2G.js";import"./vendor-supabase-DfwcnzK-.js";import"./camera-BXq9K9yF.js";import"./trash-2-DKUUbHXL.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=We("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),lt=({summary:s,onClose:l})=>{const i=new Date(s.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl border border-white/50 animate-in slide-in-from-bottom duration-300",children:[e.jsxs("div",{className:"relative bg-primary-50 p-8 pb-10",children:[e.jsx("div",{className:"absolute top-6 right-6",children:e.jsx("button",{onClick:l,className:"p-2 bg-white text-gray-900 rounded-full shadow-sm hover:bg-gray-100 transition-colors",children:e.jsx(ge,{size:20})})}),e.jsxs("div",{className:"flex items-center gap-2 text-primary-600 mb-3",children:[e.jsx(J,{size:20}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Daily Report"})]}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 leading-tight",children:i})]}),e.jsxs("div",{className:"p-8 -mt-6 bg-white rounded-t-[32px] relative shadow-[-10px_-10px_30px_rgba(0,0,0,0.02)]",children:[e.jsxs("div",{className:"bg-white rounded-[32px] p-6 border border-gray-100 shadow-[0_10px_30px_-10px_rgba(0,0,0,0.05)] mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1 block",children:"Total Consumed"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-5xl font-extrabold text-gray-900 tracking-tighter",children:s.totalCalories}),e.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"kcal"})]})]}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-primary-50 flex items-center justify-center text-primary-600",children:e.jsx(et,{size:28})})]}),e.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx(Ve,{size:16})," Macro Breakdown"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-emerald-50 hover:border-emerald-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"w-1.5 h-10 bg-emerald-400 rounded-full"}),e.jsxs("div",{children:[e.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[s.totalProtein,"g"]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Protein"})]})]})}),e.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-blue-50 hover:border-blue-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"w-1.5 h-10 bg-blue-400 rounded-full"}),e.jsxs("div",{children:[e.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[s.totalCarbs,"g"]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Carbs"})]})]})}),e.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-orange-50 hover:border-orange-100 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:"w-1.5 h-10 bg-orange-400 rounded-full"}),e.jsxs("div",{children:[e.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[s.totalFat,"g"]}),e.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Fat"})]})]})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 flex justify-between items-center text-xs font-bold text-gray-400 uppercase tracking-wider",children:[e.jsxs("span",{children:[s.entries.length," meals tracked"]}),e.jsxs("span",{className:"flex items-center gap-1.5 text-primary-600",children:[e.jsx(fe,{size:14}),"See History Tab"]})]})]})]})})},it=({onClose:s,onConfirm:l})=>{const[i,g]=x.useState(0),[h,c]=x.useState(""),[a,d]=x.useState(!1),[m,f]=x.useState(!0),[F,T]=x.useState(!1),[I,$]=x.useState(null);x.useEffect(()=>{(async()=>{const E=await he();E&&($(E),g(E.weight),c(E.weight.toString())),f(!1)})()},[]);const z=async()=>{const j=parseFloat(h)||i;if(a&&I&&j!==i){T(!0);try{await Ue({...I,weight:j}),g(j)}catch(E){console.error("Failed to save weight:",E)}T(!1)}l(j)};return m?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center animate-in fade-in duration-300",children:e.jsx("div",{className:"bg-white[#1A1C26] rounded-[28px] p-8 w-[90%] max-w-sm shadow-2xl",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-primary-200 border-t-primary-600 rounded-full animate-spin"})})})}):e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-end sm:items-center justify-center animate-in fade-in duration-300",onClick:s,children:e.jsxs("div",{className:"bg-white[#1A1C26] rounded-t-[28px] sm:rounded-[28px] p-6 w-full sm:w-[90%] sm:max-w-sm shadow-2xl animate-in slide-in-from-bottom duration-500",onClick:j=>j.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center",children:e.jsx(tt,{size:20,className:"text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-black text-gray-900",children:"Weight Check"}),e.jsx("p",{className:"text-[10px] text-gray-400 font-medium",children:"Before viewing your report"})]})]}),e.jsx("button",{onClick:s,className:"w-8 h-8 rounded-xl bg-gray-100 flex items-center justify-center hover:bg-gray-200:bg-white/10 transition-colors",children:e.jsx(ge,{size:16,className:"text-gray-400"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-2xl p-5 mb-6",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-4 text-center",children:"Is your current weight still accurate?"}),a?e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:h,onChange:j=>c(j.target.value),className:"w-28 text-center text-3xl font-black text-gray-900 bg-white[#0F111A] border-2 border-primary-200 rounded-xl py-2 focus:outline-none focus:border-primary-500",step:"0.1",min:"20",max:"300",autoFocus:!0}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm font-bold text-gray-400",children:"kg"})]}),e.jsx("button",{onClick:()=>{d(!1),c(i.toString())},className:"text-xs text-gray-400 font-medium hover:text-gray-600",children:"Cancel"})]}):e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-black text-gray-900 mb-1",children:[i,e.jsx("span",{className:"text-lg font-bold text-gray-400 ml-1",children:"kg"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"text-xs text-primary-600 font-bold flex items-center gap-1 mx-auto hover:underline",children:[e.jsx(xe,{size:12}),"Update weight"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 py-3.5 rounded-xl bg-gray-100 text-gray-600 font-bold text-sm hover:bg-gray-200:bg-white/10 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:F,className:"flex-1 py-3.5 rounded-xl bg-primary-600 text-white font-bold text-sm hover:bg-primary-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:F?e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(st,{size:16}),"Confirm"]})})]})]})})},ct=({report:s,reportType:l,onClose:i,onRegenerate:g,isRegenerating:h=!1})=>{const c=()=>{const d=new Date(s.periodStart),m=new Date(s.periodEnd);if(l==="daily")return d.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});if(l==="weekly"){const f=d.toLocaleDateString("en-US",{month:"short",day:"numeric"}),F=m.toLocaleDateString("en-US",{month:"short",day:"numeric"});return`${f} - ${F}`}return d.toLocaleDateString("en-US",{month:"long",year:"numeric"})},a=()=>{switch(l){case"daily":return"Daily Review";case"weekly":return"Weekly Summary";case"monthly":return"Monthly Report"}};return e.jsx("div",{className:"fixed inset-0 bg-[#F3F0E7][#0F111A] z-[100] animate-in slide-in-from-right duration-300 overflow-y-auto",children:e.jsxs("div",{className:"min-h-screen pb-20",children:[e.jsx("div",{className:"sticky top-0 bg-[#F3F0E7]/80[#0F111A]/80 backdrop-blur-xl z-10 px-6 pt-10 pb-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-400 hover:text-primary-600 transition-colors",children:[e.jsx(be,{size:20}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Back"})]}),e.jsxs("button",{onClick:g,disabled:h,className:"flex items-center gap-2 text-xs font-bold text-[#3D745B] bg-primary-50 px-3 py-1.5 rounded-xl hover:bg-primary-100:bg-primary-900/30 transition-colors disabled:opacity-50",children:[e.jsx(xe,{size:12,className:h?"animate-spin":""}),h?"Generating...":"Regenerate"]})]})}),e.jsxs("div",{className:"px-6 pt-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(pe,{size:20,className:"text-primary-600"}),e.jsx("span",{className:"text-[10px] font-bold text-primary-600 uppercase tracking-widest",children:"Coach Tips"})]}),e.jsx("h1",{className:"text-2xl font-black text-gray-900 tracking-tight mb-1",children:a()}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(J,{size:14}),e.jsx("span",{className:"text-sm font-medium",children:c()})]})]}),e.jsx("div",{className:"bg-[#3D745B] rounded-4xl p-6 mb-6 shadow-lg shadow-primary-200/30",children:e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0",children:e.jsx(fe,{size:20,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-white/80 mb-1",children:"Summary"}),e.jsx("p",{className:"text-white text-sm leading-relaxed",children:s.summary})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Period Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-[#FFF4E6] rounded-2xl p-4 border-2 border-orange-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-orange-100 flex items-center justify-center",children:e.jsx(Ke,{size:12,className:"text-orange-600"})}),e.jsx("span",{className:"text-[9px] font-bold text-orange-800/60 uppercase",children:"Avg Calories"})]}),e.jsxs("span",{className:"text-xl font-black text-orange-900",children:[s.metrics.avgCalories,e.jsx("span",{className:"text-xs font-bold text-orange-800/40 ml-1",children:"kcal"})]})]}),e.jsxs("div",{className:"bg-[#F0F7F4] rounded-2xl p-4 border-2 border-emerald-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-emerald-100 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-black text-emerald-600",children:"P"})}),e.jsx("span",{className:"text-[9px] font-bold text-emerald-800/60 uppercase",children:"Avg Protein"})]}),e.jsxs("span",{className:"text-xl font-black text-emerald-900",children:[s.metrics.avgProtein,e.jsx("span",{className:"text-xs font-bold text-emerald-800/40 ml-1",children:"g"})]})]}),e.jsxs("div",{className:"bg-[#E7ECE9] rounded-2xl p-4 border-2 border-[#C1D6CB] shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-primary-100 flex items-center justify-center",children:e.jsx(Be,{size:12,className:"text-[#3D745B]"})}),e.jsx("span",{className:"text-[9px] font-bold text-[#3D745B]/60 uppercase",children:"Workouts"})]}),e.jsxs("span",{className:"text-xl font-black text-[#3D745B]",children:[s.metrics.workoutsCompleted,e.jsx("span",{className:"text-xs font-bold text-[#3D745B]/40 ml-1",children:"done"})]})]}),e.jsxs("div",{className:"bg-[#EFF6FF] rounded-2xl p-4 border-2 border-blue-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(at,{size:12,className:"text-blue-600"})}),e.jsx("span",{className:"text-[9px] font-bold text-blue-800/60 uppercase",children:"Goal Rate"})]}),e.jsxs("span",{className:"text-xl font-black text-blue-900",children:[s.metrics.calorieGoalHitRate,e.jsx("span",{className:"text-xs font-bold text-blue-800/40 ml-1",children:"%"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-3",children:"Improvement Tips"}),e.jsx("div",{className:"space-y-3",children:s.tips.map((d,m)=>{const f=["bg-[#F0F4F2] border-[#C2D1CC] text-emerald-900","bg-[#F9F4F2] border-[#EAD0C8] text-orange-900","bg-[#F7F6F0] border-[#E8E1BC] text-[#4A483E]","bg-[#F0F4F9] border-[#C8D6E8] text-blue-900"],F=f[m%f.length];return e.jsxs("div",{className:`${F}[#1A1C26] rounded-2xl p-4 border-2 flex items-start gap-3 shadow-sm`,children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/50 backdrop-blur-sm flex items-center justify-center flex-shrink-0 text-xl shadow-sm",children:d.emoji}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-bold opacity-90 mb-0.5",children:d.title}),e.jsx("p",{className:"text-xs opacity-70 leading-relaxed font-medium",children:d.description})]})]},m)})})]}),s.weightAtReport&&e.jsxs("div",{className:"text-center text-xs text-gray-400",children:["Weight at report: ",e.jsxs("span",{className:"font-bold",children:[s.weightAtReport," kg"]})]})]})]})})},dt=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",mt=()=>new rt({apiKey:dt()}),ye="snapcal_coach_reports_v1",xt=`You are **Cal Coach**, providing personalized health and fitness reviews.

**Your Role:**
Generate concise, motivating, and actionable reports based on the user's tracking data.

**Report Guidelines:**
1. **Summary**: 2-3 sentences highlighting key achievements and areas for improvement
2. **Tips**: Exactly 3 specific, actionable tips 
3. **Tone**: Encouraging but honest. Celebrate wins, gently address gaps

**Tip Format:**
Each tip should have:
- emoji: A relevant emoji (ðŸ¥—, ðŸ’ª, ðŸŽ¯, âš¡, ðŸ’§, ðŸ”¥, etc.)
- title: Short action phrase (3-5 words)
- description: One sentence explaining the tip

**Never:**
- Be negative or discouraging
- Give generic advice that doesn't relate to the user's data
- Use medical disclaimers or suggest consulting doctors
- Repeat the same tip twice`,ht=async(s,l)=>{if(!Q){const c=localStorage.getItem("snapcal_workouts");return c?JSON.parse(c).filter(d=>d.date>=s&&d.date<=l):[]}const i=await V();if(!i)return[];const{data:g,error:h}=await q.from("workout_plans").select("id, date, title, exercises").eq("user_id",i.id).gte("date",s).lte("date",l);return h?(console.error("Failed to fetch workout plans:",h),[]):g.map(c=>({id:c.id,date:c.date,title:c.title,exercises:c.exercises||[]}))},pt=async(s,l,i)=>{const[g,h,c,a]=await Promise.all([he(),ue(),Ge(l,i),ht(l,i)]),d=c.length,m=c.reduce((y,w)=>y+(w.totalCalories>0?1:0),0),f=d>0?Math.round(c.reduce((y,w)=>y+w.totalCalories,0)/d):0,F=d>0?Math.round(c.reduce((y,w)=>y+w.totalProtein,0)/d):0,T=d>0?Math.round(c.reduce((y,w)=>y+w.totalCarbs,0)/d):0,I=d>0?Math.round(c.reduce((y,w)=>y+w.totalFat,0)/d):0,$=c.filter(y=>Math.abs(y.totalCalories-h)<=h*.1).length,z=d>0?Math.round($/d*100):0,j=a.filter(y=>y.exercises.some(w=>w.completed)).length,E={avgCalories:f,avgProtein:F,avgCarbs:T,avgFat:I,totalMeals:m,workoutsCompleted:j,daysTracked:d,calorieGoalHitRate:z},L=c.map(y=>({date:y.date,calories:y.totalCalories,protein:y.totalProtein,carbs:y.totalCarbs,fat:y.totalFat,meals:y.totalCalories>0?1:0}));return{profile:g,dailyGoal:h,periodStart:l,periodEnd:i,reportType:s,metrics:E,dailyBreakdown:L,workoutsCompleted:j}},ut=s=>{const{profile:l,dailyGoal:i,periodStart:g,periodEnd:h,reportType:c,metrics:a,dailyBreakdown:d}=s;let m=`**${c.charAt(0).toUpperCase()+c.slice(1)} Health Review**
`;return m+=`Period: ${g} to ${h}

`,l&&(m+=`**User Profile:**
`,l.name&&(m+=`- Name: ${l.name}
`),l.weight&&(m+=`- Weight: ${l.weight} kg
`),l.height&&(m+=`- Height: ${l.height} cm
`),l.goal&&(m+=`- Goal: ${{cut:"Lose weight",bulk:"Build muscle",maintain:"Maintain weight"}[l.goal]}
`),m+=`- Daily Calorie Goal: ${i} kcal

`),m+=`**Period Statistics:**
`,m+=`- Days tracked: ${a.daysTracked}
`,m+=`- Average daily calories: ${a.avgCalories} kcal (Goal: ${i})
`,m+=`- Average protein: ${a.avgProtein}g
`,m+=`- Average carbs: ${a.avgCarbs}g
`,m+=`- Average fat: ${a.avgFat}g
`,m+=`- Calorie goal hit rate: ${a.calorieGoalHitRate}%
`,m+=`- Workouts completed: ${a.workoutsCompleted}

`,d.length>0&&d.length<=7&&(m+=`**Daily Breakdown:**
`,d.forEach(f=>{m+=`- ${f.date}: ${f.calories} kcal, P: ${f.protein}g, C: ${f.carbs}g, F: ${f.fat}g
`})),m+=`
---

Provide a summary and 3 actionable tips based on this data.`,m},gt=async s=>{const l=mt(),i=ut(s),g=await l.models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{text:i}]}],config:{systemInstruction:xt,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{summary:{type:_.STRING},tips:{type:_.ARRAY,items:{type:_.OBJECT,properties:{emoji:{type:_.STRING},title:{type:_.STRING},description:{type:_.STRING}},required:["emoji","title","description"]}}},required:["summary","tips"]}}});return Xe(Qe,g.text||"{}","Coach Report")},je=()=>{try{const s=localStorage.getItem(ye);return s?JSON.parse(s):[]}catch{return[]}},ft=s=>{localStorage.setItem(ye,JSON.stringify(s))},we=async(s,l,i)=>{if(!Q)return je().find(d=>d.reportType===s&&d.periodStart===l&&d.periodEnd===i)||null;const g=await V();if(!g)return null;const{data:h,error:c}=await q.from("coach_reports").select("id, user_id, report_type, period_start, period_end, summary, tips, metrics, weight_at_report, created_at").eq("user_id",g.id).eq("report_type",s).eq("period_start",l).eq("period_end",i).single();return c||!h?null:{id:h.id,userId:h.user_id,reportType:h.report_type,periodStart:h.period_start,periodEnd:h.period_end,summary:h.summary,tips:h.tips,metrics:h.metrics,weightAtReport:h.weight_at_report,createdAt:h.created_at}},bt=async s=>{if(!Q){const h=je().filter(c=>!(c.reportType===s.reportType&&c.periodStart===s.periodStart&&c.periodEnd===s.periodEnd));h.push(s),ft(h);return}const l=await V();if(!l)throw new Error("User not authenticated");await q.from("coach_reports").delete().eq("user_id",l.id).eq("report_type",s.reportType).eq("period_start",s.periodStart).eq("period_end",s.periodEnd);const{error:i}=await q.from("coach_reports").insert({id:s.id,user_id:l.id,report_type:s.reportType,period_start:s.periodStart,period_end:s.periodEnd,summary:s.summary,tips:s.tips,metrics:s.metrics,weight_at_report:s.weightAtReport});if(i)throw console.error("Failed to save report:",i),new Error("Failed to save report")},yt=async(s,l,i,g)=>{var m;const h=await V();if(!h)throw new Error("User not authenticated");const c=await pt(s,l,i),a=await gt(c),d={id:`${s}_${l}_${Date.now()}`,userId:h.id,reportType:s,periodStart:l,periodEnd:i,summary:a.summary,tips:a.tips.slice(0,3),metrics:c.metrics,weightAtReport:g||((m=c.profile)==null?void 0:m.weight),createdAt:new Date().toISOString()};return await bt(d),d},de=async(s,l,i,g=!1,h)=>{if(!g){const c=await we(s,l,i);if(c)return c}return yt(s,l,i,h)},me=(s,l)=>{if(s==="daily")return{start:l,end:l};if(s==="weekly"){const d=new Date(l),m=new Date(d);m.setDate(d.getDate()+6);const f=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`;return{start:l,end:f}}const[i,g]=l.split("-").map(Number),h=new Date(i,g,0),c=`${i}-${String(g).padStart(2,"0")}-01`,a=`${i}-${String(g).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`;return{start:c,end:a}},zt=()=>{const[s,l]=x.useState([]),[i,g]=x.useState(2e3),[h,c]=x.useState(!0),[a,d]=x.useState("day"),[m,f]=x.useState(null),[F,T]=x.useState(null),[I,$]=x.useState(!1),[z,j]=x.useState(null),[E,L]=x.useState(!1),[y,w]=x.useState(!1),[M,B]=x.useState(null),[Ne,G]=x.useState(!1),[ve,Z]=x.useState(!1),[v,ke]=x.useState(Oe()),[S,Se]=x.useState(new Date().toISOString().substring(0,7)),[k,Ce]=x.useState(()=>{const t=new Date,r=t.getDay(),n=r===0?-6:1-r,o=new Date(t);o.setDate(t.getDate()+n);const p=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),b=String(o.getDate()).padStart(2,"0");return`${p}-${u}-${b}`}),[De,ee]=x.useState(!1),[Fe,Ee]=x.useState({}),[R,O]=x.useState({}),[Re,te]=x.useState({}),[H,W]=x.useState({}),K=x.useRef(null);document.documentElement.classList.contains("dark");const se=x.useCallback(()=>{if(K.current){const t=K.current;t.scrollLeft=t.scrollWidth}},[]);x.useEffect(()=>{const t=setTimeout(se,100);return()=>clearTimeout(t)},[a,se]);const Y=async()=>{c(!0);try{const[t,r]=await Promise.all([qe(),ue()]);l(t),g(r),U(v)}catch(t){console.error("Failed to load history data",t)}finally{c(!1)}},U=x.useCallback(async t=>{if(!R[t]){te(r=>({...r,[t]:!0}));try{const r=await He(t);O(n=>({...n,[t]:r}))}catch(r){console.error(`Failed to load entries for ${t}`,r)}finally{te(r=>({...r,[t]:!1}))}}},[R]),$e=x.useCallback(async t=>{if(H[t]===void 0){W(r=>({...r,[t]:null}));try{const r=await Ye(t);W(n=>({...n,[t]:r}))}catch(r){console.error(`Failed to load image for entry ${t}`,r)}}},[H]);x.useEffect(()=>{Y();const t=()=>{O({}),W({}),Y()};return window.addEventListener("food-entry-updated",t),()=>window.removeEventListener("food-entry-updated",t)},[]),x.useEffect(()=>{v&&(a==="day"||a==="week")&&U(v)},[v,U,a]);const ae=async t=>{await Je(t),O({}),W({}),await Y()},re=t=>{f(null),j(t),$(!0)},Me=async()=>{G(!0);try{const t=a==="day"?"daily":a==="week"?"weekly":"monthly",r=a==="day"?v:a==="week"?k:S,{start:n,end:o}=me(t,r),p=await we(t,n,o);p?(B(p),w(!0)):L(!0)}catch(t){console.error("Failed to check for report:",t),L(!0)}finally{G(!1)}},_e=async t=>{L(!1),G(!0);try{const r=a==="day"?"daily":a==="week"?"weekly":"monthly",n=a==="day"?v:a==="week"?k:S,{start:o,end:p}=me(r,n),u=await de(r,o,p,!1,t);B(u),w(!0)}catch(r){console.error("Failed to generate report:",r),alert("Failed to generate AI report. Please try again.")}finally{G(!1)}},Te=async()=>{if(M){Z(!0);try{const t=await de(M.reportType,M.periodStart,M.periodEnd,!0);B(t)}catch(t){console.error("Failed to regenerate report:",t),alert("Failed to regenerate report. Please try again.")}finally{Z(!1)}}},ne=t=>(H[t.id]===void 0&&$e(t.id),{...t,imageUrl:H[t.id]||void 0}),Ie=x.useMemo(()=>{if(a==="day"){const t=[],r=new Date,n=new Date(r);n.setDate(r.getDate()-30);for(let o=new Date(n);o<=r;o.setDate(o.getDate()+1)){const p=o.getFullYear(),u=String(o.getMonth()+1).padStart(2,"0"),b=String(o.getDate()).padStart(2,"0"),N=`${p}-${u}-${b}`;t.push({id:N,name:o.toLocaleDateString("en-US",{weekday:"short"}),label:o.getDate().toString(),date:N})}return t}else if(a==="week"){const t=[],r=new Date,n=r.getDay(),o=n===0?-6:1-n,p=new Date(r);p.setDate(r.getDate()+o);for(let u=0;u<8;u++){const b=new Date(p);b.setDate(p.getDate()-u*7);const N=new Date(b);N.setDate(b.getDate()+6);const C=b.toLocaleDateString("en-US",{month:"short",day:"numeric"}),D=N.toLocaleDateString("en-US",{day:"numeric"}),A=b.getFullYear(),Ae=String(b.getMonth()+1).padStart(2,"0"),ze=String(b.getDate()).padStart(2,"0"),le=`${A}-${Ae}-${ze}`;t.push({id:le,name:"Week",label:`${C} - ${D}`,date:le})}return t.reverse()}else{const t=new Set;return s.forEach(n=>{const o=n.date.substring(0,7);t.add(o)}),Array.from(t).sort().map(n=>{const[o,p]=n.split("-"),u=new Date(parseInt(o),parseInt(p)-1,1);return{id:n,name:u.toLocaleDateString("en-US",{year:"2-digit"}),label:u.toLocaleDateString("en-US",{month:"short"}),date:n}})}},[a,s]),P=x.useMemo(()=>{if(a==="day")return s.find(t=>t.date===v)||{date:v,totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0};if(a==="week"){if(!k)return{date:"",totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0};const t=new Date(k),r=new Date(t);r.setDate(t.getDate()+6);const n=k,o=r.getFullYear(),p=String(r.getMonth()+1).padStart(2,"0"),u=String(r.getDate()).padStart(2,"0"),b=`${o}-${p}-${u}`,C=s.filter(D=>D.date>=n&&D.date<=b).reduce((D,A)=>({totalCalories:D.totalCalories+A.totalCalories,totalProtein:D.totalProtein+A.totalProtein,totalCarbs:D.totalCarbs+A.totalCarbs,totalFat:D.totalFat+A.totalFat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0});return{date:k,...C}}else{const r=s.filter(n=>n.date.startsWith(S)).reduce((n,o)=>({totalCalories:n.totalCalories+o.totalCalories,totalProtein:n.totalProtein+o.totalProtein,totalCarbs:n.totalCarbs+o.totalCarbs,totalFat:n.totalFat+o.totalFat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0});return{date:S,...r}}},[s,v,S,k,a]),Le=x.useMemo(()=>{if(a==="day")return[];const t=n=>{if(a==="month")return n.startsWith(S);if(a==="week"&&k)try{const[o,p,u]=k.split("-").map(Number),b=new Date(o,p-1,u),N=new Date(b);N.setDate(b.getDate()+6);const C=new Date(n);return C>=b&&C<=N}catch{return!1}return!1};return Object.entries(R).filter(([n])=>t(n)).flatMap(([n,o])=>o).sort((n,o)=>o.timestamp.localeCompare(n.timestamp))},[R,S,k,a]),oe=x.useMemo(()=>{if(a==="day")return{};const t=n=>{if(a==="month")return n.startsWith(S);if(a==="week"&&k)try{const[o,p,u]=k.split("-").map(Number),b=new Date(o,p-1,u),N=new Date(b);N.setDate(b.getDate()+6);const C=new Date(n);return C>=b&&C<=N}catch{return!1}return!1},r={};return Object.entries(R).filter(([n])=>t(n)).forEach(([n,o])=>{o.length>0&&(r[n]=o.sort((p,u)=>u.timestamp.localeCompare(p.timestamp)))}),r},[R,S,k,a]),Pe=t=>{Ee(r=>({...r,[t]:!r[t]}))};return x.useEffect(()=>{a==="month"&&s.filter(r=>r.date.startsWith(S)).map(r=>r.date).forEach(r=>U(r))},[a,S,s,U]),De?e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in slide-in-from-right duration-500 bg-transparent",children:[e.jsxs("div",{className:"px-6 pt-10 pb-32 overflow-y-auto no-scrollbar",children:[e.jsxs("button",{onClick:()=>ee(!1),className:"flex items-center gap-2 text-secondary-400 mb-6 hover:text-primary-600 transition-colors",children:[e.jsx(be,{size:20}),e.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Back to Report"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-2xl font-black text-primary-900 tracking-tight font-display",children:"History Log"}),e.jsx("div",{className:"text-xs font-bold text-primary-600 bg-primary-50 px-3 py-1.5 rounded-xl border border-primary-100",children:a==="week"?new Date(v).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):new Date(S+"-01").toLocaleDateString(void 0,{month:"long",year:"numeric"})})]}),e.jsx("div",{className:"space-y-4",children:a==="day"?Re[v]?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"h-20 bg-surface rounded-4xl animate-pulse border border-white/40"},t))}):(R[v]||[]).length>0?(R[v]||[]).map(t=>{const r=ne(t);return e.jsxs("div",{onClick:()=>f(r),className:"bg-surface p-4 flex justify-between items-center rounded-4xl shadow-soft border border-white/40 hover:bg-white:bg-white/5 transition-all cursor-pointer active:scale-[0.98]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-3xl bg-secondary-50 overflow-hidden shadow-inner border border-white/40",children:r.imageUrl?e.jsx("img",{src:r.imageUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-secondary-50 text-secondary-300",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-300"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-primary-900 font-bold",children:t.food_item}),e.jsx("span",{className:"text-[10px] text-secondary-400 font-medium",children:t.time})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm text-primary-600 font-black",children:t.calories}),e.jsx("span",{className:"text-[8px] font-bold text-secondary-400 uppercase",children:"kcal"})]})]},t.id)}):e.jsxs("div",{className:"bg-surface rounded-4xl p-12 text-center border border-dashed border-secondary-200",children:[e.jsx(J,{size:32,className:"mx-auto text-secondary-200 mb-4"}),e.jsx("p",{className:"text-secondary-400 text-sm font-medium",children:"No meals logged for this day."})]}):Object.keys(oe).length>0?Object.entries(oe).sort(([t],[r])=>r.localeCompare(t)).map(([t,r])=>{const n=Fe[t],o=r.reduce((p,u)=>p+u.calories,0);return e.jsxs("div",{className:"bg-surface rounded-4xl border border-white/40 overflow-hidden shadow-soft",children:[e.jsxs("button",{onClick:()=>Pe(t),className:"w-full p-4 flex justify-between items-center hover:bg-white:bg-white/5 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`transition-transform duration-200 ${n?"rotate-90":""}`,children:e.jsx(X,{size:16,className:"text-secondary-400"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-sm font-bold text-primary-900",children:new Date(t).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),e.jsxs("span",{className:"text-[9px] font-medium text-secondary-400",children:[r.length," meal",r.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm text-primary-600 font-black",children:o}),e.jsx("span",{className:"text-[8px] font-bold text-secondary-400 uppercase",children:"kcal"})]})]}),n&&e.jsx("div",{className:"border-t border-secondary-100",children:r.map(p=>{const u=ne(p);return e.jsxs("div",{onClick:()=>f(u),className:"p-4 flex justify-between items-center hover:bg-white:bg-white/5 transition-all cursor-pointer border-b border-secondary-50 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-3xl bg-secondary-50 overflow-hidden shadow-inner border border-white/40",children:u.imageUrl?e.jsx("img",{src:u.imageUrl,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-secondary-50 text-secondary-300",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary-300"})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-primary-900 font-bold leading-tight",children:p.food_item}),e.jsx("span",{className:"text-[9px] text-secondary-400",children:p.time})]})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm text-primary-600 font-black",children:p.calories}),e.jsx("span",{className:"text-[8px] font-bold text-secondary-400 uppercase",children:"kcal"})]})]},p.id)})})]},t)}):e.jsxs("div",{className:"bg-surface rounded-4xl p-12 text-center border border-dashed border-secondary-200",children:[e.jsx(J,{size:32,className:"mx-auto text-secondary-200 mb-4"}),e.jsxs("p",{className:"text-secondary-400 text-sm font-medium",children:["No data for this ",a==="month"?"month":"week","."]})]})})]}),m&&e.jsx(ce,{entry:m,onClose:()=>f(null),onDelete:ae,onEdit:re})]}):e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in fade-in duration-500 overflow-y-auto no-scrollbar relative bg-transparent",children:[e.jsxs("div",{className:"px-6 pt-10 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-black text-primary-900 tracking-tight font-display",children:"Report"}),e.jsxs("div",{className:"flex p-1 bg-surface rounded-xl border border-white/40 shadow-sm",children:[e.jsx("button",{onClick:()=>d("day"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${a==="day"?"bg-[#3D745B] text-white shadow-soft":"text-secondary-400 hover:text-[#3D745B]"}`,children:"Daily"}),e.jsx("button",{onClick:()=>d("week"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${a==="week"?"bg-[#3D745B] text-white shadow-soft":"text-secondary-400 hover:text-[#3D745B]"}`,children:"Weekly"}),e.jsx("button",{onClick:()=>d("month"),className:`px-3 py-1.5 rounded-lg text-[10px] font-bold transition-all ${a==="month"?"bg-[#3D745B] text-white shadow-soft":"text-secondary-400 hover:text-[#3D745B]"}`,children:"Monthly"})]})]}),e.jsxs("div",{className:"relative mb-8",children:[e.jsx("div",{ref:K,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 px-1 snap-x",style:{WebkitOverflowScrolling:"touch"},children:Ie.map(t=>{const r=a==="day"?t.id===v:a==="week"?t.id===k:t.id===S,n=s.some(o=>{if(a==="day")return o.date===t.id;if(a==="week"){const[p,u,b]=t.id.split("-").map(Number),N=new Date(p,u-1,b),C=new Date(N);C.setDate(N.getDate()+6);const D=new Date(o.date);return D>=N&&D<=C}return o.date.startsWith(t.id)});return e.jsxs("button",{onClick:()=>{a==="day"?ke(t.id):a==="week"?Ce(t.id):Se(t.id)},className:`flex-shrink-0 flex flex-col items-center justify-center ${a==="week"?"w-24":"w-12"} py-3 rounded-3xl transition-all duration-300 snap-center ${r?"bg-[#3D745B] text-white shadow-lg shadow-primary-200/50 transform scale-110":"bg-surface text-secondary-400 border border-white/40"}`,children:[e.jsx("span",{className:`text-[9px] font-bold uppercase mb-1 ${r?"text-white/70":"text-secondary-400"}`,children:t.name}),e.jsx("span",{className:"text-sm font-extrabold",children:t.label}),n&&!r&&e.jsx("div",{className:"w-1 h-1 rounded-full bg-primary-400 mt-1"})]},t.id)})}),e.jsx("div",{className:"absolute top-0 left-0 bottom-2 w-8 bg-gradient-to-r from-background to-transparent pointer-events-none z-10"}),e.jsx("div",{className:"absolute top-0 right-0 bottom-2 w-8 bg-gradient-to-l from-background to-transparent pointer-events-none z-10"})]}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"bg-surface rounded-4xl p-6 shadow-soft border border-white/40 flex flex-col items-center",children:[e.jsx("span",{className:"text-[9px] font-bold text-secondary-400 uppercase tracking-widest mb-1",children:a==="day"?"Daily Total":a==="week"?"Weekly Total":"Monthly Total"}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[e.jsx("span",{className:"text-5xl font-black text-primary-900 tracking-tighter",children:Math.round(P.totalCalories)}),e.jsx("span",{className:"text-[10px] font-black text-primary-600 uppercase tracking-widest mt-0.5",children:"KCAL"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2.5 w-full",children:[e.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-emerald-50/50 rounded-3xl border border-emerald-100/50 transition-colors",children:[e.jsx("span",{className:"text-[8px] font-bold text-emerald-600/60 uppercase mb-0.5",children:"Protein"}),e.jsxs("span",{className:"text-sm font-black text-emerald-600",children:[Math.round(P.totalProtein),"g"]})]}),e.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-amber-50/50 rounded-3xl border border-amber-100/50 transition-colors",children:[e.jsx("span",{className:"text-[8px] font-bold text-amber-600/60 uppercase mb-0.5",children:"Carbs"}),e.jsxs("span",{className:"text-sm font-black text-amber-600",children:[Math.round(P.totalCarbs),"g"]})]}),e.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-rose-50/50 rounded-3xl border border-rose-100/50 transition-colors",children:[e.jsx("span",{className:"text-[8px] font-bold text-rose-600/60 uppercase mb-0.5",children:"Fat"}),e.jsxs("span",{className:"text-sm font-black text-rose-600",children:[Math.round(P.totalFat),"g"]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{onClick:Me,className:"p-5 flex flex-col justify-between h-36 bg-[#3D745B] text-white shadow-soft-lg cursor-pointer active:scale-[0.98] transition-transform rounded-4xl",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx(pe,{size:12,className:"text-white/70"}),e.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase",children:a==="day"?"Coach Tips":"Report"})]}),e.jsx("h3",{className:"text-lg font-black leading-tight",children:a==="day"?"Daily Review":a==="week"?"Weekly Summary":e.jsxs(e.Fragment,{children:["Your Health",e.jsx("br",{}),"Summary"]})})]}),e.jsx("div",{className:"mt-2 py-2 bg-white/20 rounded-full text-[10px] font-bold backdrop-blur-sm flex items-center justify-center gap-2",children:Ne?e.jsx(nt,{size:12,className:"animate-spin"}):e.jsxs(e.Fragment,{children:["VIEW INSIGHTS",e.jsx(X,{size:12})]})})]}),e.jsxs("div",{className:"grid grid-rows-2 gap-4 h-36",children:[e.jsxs(ie,{onClick:()=>ee(!0),className:"p-4 flex flex-col justify-center bg-surface border-white/40 active:scale-95 transition-transform cursor-pointer rounded-4xl shadow-soft",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("p",{className:"text-[9px] font-bold text-secondary-400 uppercase",children:"History Log"}),e.jsx(X,{size:10,className:"text-secondary-300"})]}),e.jsxs("p",{className:"text-xs font-black text-primary-900",children:[a==="day"?(R[v]||[]).length:Le.length," Meals"]})]}),e.jsxs(ie,{className:"p-4 flex flex-col justify-center bg-surface border-white/40 rounded-4xl shadow-soft",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("p",{className:"text-[9px] font-bold text-secondary-400 uppercase",children:"Goal Status"}),e.jsx(ot,{size:10,className:"text-secondary-300"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-1 bg-secondary-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#3D745B] rounded-full",style:{width:`${Math.min(P.totalCalories/(a==="day"?i:a==="week"?i*7:i*30)*100,100)}%`}})}),e.jsxs("span",{className:"text-[10px] font-black text-primary-900",children:[Math.round(P.totalCalories/(a==="day"?i:a==="week"?i*7:i*30)*100),"%"]})]})]})]})]}),e.jsx("div",{className:"h-24"})]}),m&&e.jsx(ce,{entry:m,onClose:()=>f(null),onDelete:ae,onEdit:re}),F&&e.jsx(lt,{summary:F,onClose:()=>T(null)}),I&&e.jsx(Ze,{editEntry:z,onClose:()=>{$(!1),j(null)},onSuccess:()=>{$(!1),j(null),O({}),W({}),Y()},onOpenSharedMeal:()=>{$(!1)}}),E&&e.jsx(it,{onClose:()=>L(!1),onConfirm:_e}),y&&M&&e.jsx(ct,{report:M,reportType:M.reportType,onClose:()=>{w(!1),B(null)},onRegenerate:Te,isRegenerating:ve})]})};export{zt as History};
