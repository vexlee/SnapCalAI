import{c as S,j as e,S as P,x as T,w as je,y as Ne,d as Z,b as Se,g as X,a as Ce,G as Ye,H as Ve,A as Qe,B as C,s as Ze,I as Xe}from"./index-DC3id3Mb.js";import{r as m}from"./vendor-react-wGySg1uH.js";import{T as u,G as et}from"./index-cQ6qJtkF.js";import{C as be}from"./chevron-left-B8KuD6i8.js";import{X as $}from"./x-C_Ytw0rY.js";import{H as tt,U as fe,A as at,R as st}from"./users-4_U-RpyW.js";import{C as K}from"./camera-CyyPOWEX.js";import{C as Ie}from"./calendar-Bo1Lwrvo.js";import{T as Le}from"./trash-2-cUg5ghus.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=S("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=S("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=S("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=S("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=S("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=S("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=S("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=S("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=S("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=S("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),gt=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",Re=()=>{const t=gt();return console.log("Gemini Key Detected:","Yes",`(Length: ${t.length})`),new et({apiKey:t})},De=`
You are an expert AI nutritionist and mathematical calculator. 

SCENARIO 1: IMAGE/TEXT ESTIMATION
- Analyze food descriptions or images.
- Provide a detailed "receipt" breakdown of every ingredient.
- Estimate weights in grams (g) and calculate nutrition.

SCENARIO 2: STRICT RECALCULATION (User provided weights)
- If a list of ingredients with specific weights (grams) is provided, you MUST act as a precise calculator.
- IGNORE your previous estimations.
- Use the provided weights as the ABSOLUTE GROUND TRUTH.
- Calculate calories and macros strictly based on these weights.
- Return the recalculated totals.
`,ze=t=>{const s=(t==null?void 0:t.message)||String(t)||"",r=s.toLowerCase();return s.includes("429")||r.includes("quota")||r.includes("limit")||r.includes("exhausted")?"AI Limit Reached: You've sent too many requests. Please wait about 60 seconds for the quota to reset.":r.includes("api key")?"Configuration Error: Invalid API key. Please check your settings.":r.includes("network")||r.includes("fetch")?"Connection Error: Please check your internet connection and try again.":s||"An unexpected AI error occurred."};async function ee(t,s=2,r=2e3){try{return await t()}catch(a){const o=(a==null?void 0:a.message)||"";if((o.includes("429")||o.toLowerCase().includes("quota"))&&s>0)return console.warn(`Gemini Quota hit. Retrying in ${r}ms... (${s} retries left)`),await new Promise(l=>setTimeout(l,r)),ee(t,s-1,r*2);throw a}}const mt=async t=>{try{return await ee(async()=>{const r=await Re().models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:"Analyze this image. Breakdown into ingredients, weights in grams, calories, and total nutrition."}]},config:{systemInstruction:De,responseMimeType:"application/json",responseSchema:{type:u.OBJECT,properties:{item:{type:u.STRING},calories:{type:u.INTEGER},protein:{type:u.INTEGER},carbs:{type:u.INTEGER},fat:{type:u.INTEGER},confidence:{type:u.NUMBER},ingredients:{type:u.ARRAY,items:{type:u.OBJECT,properties:{name:{type:u.STRING},grams:{type:u.INTEGER},calories:{type:u.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(r.text||"{}")})}catch(s){throw console.error("Gemini Analysis Error:",s),new Error(ze(s))}},ye=async(t,s)=>{try{return await ee(async()=>{let r="";s&&s.length>0?r=`USER MANUAL WEIGHT CORRECTION:
        The following ingredients have been updated with exact weights. 
        Perform a mathematical calculation for the nutrition of each item based strictly on these grams:
        
        ${s.map(l=>`- ${l.name}: ${l.grams}g`).join(`
`)}
        
        CRITICAL: 
        1. Calculate calories/macros from scratch for each item.
        2. Sum the totals.
        3. Do not adjust the weights provided.
        4. Return the new AnalysisResult.`:r=`Estimate nutrition for: "${t}".`;const o=await Re().models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{text:r}]}],config:{systemInstruction:De,responseMimeType:"application/json",responseSchema:{type:u.OBJECT,properties:{item:{type:u.STRING},calories:{type:u.INTEGER},protein:{type:u.INTEGER},carbs:{type:u.INTEGER},fat:{type:u.INTEGER},confidence:{type:u.NUMBER},ingredients:{type:u.ARRAY,items:{type:u.OBJECT,properties:{name:{type:u.STRING},grams:{type:u.INTEGER},calories:{type:u.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(o.text||"{}")})}catch(r){throw console.error("Gemini Text Analysis Error:",r),new Error(ze(r))}};let O;const ut=new Uint8Array(16);function xt(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(ut)}const w=[];for(let t=0;t<256;++t)w.push((t+256).toString(16).slice(1));function ht(t,s=0){return w[t[s+0]]+w[t[s+1]]+w[t[s+2]]+w[t[s+3]]+"-"+w[t[s+4]]+w[t[s+5]]+"-"+w[t[s+6]]+w[t[s+7]]+"-"+w[t[s+8]]+w[t[s+9]]+"-"+w[t[s+10]]+w[t[s+11]]+w[t[s+12]]+w[t[s+13]]+w[t[s+14]]+w[t[s+15]]}const pt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),we={randomUUID:pt};function bt(t,s,r){if(we.randomUUID&&!t)return we.randomUUID();t=t||{};const a=t.random||(t.rng||xt)();return a[6]=a[6]&15|64,a[8]=a[8]&63|128,ht(a)}const ft=({isActive:t,onComplete:s,message:r="Analyzing Meal..."})=>{const[a,o]=m.useState(0);if(m.useEffect(()=>{t&&o(0)},[t]),m.useEffect(()=>{if(!t)return;const h=setInterval(()=>{o(g=>{if(g>=92)return 92;const p=g<30?2:g<60?1:.5;return Math.min(g+p,92)})},70);return()=>clearInterval(h)},[t]),m.useEffect(()=>{},[t]),!t)return null;const i=60,l=6,d=i-l*2,c=d*2*Math.PI,x=c-a/100*c;return e.jsxs("div",{className:"fixed inset-0 z-[120] flex items-center justify-center pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm transition-opacity"}),e.jsxs("div",{className:"relative bg-[#1a1c26]/95 backdrop-blur-xl p-8 rounded-[40px] border border-white/10 shadow-2xl pointer-events-auto flex flex-col items-center animate-in zoom-in-95 duration-300 min-w-[300px]",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-40 h-40 bg-royal-500/20 blur-3xl rounded-full animate-pulse pointer-events-none"}),e.jsxs("div",{className:"relative w-40 h-40 flex items-center justify-center mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-royal-500/10 rounded-full border-t-royal-500/30 animate-[spin_3s_linear_infinite]"}),e.jsxs("svg",{height:i*2,width:i*2,className:"rotate-[-90deg] drop-shadow-[0_0_10px_rgba(124,58,237,0.3)]",children:[e.jsx("circle",{stroke:"rgba(255,255,255,0.1)",strokeWidth:l,fill:"transparent",r:d,cx:i,cy:i}),e.jsx("circle",{stroke:"url(#gradient)",strokeWidth:l,strokeDasharray:c+" "+c,style:{strokeDashoffset:x,transition:"stroke-dashoffset 0.1s linear"},strokeLinecap:"round",fill:"transparent",r:d,cx:i,cy:i}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#7c3aed"})," ",e.jsx("stop",{offset:"100%",stopColor:"#a78bfa"})," "]})})]}),e.jsx("div",{className:"absolute flex flex-col items-center justify-center text-white",children:e.jsxs("span",{className:"text-3xl font-black tracking-tighter tabular-nums text-transparent bg-clip-text bg-gradient-to-br from-white to-white/70",children:[Math.round(a),"%"]})})]}),e.jsxs("div",{className:"text-center space-y-2 relative z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-white tracking-tight flex items-center justify-center gap-2",children:[e.jsx(P,{size:18,className:"text-yellow-400 animate-pulse"}),r]}),e.jsx("p",{className:"text-xs text-white/50 font-medium",children:"Identifying ingredients..."})]})]})]})},Y="snapcal_streak_v1",V="snapcal_weight_goal_v1",yt=3,wt=7700,kt=75,vt=63,jt={sedentary:1.2,light:1.375,moderate:1.55,very:1.725,extra:1.9},Nt=t=>{try{const s=localStorage.getItem(Y);return s&&JSON.parse(s)[t]||null}catch{return null}},Ae=(t,s)=>{try{const r=localStorage.getItem(Y),a=r?JSON.parse(r):{};a[t]=s,localStorage.setItem(Y,JSON.stringify(a))}catch(r){console.error("Failed to save streak data:",r)}},St=t=>{try{const s=localStorage.getItem(V);return s&&JSON.parse(s)[t]||null}catch{return null}},Ct=(t,s)=>{try{const r=localStorage.getItem(V),a=r?JSON.parse(r):{};a[t]=s,localStorage.setItem(V,JSON.stringify(a))}catch(r){console.error("Failed to save weight goal:",r)}},It=async()=>{const t=await T();if(!t)return Q();const s=Nt(t.id);if(s)return s;if(je)try{const{data:r,error:a}=await Ne.from("user_streaks").select("*").eq("user_id",t.id).single();if(!a&&r){const o={currentStreak:r.current_streak,longestStreak:r.longest_streak,lastLogDate:r.last_log_date,streakFreezes:r.streak_freezes,lastFreezeUsedDate:r.last_freeze_used_date,qualifyingDates:r.qualifying_dates||[]};return Ae(t.id,o),o}}catch(r){console.warn("Failed to fetch streak from Supabase:",r)}return Q()},Q=()=>({currentStreak:0,longestStreak:0,lastLogDate:null,streakFreezes:1,lastFreezeUsedDate:null,qualifyingDates:[]}),Lt=async t=>await T()?(await Ce()).filter(o=>o.date===t).length>=yt:!1,Tt=async()=>{if(!await T())return Q();const s=X(),r=await Lt(s),a=await It();if(!r||a.qualifyingDates.includes(s))return a;const o=Rt(),i=a.qualifyingDates.includes(o),l=a.lastFreezeUsedDate===o;let d;a.lastLogDate===null?d=1:i||l?d=a.currentStreak+1:a.lastLogDate===s?d=a.currentStreak:d=1;const c={currentStreak:d,longestStreak:Math.max(a.longestStreak,d),lastLogDate:s,streakFreezes:a.streakFreezes,lastFreezeUsedDate:a.lastFreezeUsedDate,qualifyingDates:[...a.qualifyingDates.slice(-30),s]};return await Dt(c),window.dispatchEvent(new CustomEvent("streak-updated",{detail:c})),c},Rt=()=>{const t=new Date;return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},Dt=async t=>{const s=await T();if(s){if(Ae(s.id,t),je)try{await Ne.from("user_streaks").upsert({user_id:s.id,current_streak:t.currentStreak,longest_streak:t.longestStreak,last_log_date:t.lastLogDate,streak_freezes:t.streakFreezes,last_freeze_used_date:t.lastFreezeUsedDate,qualifying_dates:t.qualifyingDates},{onConflict:"user_id"})}catch(r){console.warn("Failed to sync streak to Supabase:",r)}Ye.invalidate(Ve.STREAK_DATA)}},zt=async()=>{const t=await T(),s=await Z(),r=await Se(),a=s==null?void 0:s.targetWeight,o=a&&a>0?a:vt,i={startWeight:(s==null?void 0:s.weight)||kt,targetWeight:o,dailyCalorieLimit:r};if(!t)return i;const l=St(t.id);return l?{...l,targetWeight:o,dailyCalorieLimit:r}:(Ct(t.id,i),i)},At=async()=>{const t=await Z();if(!t||!t.weight||!t.height)return 2e3;const s=t.weight,r=t.height,a=t.age||25,o=t.gender!=="female";let i;o?i=10*s+6.25*r-5*a+5:i=10*s+6.25*r-5*a-161;const l=t.activityLevel||"sedentary",d=jt[l]||1.2;return Math.round(i*d)},Qt=async()=>{const t=await Z(),s=await zt(),r=await At(),a=(t==null?void 0:t.weight)||s.startWeight,o=s.targetWeight,i=s.dailyCalorieLimit,l=r-i;if(l<=0||a<=o)return a<=o?{targetWeight:o,currentWeight:a,dailyDeficit:0,estimatedDate:new Date,daysRemaining:0,progressPercentage:100}:null;const c=(a-o)*wt,x=Math.ceil(c/l),h=new Date;h.setDate(h.getDate()+x);const g=s.startWeight-o,p=s.startWeight-a,f=g>0?Math.min(100,Math.max(0,p/g*100)):0;return{targetWeight:o,currentWeight:a,dailyDeficit:l,estimatedDate:h,daysRemaining:x,progressPercentage:f}},Zt=t=>{if(t.daysRemaining===0)return"ðŸŽ‰ Congratulations! You've reached your goal!";const s={month:"long",day:"numeric",year:"numeric"},r=t.estimatedDate.toLocaleDateString("en-US",s);return`Keep this up, and you'll hit ${t.targetWeight}kg by ${r}!`};var _t=(t=>(t.OPTIMAL="optimal",t.WARNING="warning",t.CRITICAL="critical",t))(_t||{});const ke=3,ve=18,te="snapcal_last_log_timestamp",Mt=()=>{try{return localStorage.getItem(te)}catch{return null}},Ft=()=>{try{localStorage.setItem(te,new Date().toISOString()),window.dispatchEvent(new CustomEvent("avatar-state-changed"))}catch(t){console.error("Failed to update last log timestamp:",t)}},Ut=t=>{if(!t)return 1/0;try{const s=new Date(t);return(new Date().getTime()-s.getTime())/(1e3*60*60)}catch{return 1/0}},Xt=async()=>{const t=await T(),s={state:"critical",lastLogTimestamp:null,todayCalories:0,calorieLimit:1600,mealsLogged:0,hoursSinceLastLog:1/0,stateReason:"No logging activity detected"};if(!t)return s;const r=await Ce(),a=X(),o=r.filter(p=>p.date===a),i=o.reduce((p,f)=>p+f.calories,0),l=o.length,d=await Se();let c=Mt();if(!c&&r.length>0){const p=[...r].sort((f,N)=>{const j=new Date(`${f.date}T${f.time||"00:00"}`);return new Date(`${N.date}T${N.time||"00:00"}`).getTime()-j.getTime()});if(p.length>0){const f=p[0];c=new Date(`${f.date}T${f.time||"00:00"}`).toISOString();try{localStorage.setItem(te,c)}catch{}}}const x=Ut(c),{state:h,reason:g}=Et({todayCalories:i,calorieLimit:d,mealsLogged:l,hoursSinceLastLog:x});return{state:h,lastLogTimestamp:c,todayCalories:i,calorieLimit:d,mealsLogged:l,hoursSinceLastLog:x,stateReason:g}},Et=t=>{const{todayCalories:s,calorieLimit:r,mealsLogged:a,hoursSinceLastLog:o}=t;return o>ve?{state:"critical",reason:`No activity for ${o===1/0?"a long time":`${Math.floor(o)} hours`}`}:s>r?{state:"warning",reason:`Over calorie limit by ${s-r} kcal`}:a>0&&a<ke?{state:"warning",reason:`Only ${a} meal(s) logged today`}:a===0&&o<=ve?{state:"warning",reason:"No meals logged today yet"}:s<=r&&a>=ke?{state:"optimal",reason:"Great job! All meals logged and within limit"}:{state:"warning",reason:"Keep logging your meals!"}},Gt=()=>{window.dispatchEvent(new CustomEvent("avatar-feed",{detail:{timestamp:Date.now()}})),Ft()},ea=t=>(window.addEventListener("avatar-state-changed",t),window.addEventListener("avatar-feed",t),window.addEventListener("food-entry-updated",t),()=>{window.removeEventListener("avatar-state-changed",t),window.removeEventListener("avatar-feed",t),window.removeEventListener("food-entry-updated",t)}),Ot=(t,s=600,r=150,a=!1)=>new Promise((o,i)=>{const l=t.size/1048576,d=new FileReader;d.readAsDataURL(t),d.onload=c=>{var h;const x=new Image;x.src=(h=c.target)==null?void 0:h.result,x.onload=()=>{const g=document.createElement("canvas");let p=x.width,f=x.height;p>s&&(f=s/p*f,p=s),g.width=p,g.height=f;const N=g.getContext("2d");N==null||N.drawImage(x,0,0,p,f);let j=.5,b=g.toDataURL("image/jpeg",j);const k=r*1024;if(b.split(",")[1].length*3/4>k&&(j=.35,b=g.toDataURL("image/jpeg",j),b.split(",")[1].length*3/4>k&&(j=.25,b=g.toDataURL("image/jpeg",j))),a){const z=b.split(",")[1].length*3/4/1024,A=(l*1024-z)/(l*1024)*100;console.log(`ðŸ“¸ Image Optimization:
Original: ${l.toFixed(2)} MB(${x.width}Ã—${x.height}px)
Optimized: ${z.toFixed(0)} KB(${Math.round(p)}Ã—${Math.round(f)}px)
Quality: ${(j*100).toFixed(0)}%
  Saved: ${A.toFixed(0)}% ðŸŽ‰`)}o(b)},x.onerror=g=>i(g)},d.onerror=c=>i(c)}),ta=({onClose:t,onSuccess:s,onOpenSharedMeal:r,editEntry:a})=>{const[o,i]=m.useState("scan"),[l,d]=m.useState(a?"details":"upload"),[c,x]=m.useState((a==null?void 0:a.imageUrl)||null),[h,g]=m.useState(!1),[p,f]=m.useState(!1),[N,j]=m.useState(!1),[b,k]=m.useState(null),R=m.useRef(null),[D,z]=m.useState(""),A=new Date,_e=`${A.getHours().toString().padStart(2,"0")}:${A.getMinutes().toString().padStart(2,"0")} `,[q,Me]=m.useState((a==null?void 0:a.date)||X()),[B,Fe]=m.useState((a==null?void 0:a.time)||_e),[M,ae]=m.useState((a==null?void 0:a.food_item)||""),[H,se]=m.useState((a==null?void 0:a.calories.toString())||""),[re,ne]=m.useState((a==null?void 0:a.protein.toString())||""),[oe,ie]=m.useState((a==null?void 0:a.carbs.toString())||""),[le,ce]=m.useState((a==null?void 0:a.fat.toString())||""),[L,F]=m.useState((a==null?void 0:a.ingredients)||[]),[Ue,Ee]=m.useState((a==null?void 0:a.confidence)||null),[Ge,de]=m.useState((a==null?void 0:a.originalAiResponse)||null),ge=async n=>{if(n.target.files&&n.target.files[0]){const y=n.target.files[0];try{const v=await Ot(y,600,150,!0);x(v),k(null)}catch{k("Failed to process image.")}}},me=async()=>{if(c){g(!0),k(null);try{const n=c.split(",")[1],y=await mt(n);W(y),de(y),d("details")}catch(n){k(n.message)}finally{g(!1)}}},Oe=async()=>{if(D.trim()){g(!0),k(null);try{const n=await ye(D);W(n),de(n),d("details")}catch(n){k(n.message)}finally{g(!1)}}},W=n=>{ae(n.item),se(n.calories.toString()),ne(n.protein.toString()),ie(n.carbs.toString()),ce(n.fat.toString()),F(n.ingredients||[]),Ee(n.confidence)},ue=async()=>{f(!0),k(null);try{const n=await ye(M,L);W(n)}catch(n){k(n.message)}finally{f(!1)}},xe=(n,y,v)=>{const I=[...L];if(y==="grams"||y==="calories"){const G=v===""?0:parseInt(v);I[n]={...I[n],[y]:isNaN(G)?0:G}}else I[n]={...I[n],[y]:v};F(I)},Pe=n=>{F(L.filter((y,v)=>v!==n))},$e=()=>{F([...L,{name:"",grams:100,calories:0}])},qe=async()=>{if(!M.trim()||!H){k("Please fill required fields.");return}try{const[n,y,v]=q.split("-").map(Number),[I,G]=B.split(":").map(Number),he=new Date(n,y-1,v,I,G);if(isNaN(he.getTime()))throw new Error("Invalid date or time selected.");const Be=he.toISOString(),pe=Number(H),He=Number(re)||0,We=Number(oe)||0,Ke=Number(le)||0;if(isNaN(pe))throw new Error("Calories must be a valid number.");const Je={id:(a==null?void 0:a.id)||bt(),timestamp:Be,date:q,time:B,food_item:M,calories:pe,protein:He,carbs:We,fat:Ke,confidence:Ue||1,imageUrl:c||void 0,ingredients:L,originalAiResponse:Ge};j(!0),k(null),await Ze(Je),await Tt(),Gt(),s()}catch(n){console.error("Save failed:",n),k(n.message||"Failed to save record.")}finally{j(!1)}},U=b==null?void 0:b.includes("Limit Reached"),E=b==null?void 0:b.includes("Database Quota"),_=b==null?void 0:b.includes("Browser Storage Full");return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] p-6 shadow-2xl border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[l==="details"&&!a&&e.jsx("button",{onClick:()=>d("upload"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-all active:scale-95",children:e.jsx(be,{size:24,className:"text-gray-900 dark:text-gray-50"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:a?"Edit Record":l==="upload"?"Track Meal":"Meal Receipt"})]}),e.jsx("button",{onClick:t,className:"p-2.5 bg-gray-100 dark:bg-white/10 rounded-full hover:bg-gray-200 dark:hover:bg-white/20 transition-all active:scale-90",children:e.jsx($,{size:22,className:"text-gray-600 dark:text-gray-400"})})]}),b&&e.jsxs("div",{className:`mb-4 p-4 rounded-3xl flex flex-col gap-3 animate-in shake-1 duration-300 ${U?"bg-amber-50 dark:bg-amber-950/30 border border-amber-100 dark:border-amber-900/30 text-amber-700 dark:text-amber-400":E||_?"bg-orange-50 dark:bg-orange-950/30 border border-orange-100 dark:border-orange-900/30 text-orange-700 dark:text-orange-400":"bg-red-50 dark:bg-red-950/20 border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400"} `,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[U?e.jsx(rt,{className:"shrink-0 mt-0.5",size:18}):E||_?e.jsx(tt,{className:"shrink-0 mt-0.5",size:18}):e.jsx(Qe,{className:"shrink-0 mt-0.5",size:18}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:U?"AI limit reached":_?"Phone Storage Full":E?"Cloud Storage Full":"Action Failed"}),e.jsx("p",{className:"text-xs font-semibold leading-relaxed",children:b})]})]}),!_&&(U||!E)&&e.jsxs("button",{onClick:()=>{k(null),l==="upload"?me():ue()},className:"w-full py-2 bg-white/50 dark:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-white/80 dark:hover:bg-white/20 transition-all",children:[e.jsx(dt,{size:14})," Try Again"]}),_&&e.jsx("div",{className:"pt-2 border-t border-orange-200 dark:border-orange-900/40",children:e.jsx("p",{className:"text-[10px] font-medium text-orange-600/70 dark:text-orange-400/70 italic",children:"Tip: Photos take up the most space. Delete old entries in the History tab to free up browser storage."})})]}),l==="upload"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex p-1.5 bg-gray-100/80 dark:bg-white/5 rounded-[24px] backdrop-blur-sm border border-black/5 dark:border-white/5",children:[e.jsxs("button",{onClick:()=>i("scan"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 rounded-[18px] text-[13px] font-bold transition-all duration-300 ${o==="scan"?"bg-white dark:bg-royal-600 text-royal-600 dark:text-white shadow-[0_4px_12px_rgba(0,0,0,0.08)]":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"} `,children:[e.jsx(K,{size:18,className:o==="scan"?"animate-pulse":""}),e.jsx("span",{children:"Scan"})]}),e.jsxs("button",{onClick:()=>i("chat"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 rounded-[18px] text-[13px] font-bold transition-all duration-300 ${o==="chat"?"bg-white dark:bg-royal-600 text-royal-600 dark:text-white shadow-[0_4px_12px_rgba(0,0,0,0.08)]":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"} `,children:[e.jsx(it,{size:18}),e.jsx("span",{children:"Chat"})]}),e.jsxs("button",{onClick:()=>i("shared"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 rounded-[18px] text-[13px] font-bold transition-all duration-300 ${o==="shared"?"bg-white dark:bg-royal-600 text-royal-600 dark:text-white shadow-[0_4px_12px_rgba(0,0,0,0.08)]":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"} `,children:[e.jsx(fe,{size:18}),e.jsx("span",{children:"Shared"})]}),e.jsxs("button",{onClick:()=>i("recipe"),className:`flex-1 py-3.5 flex items-center justify-center gap-2 rounded-[18px] text-[13px] font-bold transition-all duration-300 ${o==="recipe"?"bg-white dark:bg-royal-600 text-royal-600 dark:text-white shadow-[0_4px_12px_rgba(0,0,0,0.08)]":"text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"} `,children:[e.jsx(J,{size:18}),e.jsx("span",{children:"Recipe"})]})]}),o==="scan"&&e.jsxs(e.Fragment,{children:[c?e.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10",children:[e.jsx("img",{src:c,className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>x(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md",children:e.jsx($,{size:20})})]}):e.jsxs("div",{onClick:()=>{var n;return(n=R.current)==null?void 0:n.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[e.jsx(K,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Let AI do the calorie math"})]}),e.jsx("input",{type:"file",ref:R,accept:"image/*",onChange:ge,className:"hidden"}),e.jsx(C,{className:"w-full py-5 text-lg font-black",disabled:!c||h,isLoading:h,onClick:me,children:"Analyze Plate"})]}),o==="chat"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-5 rounded-[32px] border border-royal-100 dark:border-royal-900/30 transition-colors",children:[e.jsxs("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx(P,{size:14})," Describe your meal"]}),e.jsx("textarea",{value:D,onChange:n=>z(n.target.value),placeholder:"e.g. I had two slices of pepperoni pizza and a small Caesar salad with Italian dressing.",rows:4,className:"w-full bg-transparent border-none outline-none text-gray-900 dark:text-white font-medium text-sm resize-none placeholder-gray-400 dark:placeholder-gray-600"})]}),e.jsx(C,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",disabled:!D.trim()||h,isLoading:h,onClick:Oe,children:"Ask AI"})]}),o==="recipe"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300 text-center py-6",children:[e.jsx(J,{size:40,className:"mx-auto text-royal-400 mb-2"}),e.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Recipe Mode Coming Soon"}),e.jsx("p",{className:"text-xs font-medium text-gray-400 px-8",children:"For now, use Chat mode to describe your recipe ingredients for estimation."}),e.jsx(C,{className:"w-full py-3 mt-4 text-xs font-bold text-gray-400 hover:text-royal-500 bg-gray-50 dark:bg-white/5",onClick:()=>d("details"),children:"Enter Details Manually"})]}),o==="shared"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-4 rounded-[24px] mb-6 border border-royal-100 dark:border-royal-900/30 flex gap-3 items-start",children:[e.jsx("div",{className:"p-2 bg-royal-100 dark:bg-royal-900/50 rounded-full shrink-0",children:e.jsx(fe,{size:16,className:"text-royal-600 dark:text-royal-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"Shared Meal Mode"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed",children:"Upload a photo of the entire table. Connect directly to our multi-dish analysis engine."})]})]}),c?e.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10 shadow-royal-200/20",children:[e.jsx("img",{src:c,className:"w-full h-full object-cover",alt:"preview"}),e.jsx("button",{onClick:()=>x(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md hover:bg-black/60 transition-colors",children:e.jsx($,{size:20})}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/60 backdrop-blur-md p-3 rounded-2xl border border-white/10",children:e.jsxs("p",{className:"text-white text-xs font-semibold text-center flex items-center justify-center gap-2",children:[e.jsx(P,{size:14,className:"text-yellow-400"}),"Ready to analyze dishes"]})})]}):e.jsxs("div",{onClick:()=>{var n;return(n=R.current)==null?void 0:n.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[e.jsx(K,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),e.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),e.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Capture the whole table"})]}),e.jsx("input",{type:"file",ref:R,accept:"image/*",onChange:ge,className:"hidden"}),e.jsx("div",{className:"flex gap-3",children:e.jsx(C,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200 dark:shadow-none bg-emerald-500 hover:bg-emerald-600 text-white",disabled:!c,onClick:()=>r(c||void 0),children:"Start Shared Meal"})})]}),o!=="recipe"&&o!=="shared"&&e.jsxs("button",{onClick:()=>d("details"),className:"w-full py-4 text-sm font-bold text-gray-400 dark:text-gray-500 hover:text-royal-500 transition-all flex items-center justify-center gap-2 group",children:[e.jsx("span",{children:"Enter Details Manually"}),e.jsx(be,{size:16,className:"rotate-180 opacity-0 group-hover:opacity-100 transition-all transform -translate-x-1 group-hover:translate-x-0"})]})]}):e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[e.jsxs("div",{className:"bg-royal-600 rounded-[32px] p-6 text-white shadow-xl shadow-royal-200 dark:shadow-none",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-royal-100 text-[10px] font-black uppercase tracking-widest mb-1",children:"Estimated Calories"}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("input",{type:"number",value:H,onChange:n=>se(n.target.value),className:"bg-transparent text-4xl font-black w-24 outline-none border-b-2 border-white/20 focus:border-white transition-colors"}),e.jsx("span",{className:"text-xl font-bold opacity-70",children:"kcal"})]})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-md",children:e.jsx(at,{size:24})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"number",value:re,onChange:n=>ne(n.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),e.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),e.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Protein"})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"number",value:oe,onChange:n=>ie(n.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),e.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),e.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Carbs"})]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"number",value:le,onChange:n=>ce(n.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),e.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),e.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Fat"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[e.jsx(Ie,{size:18,className:"text-royal-400"}),e.jsx("input",{type:"date",value:q,onChange:n=>Me(n.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[e.jsx(Te,{size:18,className:"text-royal-400"}),e.jsx("input",{type:"time",value:B,onChange:n=>Fe(n.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase ml-1",children:"Meal Title"}),e.jsx("input",{type:"text",value:M,onChange:n=>ae(n.target.value),className:"w-full p-4 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-2xl font-bold dark:text-white mt-1"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-[32px] p-5 border border-gray-100 dark:border-white/5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[e.jsx(P,{size:14,className:"text-royal-500"})," Ingredient Receipt"]}),e.jsx("button",{onClick:$e,className:"text-royal-500 hover:text-royal-600",children:e.jsx(ct,{size:18})})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto no-scrollbar pr-1",children:L.map((n,y)=>e.jsxs("div",{className:"flex items-center gap-2 group animate-in slide-in-from-left duration-200",children:[e.jsx("input",{type:"text",value:n.name,onChange:v=>xe(y,"name",v.target.value),className:"flex-1 bg-white dark:bg-white/10 p-2.5 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none focus:border-royal-300 dark:text-white",placeholder:"Ingredient"}),e.jsxs("div",{className:"relative w-20",children:[e.jsx("input",{type:"number",value:n.grams===0?"":n.grams,onChange:v=>xe(y,"grams",v.target.value),className:"w-full bg-white dark:bg-white/10 p-2.5 pr-6 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none text-right dark:text-white"}),e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[8px] font-black text-gray-400",children:"g"})]}),e.jsx("button",{onClick:()=>Pe(y),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Le,{size:16})})]},y))}),e.jsxs(C,{variant:"ghost",className:"w-full mt-4 py-3 text-[10px] font-black uppercase tracking-widest text-royal-600 bg-royal-100/50 hover:bg-royal-100",onClick:ue,isLoading:p,children:[e.jsx(st,{size:14,className:`mr-2 ${p?"animate-spin":""} `}),"Recalculate Totals"]})]}),e.jsx(C,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",onClick:qe,isLoading:N,disabled:N,children:a?"Update Record":"Save & Track"})]})]}),e.jsx(ft,{isActive:h,message:o==="chat"?"Analyzing Request...":"Analyzing Meal..."})]})},aa=({entry:t,onClose:s,onDelete:r,onEdit:a})=>{const[o,i]=m.useState(!1),[l,d]=m.useState(!1),c=async()=>{confirm("Permanently remove this record?")&&(i(!0),await r(t.id),s())},x=async()=>{if(confirm("Remove the photo to save storage space? Nutritional data will be kept.")){d(!0);try{await Xe(t.id),s(),window.dispatchEvent(new CustomEvent("food-entry-updated"))}catch(h){console.error("Failed to clear image",h),alert("Failed to clear image. Please try again.")}finally{d(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 dark:bg-black/60 backdrop-blur-md p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl dark:shadow-black border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"relative h-64 bg-gray-100 dark:bg-white/5",children:[t.imageUrl?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:t.imageUrl,className:"w-full h-full object-cover"}),e.jsxs("button",{onClick:x,disabled:l,className:"absolute bottom-4 right-4 p-2.5 bg-white/20 hover:bg-white/40 text-white rounded-full backdrop-blur-md border border-white/20 transition-all flex items-center gap-2",title:"Remove photo to save space",children:[l?e.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):e.jsx(nt,{size:18}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Clear Image"})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-300 dark:text-gray-700",children:[e.jsx(J,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-40",children:"No Photo Attached"})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 p-2 bg-white/80 dark:bg-black/40 text-gray-900 dark:text-white rounded-full backdrop-blur-md hover:bg-white dark:hover:bg-black/60 shadow-lg transition-colors z-10",children:e.jsx($,{size:20})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent pointer-events-none"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white pointer-events-none",children:[e.jsx("h2",{className:"text-3xl font-black leading-tight tracking-tight",children:t.food_item}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-white/70 font-bold mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Ie,{size:14})," ",t.date]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Te,{size:14})," ",t.time]})]})]})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/20 p-3 rounded-2xl flex flex-col items-center border border-royal-100/50",children:[e.jsx("span",{className:"text-lg font-black text-royal-600",children:t.calories}),e.jsx("span",{className:"text-[8px] font-black uppercase text-royal-400",children:"kcal"})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 p-3 rounded-2xl flex flex-col items-center border border-emerald-100/50",children:[e.jsxs("span",{className:"text-lg font-black text-emerald-600",children:[t.protein,"g"]}),e.jsx("span",{className:"text-[8px] font-black uppercase text-emerald-400",children:"Prot"})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-3 rounded-2xl flex flex-col items-center border border-blue-100/50",children:[e.jsxs("span",{className:"text-lg font-black text-blue-600",children:[t.carbs,"g"]}),e.jsx("span",{className:"text-[8px] font-black uppercase text-blue-400",children:"Carb"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 p-3 rounded-2xl flex flex-col items-center border border-orange-100/50",children:[e.jsxs("span",{className:"text-lg font-black text-orange-600",children:[t.fat,"g"]}),e.jsx("span",{className:"text-[8px] font-black uppercase text-orange-400",children:"Fat"})]})]}),t.ingredients&&t.ingredients.length>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-3xl p-6 border border-gray-100 dark:border-white/5",children:[e.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[e.jsx(ot,{size:14})," Ingredient Receipt"]}),e.jsx("div",{className:"space-y-3",children:t.ingredients.map((h,g)=>e.jsxs("div",{className:"flex justify-between items-center text-sm font-bold border-b border-gray-100 dark:border-white/5 pb-2 last:border-0 last:pb-0",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:h.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-gray-400",children:[h.grams,"g"]}),e.jsxs("span",{className:"text-royal-500 text-xs w-12 text-right",children:[h.calories,"cal"]})]})]},g))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(C,{variant:"ghost",className:"flex-1 text-red-500 py-4 font-black",onClick:c,isLoading:o,children:[e.jsx(Le,{size:18,className:"mr-2"})," Delete"]}),e.jsxs(C,{className:"flex-[2] py-4 font-black shadow-lg shadow-royal-200",onClick:()=>a(t),children:[e.jsx(lt,{size:18,className:"mr-2"})," Edit Meal"]})]})]})]})})};export{_t as A,J as C,aa as M,lt as P,ft as S,Vt as U,ta as a,It as b,Zt as f,Xt as g,Qt as p,ea as s,bt as v};
