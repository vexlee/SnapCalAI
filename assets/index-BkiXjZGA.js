var IO=Object.defineProperty;var OO=(t,e,n)=>e in t?IO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var wh=(t,e,n)=>OO(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ue(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sT={exports:{}},tf={},lT={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zl=Symbol.for("react.element"),RO=Symbol.for("react.portal"),MO=Symbol.for("react.fragment"),$O=Symbol.for("react.strict_mode"),DO=Symbol.for("react.profiler"),jO=Symbol.for("react.provider"),LO=Symbol.for("react.context"),UO=Symbol.for("react.forward_ref"),FO=Symbol.for("react.suspense"),BO=Symbol.for("react.memo"),GO=Symbol.for("react.lazy"),tx=Symbol.iterator;function zO(t){return t===null||typeof t!="object"?null:(t=tx&&t[tx]||t["@@iterator"],typeof t=="function"?t:null)}var uT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cT=Object.assign,dT={};function $a(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||uT}$a.prototype.isReactComponent={};$a.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$a.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function fT(){}fT.prototype=$a.prototype;function Cy(t,e,n){this.props=t,this.context=e,this.refs=dT,this.updater=n||uT}var Py=Cy.prototype=new fT;Py.constructor=Cy;cT(Py,$a.prototype);Py.isPureReactComponent=!0;var nx=Array.isArray,hT=Object.prototype.hasOwnProperty,Ny={current:null},pT={key:!0,ref:!0,__self:!0,__source:!0};function mT(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)hT.call(e,r)&&!pT.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:Zl,type:t,key:o,ref:a,props:i,_owner:Ny.current}}function VO(t,e){return{$$typeof:Zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zl}function HO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rx=/\/+/g;function _h(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HO(""+t.key):e.toString(36)}function nc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zl:case RO:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+_h(a,0):r,nx(i)?(n="",t!=null&&(n=t.replace(rx,"$&/")+"/"),nc(i,e,n,"",function(u){return u})):i!=null&&(Iy(i)&&(i=VO(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(rx,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",nx(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+_h(o,s);a+=nc(o,e,n,l,i)}else if(l=zO(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+_h(o,s++),a+=nc(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function mu(t,e,n){if(t==null)return t;var r=[],i=0;return nc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function qO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},rc={transition:null},WO={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Ny};function gT(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:mu,forEach:function(t,e,n){mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return mu(t,function(){e++}),e},toArray:function(t){return mu(t,function(e){return e})||[]},only:function(t){if(!Iy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=$a;ye.Fragment=MO;ye.Profiler=DO;ye.PureComponent=Cy;ye.StrictMode=$O;ye.Suspense=FO;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WO;ye.act=gT;ye.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=cT({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Ny.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)hT.call(e,l)&&!pT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Zl,type:t.type,key:i,ref:o,props:r,_owner:a}};ye.createContext=function(t){return t={$$typeof:LO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:jO,_context:t},t.Consumer=t};ye.createElement=mT;ye.createFactory=function(t){var e=mT.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:UO,render:t}};ye.isValidElement=Iy;ye.lazy=function(t){return{$$typeof:GO,_payload:{_status:-1,_result:t},_init:qO}};ye.memo=function(t,e){return{$$typeof:BO,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};ye.unstable_act=gT;ye.useCallback=function(t,e){return Gt.current.useCallback(t,e)};ye.useContext=function(t){return Gt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Gt.current.useEffect(t,e)};ye.useId=function(){return Gt.current.useId()};ye.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};ye.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Gt.current.useMemo(t,e)};ye.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};ye.useRef=function(t){return Gt.current.useRef(t)};ye.useState=function(t){return Gt.current.useState(t)};ye.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};ye.useTransition=function(){return Gt.current.useTransition()};ye.version="18.3.1";lT.exports=ye;var P=lT.exports;const D=Ue(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KO=P,JO=Symbol.for("react.element"),YO=Symbol.for("react.fragment"),XO=Object.prototype.hasOwnProperty,QO=KO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZO={key:!0,ref:!0,__self:!0,__source:!0};function yT(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)XO.call(e,r)&&!ZO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JO,type:t,key:o,ref:a,props:i,_owner:QO.current}}tf.Fragment=YO;tf.jsx=yT;tf.jsxs=yT;sT.exports=tf;var m=sT.exports,Dp={},vT={exports:{}},un={},xT={exports:{}},bT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(N,$){var F=N.length;N.push($);e:for(;0<F;){var V=F-1>>>1,q=N[V];if(0<i(q,$))N[V]=$,N[F]=q,F=V;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var $=N[0],F=N.pop();if(F!==$){N[0]=F;e:for(var V=0,q=N.length,te=q>>>1;V<te;){var de=2*(V+1)-1,pe=N[de],Ie=de+1,W=N[Ie];if(0>i(pe,F))Ie<q&&0>i(W,pe)?(N[V]=W,N[Ie]=F,V=Ie):(N[V]=pe,N[de]=F,V=de);else if(Ie<q&&0>i(W,F))N[V]=W,N[Ie]=F,V=Ie;else break e}}return $}function i(N,$){var F=N.sortIndex-$.sortIndex;return F!==0?F:N.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,g=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(N){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=N)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function T(N){if(x=!1,_(N),!y)if(n(l)!==null)y=!0,L(S);else{var $=n(u);$!==null&&B(T,$.startTime-N)}}function S(N,$){y=!1,x&&(x=!1,b(A),A=-1),g=!0;var F=h;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||N&&!I());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var q=V(d.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),_($)}else r(l);d=n(l)}if(d!==null)var te=!0;else{var de=n(u);de!==null&&B(T,de.startTime-$),te=!1}return te}finally{d=null,h=F,g=!1}}var E=!1,k=null,A=-1,C=5,R=-1;function I(){return!(t.unstable_now()-R<C)}function O(){if(k!==null){var N=t.unstable_now();R=N;var $=!0;try{$=k(!0,N)}finally{$?j():(E=!1,k=null)}}else E=!1}var j;if(typeof w=="function")j=function(){w(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,U=M.port2;M.port1.onmessage=O,j=function(){U.postMessage(null)}}else j=function(){v(O,0)};function L(N){k=N,E||(E=!0,j())}function B(N,$){A=v(function(){N(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,L(S))},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var F=h;h=$;try{return N()}finally{h=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(N,$){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var F=h;h=N;try{return $()}finally{h=F}},t.unstable_scheduleCallback=function(N,$,F){var V=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?V+F:V):F=V,N){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=F+q,N={id:c++,callback:$,priorityLevel:N,startTime:F,expirationTime:q,sortIndex:-1},F>V?(N.sortIndex=F,e(u,N),n(l)===null&&N===n(u)&&(x?(b(A),A=-1):x=!0,B(T,F-V))):(N.sortIndex=q,e(l,N),y||g||(y=!0,L(S))),N},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(N){var $=h;return function(){var F=h;h=$;try{return N.apply(this,arguments)}finally{h=F}}}})(bT);xT.exports=bT;var eR=xT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tR=P,sn=eR;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wT=new Set,qs={};function to(t,e){ia(t,e),ia(t+"Capture",e)}function ia(t,e){for(qs[t]=e,t=0;t<e.length;t++)wT.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jp=Object.prototype.hasOwnProperty,nR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ix={},ox={};function rR(t){return jp.call(ox,t)?!0:jp.call(ix,t)?!1:nR.test(t)?ox[t]=!0:(ix[t]=!0,!1)}function iR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oR(t,e,n,r){if(e===null||typeof e>"u"||iR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Oy=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Oy,Ry);kt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Oy,Ry);kt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Oy,Ry);kt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function My(t,e,n,r){var i=kt.hasOwnProperty(e)?kt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oR(e,n,i,r)&&(n=null),r||i===null?rR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=tR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,gu=Symbol.for("react.element"),ko=Symbol.for("react.portal"),Ao=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Lp=Symbol.for("react.profiler"),_T=Symbol.for("react.provider"),ST=Symbol.for("react.context"),Dy=Symbol.for("react.forward_ref"),Up=Symbol.for("react.suspense"),Fp=Symbol.for("react.suspense_list"),jy=Symbol.for("react.memo"),Fr=Symbol.for("react.lazy"),ET=Symbol.for("react.offscreen"),ax=Symbol.iterator;function ns(t){return t===null||typeof t!="object"?null:(t=ax&&t[ax]||t["@@iterator"],typeof t=="function"?t:null)}var Xe=Object.assign,Sh;function _s(t){if(Sh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sh=e&&e[1]||""}return`
`+Sh+t}var Eh=!1;function Th(t,e){if(!t||Eh)return"";Eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{Eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_s(t):""}function aR(t){switch(t.tag){case 5:return _s(t.type);case 16:return _s("Lazy");case 13:return _s("Suspense");case 19:return _s("SuspenseList");case 0:case 2:case 15:return t=Th(t.type,!1),t;case 11:return t=Th(t.type.render,!1),t;case 1:return t=Th(t.type,!0),t;default:return""}}function Bp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ao:return"Fragment";case ko:return"Portal";case Lp:return"Profiler";case $y:return"StrictMode";case Up:return"Suspense";case Fp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ST:return(t.displayName||"Context")+".Consumer";case _T:return(t._context.displayName||"Context")+".Provider";case Dy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jy:return e=t.displayName||null,e!==null?e:Bp(t.type)||"Memo";case Fr:e=t._payload,t=t._init;try{return Bp(t(e))}catch{}}return null}function sR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bp(e);case 8:return e===$y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function si(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function TT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function lR(t){var e=TT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function yu(t){t._valueTracker||(t._valueTracker=lR(t))}function kT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=TT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gp(t,e){var n=e.checked;return Xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=si(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AT(t,e){e=e.checked,e!=null&&My(t,"checked",e,!1)}function zp(t,e){AT(t,e);var n=si(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vp(t,e.type,si(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vp(t,e,n){(e!=="number"||gc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ss=Array.isArray;function Vo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+si(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Hp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ux(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ss(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:si(n)}}function CT(t,e){var n=si(e.value),r=si(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vu,NT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vu=vu||document.createElement("div"),vu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ws(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uR=["Webkit","ms","Moz","O"];Object.keys(Ps).forEach(function(t){uR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ps[e]=Ps[t]})});function IT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ps.hasOwnProperty(t)&&Ps[t]?(""+e).trim():e+"px"}function OT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var cR=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wp(t,e){if(e){if(cR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Kp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jp=null;function Ly(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yp=null,Ho=null,qo=null;function dx(t){if(t=nu(t)){if(typeof Yp!="function")throw Error(K(280));var e=t.stateNode;e&&(e=sf(e),Yp(t.stateNode,t.type,e))}}function RT(t){Ho?qo?qo.push(t):qo=[t]:Ho=t}function MT(){if(Ho){var t=Ho,e=qo;if(qo=Ho=null,dx(t),e)for(t=0;t<e.length;t++)dx(e[t])}}function $T(t,e){return t(e)}function DT(){}var kh=!1;function jT(t,e,n){if(kh)return t(e,n);kh=!0;try{return $T(t,e,n)}finally{kh=!1,(Ho!==null||qo!==null)&&(DT(),MT())}}function Ks(t,e){var n=t.stateNode;if(n===null)return null;var r=sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Xp=!1;if(wr)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){Xp=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{Xp=!1}function dR(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ns=!1,yc=null,vc=!1,Qp=null,fR={onError:function(t){Ns=!0,yc=t}};function hR(t,e,n,r,i,o,a,s,l){Ns=!1,yc=null,dR.apply(fR,arguments)}function pR(t,e,n,r,i,o,a,s,l){if(hR.apply(this,arguments),Ns){if(Ns){var u=yc;Ns=!1,yc=null}else throw Error(K(198));vc||(vc=!0,Qp=u)}}function no(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function LT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fx(t){if(no(t)!==t)throw Error(K(188))}function mR(t){var e=t.alternate;if(!e){if(e=no(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return fx(i),t;if(o===r)return fx(i),e;o=o.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function UT(t){return t=mR(t),t!==null?FT(t):null}function FT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FT(t);if(e!==null)return e;t=t.sibling}return null}var BT=sn.unstable_scheduleCallback,hx=sn.unstable_cancelCallback,gR=sn.unstable_shouldYield,yR=sn.unstable_requestPaint,tt=sn.unstable_now,vR=sn.unstable_getCurrentPriorityLevel,Uy=sn.unstable_ImmediatePriority,GT=sn.unstable_UserBlockingPriority,xc=sn.unstable_NormalPriority,xR=sn.unstable_LowPriority,zT=sn.unstable_IdlePriority,nf=null,nr=null;function bR(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(nf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:SR,wR=Math.log,_R=Math.LN2;function SR(t){return t>>>=0,t===0?32:31-(wR(t)/_R|0)|0}var xu=64,bu=4194304;function Es(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=Es(s):(o&=a,o!==0&&(r=Es(o)))}else a=n&~i,a!==0?r=Es(a):o!==0&&(r=Es(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function ER(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Gn(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=ER(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function Zp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VT(){var t=xu;return xu<<=1,!(xu&4194240)&&(xu=64),t}function Ah(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function kR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Fy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function HT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qT,By,WT,KT,JT,em=!1,wu=[],Xr=null,Qr=null,Zr=null,Js=new Map,Ys=new Map,Vr=[],AR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function px(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":Js.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(e.pointerId)}}function is(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nu(e),e!==null&&By(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function CR(t,e,n,r,i){switch(e){case"focusin":return Xr=is(Xr,t,e,n,r,i),!0;case"dragenter":return Qr=is(Qr,t,e,n,r,i),!0;case"mouseover":return Zr=is(Zr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Js.set(o,is(Js.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ys.set(o,is(Ys.get(o)||null,t,e,n,r,i)),!0}return!1}function YT(t){var e=Ni(t.target);if(e!==null){var n=no(e);if(n!==null){if(e=n.tag,e===13){if(e=LT(n),e!==null){t.blockedOn=e,JT(t.priority,function(){WT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jp=r,n.target.dispatchEvent(r),Jp=null}else return e=nu(n),e!==null&&By(e),t.blockedOn=n,!1;e.shift()}return!0}function mx(t,e,n){ic(t)&&n.delete(e)}function PR(){em=!1,Xr!==null&&ic(Xr)&&(Xr=null),Qr!==null&&ic(Qr)&&(Qr=null),Zr!==null&&ic(Zr)&&(Zr=null),Js.forEach(mx),Ys.forEach(mx)}function os(t,e){t.blockedOn===e&&(t.blockedOn=null,em||(em=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,PR)))}function Xs(t){function e(i){return os(i,t)}if(0<wu.length){os(wu[0],t);for(var n=1;n<wu.length;n++){var r=wu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xr!==null&&os(Xr,t),Qr!==null&&os(Qr,t),Zr!==null&&os(Zr,t),Js.forEach(e),Ys.forEach(e),n=0;n<Vr.length;n++)r=Vr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vr.length&&(n=Vr[0],n.blockedOn===null);)YT(n),n.blockedOn===null&&Vr.shift()}var Wo=Ir.ReactCurrentBatchConfig,wc=!0;function NR(t,e,n,r){var i=Pe,o=Wo.transition;Wo.transition=null;try{Pe=1,Gy(t,e,n,r)}finally{Pe=i,Wo.transition=o}}function IR(t,e,n,r){var i=Pe,o=Wo.transition;Wo.transition=null;try{Pe=4,Gy(t,e,n,r)}finally{Pe=i,Wo.transition=o}}function Gy(t,e,n,r){if(wc){var i=tm(t,e,n,r);if(i===null)jh(t,e,r,_c,n),px(t,r);else if(CR(i,t,e,n,r))r.stopPropagation();else if(px(t,r),e&4&&-1<AR.indexOf(t)){for(;i!==null;){var o=nu(i);if(o!==null&&qT(o),o=tm(t,e,n,r),o===null&&jh(t,e,r,_c,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else jh(t,e,r,null,n)}}var _c=null;function tm(t,e,n,r){if(_c=null,t=Ly(r),t=Ni(t),t!==null)if(e=no(t),e===null)t=null;else if(n=e.tag,n===13){if(t=LT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _c=t,null}function XT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vR()){case Uy:return 1;case GT:return 4;case xc:case xR:return 16;case zT:return 536870912;default:return 16}default:return 16}}var Wr=null,zy=null,oc=null;function QT(){if(oc)return oc;var t,e=zy,n=e.length,r,i="value"in Wr?Wr.value:Wr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return oc=i.slice(t,1<r?1-r:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function _u(){return!0}function gx(){return!1}function cn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?_u:gx,this.isPropagationStopped=gx,this}return Xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),e}var Da={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vy=cn(Da),tu=Xe({},Da,{view:0,detail:0}),OR=cn(tu),Ch,Ph,as,rf=Xe({},tu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==as&&(as&&t.type==="mousemove"?(Ch=t.screenX-as.screenX,Ph=t.screenY-as.screenY):Ph=Ch=0,as=t),Ch)},movementY:function(t){return"movementY"in t?t.movementY:Ph}}),yx=cn(rf),RR=Xe({},rf,{dataTransfer:0}),MR=cn(RR),$R=Xe({},tu,{relatedTarget:0}),Nh=cn($R),DR=Xe({},Da,{animationName:0,elapsedTime:0,pseudoElement:0}),jR=cn(DR),LR=Xe({},Da,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UR=cn(LR),FR=Xe({},Da,{data:0}),vx=cn(FR),BR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zR[t])?!!e[t]:!1}function Hy(){return VR}var HR=Xe({},tu,{key:function(t){if(t.key){var e=BR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qR=cn(HR),WR=Xe({},rf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xx=cn(WR),KR=Xe({},tu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),JR=cn(KR),YR=Xe({},Da,{propertyName:0,elapsedTime:0,pseudoElement:0}),XR=cn(YR),QR=Xe({},rf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ZR=cn(QR),e2=[9,13,27,32],qy=wr&&"CompositionEvent"in window,Is=null;wr&&"documentMode"in document&&(Is=document.documentMode);var t2=wr&&"TextEvent"in window&&!Is,ZT=wr&&(!qy||Is&&8<Is&&11>=Is),bx=" ",wx=!1;function ek(t,e){switch(t){case"keyup":return e2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Co=!1;function n2(t,e){switch(t){case"compositionend":return tk(e);case"keypress":return e.which!==32?null:(wx=!0,bx);case"textInput":return t=e.data,t===bx&&wx?null:t;default:return null}}function r2(t,e){if(Co)return t==="compositionend"||!qy&&ek(t,e)?(t=QT(),oc=zy=Wr=null,Co=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZT&&e.locale!=="ko"?null:e.data;default:return null}}var i2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!i2[t.type]:e==="textarea"}function nk(t,e,n,r){RT(r),e=Sc(e,"onChange"),0<e.length&&(n=new Vy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Os=null,Qs=null;function o2(t){hk(t,0)}function of(t){var e=Io(t);if(kT(e))return t}function a2(t,e){if(t==="change")return e}var rk=!1;if(wr){var Ih;if(wr){var Oh="oninput"in document;if(!Oh){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),Oh=typeof Sx.oninput=="function"}Ih=Oh}else Ih=!1;rk=Ih&&(!document.documentMode||9<document.documentMode)}function Ex(){Os&&(Os.detachEvent("onpropertychange",ik),Qs=Os=null)}function ik(t){if(t.propertyName==="value"&&of(Qs)){var e=[];nk(e,Qs,t,Ly(t)),jT(o2,e)}}function s2(t,e,n){t==="focusin"?(Ex(),Os=e,Qs=n,Os.attachEvent("onpropertychange",ik)):t==="focusout"&&Ex()}function l2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return of(Qs)}function u2(t,e){if(t==="click")return of(e)}function c2(t,e){if(t==="input"||t==="change")return of(e)}function d2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wn=typeof Object.is=="function"?Object.is:d2;function Zs(t,e){if(Wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!jp.call(e,i)||!Wn(t[i],e[i]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kx(t,e){var n=Tx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tx(n)}}function ok(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ok(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ak(){for(var t=window,e=gc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gc(t.document)}return e}function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function f2(t){var e=ak(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ok(n.ownerDocument.documentElement,n)){if(r!==null&&Wy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=kx(n,o);var a=kx(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h2=wr&&"documentMode"in document&&11>=document.documentMode,Po=null,nm=null,Rs=null,rm=!1;function Ax(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rm||Po==null||Po!==gc(r)||(r=Po,"selectionStart"in r&&Wy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rs&&Zs(Rs,r)||(Rs=r,r=Sc(nm,"onSelect"),0<r.length&&(e=new Vy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Po)))}function Su(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var No={animationend:Su("Animation","AnimationEnd"),animationiteration:Su("Animation","AnimationIteration"),animationstart:Su("Animation","AnimationStart"),transitionend:Su("Transition","TransitionEnd")},Rh={},sk={};wr&&(sk=document.createElement("div").style,"AnimationEvent"in window||(delete No.animationend.animation,delete No.animationiteration.animation,delete No.animationstart.animation),"TransitionEvent"in window||delete No.transitionend.transition);function af(t){if(Rh[t])return Rh[t];if(!No[t])return t;var e=No[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sk)return Rh[t]=e[n];return t}var lk=af("animationend"),uk=af("animationiteration"),ck=af("animationstart"),dk=af("transitionend"),fk=new Map,Cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ui(t,e){fk.set(t,e),to(e,[t])}for(var Mh=0;Mh<Cx.length;Mh++){var $h=Cx[Mh],p2=$h.toLowerCase(),m2=$h[0].toUpperCase()+$h.slice(1);ui(p2,"on"+m2)}ui(lk,"onAnimationEnd");ui(uk,"onAnimationIteration");ui(ck,"onAnimationStart");ui("dblclick","onDoubleClick");ui("focusin","onFocus");ui("focusout","onBlur");ui(dk,"onTransitionEnd");ia("onMouseEnter",["mouseout","mouseover"]);ia("onMouseLeave",["mouseout","mouseover"]);ia("onPointerEnter",["pointerout","pointerover"]);ia("onPointerLeave",["pointerout","pointerover"]);to("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));to("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));to("onBeforeInput",["compositionend","keypress","textInput","paste"]);to("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));to("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));to("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function Px(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pR(r,e,void 0,t),t.currentTarget=null}function hk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Px(i,s,u),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Px(i,s,u),o=l}}}if(vc)throw t=Qp,vc=!1,Qp=null,t}function Fe(t,e){var n=e[lm];n===void 0&&(n=e[lm]=new Set);var r=t+"__bubble";n.has(r)||(pk(e,t,2,!1),n.add(r))}function Dh(t,e,n){var r=0;e&&(r|=4),pk(n,t,r,e)}var Eu="_reactListening"+Math.random().toString(36).slice(2);function el(t){if(!t[Eu]){t[Eu]=!0,wT.forEach(function(n){n!=="selectionchange"&&(g2.has(n)||Dh(n,!1,t),Dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Eu]||(e[Eu]=!0,Dh("selectionchange",!1,e))}}function pk(t,e,n,r){switch(XT(e)){case 1:var i=NR;break;case 4:i=IR;break;default:i=Gy}n=i.bind(null,e,n,t),i=void 0,!Xp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function jh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ni(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}jT(function(){var u=o,c=Ly(n),d=[];e:{var h=fk.get(t);if(h!==void 0){var g=Vy,y=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":g=qR;break;case"focusin":y="focus",g=Nh;break;case"focusout":y="blur",g=Nh;break;case"beforeblur":case"afterblur":g=Nh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=MR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=JR;break;case lk:case uk:case ck:g=jR;break;case dk:g=XR;break;case"scroll":g=OR;break;case"wheel":g=ZR;break;case"copy":case"cut":case"paste":g=UR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=xx}var x=(e&4)!==0,v=!x&&t==="scroll",b=x?h!==null?h+"Capture":null:h;x=[];for(var w=u,_;w!==null;){_=w;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,b!==null&&(T=Ks(w,b),T!=null&&x.push(tl(w,T,_)))),v)break;w=w.return}0<x.length&&(h=new g(h,y,null,n,c),d.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Jp&&(y=n.relatedTarget||n.fromElement)&&(Ni(y)||y[_r]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ni(y):null,y!==null&&(v=no(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(x=yx,T="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=xx,T="onPointerLeave",b="onPointerEnter",w="pointer"),v=g==null?h:Io(g),_=y==null?h:Io(y),h=new x(T,w+"leave",g,n,c),h.target=v,h.relatedTarget=_,T=null,Ni(c)===u&&(x=new x(b,w+"enter",y,n,c),x.target=_,x.relatedTarget=v,T=x),v=T,g&&y)t:{for(x=g,b=y,w=0,_=x;_;_=co(_))w++;for(_=0,T=b;T;T=co(T))_++;for(;0<w-_;)x=co(x),w--;for(;0<_-w;)b=co(b),_--;for(;w--;){if(x===b||b!==null&&x===b.alternate)break t;x=co(x),b=co(b)}x=null}else x=null;g!==null&&Nx(d,h,g,x,!1),y!==null&&v!==null&&Nx(d,v,y,x,!0)}}e:{if(h=u?Io(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var S=a2;else if(_x(h))if(rk)S=c2;else{S=l2;var E=s2}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=u2);if(S&&(S=S(t,u))){nk(d,S,n,c);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Vp(h,"number",h.value)}switch(E=u?Io(u):window,t){case"focusin":(_x(E)||E.contentEditable==="true")&&(Po=E,nm=u,Rs=null);break;case"focusout":Rs=nm=Po=null;break;case"mousedown":rm=!0;break;case"contextmenu":case"mouseup":case"dragend":rm=!1,Ax(d,n,c);break;case"selectionchange":if(h2)break;case"keydown":case"keyup":Ax(d,n,c)}var k;if(qy)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Co?ek(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(ZT&&n.locale!=="ko"&&(Co||A!=="onCompositionStart"?A==="onCompositionEnd"&&Co&&(k=QT()):(Wr=c,zy="value"in Wr?Wr.value:Wr.textContent,Co=!0)),E=Sc(u,A),0<E.length&&(A=new vx(A,t,null,n,c),d.push({event:A,listeners:E}),k?A.data=k:(k=tk(n),k!==null&&(A.data=k)))),(k=t2?n2(t,n):r2(t,n))&&(u=Sc(u,"onBeforeInput"),0<u.length&&(c=new vx("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}hk(d,e)})}function tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ks(t,n),o!=null&&r.unshift(tl(t,o,i)),o=Ks(t,e),o!=null&&r.push(tl(t,o,i))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nx(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=Ks(n,o),l!=null&&a.unshift(tl(n,l,s))):i||(l=Ks(n,o),l!=null&&a.push(tl(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var y2=/\r\n?/g,v2=/\u0000|\uFFFD/g;function Ix(t){return(typeof t=="string"?t:""+t).replace(y2,`
`).replace(v2,"")}function Tu(t,e,n){if(e=Ix(e),Ix(t)!==e&&n)throw Error(K(425))}function Ec(){}var im=null,om=null;function am(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sm=typeof setTimeout=="function"?setTimeout:void 0,x2=typeof clearTimeout=="function"?clearTimeout:void 0,Ox=typeof Promise=="function"?Promise:void 0,b2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ox<"u"?function(t){return Ox.resolve(null).then(t).catch(w2)}:sm;function w2(t){setTimeout(function(){throw t})}function Lh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xs(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Zn="__reactFiber$"+ja,nl="__reactProps$"+ja,_r="__reactContainer$"+ja,lm="__reactEvents$"+ja,_2="__reactListeners$"+ja,S2="__reactHandles$"+ja;function Ni(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rx(t);t!==null;){if(n=t[Zn])return n;t=Rx(t)}return e}t=n,n=t.parentNode}return null}function nu(t){return t=t[Zn]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Io(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function sf(t){return t[nl]||null}var um=[],Oo=-1;function ci(t){return{current:t}}function ze(t){0>Oo||(t.current=um[Oo],um[Oo]=null,Oo--)}function Le(t,e){Oo++,um[Oo]=t.current,t.current=e}var li={},Mt=ci(li),Wt=ci(!1),Hi=li;function oa(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kt(t){return t=t.childContextTypes,t!=null}function Tc(){ze(Wt),ze(Mt)}function Mx(t,e,n){if(Mt.current!==li)throw Error(K(168));Le(Mt,e),Le(Wt,n)}function mk(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,sR(t)||"Unknown",i));return Xe({},n,r)}function kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,Hi=Mt.current,Le(Mt,t),Le(Wt,Wt.current),!0}function $x(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=mk(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,ze(Wt),ze(Mt),Le(Mt,t)):ze(Wt),Le(Wt,n)}var fr=null,lf=!1,Uh=!1;function gk(t){fr===null?fr=[t]:fr.push(t)}function E2(t){lf=!0,gk(t)}function di(){if(!Uh&&fr!==null){Uh=!0;var t=0,e=Pe;try{var n=fr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fr=null,lf=!1}catch(i){throw fr!==null&&(fr=fr.slice(t+1)),BT(Uy,di),i}finally{Pe=e,Uh=!1}}return null}var Ro=[],Mo=0,Ac=null,Cc=0,mn=[],gn=0,qi=null,hr=1,pr="";function wi(t,e){Ro[Mo++]=Cc,Ro[Mo++]=Ac,Ac=t,Cc=e}function yk(t,e,n){mn[gn++]=hr,mn[gn++]=pr,mn[gn++]=qi,qi=t;var r=hr;t=pr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var o=32-Gn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,hr=1<<32-Gn(e)+i|n<<i|r,pr=o+t}else hr=1<<o|n<<i|r,pr=t}function Ky(t){t.return!==null&&(wi(t,1),yk(t,1,0))}function Jy(t){for(;t===Ac;)Ac=Ro[--Mo],Ro[Mo]=null,Cc=Ro[--Mo],Ro[Mo]=null;for(;t===qi;)qi=mn[--gn],mn[gn]=null,pr=mn[--gn],mn[gn]=null,hr=mn[--gn],mn[gn]=null}var an=null,on=null,Ve=!1,Un=null;function vk(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Dx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,on=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:hr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,on=null,!0):!1;default:return!1}}function cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dm(t){if(Ve){var e=on;if(e){var n=e;if(!Dx(t,e)){if(cm(t))throw Error(K(418));e=ei(n.nextSibling);var r=an;e&&Dx(t,e)?vk(r,n):(t.flags=t.flags&-4097|2,Ve=!1,an=t)}}else{if(cm(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ve=!1,an=t}}}function jx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function ku(t){if(t!==an)return!1;if(!Ve)return jx(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!am(t.type,t.memoizedProps)),e&&(e=on)){if(cm(t))throw xk(),Error(K(418));for(;e;)vk(t,e),e=ei(e.nextSibling)}if(jx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=an?ei(t.stateNode.nextSibling):null;return!0}function xk(){for(var t=on;t;)t=ei(t.nextSibling)}function aa(){on=an=null,Ve=!1}function Yy(t){Un===null?Un=[t]:Un.push(t)}var T2=Ir.ReactCurrentBatchConfig;function ss(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Au(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lx(t){var e=t._init;return e(t._payload)}function bk(t){function e(b,w){if(t){var _=b.deletions;_===null?(b.deletions=[w],b.flags|=16):_.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=ii(b,w),b.index=0,b.sibling=null,b}function o(b,w,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<w?(b.flags|=2,w):_):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,w,_,T){return w===null||w.tag!==6?(w=qh(_,b.mode,T),w.return=b,w):(w=i(w,_),w.return=b,w)}function l(b,w,_,T){var S=_.type;return S===Ao?c(b,w,_.props.children,T,_.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&Lx(S)===w.type)?(T=i(w,_.props),T.ref=ss(b,w,_),T.return=b,T):(T=hc(_.type,_.key,_.props,null,b.mode,T),T.ref=ss(b,w,_),T.return=b,T)}function u(b,w,_,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Wh(_,b.mode,T),w.return=b,w):(w=i(w,_.children||[]),w.return=b,w)}function c(b,w,_,T,S){return w===null||w.tag!==7?(w=Fi(_,b.mode,T,S),w.return=b,w):(w=i(w,_),w.return=b,w)}function d(b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=qh(""+w,b.mode,_),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case gu:return _=hc(w.type,w.key,w.props,null,b.mode,_),_.ref=ss(b,null,w),_.return=b,_;case ko:return w=Wh(w,b.mode,_),w.return=b,w;case Fr:var T=w._init;return d(b,T(w._payload),_)}if(Ss(w)||ns(w))return w=Fi(w,b.mode,_,null),w.return=b,w;Au(b,w)}return null}function h(b,w,_,T){var S=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:s(b,w,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case gu:return _.key===S?l(b,w,_,T):null;case ko:return _.key===S?u(b,w,_,T):null;case Fr:return S=_._init,h(b,w,S(_._payload),T)}if(Ss(_)||ns(_))return S!==null?null:c(b,w,_,T,null);Au(b,_)}return null}function g(b,w,_,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(_)||null,s(w,b,""+T,S);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case gu:return b=b.get(T.key===null?_:T.key)||null,l(w,b,T,S);case ko:return b=b.get(T.key===null?_:T.key)||null,u(w,b,T,S);case Fr:var E=T._init;return g(b,w,_,E(T._payload),S)}if(Ss(T)||ns(T))return b=b.get(_)||null,c(w,b,T,S,null);Au(w,T)}return null}function y(b,w,_,T){for(var S=null,E=null,k=w,A=w=0,C=null;k!==null&&A<_.length;A++){k.index>A?(C=k,k=null):C=k.sibling;var R=h(b,k,_[A],T);if(R===null){k===null&&(k=C);break}t&&k&&R.alternate===null&&e(b,k),w=o(R,w,A),E===null?S=R:E.sibling=R,E=R,k=C}if(A===_.length)return n(b,k),Ve&&wi(b,A),S;if(k===null){for(;A<_.length;A++)k=d(b,_[A],T),k!==null&&(w=o(k,w,A),E===null?S=k:E.sibling=k,E=k);return Ve&&wi(b,A),S}for(k=r(b,k);A<_.length;A++)C=g(k,b,A,_[A],T),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?A:C.key),w=o(C,w,A),E===null?S=C:E.sibling=C,E=C);return t&&k.forEach(function(I){return e(b,I)}),Ve&&wi(b,A),S}function x(b,w,_,T){var S=ns(_);if(typeof S!="function")throw Error(K(150));if(_=S.call(_),_==null)throw Error(K(151));for(var E=S=null,k=w,A=w=0,C=null,R=_.next();k!==null&&!R.done;A++,R=_.next()){k.index>A?(C=k,k=null):C=k.sibling;var I=h(b,k,R.value,T);if(I===null){k===null&&(k=C);break}t&&k&&I.alternate===null&&e(b,k),w=o(I,w,A),E===null?S=I:E.sibling=I,E=I,k=C}if(R.done)return n(b,k),Ve&&wi(b,A),S;if(k===null){for(;!R.done;A++,R=_.next())R=d(b,R.value,T),R!==null&&(w=o(R,w,A),E===null?S=R:E.sibling=R,E=R);return Ve&&wi(b,A),S}for(k=r(b,k);!R.done;A++,R=_.next())R=g(k,b,A,R.value,T),R!==null&&(t&&R.alternate!==null&&k.delete(R.key===null?A:R.key),w=o(R,w,A),E===null?S=R:E.sibling=R,E=R);return t&&k.forEach(function(O){return e(b,O)}),Ve&&wi(b,A),S}function v(b,w,_,T){if(typeof _=="object"&&_!==null&&_.type===Ao&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case gu:e:{for(var S=_.key,E=w;E!==null;){if(E.key===S){if(S=_.type,S===Ao){if(E.tag===7){n(b,E.sibling),w=i(E,_.props.children),w.return=b,b=w;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Fr&&Lx(S)===E.type){n(b,E.sibling),w=i(E,_.props),w.ref=ss(b,E,_),w.return=b,b=w;break e}n(b,E);break}else e(b,E);E=E.sibling}_.type===Ao?(w=Fi(_.props.children,b.mode,T,_.key),w.return=b,b=w):(T=hc(_.type,_.key,_.props,null,b.mode,T),T.ref=ss(b,w,_),T.return=b,b=T)}return a(b);case ko:e:{for(E=_.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(b,w.sibling),w=i(w,_.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=Wh(_,b.mode,T),w.return=b,b=w}return a(b);case Fr:return E=_._init,v(b,w,E(_._payload),T)}if(Ss(_))return y(b,w,_,T);if(ns(_))return x(b,w,_,T);Au(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,_),w.return=b,b=w):(n(b,w),w=qh(_,b.mode,T),w.return=b,b=w),a(b)):n(b,w)}return v}var sa=bk(!0),wk=bk(!1),Pc=ci(null),Nc=null,$o=null,Xy=null;function Qy(){Xy=$o=Nc=null}function Zy(t){var e=Pc.current;ze(Pc),t._currentValue=e}function fm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ko(t,e){Nc=t,Xy=$o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},$o===null){if(Nc===null)throw Error(K(308));$o=t,Nc.dependencies={lanes:0,firstContext:t}}else $o=$o.next=t;return e}var Ii=null;function ev(t){Ii===null?Ii=[t]:Ii.push(t)}function _k(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ev(e)):(n.next=i.next,i.next=n),e.interleaved=n,Sr(t,r)}function Sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Br=!1;function tv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Sr(t,n)}return i=r.interleaved,i===null?(e.next=e,ev(r)):(e.next=i.next,i.next=e),r.interleaved=e,Sr(t,n)}function sc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fy(t,n)}}function Ux(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ic(t,e,n,r){var i=t.updateQueue;Br=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,c=u=l=null,s=o;do{var h=s.lane,g=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,x=s;switch(h=e,g=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(g,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(g,d,h):y,h==null)break e;d=Xe({},d,h);break e;case 2:Br=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ki|=a,t.lanes=a,t.memoizedState=d}}function Fx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var ru={},rr=ci(ru),rl=ci(ru),il=ci(ru);function Oi(t){if(t===ru)throw Error(K(174));return t}function nv(t,e){switch(Le(il,e),Le(rl,t),Le(rr,ru),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qp(e,t)}ze(rr),Le(rr,e)}function la(){ze(rr),ze(rl),ze(il)}function Ek(t){Oi(il.current);var e=Oi(rr.current),n=qp(e,t.type);e!==n&&(Le(rl,t),Le(rr,n))}function rv(t){rl.current===t&&(ze(rr),ze(rl))}var Ke=ci(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fh=[];function iv(){for(var t=0;t<Fh.length;t++)Fh[t]._workInProgressVersionPrimary=null;Fh.length=0}var lc=Ir.ReactCurrentDispatcher,Bh=Ir.ReactCurrentBatchConfig,Wi=0,Ye=null,ct=null,mt=null,Rc=!1,Ms=!1,ol=0,k2=0;function At(){throw Error(K(321))}function ov(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wn(t[n],e[n]))return!1;return!0}function av(t,e,n,r,i,o){if(Wi=o,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?N2:I2,t=n(r,i),Ms){o=0;do{if(Ms=!1,ol=0,25<=o)throw Error(K(301));o+=1,mt=ct=null,e.updateQueue=null,lc.current=O2,t=n(r,i)}while(Ms)}if(lc.current=Mc,e=ct!==null&&ct.next!==null,Wi=0,mt=ct=Ye=null,Rc=!1,e)throw Error(K(300));return t}function sv(){var t=ol!==0;return ol=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=t:mt=mt.next=t,mt}function En(){if(ct===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=mt===null?Ye.memoizedState:mt.next;if(e!==null)mt=e,ct=t;else{if(t===null)throw Error(K(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ye.memoizedState=mt=t:mt=mt.next=t}return mt}function al(t,e){return typeof e=="function"?e(t):e}function Gh(t){var e=En(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((Wi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,Ye.lanes|=c,Ki|=c}u=u.next}while(u!==null&&u!==o);l===null?a=r:l.next=s,Wn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ye.lanes|=o,Ki|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zh(t){var e=En(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Wn(o,e.memoizedState)||(Ht=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Tk(){}function kk(t,e){var n=Ye,r=En(),i=e(),o=!Wn(r.memoizedState,i);if(o&&(r.memoizedState=i,Ht=!0),r=r.queue,lv(Pk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,sl(9,Ck.bind(null,n,r,i,e),void 0,null),gt===null)throw Error(K(349));Wi&30||Ak(n,e,i)}return i}function Ak(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ck(t,e,n,r){e.value=n,e.getSnapshot=r,Nk(e)&&Ik(t)}function Pk(t,e,n){return n(function(){Nk(e)&&Ik(t)})}function Nk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wn(t,n)}catch{return!0}}function Ik(t){var e=Sr(t,1);e!==null&&zn(e,t,1,-1)}function Bx(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:t},e.queue=t,t=t.dispatch=P2.bind(null,Ye,t),[e.memoizedState,t]}function sl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ok(){return En().memoizedState}function uc(t,e,n,r){var i=Qn();Ye.flags|=t,i.memoizedState=sl(1|e,n,void 0,r===void 0?null:r)}function uf(t,e,n,r){var i=En();r=r===void 0?null:r;var o=void 0;if(ct!==null){var a=ct.memoizedState;if(o=a.destroy,r!==null&&ov(r,a.deps)){i.memoizedState=sl(e,n,o,r);return}}Ye.flags|=t,i.memoizedState=sl(1|e,n,o,r)}function Gx(t,e){return uc(8390656,8,t,e)}function lv(t,e){return uf(2048,8,t,e)}function Rk(t,e){return uf(4,2,t,e)}function Mk(t,e){return uf(4,4,t,e)}function $k(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dk(t,e,n){return n=n!=null?n.concat([t]):null,uf(4,4,$k.bind(null,e,t),n)}function uv(){}function jk(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ov(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Lk(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ov(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Uk(t,e,n){return Wi&21?(Wn(n,e)||(n=VT(),Ye.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function A2(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=Bh.transition;Bh.transition={};try{t(!1),e()}finally{Pe=n,Bh.transition=r}}function Fk(){return En().memoizedState}function C2(t,e,n){var r=ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Bk(t))Gk(e,n);else if(n=_k(t,e,n,r),n!==null){var i=Ft();zn(n,t,r,i),zk(n,e,r)}}function P2(t,e,n){var r=ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bk(t))Gk(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Wn(s,a)){var l=e.interleaved;l===null?(i.next=i,ev(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=_k(t,e,i,r),n!==null&&(i=Ft(),zn(n,t,r,i),zk(n,e,r))}}function Bk(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function Gk(t,e){Ms=Rc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Fy(t,n)}}var Mc={readContext:Sn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},N2={readContext:Sn,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:Gx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uc(4194308,4,$k.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=C2.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:Bx,useDebugValue:uv,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=Bx(!1),e=t[0];return t=A2.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,i=Qn();if(Ve){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),gt===null)throw Error(K(349));Wi&30||Ak(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Gx(Pk.bind(null,r,o,t),[t]),r.flags|=2048,sl(9,Ck.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Qn(),e=gt.identifierPrefix;if(Ve){var n=pr,r=hr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ol++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=k2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},I2={readContext:Sn,useCallback:jk,useContext:Sn,useEffect:lv,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:Mk,useMemo:Lk,useReducer:Gh,useRef:Ok,useState:function(){return Gh(al)},useDebugValue:uv,useDeferredValue:function(t){var e=En();return Uk(e,ct.memoizedState,t)},useTransition:function(){var t=Gh(al)[0],e=En().memoizedState;return[t,e]},useMutableSource:Tk,useSyncExternalStore:kk,useId:Fk,unstable_isNewReconciler:!1},O2={readContext:Sn,useCallback:jk,useContext:Sn,useEffect:lv,useImperativeHandle:Dk,useInsertionEffect:Rk,useLayoutEffect:Mk,useMemo:Lk,useReducer:zh,useRef:Ok,useState:function(){return zh(al)},useDebugValue:uv,useDeferredValue:function(t){var e=En();return ct===null?e.memoizedState=t:Uk(e,ct.memoizedState,t)},useTransition:function(){var t=zh(al)[0],e=En().memoizedState;return[t,e]},useMutableSource:Tk,useSyncExternalStore:kk,useId:Fk,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=Xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cf={isMounted:function(t){return(t=t._reactInternals)?no(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=ri(t),o=yr(r,i);o.payload=e,n!=null&&(o.callback=n),e=ti(t,o,i),e!==null&&(zn(e,t,i,r),sc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=ri(t),o=yr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ti(t,o,i),e!==null&&(zn(e,t,i,r),sc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=ri(t),i=yr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ti(t,i,r),e!==null&&(zn(e,t,r,n),sc(e,t,r))}};function zx(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Zs(n,r)||!Zs(i,o):!0}function Vk(t,e,n){var r=!1,i=li,o=e.contextType;return typeof o=="object"&&o!==null?o=Sn(o):(i=Kt(e)?Hi:Mt.current,r=e.contextTypes,o=(r=r!=null)?oa(t,i):li),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Vx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function pm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Sn(o):(o=Kt(e)?Hi:Mt.current,i.context=oa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cf.enqueueReplaceState(i,i.state,null),Ic(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ua(t,e){try{var n="",r=e;do n+=aR(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Vh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R2=typeof WeakMap=="function"?WeakMap:Map;function Hk(t,e,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Dc||(Dc=!0,Tm=r),mm(t,e)},n}function qk(t,e,n){n=yr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mm(t,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Hx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=W2.bind(null,t,e,n),e.then(t,t))}function qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yr(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var M2=Ir.ReactCurrentOwner,Ht=!1;function jt(t,e,n,r){e.child=t===null?wk(e,null,n,r):sa(e,t.child,n,r)}function Kx(t,e,n,r,i){n=n.render;var o=e.ref;return Ko(e,i),r=av(t,e,n,r,o,i),n=sv(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ve&&n&&Ky(e),e.flags|=1,jt(t,e,r,i),e.child)}function Jx(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!yv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Wk(t,e,o,r,i)):(t=hc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Zs,n(a,r)&&t.ref===e.ref)return Er(t,e,i)}return e.flags|=1,t=ii(o,r),t.ref=e.ref,t.return=e,e.child=t}function Wk(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Zs(o,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,Er(t,e,i)}return gm(t,e,n,r,i)}function Kk(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(jo,Zt),Zt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(jo,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Le(jo,Zt),Zt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Le(jo,Zt),Zt|=r;return jt(t,e,i,n),e.child}function Jk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gm(t,e,n,r,i){var o=Kt(n)?Hi:Mt.current;return o=oa(e,o),Ko(e,i),n=av(t,e,n,r,o,i),r=sv(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(Ve&&r&&Ky(e),e.flags|=1,jt(t,e,n,i),e.child)}function Yx(t,e,n,r,i){if(Kt(n)){var o=!0;kc(e)}else o=!1;if(Ko(e,i),e.stateNode===null)cc(t,e),Vk(e,n,r),pm(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Sn(u):(u=Kt(n)?Hi:Mt.current,u=oa(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&Vx(e,a,r,u),Br=!1;var h=e.memoizedState;a.state=h,Ic(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Wt.current||Br?(typeof c=="function"&&(hm(e,n,c,r),l=e.memoizedState),(s=Br||zx(e,n,s,r,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Sk(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:Mn(e.type,s),a.props=u,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=Kt(n)?Hi:Mt.current,l=oa(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&Vx(e,a,r,l),Br=!1,h=e.memoizedState,a.state=h,Ic(e,r,a,i);var y=e.memoizedState;s!==d||h!==y||Wt.current||Br?(typeof g=="function"&&(hm(e,n,g,r),y=e.memoizedState),(u=Br||zx(e,n,u,r,h,y,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ym(t,e,n,r,o,i)}function ym(t,e,n,r,i,o){Jk(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&$x(e,n,!1),Er(t,e,o);r=e.stateNode,M2.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=sa(e,t.child,null,o),e.child=sa(e,null,s,o)):jt(t,e,s,o),e.memoizedState=r.state,i&&$x(e,n,!0),e.child}function Yk(t){var e=t.stateNode;e.pendingContext?Mx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Mx(t,e.context,!1),nv(t,e.containerInfo)}function Xx(t,e,n,r,i){return aa(),Yy(i),e.flags|=256,jt(t,e,n,r),e.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function xm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xk(t,e,n){var r=e.pendingProps,i=Ke.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le(Ke,i&1),t===null)return dm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=hf(a,r,0,null),t=Fi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=xm(n),e.memoizedState=vm,t):cv(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return $2(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ii(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ii(s,o):(o=Fi(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?xm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=vm,r}return o=t.child,t=o.sibling,r=ii(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cv(t,e){return e=hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cu(t,e,n,r){return r!==null&&Yy(r),sa(e,t.child,null,n),t=cv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $2(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Vh(Error(K(422))),Cu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=hf({mode:"visible",children:r.children},i,0,null),o=Fi(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&sa(e,t.child,null,a),e.child.memoizedState=xm(a),e.memoizedState=vm,o);if(!(e.mode&1))return Cu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(K(419)),r=Vh(o,r,void 0),Cu(t,e,a,r)}if(s=(a&t.childLanes)!==0,Ht||s){if(r=gt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Sr(t,i),zn(r,t,i,-1))}return gv(),r=Vh(Error(K(421))),Cu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=K2.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,on=ei(i.nextSibling),an=e,Ve=!0,Un=null,t!==null&&(mn[gn++]=hr,mn[gn++]=pr,mn[gn++]=qi,hr=t.id,pr=t.overflow,qi=e),e=cv(e,r.children),e.flags|=4096,e)}function Qx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fm(t.return,e,n)}function Hh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Qk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(jt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qx(t,n,e);else if(t.tag===19)Qx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hh(e,!0,n,null,o);break;case"together":Hh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function D2(t,e,n){switch(e.tag){case 3:Yk(e),aa();break;case 5:Ek(e);break;case 1:Kt(e.type)&&kc(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(Pc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?Xk(t,e,n):(Le(Ke,Ke.current&1),t=Er(t,e,n),t!==null?t.sibling:null);Le(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Kk(t,e,n)}return Er(t,e,n)}var Zk,bm,eA,tA;Zk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bm=function(){};eA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oi(rr.current);var o=null;switch(n){case"input":i=Gp(t,i),r=Gp(t,r),o=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),o=[];break;case"textarea":i=Hp(t,i),r=Hp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ec)}Wp(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qs.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Fe("scroll",t),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};tA=function(t,e,n,r){n!==r&&(e.flags|=4)};function ls(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function j2(t,e,n){var r=e.pendingProps;switch(Jy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Kt(e.type)&&Tc(),Ct(e),null;case 3:return r=e.stateNode,la(),ze(Wt),ze(Mt),iv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(Cm(Un),Un=null))),bm(t,e),Ct(e),null;case 5:rv(e);var i=Oi(il.current);if(n=e.type,t!==null&&e.stateNode!=null)eA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Ct(e),null}if(t=Oi(rr.current),ku(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Zn]=e,r[nl]=o,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Ts.length;i++)Fe(Ts[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":sx(r,o),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fe("invalid",r);break;case"textarea":ux(r,o),Fe("invalid",r)}Wp(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&Tu(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Tu(r.textContent,s,t),i=["children",""+s]):qs.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Fe("scroll",r)}switch(n){case"input":yu(r),lx(r,o,!0);break;case"textarea":yu(r),cx(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ec)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Zn]=e,t[nl]=r,Zk(t,e,!1,!1),e.stateNode=t;e:{switch(a=Kp(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),i=r;break;case"iframe":case"object":case"embed":Fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ts.length;i++)Fe(Ts[i],t);i=r;break;case"source":Fe("error",t),i=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),i=r;break;case"details":Fe("toggle",t),i=r;break;case"input":sx(t,r),i=Gp(t,r),Fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":ux(t,r),i=Hp(t,r),Fe("invalid",t);break;default:i=r}Wp(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?OT(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&NT(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ws(t,l):typeof l=="number"&&Ws(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qs.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Fe("scroll",t):l!=null&&My(t,o,l,a))}switch(n){case"input":yu(t),lx(t,r,!1);break;case"textarea":yu(t),cx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+si(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)tA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Oi(il.current),Oi(rr.current),ku(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zn]=e,(o=r.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Tu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tu(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zn]=e,e.stateNode=r}return Ct(e),null;case 13:if(ze(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&on!==null&&e.mode&1&&!(e.flags&128))xk(),aa(),e.flags|=98560,o=!1;else if(o=ku(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[Zn]=e}else aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),o=!1}else Un!==null&&(Cm(Un),Un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?dt===0&&(dt=3):gv())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return la(),bm(t,e),t===null&&el(e.stateNode.containerInfo),Ct(e),null;case 10:return Zy(e.type._context),Ct(e),null;case 17:return Kt(e.type)&&Tc(),Ct(e),null;case 19:if(ze(Ke),o=e.memoizedState,o===null)return Ct(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)ls(o,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oc(t),a!==null){for(e.flags|=128,ls(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&tt()>ca&&(e.flags|=128,r=!0,ls(o,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ls(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ve)return Ct(e),null}else 2*tt()-o.renderingStartTime>ca&&n!==1073741824&&(e.flags|=128,r=!0,ls(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=tt(),e.sibling=null,n=Ke.current,Le(Ke,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return mv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function L2(t,e){switch(Jy(e),e.tag){case 1:return Kt(e.type)&&Tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return la(),ze(Wt),ze(Mt),iv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rv(e),null;case 13:if(ze(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(Ke),null;case 4:return la(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return mv(),null;case 24:return null;default:return null}}var Pu=!1,Nt=!1,U2=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Do(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function wm(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var Zx=!1;function F2(t,e){if(im=wc,t=ak(),Wy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++u===i&&(s=a),h===o&&++c===r&&(l=a),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(om={focusedElem:t,selectionRange:n},wc=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,v=y.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:Mn(e.type,x),v);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(T){Ze(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return y=Zx,Zx=!1,y}function $s(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&wm(e,n,o)}i=i.next}while(i!==r)}}function df(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nA(t){var e=t.alternate;e!==null&&(t.alternate=null,nA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[nl],delete e[lm],delete e[_2],delete e[S2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rA(t){return t.tag===5||t.tag===3||t.tag===4}function eb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ec));else if(r!==4&&(t=t.child,t!==null))for(Sm(t,e,n),t=t.sibling;t!==null;)Sm(t,e,n),t=t.sibling}function Em(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Em(t,e,n),t=t.sibling;t!==null;)Em(t,e,n),t=t.sibling}var St=null,Dn=!1;function Lr(t,e,n){for(n=n.child;n!==null;)iA(t,e,n),n=n.sibling}function iA(t,e,n){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(nf,n)}catch{}switch(n.tag){case 5:Nt||Do(n,e);case 6:var r=St,i=Dn;St=null,Lr(t,e,n),St=r,Dn=i,St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(Dn?(t=St,n=n.stateNode,t.nodeType===8?Lh(t.parentNode,n):t.nodeType===1&&Lh(t,n),Xs(t)):Lh(St,n.stateNode));break;case 4:r=St,i=Dn,St=n.stateNode.containerInfo,Dn=!0,Lr(t,e,n),St=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&wm(n,e,a),i=i.next}while(i!==r)}Lr(t,e,n);break;case 1:if(!Nt&&(Do(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ze(n,e,s)}Lr(t,e,n);break;case 21:Lr(t,e,n);break;case 22:n.mode&1?(Nt=(r=Nt)||n.memoizedState!==null,Lr(t,e,n),Nt=r):Lr(t,e,n);break;default:Lr(t,e,n)}}function tb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U2),e.forEach(function(r){var i=J2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:St=s.stateNode,Dn=!1;break e;case 3:St=s.stateNode.containerInfo,Dn=!0;break e;case 4:St=s.stateNode.containerInfo,Dn=!0;break e}s=s.return}if(St===null)throw Error(K(160));iA(o,a,i),St=null,Dn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ze(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oA(e,t),e=e.sibling}function oA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),Xn(t),r&4){try{$s(3,t,t.return),df(3,t)}catch(x){Ze(t,t.return,x)}try{$s(5,t,t.return)}catch(x){Ze(t,t.return,x)}}break;case 1:In(e,t),Xn(t),r&512&&n!==null&&Do(n,n.return);break;case 5:if(In(e,t),Xn(t),r&512&&n!==null&&Do(n,n.return),t.flags&32){var i=t.stateNode;try{Ws(i,"")}catch(x){Ze(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&AT(i,o),Kp(s,a);var u=Kp(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?OT(i,d):c==="dangerouslySetInnerHTML"?NT(i,d):c==="children"?Ws(i,d):My(i,c,d,u)}switch(s){case"input":zp(i,o);break;case"textarea":CT(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Vo(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Vo(i,!!o.multiple,o.defaultValue,!0):Vo(i,!!o.multiple,o.multiple?[]:"",!1))}i[nl]=o}catch(x){Ze(t,t.return,x)}}break;case 6:if(In(e,t),Xn(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){Ze(t,t.return,x)}}break;case 3:if(In(e,t),Xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xs(e.containerInfo)}catch(x){Ze(t,t.return,x)}break;case 4:In(e,t),Xn(t);break;case 13:In(e,t),Xn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(hv=tt())),r&4&&tb(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Nt=(u=Nt)||c,In(e,t),Nt=u):In(e,t),Xn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ne=t,c=t.child;c!==null;){for(d=ne=c;ne!==null;){switch(h=ne,g=h.child,h.tag){case 0:case 11:case 14:case 15:$s(4,h,h.return);break;case 1:Do(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){Ze(r,n,x)}}break;case 5:Do(h,h.return);break;case 22:if(h.memoizedState!==null){rb(d);continue}}g!==null?(g.return=h,ne=g):rb(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=IT("display",a))}catch(x){Ze(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Ze(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:In(e,t),Xn(t),r&4&&tb(t);break;case 21:break;default:In(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ws(i,""),r.flags&=-33);var o=eb(t);Em(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=eb(t);Sm(t,s,a);break;default:throw Error(K(161))}}catch(l){Ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B2(t,e,n){ne=t,aA(t)}function aA(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Pu;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Nt;s=Pu;var u=Nt;if(Pu=a,(Nt=l)&&!u)for(ne=i;ne!==null;)a=ne,l=a.child,a.tag===22&&a.memoizedState!==null?ib(i):l!==null?(l.return=a,ne=l):ib(i);for(;o!==null;)ne=o,aA(o),o=o.sibling;ne=i,Pu=s,Nt=u}nb(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ne=o):nb(t)}}function nb(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||df(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Fx(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fx(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Xs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Nt||e.flags&512&&_m(e)}catch(h){Ze(e,e.return,h)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function rb(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function ib(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{df(4,e)}catch(l){Ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ze(e,i,l)}}var o=e.return;try{_m(e)}catch(l){Ze(e,o,l)}break;case 5:var a=e.return;try{_m(e)}catch(l){Ze(e,a,l)}}}catch(l){Ze(e,e.return,l)}if(e===t){ne=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ne=s;break}ne=e.return}}var G2=Math.ceil,$c=Ir.ReactCurrentDispatcher,dv=Ir.ReactCurrentOwner,bn=Ir.ReactCurrentBatchConfig,be=0,gt=null,it=null,Tt=0,Zt=0,jo=ci(0),dt=0,ll=null,Ki=0,ff=0,fv=0,Ds=null,Vt=null,hv=0,ca=1/0,ur=null,Dc=!1,Tm=null,ni=null,Nu=!1,Kr=null,jc=0,js=0,km=null,dc=-1,fc=0;function Ft(){return be&6?tt():dc!==-1?dc:dc=tt()}function ri(t){return t.mode&1?be&2&&Tt!==0?Tt&-Tt:T2.transition!==null?(fc===0&&(fc=VT()),fc):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:XT(t.type)),t):1}function zn(t,e,n,r){if(50<js)throw js=0,km=null,Error(K(185));eu(t,n,r),(!(be&2)||t!==gt)&&(t===gt&&(!(be&2)&&(ff|=n),dt===4&&Hr(t,Tt)),Jt(t,r),n===1&&be===0&&!(e.mode&1)&&(ca=tt()+500,lf&&di()))}function Jt(t,e){var n=t.callbackNode;TR(t,e);var r=bc(t,t===gt?Tt:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?E2(ob.bind(null,t)):gk(ob.bind(null,t)),b2(function(){!(be&6)&&di()}),n=null;else{switch(HT(r)){case 1:n=Uy;break;case 4:n=GT;break;case 16:n=xc;break;case 536870912:n=zT;break;default:n=xc}n=pA(n,sA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sA(t,e){if(dc=-1,fc=0,be&6)throw Error(K(327));var n=t.callbackNode;if(Jo()&&t.callbackNode!==n)return null;var r=bc(t,t===gt?Tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Lc(t,r);else{e=r;var i=be;be|=2;var o=uA();(gt!==t||Tt!==e)&&(ur=null,ca=tt()+500,Ui(t,e));do try{H2();break}catch(s){lA(t,s)}while(!0);Qy(),$c.current=o,be=i,it!==null?e=0:(gt=null,Tt=0,e=dt)}if(e!==0){if(e===2&&(i=Zp(t),i!==0&&(r=i,e=Am(t,i))),e===1)throw n=ll,Ui(t,0),Hr(t,r),Jt(t,tt()),n;if(e===6)Hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!z2(i)&&(e=Lc(t,r),e===2&&(o=Zp(t),o!==0&&(r=o,e=Am(t,o))),e===1))throw n=ll,Ui(t,0),Hr(t,r),Jt(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:_i(t,Vt,ur);break;case 3:if(Hr(t,r),(r&130023424)===r&&(e=hv+500-tt(),10<e)){if(bc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sm(_i.bind(null,t,Vt,ur),e);break}_i(t,Vt,ur);break;case 4:if(Hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Gn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*G2(r/1960))-r,10<r){t.timeoutHandle=sm(_i.bind(null,t,Vt,ur),r);break}_i(t,Vt,ur);break;case 5:_i(t,Vt,ur);break;default:throw Error(K(329))}}}return Jt(t,tt()),t.callbackNode===n?sA.bind(null,t):null}function Am(t,e){var n=Ds;return t.current.memoizedState.isDehydrated&&(Ui(t,e).flags|=256),t=Lc(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Cm(e)),t}function Cm(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function z2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Wn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(t,e){for(e&=~fv,e&=~ff,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function ob(t){if(be&6)throw Error(K(327));Jo();var e=bc(t,0);if(!(e&1))return Jt(t,tt()),null;var n=Lc(t,e);if(t.tag!==0&&n===2){var r=Zp(t);r!==0&&(e=r,n=Am(t,r))}if(n===1)throw n=ll,Ui(t,0),Hr(t,e),Jt(t,tt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_i(t,Vt,ur),Jt(t,tt()),null}function pv(t,e){var n=be;be|=1;try{return t(e)}finally{be=n,be===0&&(ca=tt()+500,lf&&di())}}function Ji(t){Kr!==null&&Kr.tag===0&&!(be&6)&&Jo();var e=be;be|=1;var n=bn.transition,r=Pe;try{if(bn.transition=null,Pe=1,t)return t()}finally{Pe=r,bn.transition=n,be=e,!(be&6)&&di()}}function mv(){Zt=jo.current,ze(jo)}function Ui(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,x2(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Jy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Tc();break;case 3:la(),ze(Wt),ze(Mt),iv();break;case 5:rv(r);break;case 4:la();break;case 13:ze(Ke);break;case 19:ze(Ke);break;case 10:Zy(r.type._context);break;case 22:case 23:mv()}n=n.return}if(gt=t,it=t=ii(t.current,null),Tt=Zt=e,dt=0,ll=null,fv=ff=Ki=0,Vt=Ds=null,Ii!==null){for(e=0;e<Ii.length;e++)if(n=Ii[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Ii=null}return t}function lA(t,e){do{var n=it;try{if(Qy(),lc.current=Mc,Rc){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rc=!1}if(Wi=0,mt=ct=Ye=null,Ms=!1,ol=0,dv.current=null,n===null||n.return===null){dt=1,ll=e,it=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=Tt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=qx(a);if(g!==null){g.flags&=-257,Wx(g,a,s,o,e),g.mode&1&&Hx(o,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Hx(o,u,e),gv();break e}l=Error(K(426))}}else if(Ve&&s.mode&1){var v=qx(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Wx(v,a,s,o,e),Yy(ua(l,s));break e}}o=l=ua(l,s),dt!==4&&(dt=2),Ds===null?Ds=[o]:Ds.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=Hk(o,l,e);Ux(o,b);break e;case 1:s=l;var w=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ni===null||!ni.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=qk(o,s,e);Ux(o,T);break e}}o=o.return}while(o!==null)}dA(n)}catch(S){e=S,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function uA(){var t=$c.current;return $c.current=Mc,t===null?Mc:t}function gv(){(dt===0||dt===3||dt===2)&&(dt=4),gt===null||!(Ki&268435455)&&!(ff&268435455)||Hr(gt,Tt)}function Lc(t,e){var n=be;be|=2;var r=uA();(gt!==t||Tt!==e)&&(ur=null,Ui(t,e));do try{V2();break}catch(i){lA(t,i)}while(!0);if(Qy(),be=n,$c.current=r,it!==null)throw Error(K(261));return gt=null,Tt=0,dt}function V2(){for(;it!==null;)cA(it)}function H2(){for(;it!==null&&!gR();)cA(it)}function cA(t){var e=hA(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?dA(t):it=e,dv.current=null}function dA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=L2(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,it=null;return}}else if(n=j2(n,e,Zt),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);dt===0&&(dt=5)}function _i(t,e,n){var r=Pe,i=bn.transition;try{bn.transition=null,Pe=1,q2(t,e,n,r)}finally{bn.transition=i,Pe=r}return null}function q2(t,e,n,r){do Jo();while(Kr!==null);if(be&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(kR(t,o),t===gt&&(it=gt=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nu||(Nu=!0,pA(xc,function(){return Jo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bn.transition,bn.transition=null;var a=Pe;Pe=1;var s=be;be|=4,dv.current=null,F2(t,n),oA(n,t),f2(om),wc=!!im,om=im=null,t.current=n,B2(n),yR(),be=s,Pe=a,bn.transition=o}else t.current=n;if(Nu&&(Nu=!1,Kr=t,jc=i),o=t.pendingLanes,o===0&&(ni=null),bR(n.stateNode),Jt(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Dc)throw Dc=!1,t=Tm,Tm=null,t;return jc&1&&t.tag!==0&&Jo(),o=t.pendingLanes,o&1?t===km?js++:(js=0,km=t):js=0,di(),null}function Jo(){if(Kr!==null){var t=HT(jc),e=bn.transition,n=Pe;try{if(bn.transition=null,Pe=16>t?16:t,Kr===null)var r=!1;else{if(t=Kr,Kr=null,jc=0,be&6)throw Error(K(331));var i=be;for(be|=4,ne=t.current;ne!==null;){var o=ne,a=o.child;if(ne.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ne=u;ne!==null;){var c=ne;switch(c.tag){case 0:case 11:case 15:$s(8,c,o)}var d=c.child;if(d!==null)d.return=c,ne=d;else for(;ne!==null;){c=ne;var h=c.sibling,g=c.return;if(nA(c),c===u){ne=null;break}if(h!==null){h.return=g,ne=h;break}ne=g}}}var y=o.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}ne=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ne=a;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ne=b;break e}ne=o.return}}var w=t.current;for(ne=w;ne!==null;){a=ne;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ne=_;else e:for(a=w;ne!==null;){if(s=ne,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:df(9,s)}}catch(S){Ze(s,s.return,S)}if(s===a){ne=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,ne=T;break e}ne=s.return}}if(be=i,di(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(nf,t)}catch{}r=!0}return r}finally{Pe=n,bn.transition=e}}return!1}function ab(t,e,n){e=ua(n,e),e=Hk(t,e,1),t=ti(t,e,1),e=Ft(),t!==null&&(eu(t,1,e),Jt(t,e))}function Ze(t,e,n){if(t.tag===3)ab(t,t,n);else for(;e!==null;){if(e.tag===3){ab(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){t=ua(n,t),t=qk(e,t,1),e=ti(e,t,1),t=Ft(),e!==null&&(eu(e,1,t),Jt(e,t));break}}e=e.return}}function W2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(Tt&n)===n&&(dt===4||dt===3&&(Tt&130023424)===Tt&&500>tt()-hv?Ui(t,0):fv|=n),Jt(t,e)}function fA(t,e){e===0&&(t.mode&1?(e=bu,bu<<=1,!(bu&130023424)&&(bu=4194304)):e=1);var n=Ft();t=Sr(t,e),t!==null&&(eu(t,e,n),Jt(t,n))}function K2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fA(t,n)}function J2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),fA(t,n)}var hA;hA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,D2(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,Ve&&e.flags&1048576&&yk(e,Cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cc(t,e),t=e.pendingProps;var i=oa(e,Mt.current);Ko(e,n),i=av(null,e,r,t,i,n);var o=sv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(o=!0,kc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tv(e),i.updater=cf,e.stateNode=i,i._reactInternals=e,pm(e,r,t,n),e=ym(null,e,r,!0,o,n)):(e.tag=0,Ve&&o&&Ky(e),jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=X2(r),t=Mn(r,t),i){case 0:e=gm(null,e,r,t,n);break e;case 1:e=Yx(null,e,r,t,n);break e;case 11:e=Kx(null,e,r,t,n);break e;case 14:e=Jx(null,e,r,Mn(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),gm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),Yx(t,e,r,i,n);case 3:e:{if(Yk(e),t===null)throw Error(K(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Sk(t,e),Ic(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ua(Error(K(423)),e),e=Xx(t,e,r,n,i);break e}else if(r!==i){i=ua(Error(K(424)),e),e=Xx(t,e,r,n,i);break e}else for(on=ei(e.stateNode.containerInfo.firstChild),an=e,Ve=!0,Un=null,n=wk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(aa(),r===i){e=Er(t,e,n);break e}jt(t,e,r,n)}e=e.child}return e;case 5:return Ek(e),t===null&&dm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,am(r,i)?a=null:o!==null&&am(r,o)&&(e.flags|=32),Jk(t,e),jt(t,e,a,n),e.child;case 6:return t===null&&dm(e),null;case 13:return Xk(t,e,n);case 4:return nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sa(e,null,r,n):jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),Kx(t,e,r,i,n);case 7:return jt(t,e,e.pendingProps,n),e.child;case 8:return jt(t,e,e.pendingProps.children,n),e.child;case 12:return jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Le(Pc,r._currentValue),r._currentValue=a,o!==null)if(Wn(o.value,a)){if(o.children===i.children&&!Wt.current){e=Er(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=yr(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fm(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(K(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),fm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ko(e,n),i=Sn(i),r=r(i),e.flags|=1,jt(t,e,r,n),e.child;case 14:return r=e.type,i=Mn(r,e.pendingProps),i=Mn(r.type,i),Jx(t,e,r,i,n);case 15:return Wk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),cc(t,e),e.tag=1,Kt(r)?(t=!0,kc(e)):t=!1,Ko(e,n),Vk(e,r,i),pm(e,r,i,n),ym(null,e,r,!0,t,n);case 19:return Qk(t,e,n);case 22:return Kk(t,e,n)}throw Error(K(156,e.tag))};function pA(t,e){return BT(t,e)}function Y2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new Y2(t,e,n,r)}function yv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X2(t){if(typeof t=="function")return yv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dy)return 11;if(t===jy)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hc(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")yv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ao:return Fi(n.children,i,o,e);case $y:a=8,i|=8;break;case Lp:return t=vn(12,n,e,i|2),t.elementType=Lp,t.lanes=o,t;case Up:return t=vn(13,n,e,i),t.elementType=Up,t.lanes=o,t;case Fp:return t=vn(19,n,e,i),t.elementType=Fp,t.lanes=o,t;case ET:return hf(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _T:a=10;break e;case ST:a=9;break e;case Dy:a=11;break e;case jy:a=14;break e;case Fr:a=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=vn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Fi(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function hf(t,e,n,r){return t=vn(22,t,r,e),t.elementType=ET,t.lanes=n,t.stateNode={isHidden:!1},t}function qh(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Wh(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ah(0),this.expirationTimes=Ah(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ah(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vv(t,e,n,r,i,o,a,s,l){return t=new Q2(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=vn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tv(o),t}function Z2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ko,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mA(t){if(!t)return li;t=t._reactInternals;e:{if(no(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Kt(n))return mk(t,n,e)}return e}function gA(t,e,n,r,i,o,a,s,l){return t=vv(n,r,!0,t,i,o,a,s,l),t.context=mA(null),n=t.current,r=Ft(),i=ri(n),o=yr(r,i),o.callback=e??null,ti(n,o,i),t.current.lanes=i,eu(t,i,r),Jt(t,r),t}function pf(t,e,n,r){var i=e.current,o=Ft(),a=ri(i);return n=mA(n),e.context===null?e.context=n:e.pendingContext=n,e=yr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ti(i,e,a),t!==null&&(zn(t,i,a,o),sc(t,i,a)),a}function Uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xv(t,e){sb(t,e),(t=t.alternate)&&sb(t,e)}function eM(){return null}var yA=typeof reportError=="function"?reportError:function(t){console.error(t)};function bv(t){this._internalRoot=t}mf.prototype.render=bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));pf(t,e,null,null)};mf.prototype.unmount=bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){pf(null,t,null,null)}),e[_r]=null}};function mf(t){this._internalRoot=t}mf.prototype.unstable_scheduleHydration=function(t){if(t){var e=KT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vr.length&&e!==0&&e<Vr[n].priority;n++);Vr.splice(n,0,t),n===0&&YT(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lb(){}function tM(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Uc(a);o.call(u)}}var a=gA(e,r,t,0,null,!1,!1,"",lb);return t._reactRootContainer=a,t[_r]=a.current,el(t.nodeType===8?t.parentNode:t),Ji(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=Uc(l);s.call(u)}}var l=vv(t,0,!1,null,null,!1,!1,"",lb);return t._reactRootContainer=l,t[_r]=l.current,el(t.nodeType===8?t.parentNode:t),Ji(function(){pf(e,l,n,r)}),l}function yf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Uc(a);s.call(l)}}pf(e,a,t,i)}else a=tM(n,e,t,i,r);return Uc(a)}qT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Es(e.pendingLanes);n!==0&&(Fy(e,n|1),Jt(e,tt()),!(be&6)&&(ca=tt()+500,di()))}break;case 13:Ji(function(){var r=Sr(t,1);if(r!==null){var i=Ft();zn(r,t,1,i)}}),xv(t,1)}};By=function(t){if(t.tag===13){var e=Sr(t,134217728);if(e!==null){var n=Ft();zn(e,t,134217728,n)}xv(t,134217728)}};WT=function(t){if(t.tag===13){var e=ri(t),n=Sr(t,e);if(n!==null){var r=Ft();zn(n,t,e,r)}xv(t,e)}};KT=function(){return Pe};JT=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};Yp=function(t,e,n){switch(e){case"input":if(zp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sf(r);if(!i)throw Error(K(90));kT(r),zp(r,i)}}}break;case"textarea":CT(t,n);break;case"select":e=n.value,e!=null&&Vo(t,!!n.multiple,e,!1)}};$T=pv;DT=Ji;var nM={usingClientEntryPoint:!1,Events:[nu,Io,sf,RT,MT,pv]},us={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rM={bundleType:us.bundleType,version:us.version,rendererPackageName:us.rendererPackageName,rendererConfig:us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UT(t),t===null?null:t.stateNode},findFiberByHostInstance:us.findFiberByHostInstance||eM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Iu.isDisabled&&Iu.supportsFiber)try{nf=Iu.inject(rM),nr=Iu}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nM;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(K(200));return Z2(t,e,null,n)};un.createRoot=function(t,e){if(!wv(t))throw Error(K(299));var n=!1,r="",i=yA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vv(t,1,!1,null,null,n,!1,r,i),t[_r]=e.current,el(t.nodeType===8?t.parentNode:t),new bv(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=UT(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return Ji(t)};un.hydrate=function(t,e,n){if(!gf(e))throw Error(K(200));return yf(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!wv(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=yA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=gA(e,null,t,1,n??null,i,!1,o,a),t[_r]=e.current,el(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mf(e)};un.render=function(t,e,n){if(!gf(e))throw Error(K(200));return yf(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!gf(t))throw Error(K(40));return t._reactRootContainer?(Ji(function(){yf(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};un.unstable_batchedUpdates=pv;un.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gf(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return yf(t,e,n,!1,r)};un.version="18.3.1-next-f1338f8080-20240426";function vA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vA)}catch(t){console.error(t)}}vA(),vT.exports=un;var iM=vT.exports,ub=iM;Dp.createRoot=ub.createRoot,Dp.hydrateRoot=ub.hydrateRoot;var Ce=(t=>(t.DASHBOARD="DASHBOARD",t.CAL_COACH="CAL_COACH",t.WORKOUT_PLAN="WORKOUT_PLAN",t.HISTORY="HISTORY",t.PROFILE="PROFILE",t.ONBOARDING="ONBOARDING",t))(Ce||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var oM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:l,...u},c)=>P.createElement("svg",{ref:c,...oM,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${aM(t)}`,s].join(" "),...u},[...e.map(([d,h])=>P.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=ae("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=ae("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ae("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uM=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dM=ae("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fM=ae("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=ae("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=ae("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=ae("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=ae("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=ae("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=ae("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=ae("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=ae("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=ae("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=ae("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yo=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=ae("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=ae("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=ae("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function AA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=AA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function he(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=AA(t))&&(r&&(r+=" "),r+=e);return r}const NM=({children:t,currentView:e,onNavigate:n})=>m.jsxs("div",{className:"h-[100dvh] bg-surface dark:bg-surface-dark flex flex-col max-w-md mx-auto relative shadow-2xl shadow-gray-200 dark:shadow-black/50 overflow-hidden border-x border-gray-100/50 dark:border-white/5 transition-colors duration-300",children:[m.jsx("main",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:t}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-white/60 dark:bg-[#0f111a]/60 backdrop-blur-md pointer-events-auto z-40"}),m.jsx("div",{className:"absolute bottom-8 left-6 right-6 z-50",children:m.jsxs("nav",{className:"bg-white/80 dark:bg-[#1a1c26]/80 backdrop-blur-xl rounded-[32px] p-2 shadow-diffused-lg dark:shadow-diffused-dark border border-white dark:border-white/5 flex justify-between items-center",children:[m.jsxs("button",{onClick:()=>n(Ce.DASHBOARD),className:he("flex-1 flex items-center justify-center gap-2 py-4 rounded-[24px] transition-all duration-300",e===Ce.DASHBOARD?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40":"text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[m.jsx(pM,{size:22,strokeWidth:e===Ce.DASHBOARD?2.5:2}),e===Ce.DASHBOARD&&m.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Today"})]}),m.jsxs("button",{onClick:()=>n(Ce.CAL_COACH),className:he("flex-1 flex items-center justify-center gap-2 py-4 rounded-[24px] transition-all duration-300",e===Ce.CAL_COACH?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40":"text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[m.jsx(vr,{size:22,strokeWidth:e===Ce.CAL_COACH?2.5:2}),e===Ce.CAL_COACH&&m.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Coach"})]}),m.jsxs("button",{onClick:()=>n(Ce.WORKOUT_PLAN),className:he("flex-1 flex items-center justify-center gap-2 py-4 rounded-[24px] transition-all duration-300",e===Ce.WORKOUT_PLAN?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40":"text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[m.jsx(Gc,{size:22,strokeWidth:e===Ce.WORKOUT_PLAN?2.5:2}),e===Ce.WORKOUT_PLAN&&m.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Workout"})]}),m.jsxs("button",{onClick:()=>n(Ce.HISTORY),className:he("flex-1 flex items-center justify-center gap-2 py-4 rounded-[24px] transition-all duration-300",e===Ce.HISTORY?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40":"text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[m.jsx(lM,{size:22,strokeWidth:e===Ce.HISTORY?2.5:2}),e===Ce.HISTORY&&m.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-right-2 duration-300",children:"Report"})]}),m.jsxs("button",{onClick:()=>n(Ce.PROFILE),className:he("flex-1 flex items-center justify-center gap-2 py-4 rounded-[24px] transition-all duration-300",e===Ce.PROFILE?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40":"text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[m.jsx(da,{size:22,strokeWidth:e===Ce.PROFILE?2.5:2}),e===Ce.PROFILE&&m.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-right-2 duration-300",children:"Profile"})]})]})})]}),Ot=({children:t,className:e,onClick:n})=>m.jsx("div",{onClick:n,className:he("bg-white dark:bg-[#1a1c26] rounded-[32px] p-5 shadow-diffused dark:shadow-diffused-dark border border-white/60 dark:border-white/5",n&&"cursor-pointer active:scale-[0.98] transition-all hover:shadow-diffused-lg dark:hover:shadow-diffused-dark hover:-translate-y-0.5",e),children:t});function bf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function IM(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})}const OM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Tv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class RM extends Tv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class pb extends Tv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mb extends Tv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Om;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Om||(Om={}));class MM{constructor(e,{headers:n={},customFetch:r,region:i=Om.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=OM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return IM(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:l,body:u,signal:c,timeout:d}=r;let h={},{region:g}=r;g||(g=this.region);const y=new URL(`${this.url}/${n}`);g&&g!=="any"&&(h["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let x;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(h["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(h["Content-Type"]="application/json",x=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?x=JSON.stringify(u):x=u;let v=c;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),c?(v=a.signal,c.addEventListener("abort",()=>a.abort())):v=a.signal);const b=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:x,signal:v}).catch(S=>{throw new RM(S)}),w=b.headers.get("x-relay-error");if(w&&w==="true")throw new pb(b);if(!b.ok)throw new mb(b);let _=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return _==="application/json"?T=yield b.json():_==="application/octet-stream"||_==="application/pdf"?T=yield b.blob():_==="text/event-stream"?T=b:_==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(s){return{data:null,error:s,response:s instanceof mb||s instanceof pb?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var $M=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},DM=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,l=null,u=o.status,c=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var g;const b=await o.text();b===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?s=b:s=JSON.parse(b))}const x=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");x&&v&&v.length>1&&(l=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,u=406,c="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var y;const x=await o.text();try{a=JSON.parse(x),Array.isArray(a)&&o.status===404&&(s=[],a=null,u=200,c="OK")}catch{o.status===404&&x===""?(u=204,c="No Content"):a={message:x}}if(a&&n.isMaybeSingle&&(!(a==null||(y=a.details)===null||y===void 0)&&y.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&n.shouldThrowOnError)throw new $M(a)}return{error:a,data:s,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const l=o==null?void 0:o.cause;if(l){var u,c,d,h;const y=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",x=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";s=`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${y}`,x&&(s+=` (${x})`),l!=null&&l.stack&&(s+=`
${l.stack}`)}else{var g;s=(g=o==null?void 0:o.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},jM=class extends DM{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const gb=new RegExp("[,()]");var wo=class extends jM{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&gb.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},LM=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:s,headers:l}=this.cloneRequestState();return s.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new wo({method:i,url:s,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(s.length>0){const l=[...new Set(s)].map(u=>`"${u}"`);o.searchParams.set("columns",l.join(","))}}return new wo({method:i,url:o,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&s.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);s.searchParams.set("columns",c.join(","))}}return new wo({method:a,url:s,headers:l,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new wo({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new wo({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},UM=class CA{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new LM(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new CA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const l=new URL(`${this.url}/rpc/${e}`);let u;const c=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(c)),d=r&&Object.values(n).some(c);d?(s="POST",u=n):r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{l.searchParams.append(g,y)})):(s="POST",u=n);const h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new wo({method:s,url:l,headers:h,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class FM{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const BM="2.90.1",GM=`realtime-js/${BM}`,PA="1.0.0",zM="2.0.0",yb=PA,Rm=1e4,VM=1e3,HM=100;var Gr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gr||(Gr={}));var ut;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ut||(ut={}));var jn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(jn||(jn={}));var Mm;(function(t){t.websocket="websocket"})(Mm||(Mm={}));var Ci;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ci||(Ci={}));class qM{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(o=e.join_ref)!==null&&o!==void 0?o:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(g),x=0;y.setUint8(x++,this.KINDS.userBroadcastPush),y.setUint8(x++,l.length),y.setUint8(x++,s.length),y.setUint8(x++,a.length),y.setUint8(x++,u.length),y.setUint8(x++,d.length),y.setUint8(x++,n),Array.from(l,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(s,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(a,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(u,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(d,b=>y.setUint8(x++,b.charCodeAt(0)));var v=new Uint8Array(g.byteLength+r.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(r),g.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,l]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+o));l=l+o;const d=r.decode(e.slice(l,l+a));l=l+a;const h=e.slice(l,e.byteLength),g=s===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,y={type:this.BROADCAST_EVENT,event:c,payload:g};return a>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class NA{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var De;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(De||(De={}));const vb=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=WM(a,t,e,i),o),{}):{}},WM=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?IA(o,a):$m(a)},IA=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return XM(e,n)}switch(t){case De.bool:return KM(e);case De.float4:case De.float8:case De.int2:case De.int4:case De.int8:case De.numeric:case De.oid:return JM(e);case De.json:case De.jsonb:return YM(e);case De.timestamp:return QM(e);case De.abstime:case De.date:case De.daterange:case De.int4range:case De.int8range:case De.money:case De.reltime:case De.text:case De.time:case De.timestamptz:case De.timetz:case De.tsrange:case De.tstzrange:return $m(e);default:return $m(e)}},$m=t=>t,KM=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},JM=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},YM=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},XM=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>IA(e,s))}return t},QM=t=>typeof t=="string"?t.replace(" ","T"):t,OA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Jh{constructor(e,n,r={},i=Rm){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xb||(xb={}));class Us{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Us.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=Us.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Us.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},l={};return this.map(o,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=o[u];if(d){const h=c.map(v=>v.presence_ref),g=d.map(v=>v.presence_ref),y=c.filter(v=>g.indexOf(v.presence_ref)<0),x=d.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(s[u]=y),x.length>0&&(l[u]=x)}else s[u]=c}),this.syncDiff(o,{joins:s,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const d=e[s].map(g=>g.presence_ref),h=c.filter(g=>d.indexOf(g.presence_ref)<0);e[s].unshift(...h)}r(s,c,l)}),this.map(a,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bb||(bb={}));var Fs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fs||(Fs={}));var cr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(cr||(cr={}));class Lo{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Jh(this,jn.join,this.params,this.timeout),this.rejoinTimer=new NA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jn.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Us(this),this.broadcastEndpointURL=OA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Fs.PRESENCE]&&this.bindings[Fs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(cr.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(cr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(cr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(y=x==null?void 0:x.length)!==null&&y!==void 0?y:0,b=[];for(let w=0;w<v;w++){const _=x[w],{filter:{event:T,schema:S,table:E,filter:k}}=_,A=g&&g[w];if(A&&A.event===T&&Lo.isFilterValueEqual(A.schema,S)&&Lo.isFilterValueEqual(A.table,E)&&Lo.isFilterValueEqual(A.filter,k))b.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(cr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(cr.SUBSCRIBED);return}}).receive("error",g=>{this.state=ut.errored,e==null||e(cr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(cr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===Fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Jh(this,jn.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Jh(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>HM){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=jn;if(r&&[s,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,x,v;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(x=g.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(g=>g.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var y,x,v,b,w,_,T,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,k=(y=g.filter)===null||y===void 0?void 0:y.event;return E&&((x=n.ids)===null||x===void 0?void 0:x.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((b=g.filter)===null||b===void 0)&&b.table)||g.filter.table===((w=n.data)===null||w===void 0?void 0:w.table))}else{const E=(T=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:v,commit_timestamp:b,type:w,errors:_}=y;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}g.callback(h,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Lo.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(jn.close,{},e)}_onError(e){this._on(jn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=vb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=vb(e.columns,e.old_record)),n}}const Yh=()=>{},Ou={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZM=[1e3,2e3,5e3,1e4],e$=1e4,t$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n${constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rm,this.transport=null,this.heartbeatIntervalMs=Ou.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yh,this.ref=0,this.reconnectTimer=null,this.vsn=yb,this.logger=Yh,this.conn=null,this.sendBuffer=[],this.serializer=new qM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Mm.websocket}`,this.httpEndpoint=OA(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=FM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gr.connecting:return Ci.Connecting;case Gr.open:return Ci.Open;case Gr.closing:return Ci.Closing;default:return Ci.Closed}}isConnected(){return this.connectionState()===Ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Lo(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(VM,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ou.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Gr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gr.open||this.conn.readyState===Gr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(jn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([t$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:GM};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(jn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new NA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ou.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,l,u,c,d,h,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Rm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ou.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:Yh,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:yb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>ZM[y-1]||e$,this.vsn){case PA:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(y,x)=>x(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,x)=>x(JSON.parse(y));break;case zM:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ul=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function r$(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function i$(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function o$(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=r$(t.baseUrl,r,i),l=await i$(t.auth),u=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...l,...a},body:o?JSON.stringify(o):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const g=d?h:void 0,y=g==null?void 0:g.error;throw new ul((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:g})}return{status:u.status,headers:u.headers,data:h}}}}function Ru(t){return t.join("")}var a$=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ru(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ru(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ru(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ru(t.namespace)}`}),!0}catch(e){if(e instanceof ul&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ul&&n.status===409)return;throw n}}};function fo(t){return t.join("")}var s$=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${fo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ul&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ul&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},l$=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=o$({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new a$(this.client,e),this.tableOps=new s$(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},wf=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function We(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var u$=class extends wf{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dm=class extends wf{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const kv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),c$=()=>Response,jm=t=>{if(Array.isArray(t))return t.map(n=>jm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=jm(r)}),e},d$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},f$=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(t)}function h$(t,e){if(cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function p$(t){var e=h$(t,"string");return cl(e)=="symbol"?e:e+""}function m$(t,e,n){return(e=p$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wb(Object(n),!0).forEach(function(r){m$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Xh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},g$=async(t,e,n)=>{t instanceof await c$()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new u$(Xh(r),i,o))}).catch(r=>{e(new Dm(Xh(r),r))}):e(new Dm(Xh(t),t))},y$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(d$(r)?(i.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ue(ue({},i),n))};async function iu(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,y$(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>g$(l,s,r))})}async function dl(t,e,n,r){return iu(t,"GET",e,n,r)}async function $n(t,e,n,r,i){return iu(t,"POST",e,r,i,n)}async function Lm(t,e,n,r,i){return iu(t,"PUT",e,r,i,n)}async function v$(t,e,n,r){return iu(t,"HEAD",e,ue(ue({},n),{},{noResolveJson:!0}),r)}async function Av(t,e,n,r,i){return iu(t,"DELETE",e,r,i,n)}var x$=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}}};let RA;RA=Symbol.toStringTag;var b$=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[RA]="BlobDownloadBuilder",this.promise=null}asStream(){return new x$(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(We(e))return{data:null,error:e};throw e}}};const w$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_b={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var _$=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=kv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let o;const a=ue(ue({},_b),r);let s=ue(ue({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",i.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(s=ue(ue({},s),r.headers));const u=i._removeEmptyFolders(e),c=i._getFinalPath(u),d=await(t=="PUT"?Lm:$n)(i.fetch,`${i.url}/object/${c}`,o,ue({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(We(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);s.searchParams.set("token",e);try{let l;const u=ue({upsert:_b.upsert},r),c=ue(ue({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:o,fullPath:(await Lm(i.fetch,s.toString(),l,{headers:c})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(We(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=ue({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await $n(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new wf("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:s},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await $n(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await $n(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),o=await $n(r.fetch,`${r.url}/object/sign/${i}`,ue({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await $n(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>ue(ue({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>dl(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new b$(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:jm(await dl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await v$(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(We(r)&&r instanceof Dm){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;try{return{data:await Av(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=ue(ue(ue({},w$),e),{},{prefix:t||""});return{data:await $n(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(We(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=ue({},t);return{data:await $n(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const MA="2.90.1",$A={"X-Client-Info":`storage-js/${MA}`};var S$=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ue(ue({},$A),e),this.fetch=kv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await dl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await dl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await $n(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Lm(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(We(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Av(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},E$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},$A),e),this.fetch=kv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await $n(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await dl(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Av(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(We(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!f$(t))throw new wf("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new l$({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Cv={"X-Client-Info":`storage-js/${MA}`,"Content-Type":"application/json"};var DA=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function tn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Qh=class extends DA{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},T$=class extends DA{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Pv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),k$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Sb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),A$=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new Qh(Sb(o),r,a))}).catch(()=>{const o=r+"";e(new Qh(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Qh(i.statusText||`HTTP ${r} error`,r,o))}}else e(new T$(Sb(t),t))},C$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(k$(r)?(i.headers=ue({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,ue(ue({},i),n)):i};async function P$(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,C$(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>A$(l,s,r))})}async function nn(t,e,n,r,i){return P$(t,"POST",e,r,i,n)}var N$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cv),e),this.fetch=Pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await nn(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await nn(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(tn(r))return{data:null,error:r};throw r}}},I$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cv),e),this.fetch=Pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await nn(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await nn(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await nn(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}},O$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ue(ue({},Cv),e),this.fetch=Pv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await nn(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await nn(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(tn(n))return{data:null,error:n};throw n}}},R$=class extends O${constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new M$(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},M$=class extends N${constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new $$(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},$$=class extends I${constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ue(ue({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},D$=class extends S${constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new _$(this.url,this.headers,t,this.fetch)}get vectors(){return new R$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new E$(this.url+"/iceberg",this.headers,this.fetch)}};const jA="2.90.1",_o=30*1e3,Um=3,Zh=Um*_o,j$="http://localhost:9999",L$="supabase.auth.token",U$={"X-Client-Info":`gotrue-js/${jA}`},Fm="X-Supabase-Api-Version",LA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B$=10*60*1e3;class fl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class G$ extends fl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function z$(t){return oe(t)&&t.name==="AuthApiError"}class Pi extends fl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Or extends fl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Xt extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function V$(t){return oe(t)&&t.name==="AuthSessionMissingError"}class ho extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mu extends Or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class $u extends Or{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function H$(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Eb extends Or{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class q$ extends Or{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Bm extends Or{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ep(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class Tb extends Or{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Gm extends Or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kb=` 	
\r=`.split(""),W$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<kb.length;e+=1)t[kb[e].charCodeAt(0)]=-2;for(let e=0;e<zc.length;e+=1)t[zc[e].charCodeAt(0)]=e;return t})();function Ab(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(zc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(zc[r]),e.queuedBits-=6}}function UA(t,e,n){const r=W$[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Cb(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{Y$(a,r,n)};for(let a=0;a<t.length;a+=1)UA(t.charCodeAt(a),i,o);return e.join("")}function K$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function J$(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}K$(r,e)}}function Y$(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Xo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)UA(t.charCodeAt(i),n,r);return new Uint8Array(e)}function X$(t){const e=[];return J$(t,n=>e.push(n)),new Uint8Array(e)}function Ri(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Ab(i,n,r)),Ab(null,n,r),e.join("")}function Q$(t){return Math.round(Date.now()/1e3)+t}function Z$(){return Symbol("auth-callback")}const wt=()=>typeof window<"u"&&typeof document<"u",vi={tested:!1,writable:!1},FA=()=>{if(!wt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vi.tested)return vi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vi.tested=!0,vi.writable=!0}catch{vi.tested=!0,vi.writable=!1}return vi.writable};function eD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const BA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",So=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},xi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},xt=async(t,e)=>{await t.removeItem(e)};class _f{constructor(){this.promise=new _f.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}_f.promiseConstructor=Promise;function tp(t){const e=t.split(".");if(e.length!==3)throw new Gm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!F$.test(e[r]))throw new Gm("JWT not in base64url format");return{header:JSON.parse(Cb(e[0])),payload:JSON.parse(Cb(e[1])),signature:Xo(e[2]),raw:{header:e[0],payload:e[1]}}}async function nD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function rD(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function iD(t){return("0"+t.toString(16)).substr(-2)}function oD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,iD).join("")}async function aD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function sD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await aD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function po(t,e,n=!1){const r=oD();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await So(t,`${e}-code-verifier`,i);const o=await sD(r);return[o,r===o?"plain":"s256"]}const lD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uD(t){const e=t.headers.get(Fm);if(!e||!e.match(lD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function cD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function dD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const fD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mo(t){if(!fD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function np(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hD(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Pb(t){return JSON.parse(JSON.stringify(t))}const Si=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),pD=[502,503,504];async function Nb(t){var e;if(!tD(t))throw new Bm(Si(t),0);if(pD.includes(t.status))throw new Bm(Si(t),t.status);let n;try{n=await t.json()}catch(o){throw new Pi(Si(o),o)}let r;const i=uD(t);if(i&&i.getTime()>=LA["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Tb(Si(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Xt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Tb(Si(n),t.status,n.weak_password.reasons);throw new G$(Si(n),t.status||500,r)}const mD=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function le(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Fm]||(o[Fm]=LA["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await gD(t,e,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function gD(t,e,n,r,i,o){const a=mD(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Bm(Si(l),0)}if(s.ok||await Nb(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await Nb(l)}}function Rn(t){var e;let n=null;xD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Q$(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ib(t){const e=Rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function yD(t){return{data:t,error:null}}function vD(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=bf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function Ob(t){return t}function xD(t){return t.access_token&&t.refresh_token&&t.expires_in}const rp=["global","local","others"];class bD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=BA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=rp[0]){if(rp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${rp.join(", ")}`);try{return await le(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await le(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=bf(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await le(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:vD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await le(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await le(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ob});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){mo(e);try{return await le(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){mo(e);try{return await le(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:qr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){mo(e);try{return await le(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:qr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){mo(e.userId);try{const{data:n,error:r}=await le(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){mo(e.userId),mo(e.id);try{return{data:await le(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await le(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Ob});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(oe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await le(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await le(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await le(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await le(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function Rb(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const go={debug:!!(globalThis&&FA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wD extends GA{}async function _D(t,e,n){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),go.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){go.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{go.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw go.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new wD(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(go.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function SD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function zA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function ED(t){return parseInt(t,16)}function TD(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function kD(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=zA(t.address),y=c?`${c}://${r}`:r,x=t.statement?`${t.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${g}

${x}`;let b=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),s&&(b+=`
Not Before: ${s.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);w+=`
- ${_}`}b+=w}return`${v}
${b}`}class rt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Vc extends rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function AD({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(VA(a)){if(o.rp.id!==a)return new rt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function CD({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(VA(r)){if(n.rpId!==r)return new rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class PD{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const ND=new PD;function ID(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=bf(t,["challenge","user","excludeCredentials"]),o=Xo(e).buffer,a=Object.assign(Object.assign({},n),{id:Xo(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Xo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function OD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=bf(t,["challenge","allowCredentials"]),i=Xo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Xo(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function RD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ri(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ri(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function MD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ri(new Uint8Array(i.authenticatorData)),clientDataJSON:Ri(new Uint8Array(i.clientDataJSON)),signature:Ri(new Uint8Array(i.signature)),userHandle:i.userHandle?Ri(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function VA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Mb(){var t,e;return!!(wt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function $D(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vc("Browser returned unexpected credential type",e)}:{data:null,error:new Vc("Empty credential response",e)}}catch(e){return{data:null,error:AD({error:e,options:t})}}}async function DD(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Vc("Browser returned unexpected credential type",e)}:{data:null,error:new Vc("Empty credential response",e)}}catch(e){return{data:null,error:CD({error:e,options:t})}}}const jD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},LD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hc(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=Hc(s,a):r[o]=Hc(a)}else r[o]=a}return r}function UD(t,e){return Hc(jD,t,e||{})}function FD(t,e){return Hc(LD,t,e||{})}class BD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:s};const l=i??ND.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=UD(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:c,error:d}=await $D({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=FD(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:c,error:d}=await DD(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Pi("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new fl("rpId is required for WebAuthn authentication")};try{if(!Mb())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Pi("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new fl("rpId is required for WebAuthn registration")};try{if(!Mb())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Pi("Unexpected error in register",a)}}}}SD();const GD={url:j$,storageKey:L$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function $b(t,e,n){return await n()}const yo={};class hl{get jwks(){var e,n;return(n=(e=yo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=yo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){yo[this.storageKey]=Object.assign(Object.assign({},yo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},GD),e);if(this.storageKey=o.storageKey,this.instanceID=(n=hl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,hl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&wt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new bD({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=BA(o.fetch),this.lock=o.lock||$b,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&wt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=_D:this.lock=$b,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new BD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:FA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rb(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Rb(this.memoryStorage)),wt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(wt()&&(n=eD(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),wt()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),H$(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new Pi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Rn}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:c,password:d,options:h}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await po(this.storage,this.storageKey)),o=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:y},xform:Rn})}else if("phone"in e){const{phone:c,password:d,options:h}=e;o=await le(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Rn})}else throw new Mu("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await xt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ib})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await le(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ib})}else throw new Mu("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new ho;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,l,u,c,d,h;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:x,wallet:v,statement:b,options:w}=e;let _;if(wt())if(typeof v=="object")_=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")_=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const T=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),S=await _.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=zA(S[0]);let k=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const C=await _.request({method:"eth_chainId"});k=ED(C)}const A={domain:T.host,address:E,statement:b,uri:T.href,version:"1",chainId:k,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.resources};g=kD(A),y=await _.request({method:"personal_sign",params:[TD(g),E]})}try{const{data:x,error:v}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Rn});if(v)throw v;if(!x||!x.session||!x.user){const b=new ho;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(oe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,o,a,s,l,u,c,d,h,g;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:v,wallet:b,statement:w,options:_}=e;let T;if(wt())if(typeof b=="object")T=b;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))T=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=b}const S=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const E=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let k;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")k=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)k=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const E=await T.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=E}}try{const{data:v,error:b}=await le(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ri(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Rn});if(b)throw b;if(!v||!v.session||!v.user){const w=new ho;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(oe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await xi(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new q$;const{data:o,error:a}=await le(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Rn});if(await xt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new ho;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Rn}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new ho;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await po(this.storage,this.storageKey));const{error:d}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await le(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Mu("You must provide either an email or phone number.")}catch(s){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await le(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Rn});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await po(this.storage,this.storageKey));const u=await le(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:yD});return!((o=u.data)===null||o===void 0)&&o.url&&wt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(s){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Xt;const{error:i}=await le(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await le(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await le(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new Mu("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await xi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Zh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await xi(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=np()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=hD(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qr}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Xt}:await le(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:qr})})}catch(n){if(oe(n))return V$(n)&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Xt;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await po(this.storage,this.storageKey));const{data:u,error:c}=await le(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:qr});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Xt;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=tp(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Xt;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!wt())throw new $u("No browser detected.");if(e.error||e.error_description||e.error_code)throw new $u(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Eb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new $u("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Eb("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:u}=e;if(!o||!s||!a||!u)throw new $u("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let h=c+d;l&&(h=parseInt(l));const g=h-c;g*1e3<=_o&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const y=h-d;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,c);const{data:x,error:v}=await this._getUser(o);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await xi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(z$(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await xt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=Z$(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await po(this.storage,this.storageKey,!0));try{return await le(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,l,u,c;const{data:d,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await le(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return wt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(oe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:l,access_token:u,nonce:c}=e,d=await le(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rn}),{data:h,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ho}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:g}))}catch(i){if(await xt(this.storage,`${this.storageKey}-code-verifier`),oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await le(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await rD(async i=>(i>0&&await nD(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await le(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rn})),(i,o)=>{const a=200*Math.pow(2,i);return o&&ep(o)&&Date.now()+a-r<_o})}catch(r){if(this._debug(n,"error",r),oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),wt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await xi(this.storage,this.storageKey);if(i&&this.userStorage){let a=await xi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await So(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:np()}else if(i&&!i.user&&!i.user){const a=await xi(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await xt(this.storage,this.storageKey+"-user"),await So(this.storage,this.storageKey,i)):i.user=np()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Zh;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Zh}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),ep(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new _f;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Xt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),oe(o)){const a={data:null,error:o};return ep(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await xt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await So(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Pb(i);await So(this.storage,this.storageKey,o)}else{const i=Pb(n);await So(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await xt(this.storage,this.storageKey),await xt(this.storage,this.storageKey+"-code-verifier"),await xt(this.storage,this.storageKey+"-user"),this.userStorage&&await xt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_o);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/_o);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${_o}ms, refresh threshold is ${Um} ticks`),i<=Um&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof GA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await po(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await le(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await le(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?RD(e.webauthn.credential_response):MD(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await le(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:ID(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:OD(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=tp(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await le(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Xt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Xt});const a=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&wt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Xt});const a=await le(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&wt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await le(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Xt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await le(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Xt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+B$>i)return r;const{data:o,error:a}=await le(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});r=g.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=tp(r);n!=null&&n.allowExpired||cD(o.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:o,header:i,signature:a},error:null}}const c=dD(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,X$(`${s}.${l}`)))throw new Gm("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}}hl.nextInstanceID={};const zD=hl,VD="2.90.1";let ks="";typeof Deno<"u"?ks="deno":typeof document<"u"?ks="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ks="react-native":ks="node";const HD={"X-Client-Info":`supabase-js-${ks}/${VD}`},qD={headers:HD},WD={schema:"public"},KD={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},JD={};function pl(t){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pl(t)}function YD(t,e){if(pl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XD(t){var e=YD(t,"string");return pl(e)=="symbol"?e:e+""}function QD(t,e,n){return(e=XD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Db(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Db(Object(n),!0).forEach(function(r){QD(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const ZD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),ej=()=>Headers,tj=(t,e,n)=>{const r=ZD(n),i=ej();return async(o,a)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(o,Qe(Qe({},a),{},{headers:u}))}};function nj(t){return t.endsWith("/")?t:t+"/"}function rj(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:Qe(Qe({},l),i),auth:Qe(Qe({},u),o),realtime:Qe(Qe({},c),a),storage:{},global:Qe(Qe(Qe({},d),s),{},{headers:Qe(Qe({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function ij(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var oj=class extends zD{constructor(t){super(t)}},aj=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=ij(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:WD,realtime:JD,auth:Qe(Qe({},KD),{},{storageKey:a}),global:qD},l=rj(n??{},s);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=tj(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Qe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new UM(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new D$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new MM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new oj({url:this.authUrl.href,headers:Qe(Qe({},h),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new n$(this.realtimeUrl.href,Qe(Qe({},t),{},{params:Qe(Qe({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const sj=(t,e,n)=>new aj(t,e,n);function lj(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}lj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nv="https://vsqytdzbxxhketbvcoif.supabase.co",HA=`sb_publishable_m-b7gwiZtZu4k0eaXHPoTg_mM_qFuvG
`;console.log("Supabase URL Detected:","Yes",`(Length: ${Nv.length})`);console.log("Supabase Key Detected:","Yes",`(Length: ${HA.length})`);const fa=Nv.startsWith("http"),qA="snapcal_mode_preference",zm=()=>fa?localStorage.getItem(qA)==="local"?"local":"cloud":"local",uj=t=>{localStorage.setItem(qA,t),window.location.reload()},ge=fa&&zm()==="cloud";fa?ge||console.log("Supabase configured but user prefers Local Storage."):console.log("Supabase is not configured. Using Mock Auth & Local Storage.");const _e=sj(fa?Nv:"https://placeholder.supabase.co",fa?HA:"placeholder"),Sf="snapcal_mock_session",qc="snapcal_auth_change",cj=t=>new Promise(e=>setTimeout(e,t)),WA=async(t,e)=>{var n,r;if(ge){const{data:i,error:o}=await _e.auth.signInWithPassword({email:t,password:e});if(o)throw new Error(o.message);return{user:{id:((n=i.user)==null?void 0:n.id)||"",email:(r=i.user)==null?void 0:r.email}}}else{await cj(600);const i={id:btoa(t.toLowerCase()),email:t};return localStorage.setItem(Sf,JSON.stringify(i)),window.dispatchEvent(new Event(qc)),{user:i}}},dj=async(t,e)=>{var n,r;if(ge){const{data:i,error:o}=await _e.auth.signUp({email:t,password:e});if(o)throw new Error(o.message);return{user:{id:((n=i.user)==null?void 0:n.id)||"",email:(r=i.user)==null?void 0:r.email}}}else return WA(t,e)},fj=async()=>{if(ge){const{error:t}=await _e.auth.signOut();if(t)throw t}else localStorage.removeItem(Sf),window.dispatchEvent(new Event(qc))},qe=async()=>{if(ge){const{data:t}=await _e.auth.getUser();return t.user?{id:t.user.id,email:t.user.email}:null}else{const t=localStorage.getItem(Sf);return t?JSON.parse(t):null}},hj=t=>{if(ge){const{data:e}=_e.auth.onAuthStateChange((n,r)=>{r!=null&&r.user?t({id:r.user.id,email:r.user.email}):t(null)});return()=>e.subscription.unsubscribe()}else{const e=()=>{const n=localStorage.getItem(Sf);t(n?JSON.parse(n):null)};return window.addEventListener(qc,e),window.addEventListener("storage",e),()=>{window.removeEventListener(qc,e),window.removeEventListener("storage",e)}}};class pj{constructor(){wh(this,"cache",new Map);wh(this,"defaultTTL",5*60*1e3)}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>n.ttl?(this.cache.delete(e),null):n.data:null}set(e,n,r){this.cache.set(e,{data:n,timestamp:Date.now(),ttl:r||this.defaultTTL})}has(e){return this.get(e)!==null}invalidate(e){this.cache.delete(e)}invalidatePattern(e){const n=[];this.cache.forEach((r,i)=>{e.test(i)&&n.push(i)}),n.forEach(r=>this.cache.delete(r))}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const Tn=new pj,Kn={ENTRIES:"food:entries",ENTRIES_LITE:"food:entries:lite",DAILY_SUMMARIES:"food:summaries",DAILY_SUMMARIES_LITE:"food:summaries:lite",DAILY_GOAL:"user:goal",USER_PROFILE:"user:profile",entriesForDate:t=>`food:entries:${t}`,entryImage:t=>`food:image:${t}`};async function ro(t,e,n){const r=Tn.get(t);if(r!==null)return r;const i=await e();return Tn.set(t,i,n),i}const Iv="snapcal_data_v1",ml="snapcal_settings_v1",gl="snapcal_profile_v1",Ov="snapcal_summaries_v1",KA="snapcal_coach_messages_v1",JA="snapcal_workout_plans_v1",mj="id, user_id, timestamp, date, time, food_item, calories, protein, carbs, fat, confidence, image_url, is_manual, ingredients, original_ai_response",YA="id, user_id, timestamp, date, time, food_item, calories, protein, carbs, fat, confidence, is_manual, ingredients",gj="id, date, calories, protein, carbs, fat",kn=()=>{try{const t=localStorage.getItem(Iv);return t?JSON.parse(t):[]}catch{return[]}},Ef=t=>{try{localStorage.setItem(Iv,JSON.stringify(t))}catch(e){throw e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED"||String(e).toLowerCase().includes("quota")?new Error("Browser Storage Full: Your local history (with photos) has reached the browser's 5MB limit. Please delete some old entries in the History tab or connect to Supabase for unlimited cloud storage."):e}},Rv=()=>{try{const t=localStorage.getItem(Ov);return t?JSON.parse(t):[]}catch{return[]}},yj=t=>{try{localStorage.setItem(Ov,JSON.stringify(t))}catch{throw new Error("Browser Storage Full: Cannot even save simple summaries. Please clear your browser data.")}},Tf=t=>({id:t.id,user_id:t.user_id,timestamp:t.timestamp,date:t.date,time:t.time,food_item:t.food_item,calories:t.calories,protein:t.protein||0,carbs:t.carbs||0,fat:t.fat||0,confidence:t.confidence,imageUrl:t.image_url,isManual:t.is_manual,ingredients:t.ingredients||[],originalAiResponse:t.original_ai_response}),ou=(t,e)=>{console.error(`Supabase ${e} Error:`,t);const n=(t==null?void 0:t.message)||String(t)||"",r=n.toLowerCase();throw r.includes("quota")||r.includes("limit")||r.includes("tier")?new Error("Cloud Quota Reached: Your Supabase storage limit has been exceeded. Try deleting old entries."):r.includes("relation")||r.includes("column")||r.includes("does not exist")?new Error("Database Setup Required: It looks like the 'food_entries' table is missing in Supabase. Please check the Profile tab for the setup SQL script."):r.includes("policy")||r.includes("permission")||r.includes("row-level security")?new Error("Permission Denied: Supabase RLS policies are blocking this save. Ensure authenticated users have 'INSERT' and 'UPDATE' access."):new Error(`Cloud Save Failed: ${n}`)},vj=async t=>{const e=await qe();if(!e)throw new Error("User must be logged in to save.");if(!ge){const r=kn(),i=r.findIndex(a=>a.id===t.id),o={...t,user_id:e.id};i>=0?r[i]=o:r.push(o),Ef(r),Tn.invalidatePattern(/^food:/);return}const{error:n}=await _e.from("food_entries").upsert({id:t.id,user_id:e.id,timestamp:t.timestamp,date:t.date,time:t.time,food_item:t.food_item,calories:t.calories,protein:t.protein,carbs:t.carbs,fat:t.fat,confidence:t.confidence,is_manual:t.isManual,image_url:t.imageUrl===void 0?null:t.imageUrl,ingredients:t.ingredients,original_ai_response:t.originalAiResponse});n&&ou(n,"Save Entry"),Tn.invalidatePattern(/^food:/)},XA=async()=>ro(Kn.ENTRIES,async()=>{const t=await qe();if(!t)return[];if(!ge)return kn().filter(r=>r.user_id===t.id).sort((r,i)=>i.timestamp.localeCompare(r.timestamp));const{data:e,error:n}=await _e.from("food_entries").select(mj).eq("user_id",t.id).order("timestamp",{ascending:!1}).limit(200);return n?(console.error("Supabase Fetch Error:",n),n.message.includes("relation")?[]:[]):e?e.map(Tf):[]},3*60*1e3),xj=async()=>ro(Kn.ENTRIES_LITE,async()=>{const t=await qe();if(!t)return[];if(!ge)return kn().filter(r=>r.user_id===t.id).map(r=>({...r,imageUrl:void 0,originalAiResponse:void 0})).sort((r,i)=>i.timestamp.localeCompare(r.timestamp));const{data:e,error:n}=await _e.from("food_entries").select(YA).eq("user_id",t.id).order("timestamp",{ascending:!1}).limit(200);return n?(console.error("Supabase Fetch Lite Error:",n),[]):e?e.map(Tf):[]},3*60*1e3),bj=async()=>ro(Kn.DAILY_SUMMARIES_LITE,async()=>{const t=await qe();if(!t)return[];if(!ge){const i=kn().filter(l=>l.user_id===t.id),o={};i.forEach(l=>{o[l.date]||(o[l.date]=[]),o[l.date].push(l)});const a=Rv().filter(l=>l.user_id===t.id),s={};return a.forEach(l=>{s[l.date]={date:l.date,totalCalories:l.total_calories||l.totalCalories,totalProtein:l.total_protein||l.totalProtein||0,totalCarbs:l.total_carbs||l.totalCarbs||0,totalFat:l.total_fat||l.totalFat||0}}),Object.keys(o).forEach(l=>{const u=o[l];s[l]={date:l,totalCalories:u.reduce((c,d)=>c+d.calories,0),totalProtein:u.reduce((c,d)=>c+(d.protein||0),0),totalCarbs:u.reduce((c,d)=>c+(d.carbs||0),0),totalFat:u.reduce((c,d)=>c+(d.fat||0),0)}}),Object.values(s).sort((l,u)=>new Date(u.date).getTime()-new Date(l.date).getTime())}const{data:e,error:n}=await _e.from("food_entries").select("date, calories, protein, carbs, fat").eq("user_id",t.id).order("date",{ascending:!1});if(n)return console.error("Supabase summary fetch error:",n),[];const r={};(e||[]).forEach(i=>{r[i.date]||(r[i.date]={calories:0,protein:0,carbs:0,fat:0}),r[i.date].calories+=i.calories||0,r[i.date].protein+=i.protein||0,r[i.date].carbs+=i.carbs||0,r[i.date].fat+=i.fat||0});try{const{data:i}=await _e.from("daily_summaries").select("date, total_calories, total_protein, total_carbs, total_fat").eq("user_id",t.id);(i||[]).forEach(o=>{r[o.date]||(r[o.date]={calories:o.total_calories,protein:o.total_protein,carbs:o.total_carbs,fat:o.total_fat})})}catch{}return Object.entries(r).map(([i,o])=>({date:i,totalCalories:o.calories,totalProtein:o.protein,totalCarbs:o.carbs,totalFat:o.fat})).sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime())},3*60*1e3),wj=async t=>ro(Kn.entriesForDate(t),async()=>{const e=await qe();if(!e)return[];if(!ge)return kn().filter(i=>i.user_id===e.id&&i.date===t).map(i=>({...i,imageUrl:void 0,originalAiResponse:void 0})).sort((i,o)=>o.timestamp.localeCompare(i.timestamp));const{data:n,error:r}=await _e.from("food_entries").select(YA).eq("user_id",e.id).eq("date",t).order("timestamp",{ascending:!1});return r?(console.error("Supabase date fetch error:",r),[]):n?n.map(Tf):[]},5*60*1e3),_j=async t=>ro(Kn.entryImage(t),async()=>{const e=await qe();if(!e)return null;if(!ge){const o=kn().find(a=>a.id===t&&a.user_id===e.id);return(o==null?void 0:o.imageUrl)||null}const{data:n,error:r}=await _e.from("food_entries").select("image_url").eq("id",t).eq("user_id",e.id).single();return r||!n?null:n.image_url},30*60*1e3),Sj=async()=>{const t=await qe();if(!t)return[];const e=await XA(),n={};e.forEach(o=>{n[o.date]||(n[o.date]=[]),n[o.date].push(o)});let r=[];if(!ge)r=Rv().filter(o=>o.user_id===t.id);else try{const{data:o,error:a}=await _e.from("daily_summaries").select("date, total_calories, total_protein, total_carbs, total_fat").eq("user_id",t.id);!a&&o&&(r=o)}catch{console.warn("Summary fetch failed, likely missing table")}const i={};return r.forEach(o=>{i[o.date]={date:o.date,totalCalories:o.total_calories,totalProtein:o.total_protein,totalCarbs:o.total_carbs,totalFat:o.total_fat,entries:[]}}),Object.keys(n).forEach(o=>{const a=n[o];i[o]={date:o,totalCalories:a.reduce((s,l)=>s+l.calories,0),totalProtein:a.reduce((s,l)=>s+(l.protein||0),0),totalCarbs:a.reduce((s,l)=>s+(l.carbs||0),0),totalFat:a.reduce((s,l)=>s+(l.fat||0),0),entries:a}}),Object.values(i).sort((o,a)=>new Date(a.date).getTime()-new Date(o.date).getTime())},jb=async()=>{const t=await qe();if(!t)return;const e=new Date;e.setDate(e.getDate()-7);const n=e.toISOString().split("T")[0];let r=[];if(!ge)r=kn().filter(o=>o.user_id===t.id&&o.date<n);else try{const{data:o}=await _e.from("food_entries").select(gj).eq("user_id",t.id).lt("date",n);o&&(r=o.map(Tf))}catch{return}if(r.length===0)return;const i={};r.forEach(o=>{i[o.date]||(i[o.date]=[]),i[o.date].push(o)});for(const o of Object.keys(i)){const a=i[o],s={id:`${t.id}_${o}`,user_id:t.id,date:o,total_calories:a.reduce((l,u)=>l+u.calories,0),total_protein:a.reduce((l,u)=>l+(u.protein||0),0),total_carbs:a.reduce((l,u)=>l+(u.carbs||0),0),total_fat:a.reduce((l,u)=>l+(u.fat||0),0)};if(ge)await _e.from("daily_summaries").upsert(s),await _e.from("food_entries").delete().eq("user_id",t.id).eq("date",o);else{const l=Rv(),u=l.findIndex(d=>d.user_id===t.id&&d.date===o);u>=0?l[u]=s:l.push(s),yj(l);const c=kn().filter(d=>!(d.user_id===t.id&&d.date===o));Ef(c)}}},QA=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ge){const r=kn().filter(i=>!(i.id===t&&i.user_id===e.id));Ef(r),Tn.invalidatePattern(/^food:/);return}const{error:n}=await _e.from("food_entries").delete().eq("id",t).eq("user_id",e.id);n&&ou(n,"Delete Entry"),Tn.invalidatePattern(/^food:/)},Ej=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ge){const r=kn(),i=r.findIndex(o=>o.id===t&&o.user_id===e.id);i>=0&&(r[i].imageUrl=void 0,Ef(r)),Tn.invalidatePattern(/^food:/);return}const{error:n}=await _e.from("food_entries").update({image_url:null}).eq("id",t).eq("user_id",e.id);n&&ou(n,"Clear Image"),Tn.invalidatePattern(/^food:/)},Mv=async()=>ro(Kn.DAILY_GOAL,async()=>{const t=await qe();if(!t)return 2e3;if(!ge){const r=localStorage.getItem(ml);return(r?JSON.parse(r):{})[t.id]||2e3}const{data:e,error:n}=await _e.from("user_settings").select("daily_goal").eq("user_id",t.id).single();return n||!e?2e3:e.daily_goal},10*60*1e3),kf=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ge){const r=localStorage.getItem(ml),i=r?JSON.parse(r):{};i[e.id]=t,localStorage.setItem(ml,JSON.stringify(i)),Tn.invalidate(Kn.DAILY_GOAL);return}const{error:n}=await _e.from("user_settings").upsert({user_id:e.id,daily_goal:t},{onConflict:"user_id"});n&&ou(n,"Save Daily Goal"),Tn.invalidate(Kn.DAILY_GOAL)},$v=async()=>ro(Kn.USER_PROFILE,async()=>{const t=await qe();if(!t)return null;if(!ge){const r=localStorage.getItem(gl);return(r?JSON.parse(r):{})[t.id]||null}const{data:e,error:n}=await _e.from("user_profiles").select("name, height, weight, age, gender, activity_level, goal, equipment_access").eq("user_id",t.id).single();return n||!e?null:{name:e.name,height:e.height,weight:e.weight,age:e.age,gender:e.gender,activityLevel:e.activity_level,goal:e.goal,equipmentAccess:e.equipment_access}},10*60*1e3),Dv=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ge){const r=localStorage.getItem(gl),i=r?JSON.parse(r):{};i[e.id]=t,localStorage.setItem(gl,JSON.stringify(i)),Tn.invalidate(Kn.USER_PROFILE);return}const{error:n}=await _e.from("user_profiles").upsert({user_id:e.id,name:t.name,height:t.height,weight:t.weight,age:t.age,gender:t.gender,activity_level:t.activityLevel,goal:t.goal,equipment_access:t.equipmentAccess},{onConflict:"user_id"});n&&ou(n,"Save Profile"),Tn.invalidate(Kn.USER_PROFILE)},Tj=()=>kn().length>0,kj=async()=>{if(!ge)throw new Error("Must be in Cloud Mode to sync");const t=await qe();if(!t)throw new Error("Must be logged in to sync");const e=kn();if(e.length>0){const i=e.map(a=>({id:a.id,user_id:t.id,timestamp:a.timestamp,date:a.date,time:a.time,food_item:a.food_item,calories:a.calories,protein:a.protein,carbs:a.carbs,fat:a.fat,confidence:a.confidence,is_manual:a.isManual,image_url:a.imageUrl,ingredients:a.ingredients,original_ai_response:a.originalAiResponse})),o=5;for(let a=0;a<i.length;a+=o){const s=i.slice(a,a+o),{error:l}=await _e.from("food_entries").upsert(s);if(l)throw console.error("Chunk upload failed",l),new Error(`Sync failed at item ${a+1}: `+l.message)}}const n=localStorage.getItem(ml);if(n){const i=JSON.parse(n),o=Object.keys(i)[0];o&&i[o]&&await kf(i[o])}const r=localStorage.getItem(gl);if(r){const i=JSON.parse(r),o=Object.keys(i)[0];o&&i[o]&&await Dv(i[o])}localStorage.removeItem(Iv),localStorage.removeItem(Ov),localStorage.removeItem(ml),localStorage.removeItem(gl)},Aj=async()=>{if(!ge)return{ok:!0};if(!await qe())return{ok:!0};const{error:e}=await _e.from("food_entries").select("id").limit(1);return e?e.message.includes("relation")||e.code==="42P01"?{ok:!1,missingTables:!0,error:"Tables missing"}:{ok:!1,error:e.message}:{ok:!0}},Wc="snapcal_onboarding_v1",Cj=async t=>{if(!t||!t.id)return!1;const e=localStorage.getItem(Wc),n=e?JSON.parse(e):{};if(n[t.id]===!0)return!0;if(!ge)return!1;try{const{data:r,error:i}=await _e.from("user_settings").select("has_completed_onboarding").eq("user_id",t.id).maybeSingle(),o=(r==null?void 0:r.has_completed_onboarding)||!1;return o&&(n[t.id]=!0,localStorage.setItem(Wc,JSON.stringify(n))),o}catch{return!1}},ZA=async t=>{if(!t||!t.id)return;const e=localStorage.getItem(Wc),n=e?JSON.parse(e):{};if(n[t.id]=!0,localStorage.setItem(Wc,JSON.stringify(n)),ge)try{const{error:r}=await _e.from("user_settings").upsert({user_id:t.id,has_completed_onboarding:!0},{onConflict:"user_id"});r&&console.error("Cloud mark onboarding error:",r)}catch(r){console.error("Cloud mark onboarding exception:",r)}},Pj=async t=>{await ZA(t)},jv=()=>{try{const t=localStorage.getItem(KA);return t?JSON.parse(t):[]}catch{return[]}},eC=t=>{try{localStorage.setItem(KA,JSON.stringify(t))}catch(e){console.error("Failed to save chat messages to local storage:",e)}},vo=async t=>{const e=await qe();if(!e){console.warn("User not logged in, cannot save chat message");return}const n=new Date(t.timestamp).toISOString().split("T")[0];if(!ge){const r=jv(),i={...t,user_id:e.id,date:n};r.push(i),eC(r);return}try{const{error:r}=await _e.from("coach_messages").insert({id:t.id,user_id:e.id,role:t.role,content:t.content,timestamp:t.timestamp,date:n});r&&console.error("Failed to save chat message to Supabase:",r)}catch(r){console.error("Exception saving chat message:",r)}},tC=async t=>{const e=await qe();if(!e)return[];if(!ge)return jv().filter(r=>r.user_id===e.id&&r.date===t).sort((r,i)=>r.timestamp-i.timestamp);try{const{data:n,error:r}=await _e.from("coach_messages").select("id, role, content, timestamp").eq("user_id",e.id).eq("date",t).order("timestamp",{ascending:!0});return r?(console.error("Failed to fetch chat messages:",r),[]):n||[]}catch(n){return console.error("Exception fetching chat messages:",n),[]}},Nj=async()=>{const t=new Date().toISOString().split("T")[0];return tC(t)},Ij=async()=>{const t=await qe();if(!t)return;const e=new Date;e.setDate(e.getDate()-7);const n=e.toISOString().split("T")[0];if(!ge){const i=jv().filter(o=>o.user_id!==t.id||o.date>=n);eC(i);return}try{const{error:r}=await _e.from("coach_messages").delete().eq("user_id",t.id).lt("date",n);r&&console.error("Failed to cleanup old chat messages:",r)}catch(r){console.error("Exception during chat cleanup:",r)}},Lv=()=>{try{const t=localStorage.getItem(JA);return t?JSON.parse(t):[]}catch{return[]}},Oj=t=>{try{localStorage.setItem(JA,JSON.stringify(t))}catch(e){console.error("Failed to save workout plans to local storage:",e)}},Kc=async(t,e,n)=>{const r=await qe();if(!r){console.warn("User not logged in, cannot save workout plan");return}const i={id:`${r.id}_${t}`,user_id:r.id,date:t,title:e,exercises:n},o=Lv(),a=o.findIndex(s=>s.user_id===r.id&&s.date===t);if(a>=0?o[a]=i:o.push(i),Oj(o),ge)try{const{error:s}=await _e.from("workout_plans").upsert({id:`${r.id}_${t}`,user_id:r.id,date:t,title:e,exercises:n});s&&console.warn("Supabase save failed, using localStorage fallback:",s.message)}catch(s){console.warn("Exception saving workout plan to Supabase, using localStorage fallback:",s)}},Lb=async t=>{const e=await qe();if(!e)return null;const r=Lv().find(i=>i.user_id===e.id&&i.date===t);if(r)return{date:r.date,title:r.title,exercises:r.exercises};if(ge)try{const{data:i,error:o}=await _e.from("workout_plans").select("date, title, exercises").eq("user_id",e.id).eq("date",t).maybeSingle();if(o)return console.warn("Supabase fetch failed, no local data available:",o.message),null;if(i)return{date:i.date,title:i.title,exercises:i.exercises}}catch(i){console.warn("Exception fetching workout plan from Supabase:",i)}return null},Ub=async(t,e)=>{const n=await qe();if(!n)return[];const r=`${t}-${String(e).padStart(2,"0")}-01`,i=`${t}-${String(e).padStart(2,"0")}-31`,a=Lv().filter(s=>s.user_id===n.id&&s.date>=r&&s.date<=i).map(s=>s.date);if(ge)try{const{data:s,error:l}=await _e.from("workout_plans").select("date").eq("user_id",n.id).gte("date",r).lte("date",i);if(!l&&s){const u=s.map(c=>c.date);return Array.from(new Set([...a,...u]))}}catch(s){console.warn("Exception fetching workout plans from Supabase, using localStorage only:",s)}return a},Rj=async(t,e)=>{if(!await qe()){console.warn("User not logged in, cannot save multi-day workout plan");return}const r=new Date(t);for(let i=0;i<e.length;i++){const o=e[i];if(o.isRestDay)continue;const a=new Date(r);a.setDate(a.getDate()+i);const s=a.toISOString().split("T")[0];await Kc(s,o.title,o.exercises)}},Lt=({className:t,variant:e="primary",isLoading:n,children:r,...i})=>{const o="inline-flex items-center justify-center px-6 py-4 rounded-[24px] font-semibold transition-all duration-300 active:scale-95 disabled:opacity-50 disabled:pointer-events-none text-sm tracking-wide",a={primary:"bg-royal-600 text-white hover:bg-royal-700 shadow-[0_10px_20px_-10px_rgba(124,58,237,0.5)]",secondary:"bg-royal-50 text-royal-700 hover:bg-royal-100",ghost:"bg-transparent text-gray-500 hover:text-royal-600 hover:bg-royal-50"};return m.jsx("button",{className:he(o,a[e],t),disabled:n||i.disabled,...i,children:n?m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):r})};var Mj={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $j,Dj;function jj(){return{geminiUrl:$j,vertexUrl:Dj}}function Lj(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const a=jj();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function Q(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function p(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in t))if(Array.isArray(n))t[s]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[s])){const l=t[s];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];p(c,e.slice(o+1),n[u])}else for(const u of l)p(u,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in t||(t[s]=[{}]);const l=t[s];p(l[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(s=>f(s,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Uj(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),a=new Set;let s=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){s=l;break}if(s!==-1&&o.length>s)for(let l=s;l<o.length;l++){const u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&a.add(u)}Vm(t,i,o,0,a)}}function Vm(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2),s=t;if(a in s&&Array.isArray(s[a]))for(const l of s[a])Vm(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,s=Object.keys(a).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of s)l[u]=a[u];for(const[u,c]of Object.entries(l)){const d=[];for(const h of n.slice(r))h==="*"?d.push(u):d.push(h);p(a,d,c)}for(const u of s)delete a[u]}}else{const a=t;o in a&&Vm(a[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fj(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const r=f(t,["resourceName"]);return r!=null&&p(e,["_url","resourceName"],r),e}function Bj(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],zj(a)),e}function Gj(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response"]);return a!=null&&p(e,["response"],Vj(a)),e}function zj(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>Hj(a))),p(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function Vj(t){const e={},n=f(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>qj(a))),p(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function Hj(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],Qj(n)),e}function qj(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],Zj(n)),e}function Wj(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Kj(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function Jj(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response"]);return a!=null&&p(e,["response"],Yj(a)),e}function Yj(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&p(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function nC(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response"]);return a!=null&&p(e,["response"],Xj(a)),e}function Xj(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&p(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function Qj(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],Uv(r));const i=f(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function Zj(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],Uv(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Fb;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Fb||(Fb={}));var Bb;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Bb||(Bb={}));var Gb;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Gb||(Gb={}));var we;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(we||(we={}));var zb;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(zb||(zb={}));var Vb;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Vb||(Vb={}));var Hb;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Hb||(Hb={}));var qb;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(qb||(qb={}));var Wb;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Wb||(Wb={}));var Kb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Kb||(Kb={}));var Jb;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Jb||(Jb={}));var Yb;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Yb||(Yb={}));var Xb;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Xb||(Xb={}));var Qb;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(Qb||(Qb={}));var Zb;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Zb||(Zb={}));var ew;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(ew||(ew={}));var tw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(tw||(tw={}));var nw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(nw||(nw={}));var rw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(rw||(rw={}));var iw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(iw||(iw={}));var ow;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ow||(ow={}));var Jc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Jc||(Jc={}));var aw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(aw||(aw={}));var sw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(sw||(sw={}));var lw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(lw||(lw={}));var Hm;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hm||(Hm={}));var uw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(uw||(uw={}));var cw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(cw||(cw={}));var dw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(dw||(dw={}));var fw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fw||(fw={}));var hw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(hw||(hw={}));var pw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(pw||(pw={}));var mw;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(mw||(mw={}));var gw;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(gw||(gw={}));var yw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(yw||(yw={}));var vw;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(vw||(vw={}));var xw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xw||(xw={}));var bw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(bw||(bw={}));var ww;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(ww||(ww={}));var _w;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(_w||(_w={}));var Sw;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Sw||(Sw={}));var Ew;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ew||(Ew={}));var Tw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Tw||(Tw={}));var kw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(kw||(kw={}));var Aw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Aw||(Aw={}));var Cw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cw||(Cw={}));var Pw;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Pw||(Pw={}));var Nw;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Nw||(Nw={}));var Iw;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Iw||(Iw={}));var Ow;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Ow||(Ow={}));var Rw;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Rw||(Rw={}));var Mw;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mw||(Mw={}));var $w;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})($w||($w={}));var Dw;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Dw||(Dw={}));var Uo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Uo||(Uo={}));class qm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class cs{get text(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const h of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,u+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&(g!==null||g!==void 0)&&c.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,o,a,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,o,a,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class jw{}class Lw{}class eL{}class tL{}class nL{}class rL{}class Uw{}class Fw{}class Bw{}class iL{}class Yc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Yc;let i;const o=e;return n?i=Gj(o):i=Bj(o),Object.assign(r,i),r}}class Gw{}class zw{}class Vw{}class Hw{}class oL{}class aL{}class sL{}class Fv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Fv,o=Jj(e);return Object.assign(r,o),r}}class lL{}class uL{}class cL{}class qw{}class dL{get text(){var e,n,r;let i="",o=!1;const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="text"&&l!=="thought"&&u!==null&&a.push(l);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;o=!0,i+=s.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[s,l]of Object.entries(a))s!=="inlineData"&&l!==null&&o.push(s);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class fL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Bv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Bv,o=nC(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function rC(t,e){const n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function iC(t){return Array.isArray(t)?t.map(e=>Xc(e)):[Xc(t)]}function Xc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function oC(t){const e=Xc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aC(t){const e=Xc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ww(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function sC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ww(e)):[Ww(t)]}function Wm(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Kw(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Jw(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Rt(t){if(t==null)throw new Error("ContentUnion is required");return Wm(t)?t:{role:"user",parts:sC(t)}}function Gv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Rt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Rt(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Rt(n)):[Rt(e)]}function wn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Kw(t)||Jw(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Rt(t)]}const e=[],n=[],r=Wm(t[0]);for(const i of t){const o=Wm(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Kw(i)||Jw(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:sC(n)}),e}function hL(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(we).includes(n[0].toUpperCase())?n[0].toUpperCase():we.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(we).includes(r.toUpperCase())?r.toUpperCase():we.TYPE_UNSPECIFIED})}}function Qo(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&hL(t.type,e);for(const[a,s]of Object.entries(t))if(s!=null)if(a=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(we).includes(s.toUpperCase())?s.toUpperCase():we.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Qo(s);else if(r.includes(a)){const l=[];for(const u of s){if(u.type=="null"){e.nullable=!0;continue}l.push(Qo(u))}e[a]=l}else if(i.includes(a)){const l={};for(const[u,c]of Object.entries(s))l[u]=Qo(c);e[a]=l}else{if(a==="additionalProperties")continue;e[a]=s}return e}function zv(t){return Qo(t)}function Vv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Hv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function La(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Qo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Qo(e.response));return t}function Ua(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function pL(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return pL(t,e,"cachedContents")}function lC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function fi(t){return Uv(t)}function mL(t){return t!=null&&typeof t=="object"&&"name"in t}function gL(t){return t!=null&&typeof t=="object"&&"video"in t}function yL(t){return t!=null&&typeof t=="object"&&"uri"in t}function uC(t){var e;let n;if(mL(t)&&(n=t.name),!(yL(t)&&(n=t.uri,n===void 0))&&!(gL(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function cC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function dC(t){for(const e of["models","tunedModels","publisherModels"])if(vL(t,e))return t[e];return[]}function vL(t,e){return t!==null&&typeof t=="object"&&e in t}function xL(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function bL(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=xL(i,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function fC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function wL(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function hC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const l=a.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Fa(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function pC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _L(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const r=f(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>nU(a))),p(e,["inlinedResponses"],o)}const i=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["inlinedEmbedContentResponses"],o)}return e}function SL(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const r=f(t,["gcsDestination","outputUriPrefix"]);r!=null&&p(e,["gcsUri"],r);const i=f(t,["bigqueryDestination","outputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function EL(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const r=f(t,["gcsUri"]);r!=null&&p(e,["gcsDestination","outputUriPrefix"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&p(e,["bigqueryDestination","outputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pc(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata","displayName"]);r!=null&&p(e,["displayName"],r);const i=f(t,["metadata","state"]);i!=null&&p(e,["state"],pC(i));const o=f(t,["metadata","createTime"]);o!=null&&p(e,["createTime"],o);const a=f(t,["metadata","endTime"]);a!=null&&p(e,["endTime"],a);const s=f(t,["metadata","updateTime"]);s!=null&&p(e,["updateTime"],s);const l=f(t,["metadata","model"]);l!=null&&p(e,["model"],l);const u=f(t,["metadata","output"]);return u!=null&&p(e,["dest"],_L(hC(u))),e}function Km(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=f(t,["state"]);i!=null&&p(e,["state"],pC(i));const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["createTime"]);a!=null&&p(e,["createTime"],a);const s=f(t,["startTime"]);s!=null&&p(e,["startTime"],s);const l=f(t,["endTime"]);l!=null&&p(e,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(e,["updateTime"],u);const c=f(t,["model"]);c!=null&&p(e,["model"],c);const d=f(t,["inputConfig"]);d!=null&&p(e,["src"],TL(d));const h=f(t,["outputConfig"]);h!=null&&p(e,["dest"],SL(hC(h)));const g=f(t,["completionStats"]);return g!=null&&p(e,["completionStats"],g),e}function TL(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const r=f(t,["gcsSource","uris"]);r!=null&&p(e,["gcsUri"],r);const i=f(t,["bigquerySource","inputUri"]);return i!=null&&p(e,["bigqueryUri"],i),e}function kL(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=f(e,["fileName"]);r!=null&&p(n,["fileName"],r);const i=f(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>tU(t,a))),p(n,["requests","requests"],o)}return n}function AL(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const r=f(t,["gcsUri"]);r!=null&&p(e,["gcsSource","uris"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&p(e,["bigquerySource","inputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function CL(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function PL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function NL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function IL(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],OL(r));const i=f(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const o=f(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=f(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const s=f(t,["groundingMetadata"]);s!=null&&p(e,["groundingMetadata"],s);const l=f(t,["index"]);l!=null&&p(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),p(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&p(e,["urlContextMetadata"],d),e}function OL(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["citations"],r)}return e}function mC(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>uU(o))),p(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&p(e,["role"],r),e}function RL(t,e){const n={},r=f(t,["displayName"]);if(e!==void 0&&r!=null&&p(e,["batch","displayName"],r),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function ML(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=f(t,["dest"]);return e!==void 0&&i!=null&&p(e,["outputConfig"],EL(wL(i))),n}function Yw(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["src"]);i!=null&&p(n,["batch","inputConfig"],kL(t,fC(t,i)));const o=f(e,["config"]);return o!=null&&RL(o,n),n}function $L(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["model"],Se(t,r));const i=f(e,["src"]);i!=null&&p(n,["inputConfig"],AL(fC(t,i)));const o=f(e,["config"]);return o!=null&&ML(o,n),n}function DL(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["batch","displayName"],r),n}function jL(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["src"]);i!=null&&p(n,["batch","inputConfig"],VL(t,i));const o=f(e,["config"]);return o!=null&&DL(o,n),n}function LL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function UL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function FL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&p(e,["name"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);return o!=null&&p(e,["error"],o),e}function BL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&p(e,["name"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);return o!=null&&p(e,["error"],o),e}function GL(t,e){const n={},r=f(e,["contents"]);if(r!=null){let o=Gv(t,r);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["requests[]","request","content"],o)}const i=f(e,["config"]);return i!=null&&(p(n,["_self"],zL(i,n)),Uj(n,{"requests[].*":"requests[].request.*"})),n}function zL(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const o=f(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function VL(t,e){const n={},r=f(e,["fileName"]);r!=null&&p(n,["file_name"],r);const i=f(e,["inlinedRequests"]);return i!=null&&p(n,["requests"],GL(t,i)),n}function HL(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function qL(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const r=f(t,["args"]);r!=null&&p(e,["args"],r);const i=f(t,["name"]);if(i!=null&&p(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WL(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&p(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KL(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],mC(Rt(i)));const o=f(e,["temperature"]);o!=null&&p(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&p(r,["topP"],a);const s=f(e,["topK"]);s!=null&&p(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&p(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&p(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&p(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&p(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&p(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&p(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&p(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&p(r,["responseSchema"],zv(b));const w=f(e,["responseJsonSchema"]);if(w!=null&&p(r,["responseJsonSchema"],w),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let j=_;Array.isArray(j)&&(j=j.map(M=>cU(M))),p(n,["safetySettings"],j)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let j=Ua(T);Array.isArray(j)&&(j=j.map(M=>fU(La(M)))),p(n,["tools"],j)}const S=f(e,["toolConfig"]);if(n!==void 0&&S!=null&&p(n,["toolConfig"],dU(S)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(e,["cachedContent"]);n!==void 0&&E!=null&&p(n,["cachedContent"],Mr(t,E));const k=f(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const A=f(e,["mediaResolution"]);A!=null&&p(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&p(r,["speechConfig"],Vv(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=f(e,["thinkingConfig"]);R!=null&&p(r,["thinkingConfig"],R);const I=f(e,["imageConfig"]);I!=null&&p(r,["imageConfig"],eU(I));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&p(r,["enableEnhancedCivicAnswers"],O),r}function JL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>IL(u))),p(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=f(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=f(t,["responseId"]);a!=null&&p(e,["responseId"],a);const s=f(t,["usageMetadata"]);return s!=null&&p(e,["usageMetadata"],s),e}function YL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function XL(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Fa(t,r)),n}function QL(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function ZL(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function eU(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function tU(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["request","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let s=wn(i);Array.isArray(s)&&(s=s.map(l=>mC(l))),p(n,["request","contents"],s)}const o=f(e,["metadata"]);o!=null&&p(n,["metadata"],o);const a=f(e,["config"]);return a!=null&&p(n,["request","generationConfig"],KL(t,a,f(n,["request"],{}))),n}function nU(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],JL(n));const r=f(t,["error"]);return r!=null&&p(e,["error"],r),e}function rU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);if(e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function iU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);e!==void 0&&i!=null&&p(e,["_query","pageToken"],i);const o=f(t,["filter"]);return e!==void 0&&o!=null&&p(e,["_query","filter"],o),n}function oU(t){const e={},n=f(t,["config"]);return n!=null&&rU(n,e),e}function aU(t){const e={},n=f(t,["config"]);return n!=null&&iU(n,e),e}function sU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>pc(a))),p(e,["batchJobs"],o)}return e}function lU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Km(a))),p(e,["batchJobs"],o)}return e}function uU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&p(e,["fileData"],HL(o));const a=f(t,["functionCall"]);a!=null&&p(e,["functionCall"],qL(a));const s=f(t,["functionResponse"]);s!=null&&p(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],CL(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const c=f(t,["thought"]);c!=null&&p(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&p(e,["videoMetadata"],h),e}function cU(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function dU(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],WL(r)),e}function fU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],QL(a));const s=f(t,["googleSearch"]);s!=null&&p(e,["googleSearch"],ZL(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(kr||(kr={}));class io{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hU extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new io(kr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Yw(this.apiClient,e),r=n._url,i=Q("{model}:batchGenerateContent",r),s=n.batch.inputConfig.requests,l=s.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const h=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=h,d.request=g}u.push(d)}return s.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=$L(this.apiClient,e);return s=Q("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Km(c))}else{const u=Yw(this.apiClient,e);return s=Q("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>pc(c))}}async createEmbeddingsInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jL(this.apiClient,e);return o=Q("{model}:asyncBatchEmbedContent",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>pc(l))}}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=XL(this.apiClient,e);return s=Q("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Km(c))}else{const u=YL(this.apiClient,e);return s=Q("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>pc(c))}}async cancel(e){var n,r,i,o;let a="",s={};if(this.apiClient.isVertexAI()){const l=NL(this.apiClient,e);a=Q("batchPredictionJobs/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=PL(this.apiClient,e);a=Q("batches/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=aU(e);return s=Q("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=lU(c),h=new qw;return Object.assign(h,d),h})}else{const u=oU(e);return s=Q("batches",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=sU(c),h=new qw;return Object.assign(h,d),h})}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=UL(this.apiClient,e);return s=Q("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>BL(c))}else{const u=LL(this.apiClient,e);return s=Q("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>FL(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pU(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Xw(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>jU(o))),p(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&p(e,["role"],r),e}function mU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let c=wn(a);Array.isArray(c)&&(c=c.map(d=>Xw(d))),p(e,["contents"],c)}const s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Xw(Rt(s)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>UU(d))),p(e,["tools"],c)}const u=f(t,["toolConfig"]);if(e!==void 0&&u!=null&&p(e,["toolConfig"],LU(u)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function gU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&p(e,["expireTime"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&p(e,["displayName"],o);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let d=wn(a);Array.isArray(d)&&(d=d.map(h=>h)),p(e,["contents"],d)}const s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Rt(s));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>FU(h))),p(e,["tools"],d)}const u=f(t,["toolConfig"]);e!==void 0&&u!=null&&p(e,["toolConfig"],u);const c=f(t,["kmsKeyName"]);return e!==void 0&&c!=null&&p(e,["encryption_spec","kmsKeyName"],c),n}function yU(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["model"],rC(t,r));const i=f(e,["config"]);return i!=null&&mU(i,n),n}function vU(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["model"],rC(t,r));const i=f(e,["config"]);return i!=null&&gU(i,n),n}function xU(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Mr(t,r)),n}function bU(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Mr(t,r)),n}function wU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function _U(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function SU(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function EU(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const r=f(t,["args"]);r!=null&&p(e,["args"],r);const i=f(t,["name"]);if(i!=null&&p(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function TU(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&p(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function kU(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const r=f(t,["name"]);r!=null&&p(e,["name"],r);const i=f(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&p(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&p(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function AU(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Mr(t,r)),n}function CU(t,e){const n={},r=f(e,["name"]);return r!=null&&p(n,["_url","name"],Mr(t,r)),n}function PU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function NU(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function IU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function OU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function RU(t){const e={},n=f(t,["config"]);return n!=null&&IU(n,e),e}function MU(t){const e={},n=f(t,["config"]);return n!=null&&OU(n,e),e}function $U(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function DU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["cachedContents"],o)}return e}function jU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&p(e,["fileData"],SU(o));const a=f(t,["functionCall"]);a!=null&&p(e,["functionCall"],EU(a));const s=f(t,["functionResponse"]);s!=null&&p(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],pU(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const c=f(t,["thought"]);c!=null&&p(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&p(e,["videoMetadata"],h),e}function LU(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],TU(r)),e}function UU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],PU(a));const s=f(t,["googleSearch"]);s!=null&&p(e,["googleSearch"],NU(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function FU(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&p(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>kU(h))),p(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&p(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function BU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function GU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&p(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&p(e,["expireTime"],i),n}function zU(t,e){const n={},r=f(e,["name"]);r!=null&&p(n,["_url","name"],Mr(t,r));const i=f(e,["config"]);return i!=null&&BU(i,n),n}function VU(t,e){const n={},r=f(e,["name"]);r!=null&&p(n,["_url","name"],Mr(t,r));const i=f(e,["config"]);return i!=null&&GU(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HU extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new io(kr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=vU(this.apiClient,e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=yU(this.apiClient,e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=CU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=AU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=bU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=_U(c),h=new Vw;return Object.assign(h,d),h})}else{const u=xU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=wU(c),h=new Vw;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=VU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=zU(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=MU(e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=DU(c),h=new Hw;return Object.assign(h,d),h})}else{const u=RU(e);return s=Q("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=$U(c),h=new Hw;return Object.assign(h,d),h})}}}function Qc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Qw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(t){return this instanceof ce?(this.v=t,this):new ce(t)}function Vn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(y){return Promise.resolve(y).then(g,d)}}function s(g,y){r[g]&&(i[g]=function(x){return new Promise(function(v,b){o.push([g,x,v,b])>1||l(g,x)})},y&&(i[g]=y(i[g])))}function l(g,y){try{u(r[g](y))}catch(x){h(o[0][3],x)}}function u(g){g.value instanceof ce?Promise.resolve(g.value.v).then(c,d):h(o[0][2],g)}function c(g){l("next",g)}function d(g){l("throw",g)}function h(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Hn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qw=="function"?Qw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,l){a=t[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qU(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:gC(n)}function gC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function WU(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Zw(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!gC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class KU{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new JU(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class JU{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),WU(o)}async sendMessage(e){var n;await this.sendPromise;const r=Rt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,s;const l=await i,u=(a=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let h=[];c!=null&&(h=(s=c.slice(d))!==null&&s!==void 0?s:[]);const g=u?[u]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Rt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?Zw(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Vn(this,arguments,function*(){var i,o,a,s,l,u;const c=[];try{for(var d=!0,h=Hn(e),g;g=yield ce(h.next()),i=g.done,!i;d=!0){s=g.value,d=!1;const y=s;if(qU(y)){const x=(u=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;x!==void 0&&c.push(x)}yield yield ce(y)}}catch(y){o={error:y}}finally{try{!d&&!i&&(a=h.return)&&(yield ce(a.call(h)))}finally{if(o)throw o.error}}this.recordHistory(n,c)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Zw(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Af extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Af.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YU(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function XU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function QU(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],uC(n)),e}function ZU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function e5(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],uC(n)),e}function t5(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function n5(t){const e={},n=f(t,["config"]);return n!=null&&t5(n,e),e}function r5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class i5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new io(kr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=n5(e);return o=Q("files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=r5(l),c=new lL;return Object.assign(c,u),c})}}async createInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=YU(e);return o=Q("upload/v1beta/files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=XU(l),c=new uL;return Object.assign(c,u),c})}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=e5(e);return o=Q("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=QU(e);return o=Q("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=ZU(l),c=new cL;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function o5(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>w5(o))),p(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&p(e,["role"],r),e}function a5(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function s5(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const r=f(t,["args"]);r!=null&&p(e,["args"],r);const i=f(t,["name"]);if(i!=null&&p(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function l5(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const r=f(t,["name"]);r!=null&&p(e,["name"],r);const i=f(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&p(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&p(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function u5(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&p(e,["audioTimestamp"],i);const o=f(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=f(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const s=f(t,["frequencyPenalty"]);s!=null&&p(e,["frequencyPenalty"],s);const l=f(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&p(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&p(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&p(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&p(e,["responseMimeType"],g);const y=f(t,["responseModalities"]);y!=null&&p(e,["responseModalities"],y);const x=f(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const v=f(t,["routingConfig"]);v!=null&&p(e,["routingConfig"],v);const b=f(t,["seed"]);b!=null&&p(e,["seed"],b);const w=f(t,["speechConfig"]);w!=null&&p(e,["speechConfig"],w);const _=f(t,["stopSequences"]);_!=null&&p(e,["stopSequences"],_);const T=f(t,["temperature"]);T!=null&&p(e,["temperature"],T);const S=f(t,["thinkingConfig"]);S!=null&&p(e,["thinkingConfig"],S);const E=f(t,["topK"]);E!=null&&p(e,["topK"],E);const k=f(t,["topP"]);if(k!=null&&p(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function c5(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function d5(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function f5(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],Hv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],o5(Rt(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let E=Ua(x);Array.isArray(E)&&(E=E.map(k=>S5(La(k)))),p(e,["setup","tools"],E)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],_5(v));const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&p(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&p(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);if(e!==void 0&&S!=null&&p(e,["setup","proactivity"],S),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function h5(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],u5(r));const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],Hv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],Rt(y));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let k=Ua(x);Array.isArray(k)&&(k=k.map(A=>E5(La(A)))),p(e,["setup","tools"],k)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],v);const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&p(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&p(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);e!==void 0&&S!=null&&p(e,["setup","proactivity"],S);const E=f(t,["explicitVadSignal"]);return e!==void 0&&E!=null&&p(e,["setup","explicitVadSignal"],E),n}function p5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["setup","model"],Se(t,r));const i=f(e,["config"]);return i!=null&&p(n,["config"],f5(i,n)),n}function m5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["setup","model"],Se(t,r));const i=f(e,["config"]);return i!=null&&p(n,["config"],h5(i,n)),n}function g5(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function y5(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["weightedPrompts"],r)}return e}function v5(t){const e={},n=f(t,["media"]);if(n!=null){let u=iC(n);Array.isArray(u)&&(u=u.map(c=>mc(c))),p(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&p(e,["audio"],mc(aC(r)));const i=f(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=f(t,["video"]);o!=null&&p(e,["video"],mc(oC(o)));const a=f(t,["text"]);a!=null&&p(e,["text"],a);const s=f(t,["activityStart"]);s!=null&&p(e,["activityStart"],s);const l=f(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function x5(t){const e={},n=f(t,["media"]);if(n!=null){let u=iC(n);Array.isArray(u)&&(u=u.map(c=>c)),p(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&p(e,["audio"],aC(r));const i=f(t,["audioStreamEnd"]);i!=null&&p(e,["audioStreamEnd"],i);const o=f(t,["video"]);o!=null&&p(e,["video"],oC(o));const a=f(t,["text"]);a!=null&&p(e,["text"],a);const s=f(t,["activityStart"]);s!=null&&p(e,["activityStart"],s);const l=f(t,["activityEnd"]);return l!=null&&p(e,["activityEnd"],l),e}function b5(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const r=f(t,["serverContent"]);r!=null&&p(e,["serverContent"],r);const i=f(t,["toolCall"]);i!=null&&p(e,["toolCall"],i);const o=f(t,["toolCallCancellation"]);o!=null&&p(e,["toolCallCancellation"],o);const a=f(t,["usageMetadata"]);a!=null&&p(e,["usageMetadata"],T5(a));const s=f(t,["goAway"]);s!=null&&p(e,["goAway"],s);const l=f(t,["sessionResumptionUpdate"]);l!=null&&p(e,["sessionResumptionUpdate"],l);const u=f(t,["voiceActivityDetectionSignal"]);return u!=null&&p(e,["voiceActivityDetectionSignal"],u),e}function w5(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&p(e,["fileData"],a5(o));const a=f(t,["functionCall"]);a!=null&&p(e,["functionCall"],s5(a));const s=f(t,["functionResponse"]);s!=null&&p(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],mc(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const c=f(t,["thought"]);c!=null&&p(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&p(e,["videoMetadata"],h),e}function _5(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function S5(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],c5(a));const s=f(t,["googleSearch"]);s!=null&&p(e,["googleSearch"],d5(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function E5(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&p(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>l5(h))),p(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&p(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function T5(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const r=f(t,["cachedContentTokenCount"]);r!=null&&p(e,["cachedContentTokenCount"],r);const i=f(t,["candidatesTokenCount"]);i!=null&&p(e,["responseTokenCount"],i);const o=f(t,["toolUsePromptTokenCount"]);o!=null&&p(e,["toolUsePromptTokenCount"],o);const a=f(t,["thoughtsTokenCount"]);a!=null&&p(e,["thoughtsTokenCount"],a);const s=f(t,["totalTokenCount"]);s!=null&&p(e,["totalTokenCount"],s);const l=f(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["promptTokensDetails"],g)}const u=f(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["cacheTokensDetails"],g)}const c=f(t,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["responseTokensDetails"],g)}const d=f(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),p(e,["toolUsePromptTokensDetails"],g)}const h=f(t,["trafficType"]);return h!=null&&p(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function k5(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function A5(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&p(e,["citationMetadata"],C5(r));const i=f(t,["tokenCount"]);i!=null&&p(e,["tokenCount"],i);const o=f(t,["finishReason"]);o!=null&&p(e,["finishReason"],o);const a=f(t,["avgLogprobs"]);a!=null&&p(e,["avgLogprobs"],a);const s=f(t,["groundingMetadata"]);s!=null&&p(e,["groundingMetadata"],s);const l=f(t,["index"]);l!=null&&p(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&p(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),p(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&p(e,["urlContextMetadata"],d),e}function C5(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),p(e,["citations"],r)}return e}function P5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let o=wn(i);Array.isArray(o)&&(o=o.map(a=>a)),p(n,["contents"],o)}return n}function N5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["tokensInfo"],i)}return e}function I5(t){const e={},n=f(t,["values"]);n!=null&&p(e,["values"],n);const r=f(t,["statistics"]);return r!=null&&p(e,["statistics"],O5(r)),e}function O5(t){const e={},n=f(t,["truncated"]);n!=null&&p(e,["truncated"],n);const r=f(t,["token_count"]);return r!=null&&p(e,["tokenCount"],r),e}function Cf(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>B4(o))),p(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&p(e,["role"],r),e}function R5(t){const e={},n=f(t,["controlType"]);n!=null&&p(e,["controlType"],n);const r=f(t,["enableControlImageComputation"]);return r!=null&&p(e,["computeControl"],r),e}function M5(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function $5(t,e){const n={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&p(e,["systemInstruction"],Rt(r));const i=f(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>bC(s))),p(e,["tools"],a)}const o=f(t,["generationConfig"]);return e!==void 0&&o!=null&&p(e,["generationConfig"],k4(o)),n}function D5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let a=wn(i);Array.isArray(a)&&(a=a.map(s=>Cf(s))),p(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&M5(o),n}function j5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let a=wn(i);Array.isArray(a)&&(a=a.map(s=>s)),p(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&$5(o,n),n}function L5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);r!=null&&p(e,["totalTokens"],r);const i=f(t,["cachedContentTokenCount"]);return i!=null&&p(e,["cachedContentTokenCount"],i),e}function U5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);return r!=null&&p(e,["totalTokens"],r),e}function F5(t,e){const n={},r=f(e,["model"]);return r!=null&&p(n,["_url","name"],Se(t,r)),n}function B5(t,e){const n={},r=f(e,["model"]);return r!=null&&p(n,["_url","name"],Se(t,r)),n}function G5(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function z5(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function V5(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const s=f(t,["guidanceScale"]);e!==void 0&&s!=null&&p(e,["parameters","guidanceScale"],s);const l=f(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&p(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const b=f(t,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const w=f(t,["editMode"]);e!==void 0&&w!=null&&p(e,["parameters","editMode"],w);const _=f(t,["baseSteps"]);return e!==void 0&&_!=null&&p(e,["parameters","editConfig","baseSteps"],_),n}function H5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=f(e,["referenceImages"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>W4(l))),p(n,["instances[0]","referenceImages"],s)}const a=f(e,["config"]);return a!=null&&V5(a,n),n}function q5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Pf(o))),p(e,["generatedImages"],i)}return e}function W5(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&p(e,["requests[]","title"],i);const o=f(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&p(e,["requests[]","outputDimensionality"],o),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function K5(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&p(e,["instances[]","task_type"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&p(e,["instances[]","title"],i);const o=f(t,["outputDimensionality"]);e!==void 0&&o!=null&&p(e,["parameters","outputDimensionality"],o);const a=f(t,["mimeType"]);e!==void 0&&a!=null&&p(e,["instances[]","mimeType"],a);const s=f(t,["autoTruncate"]);return e!==void 0&&s!=null&&p(e,["parameters","autoTruncate"],s),n}function J5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let s=Gv(t,i);Array.isArray(s)&&(s=s.map(l=>l)),p(n,["requests[]","content"],s)}const o=f(e,["config"]);o!=null&&W5(o,n);const a=f(e,["model"]);return a!==void 0&&p(n,["requests[]","model"],Se(t,a)),n}function Y5(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let a=Gv(t,i);Array.isArray(a)&&(a=a.map(s=>s)),p(n,["instances[]","content"],a)}const o=f(e,["config"]);return o!=null&&K5(o,n),n}function X5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["embeddings"],o)}const i=f(t,["metadata"]);return i!=null&&p(e,["metadata"],i),e}function Q5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>I5(a))),p(e,["embeddings"],o)}const i=f(t,["metadata"]);return i!=null&&p(e,["metadata"],i),e}function Z5(t){const e={},n=f(t,["endpoint"]);n!=null&&p(e,["name"],n);const r=f(t,["deployedModelId"]);return r!=null&&p(e,["deployedModelId"],r),e}function e4(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function t4(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const r=f(t,["args"]);r!=null&&p(e,["args"],r);const i=f(t,["name"]);if(i!=null&&p(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function n4(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&p(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&p(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function r4(t){const e={},n=f(t,["description"]);n!=null&&p(e,["description"],n);const r=f(t,["name"]);r!=null&&p(e,["name"],r);const i=f(t,["parameters"]);i!=null&&p(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&p(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&p(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&p(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function i4(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Cf(Rt(i)));const o=f(e,["temperature"]);o!=null&&p(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&p(r,["topP"],a);const s=f(e,["topK"]);s!=null&&p(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&p(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&p(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&p(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&p(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&p(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&p(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&p(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&p(r,["responseSchema"],zv(b));const w=f(e,["responseJsonSchema"]);if(w!=null&&p(r,["responseJsonSchema"],w),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let j=_;Array.isArray(j)&&(j=j.map(M=>K4(M))),p(n,["safetySettings"],j)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let j=Ua(T);Array.isArray(j)&&(j=j.map(M=>tF(La(M)))),p(n,["tools"],j)}const S=f(e,["toolConfig"]);if(n!==void 0&&S!=null&&p(n,["toolConfig"],eF(S)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(e,["cachedContent"]);n!==void 0&&E!=null&&p(n,["cachedContent"],Mr(t,E));const k=f(e,["responseModalities"]);k!=null&&p(r,["responseModalities"],k);const A=f(e,["mediaResolution"]);A!=null&&p(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&p(r,["speechConfig"],Vv(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=f(e,["thinkingConfig"]);R!=null&&p(r,["thinkingConfig"],R);const I=f(e,["imageConfig"]);I!=null&&p(r,["imageConfig"],I4(I));const O=f(e,["enableEnhancedCivicAnswers"]);return O!=null&&p(r,["enableEnhancedCivicAnswers"],O),r}function o4(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&p(n,["systemInstruction"],Rt(i));const o=f(e,["temperature"]);o!=null&&p(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&p(r,["topP"],a);const s=f(e,["topK"]);s!=null&&p(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&p(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&p(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&p(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&p(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&p(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&p(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&p(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&p(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&p(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&p(r,["responseSchema"],zv(b));const w=f(e,["responseJsonSchema"]);w!=null&&p(r,["responseJsonSchema"],w);const _=f(e,["routingConfig"]);_!=null&&p(r,["routingConfig"],_);const T=f(e,["modelSelectionConfig"]);T!=null&&p(r,["modelConfig"],T);const S=f(e,["safetySettings"]);if(n!==void 0&&S!=null){let L=S;Array.isArray(L)&&(L=L.map(B=>B)),p(n,["safetySettings"],L)}const E=f(e,["tools"]);if(n!==void 0&&E!=null){let L=Ua(E);Array.isArray(L)&&(L=L.map(B=>bC(La(B)))),p(n,["tools"],L)}const k=f(e,["toolConfig"]);n!==void 0&&k!=null&&p(n,["toolConfig"],k);const A=f(e,["labels"]);n!==void 0&&A!=null&&p(n,["labels"],A);const C=f(e,["cachedContent"]);n!==void 0&&C!=null&&p(n,["cachedContent"],Mr(t,C));const R=f(e,["responseModalities"]);R!=null&&p(r,["responseModalities"],R);const I=f(e,["mediaResolution"]);I!=null&&p(r,["mediaResolution"],I);const O=f(e,["speechConfig"]);O!=null&&p(r,["speechConfig"],Vv(O));const j=f(e,["audioTimestamp"]);j!=null&&p(r,["audioTimestamp"],j);const M=f(e,["thinkingConfig"]);M!=null&&p(r,["thinkingConfig"],M);const U=f(e,["imageConfig"]);if(U!=null&&p(r,["imageConfig"],O4(U)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function e_(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let a=wn(i);Array.isArray(a)&&(a=a.map(s=>Cf(s))),p(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&p(n,["generationConfig"],i4(t,o,n)),n}function t_(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["contents"]);if(i!=null){let a=wn(i);Array.isArray(a)&&(a=a.map(s=>s)),p(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&p(n,["generationConfig"],o4(t,o,n)),n}function n_(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>A5(u))),p(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&p(e,["modelVersion"],i);const o=f(t,["promptFeedback"]);o!=null&&p(e,["promptFeedback"],o);const a=f(t,["responseId"]);a!=null&&p(e,["responseId"],a);const s=f(t,["usageMetadata"]);return s!=null&&p(e,["usageMetadata"],s),e}function r_(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),p(e,["candidates"],u)}const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const o=f(t,["modelVersion"]);o!=null&&p(e,["modelVersion"],o);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const s=f(t,["responseId"]);s!=null&&p(e,["responseId"],s);const l=f(t,["usageMetadata"]);return l!=null&&p(e,["usageMetadata"],l),e}function a4(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=f(t,["aspectRatio"]);e!==void 0&&i!=null&&p(e,["parameters","aspectRatio"],i);const o=f(t,["guidanceScale"]);if(e!==void 0&&o!=null&&p(e,["parameters","guidanceScale"],o),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&p(e,["parameters","safetySetting"],a);const s=f(t,["personGeneration"]);e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s);const l=f(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&p(e,["parameters","includeSafetyAttributes"],l);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const c=f(t,["language"]);e!==void 0&&c!=null&&p(e,["parameters","language"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const h=f(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&p(e,["parameters","outputOptions","compressionQuality"],h),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=f(t,["imageSize"]);if(e!==void 0&&g!=null&&p(e,["parameters","sampleImageSize"],g),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function s4(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&p(e,["parameters","negativePrompt"],i);const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&p(e,["parameters","sampleCount"],o);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const s=f(t,["guidanceScale"]);e!==void 0&&s!=null&&p(e,["parameters","guidanceScale"],s);const l=f(t,["seed"]);e!==void 0&&l!=null&&p(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&p(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&p(e,["parameters","language"],g);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&p(e,["parameters","outputOptions","mimeType"],y);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&p(e,["parameters","addWatermark"],v);const b=f(t,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const w=f(t,["imageSize"]);e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w);const _=f(t,["enhancePrompt"]);return e!==void 0&&_!=null&&p(e,["parameters","enhancePrompt"],_),n}function l4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=f(e,["config"]);return o!=null&&a4(o,n),n}function u4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=f(e,["config"]);return o!=null&&s4(o,n),n}function c4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>_4(a))),p(e,["generatedImages"],o)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],vC(i)),e}function d4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Pf(a))),p(e,["generatedImages"],o)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&p(e,["positivePromptSafetyAttributes"],xC(i)),e}function f4(t,e){const n={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=f(t,["durationSeconds"]);if(e!==void 0&&i!=null&&p(e,["parameters","durationSeconds"],i),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&p(e,["parameters","aspectRatio"],o);const a=f(t,["resolution"]);e!==void 0&&a!=null&&p(e,["parameters","resolution"],a);const s=f(t,["personGeneration"]);if(e!==void 0&&s!=null&&p(e,["parameters","personGeneration"],s),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&p(e,["parameters","negativePrompt"],l);const u=f(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&p(e,["parameters","enhancePrompt"],u),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=f(t,["lastFrame"]);e!==void 0&&c!=null&&p(e,["instances[0]","lastFrame"],Nf(c));const d=f(t,["referenceImages"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>pF(g))),p(e,["instances[0]","referenceImages"],h)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function h4(t,e){const n={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const o=f(t,["fps"]);e!==void 0&&o!=null&&p(e,["parameters","fps"],o);const a=f(t,["durationSeconds"]);e!==void 0&&a!=null&&p(e,["parameters","durationSeconds"],a);const s=f(t,["seed"]);e!==void 0&&s!=null&&p(e,["parameters","seed"],s);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=f(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&p(e,["parameters","personGeneration"],c);const d=f(t,["pubsubTopic"]);e!==void 0&&d!=null&&p(e,["parameters","pubsubTopic"],d);const h=f(t,["negativePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","negativePrompt"],h);const g=f(t,["enhancePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","enhancePrompt"],g);const y=f(t,["generateAudio"]);e!==void 0&&y!=null&&p(e,["parameters","generateAudio"],y);const x=f(t,["lastFrame"]);e!==void 0&&x!=null&&p(e,["instances[0]","lastFrame"],Jn(x));const v=f(t,["referenceImages"]);if(e!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>mF(T))),p(e,["instances[0]","referenceImages"],_)}const b=f(t,["mask"]);e!==void 0&&b!=null&&p(e,["instances[0]","mask"],hF(b));const w=f(t,["compressionQuality"]);return e!==void 0&&w!=null&&p(e,["parameters","compressionQuality"],w),n}function p4(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response","generateVideoResponse"]);return a!=null&&p(e,["response"],v4(a)),e}function m4(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response"]);return a!=null&&p(e,["response"],x4(a)),e}function g4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=f(e,["image"]);o!=null&&p(n,["instances[0]","image"],Nf(o));const a=f(e,["video"]);a!=null&&p(n,["instances[0]","video"],wC(a));const s=f(e,["source"]);s!=null&&b4(s,n);const l=f(e,["config"]);return l!=null&&f4(l,n),n}function y4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["prompt"]);i!=null&&p(n,["instances[0]","prompt"],i);const o=f(e,["image"]);o!=null&&p(n,["instances[0]","image"],Jn(o));const a=f(e,["video"]);a!=null&&p(n,["instances[0]","video"],_C(a));const s=f(e,["source"]);s!=null&&w4(s,n);const l=f(e,["config"]);return l!=null&&h4(l,n),n}function v4(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>E4(a))),p(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function x4(t){const e={},n=f(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>T4(a))),p(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&p(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&p(e,["raiMediaFilteredReasons"],i),e}function b4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],Nf(i));const o=f(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],wC(o)),n}function w4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],Jn(i));const o=f(t,["video"]);return e!==void 0&&o!=null&&p(e,["instances[0]","video"],_C(o)),n}function _4(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],R4(n));const r=f(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=f(t,["_self"]);return i!=null&&p(e,["safetyAttributes"],vC(i)),e}function Pf(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],yC(n));const r=f(t,["raiFilteredReason"]);r!=null&&p(e,["raiFilteredReason"],r);const i=f(t,["_self"]);i!=null&&p(e,["safetyAttributes"],xC(i));const o=f(t,["prompt"]);return o!=null&&p(e,["enhancedPrompt"],o),e}function S4(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["mask"],yC(n));const r=f(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(e,["labels"],i)}return e}function E4(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],dF(n)),e}function T4(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],fF(n)),e}function k4(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&p(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&p(e,["audioTimestamp"],i);const o=f(t,["candidateCount"]);o!=null&&p(e,["candidateCount"],o);const a=f(t,["enableAffectiveDialog"]);a!=null&&p(e,["enableAffectiveDialog"],a);const s=f(t,["frequencyPenalty"]);s!=null&&p(e,["frequencyPenalty"],s);const l=f(t,["logprobs"]);l!=null&&p(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&p(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&p(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&p(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&p(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&p(e,["responseMimeType"],g);const y=f(t,["responseModalities"]);y!=null&&p(e,["responseModalities"],y);const x=f(t,["responseSchema"]);x!=null&&p(e,["responseSchema"],x);const v=f(t,["routingConfig"]);v!=null&&p(e,["routingConfig"],v);const b=f(t,["seed"]);b!=null&&p(e,["seed"],b);const w=f(t,["speechConfig"]);w!=null&&p(e,["speechConfig"],w);const _=f(t,["stopSequences"]);_!=null&&p(e,["stopSequences"],_);const T=f(t,["temperature"]);T!=null&&p(e,["temperature"],T);const S=f(t,["thinkingConfig"]);S!=null&&p(e,["thinkingConfig"],S);const E=f(t,["topK"]);E!=null&&p(e,["topK"],E);const k=f(t,["topP"]);if(k!=null&&p(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function A4(t,e){const n={},r=f(e,["model"]);return r!=null&&p(n,["_url","name"],Se(t,r)),n}function C4(t,e){const n={},r=f(e,["model"]);return r!=null&&p(n,["_url","name"],Se(t,r)),n}function P4(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function N4(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function I4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&p(e,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function O4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const r=f(t,["imageSize"]);r!=null&&p(e,["imageSize"],r);const i=f(t,["personGeneration"]);i!=null&&p(e,["personGeneration"],i);const o=f(t,["outputMimeType"]);o!=null&&p(e,["imageOutputOptions","mimeType"],o);const a=f(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function R4(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],fi(n));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function yC(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(e,["imageBytes"],fi(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Nf(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],fi(n));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Jn(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const r=f(t,["imageBytes"]);r!=null&&p(e,["bytesBase64Encoded"],fi(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function M4(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=f(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=f(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const s=f(e,["queryBase"]);return n!==void 0&&s!=null&&p(n,["_url","models_url"],cC(t,s)),r}function $4(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&p(n,["_query","pageSize"],i);const o=f(e,["pageToken"]);n!==void 0&&o!=null&&p(n,["_query","pageToken"],o);const a=f(e,["filter"]);n!==void 0&&a!=null&&p(n,["_query","filter"],a);const s=f(e,["queryBase"]);return n!==void 0&&s!=null&&p(n,["_url","models_url"],cC(t,s)),r}function D4(t,e){const n={},r=f(e,["config"]);return r!=null&&M4(t,r,n),n}function j4(t,e){const n={},r=f(e,["config"]);return r!=null&&$4(t,r,n),n}function L4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let o=dC(i);Array.isArray(o)&&(o=o.map(a=>Jm(a))),p(e,["models"],o)}return e}function U4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let o=dC(i);Array.isArray(o)&&(o=o.map(a=>Ym(a))),p(e,["models"],o)}return e}function F4(t){const e={},n=f(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const r=f(t,["segmentationClasses"]);r!=null&&p(e,["maskClasses"],r);const i=f(t,["maskDilation"]);return i!=null&&p(e,["dilation"],i),e}function Jm(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=f(t,["description"]);i!=null&&p(e,["description"],i);const o=f(t,["version"]);o!=null&&p(e,["version"],o);const a=f(t,["_self"]);a!=null&&p(e,["tunedModelInfo"],nF(a));const s=f(t,["inputTokenLimit"]);s!=null&&p(e,["inputTokenLimit"],s);const l=f(t,["outputTokenLimit"]);l!=null&&p(e,["outputTokenLimit"],l);const u=f(t,["supportedGenerationMethods"]);u!=null&&p(e,["supportedActions"],u);const c=f(t,["temperature"]);c!=null&&p(e,["temperature"],c);const d=f(t,["maxTemperature"]);d!=null&&p(e,["maxTemperature"],d);const h=f(t,["topP"]);h!=null&&p(e,["topP"],h);const g=f(t,["topK"]);g!=null&&p(e,["topK"],g);const y=f(t,["thinking"]);return y!=null&&p(e,["thinking"],y),e}function Ym(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["displayName"]);r!=null&&p(e,["displayName"],r);const i=f(t,["description"]);i!=null&&p(e,["description"],i);const o=f(t,["versionId"]);o!=null&&p(e,["version"],o);const a=f(t,["deployedModels"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>Z5(h))),p(e,["endpoints"],d)}const s=f(t,["labels"]);s!=null&&p(e,["labels"],s);const l=f(t,["_self"]);l!=null&&p(e,["tunedModelInfo"],rF(l));const u=f(t,["defaultCheckpointId"]);u!=null&&p(e,["defaultCheckpointId"],u);const c=f(t,["checkpoints"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>h)),p(e,["checkpoints"],d)}return e}function B4(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&p(e,["fileData"],e4(o));const a=f(t,["functionCall"]);a!=null&&p(e,["functionCall"],t4(a));const s=f(t,["functionResponse"]);s!=null&&p(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],k5(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const c=f(t,["thought"]);c!=null&&p(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&p(e,["videoMetadata"],h),e}function G4(t){const e={},n=f(t,["productImage"]);return n!=null&&p(e,["image"],Jn(n)),e}function z4(t,e){const n={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&p(e,["parameters","sampleCount"],r);const i=f(t,["baseSteps"]);e!==void 0&&i!=null&&p(e,["parameters","baseSteps"],i);const o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&p(e,["parameters","storageUri"],o);const a=f(t,["seed"]);e!==void 0&&a!=null&&p(e,["parameters","seed"],a);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&p(e,["parameters","safetySetting"],s);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=f(t,["addWatermark"]);e!==void 0&&u!=null&&p(e,["parameters","addWatermark"],u);const c=f(t,["outputMimeType"]);e!==void 0&&c!=null&&p(e,["parameters","outputOptions","mimeType"],c);const d=f(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","compressionQuality"],d);const h=f(t,["enhancePrompt"]);e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h);const g=f(t,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),n}function V4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["source"]);i!=null&&q4(i,n);const o=f(e,["config"]);return o!=null&&z4(o,n),n}function H4(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Pf(i))),p(e,["generatedImages"],r)}return e}function q4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=f(t,["personImage"]);e!==void 0&&i!=null&&p(e,["instances[0]","personImage","image"],Jn(i));const o=f(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>G4(s))),p(e,["instances[0]","productImages"],a)}return n}function W4(t){const e={},n=f(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Jn(n));const r=f(t,["referenceId"]);r!=null&&p(e,["referenceId"],r);const i=f(t,["referenceType"]);i!=null&&p(e,["referenceType"],i);const o=f(t,["maskImageConfig"]);o!=null&&p(e,["maskImageConfig"],F4(o));const a=f(t,["controlImageConfig"]);a!=null&&p(e,["controlImageConfig"],R5(a));const s=f(t,["styleImageConfig"]);s!=null&&p(e,["styleImageConfig"],s);const l=f(t,["subjectImageConfig"]);return l!=null&&p(e,["subjectImageConfig"],l),e}function vC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function xC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&p(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&p(e,["contentType"],i),e}function K4(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&p(e,["threshold"],r),e}function J4(t){const e={},n=f(t,["image"]);return n!=null&&p(e,["image"],Jn(n)),e}function Y4(t,e){const n={},r=f(t,["mode"]);e!==void 0&&r!=null&&p(e,["parameters","mode"],r);const i=f(t,["maxPredictions"]);e!==void 0&&i!=null&&p(e,["parameters","maxPredictions"],i);const o=f(t,["confidenceThreshold"]);e!==void 0&&o!=null&&p(e,["parameters","confidenceThreshold"],o);const a=f(t,["maskDilation"]);e!==void 0&&a!=null&&p(e,["parameters","maskDilation"],a);const s=f(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&p(e,["parameters","binaryColorThreshold"],s);const l=f(t,["labels"]);return e!==void 0&&l!=null&&p(e,["labels"],l),n}function X4(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["source"]);i!=null&&Z4(i,n);const o=f(e,["config"]);return o!=null&&Y4(o,n),n}function Q4(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>S4(i))),p(e,["generatedMasks"],r)}return e}function Z4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&p(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&p(e,["instances[0]","image"],Jn(i));const o=f(t,["scribbleImage"]);return e!==void 0&&o!=null&&p(e,["instances[0]","scribble"],J4(o)),n}function eF(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&p(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&p(e,["functionCallingConfig"],n4(r)),e}function tF(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],P4(a));const s=f(t,["googleSearch"]);s!=null&&p(e,["googleSearch"],N4(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}function bC(t){const e={},n=f(t,["retrieval"]);n!=null&&p(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&p(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&p(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&p(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>r4(h))),p(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&p(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&p(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&p(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&p(e,["urlContext"],c),e}function nF(t){const e={},n=f(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function rF(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&p(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&p(e,["updateTime"],i),e}function iF(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=f(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function oF(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&p(e,["description"],i);const o=f(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&p(e,["defaultCheckpointId"],o),n}function aF(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","name"],Se(t,r));const i=f(e,["config"]);return i!=null&&iF(i,n),n}function sF(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["config"]);return i!=null&&oF(i,n),n}function lF(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const i=f(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&p(e,["parameters","safetySetting"],i);const o=f(t,["personGeneration"]);e!==void 0&&o!=null&&p(e,["parameters","personGeneration"],o);const a=f(t,["includeRaiReason"]);e!==void 0&&a!=null&&p(e,["parameters","includeRaiReason"],a);const s=f(t,["outputMimeType"]);e!==void 0&&s!=null&&p(e,["parameters","outputOptions","mimeType"],s);const l=f(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&p(e,["parameters","outputOptions","compressionQuality"],l);const u=f(t,["enhanceInputImage"]);e!==void 0&&u!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=f(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=f(t,["labels"]);e!==void 0&&d!=null&&p(e,["labels"],d);const h=f(t,["numberOfImages"]);e!==void 0&&h!=null&&p(e,["parameters","sampleCount"],h);const g=f(t,["mode"]);return e!==void 0&&g!=null&&p(e,["parameters","mode"],g),n}function uF(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["_url","model"],Se(t,r));const i=f(e,["image"]);i!=null&&p(n,["instances[0]","image"],Jn(i));const o=f(e,["upscaleFactor"]);o!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=f(e,["config"]);return a!=null&&lF(a,n),n}function cF(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Pf(o))),p(e,["generatedImages"],i)}return e}function dF(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&p(e,["videoBytes"],fi(r));const i=f(t,["encoding"]);return i!=null&&p(e,["mimeType"],i),e}function fF(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&p(e,["videoBytes"],fi(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function hF(t){const e={},n=f(t,["image"]);n!=null&&p(e,["_self"],Jn(n));const r=f(t,["maskMode"]);return r!=null&&p(e,["maskMode"],r),e}function pF(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Nf(n));const r=f(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function mF(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Jn(n));const r=f(t,["referenceType"]);return r!=null&&p(e,["referenceType"],r),e}function wC(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const r=f(t,["videoBytes"]);r!=null&&p(e,["encodedVideo"],fi(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["encoding"],i),e}function _C(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const r=f(t,["videoBytes"]);r!=null&&p(e,["bytesBase64Encoded"],fi(r));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gF(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&p(e,["displayName"],r),n}function yF(t){const e={},n=f(t,["config"]);return n!=null&&gF(n,e),e}function vF(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function xF(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&vF(r,e),e}function bF(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function wF(t,e){const n={},r=f(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["customMetadata"],o)}const i=f(t,["chunkingConfig"]);return e!==void 0&&i!=null&&p(e,["chunkingConfig"],i),n}function _F(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const r=f(t,["metadata"]);r!=null&&p(e,["metadata"],r);const i=f(t,["done"]);i!=null&&p(e,["done"],i);const o=f(t,["error"]);o!=null&&p(e,["error"],o);const a=f(t,["response"]);return a!=null&&p(e,["response"],EF(a)),e}function SF(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=f(t,["fileName"]);r!=null&&p(e,["fileName"],r);const i=f(t,["config"]);return i!=null&&wF(i,e),e}function EF(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&p(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&p(e,["documentName"],i),e}function TF(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function kF(t){const e={},n=f(t,["config"]);return n!=null&&TF(n,e),e}function AF(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["fileSearchStores"],o)}return e}function SC(t,e){const n={},r=f(t,["mimeType"]);e!==void 0&&r!=null&&p(e,["mimeType"],r);const i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),p(e,["customMetadata"],s)}const a=f(t,["chunkingConfig"]);return e!==void 0&&a!=null&&p(e,["chunkingConfig"],a),n}function CF(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const r=f(t,["config"]);return r!=null&&SC(r,e),e}function PF(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NF="Content-Type",IF="X-Server-Timeout",OF="User-Agent",Xm="x-goog-api-client",RF="1.35.0",MF=`google-genai-sdk/${RF}`,$F="v1beta1",DF="v1beta";class jF{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:$F,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:DF,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[a,s]of Object.entries(e.queryParams))i.searchParams.append(a,String(s));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>o.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&LF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await i_(i),new qm(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await i_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Vn(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const s="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield ce(i.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const y=JSON.parse(d);if("error"in y){const x=JSON.parse(JSON.stringify(y.error)),v=x.status,b=x.code,w=`got status: ${v}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Af({message:w,status:b})}}catch(y){if(y.name==="ApiError")throw y}a+=d;let h=-1,g=0;for(;;){h=-1,g=0;for(const v of l){const b=a.indexOf(v);b!==-1&&(h===-1||b<h)&&(h=b,g=v.length)}if(h===-1)break;const y=a.substring(0,h);a=a.substring(h+g);const x=y.trim();if(x.startsWith(s)){const v=x.substring(s.length).trim();try{const b=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ce(new qm(b))}catch(b){throw new Error(`exception parsing stream chunk ${v}. ${b}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=MF+" "+this.clientOptions.userAgentExtra;return e[OF]=n,e[Xm]=n,e[NF]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(IF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);i.sizeBytes=String(a.size);const s=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l={file:i},u=this.getFileName(e),c=Q("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return o.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,a=await o.stat(n),s=String(a.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};r!=null&&SC(r,d);const h=await this.fetchUploadUrl(u,s,l,c,d,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,a){var s;let l={};a?l=a:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function i_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Af({message:i,status:n}):new Error(i)}}function LF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const s=Object.assign({},o);for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const u=a[l],c=s[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?s[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),s[l]=u)}return s}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UF="mcp_used/unknown";let FF=!1;function EC(t){for(const e of t)if(BF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return FF}function TC(t){var e;const n=(e=t[Xm])!==null&&e!==void 0?e:"";t[Xm]=(n+` ${UF}`).trimStart()}function BF(t){return t!==null&&typeof t=="object"&&t instanceof qv}function GF(t){return Vn(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const a=yield ce(n.listTools({cursor:i}));for(const s of a.tools)yield yield ce(s),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class qv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qv(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const c of this.mcpClients)try{for(var s=!0,l=(n=void 0,Hn(GF(c))),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const d=i;a.push(d);const h=d.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=c}}catch(d){n={error:d}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),bL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function zF(t,e,n){const r=new fL;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class VF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=WF(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${s}`;let u=()=>{};const c=new Promise(_=>{u=_}),d=e.callbacks,h=function(){u({})},g=this.apiClient,y={onopen:h,onmessage:_=>{zF(g,d.onmessage,_)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(_){}},x=this.webSocketFactory.create(l,qF(a),y);x.connect(),await c;const w={setup:{model:Se(this.apiClient,e.model)}};return x.send(JSON.stringify(w)),new HF(x,this.apiClient)}}class HF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=y5(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=g5(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Uo.PLAY)}pause(){this.sendPlaybackControl(Uo.PAUSE)}stop(){this.sendPlaybackControl(Uo.STOP)}resetContext(){this.sendPlaybackControl(Uo.RESET_CONTEXT)}close(){this.conn.close()}}function qF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function WF(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function JF(t,e,n){const r=new dL;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const a=b5(o);Object.assign(r,a)}else Object.assign(r,o);e(r)}class YF{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new VF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,a,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&EC(e.config.tools)&&TC(d);const h=e3(d);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,c);else{const C=this.apiClient.getApiKey();let R="BidiGenerateContent",I="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",I="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${R}?${I}=${C}`}let g=()=>{};const y=new Promise(C=>{g=C}),x=e.callbacks,v=function(){var C;(C=x==null?void 0:x.onopen)===null||C===void 0||C.call(x),g({})},b=this.apiClient,w={onopen:v,onmessage:C=>{JF(b,x.onmessage,C)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(C){}},_=this.webSocketFactory.create(c,ZF(h),w);_.connect(),await y;let T=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const C=this.apiClient.getProject(),R=this.apiClient.getLocation();T=`projects/${C}/locations/${R}/`+T}let S={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jc.AUDIO]}:e.config.responseModalities=[Jc.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[],k=[];for(const C of E)if(this.isCallableTool(C)){const R=C;k.push(await R.tool())}else k.push(C);k.length>0&&(e.config.tools=k);const A={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=m5(this.apiClient,A):S=p5(this.apiClient,A),delete S.config,_.send(JSON.stringify(S)),new QF(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const XF={turnComplete:!0};class QF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=wn(n.turns),e.isVertexAI()||(r=r.map(i=>Cf(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(KF)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},XF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:x5(e)}:n={realtimeInput:v5(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function ZF(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function e3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o_=10;function a_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Zo(a)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Zo(t){return"callTool"in t&&typeof t.callTool=="function"}function t3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Zo(i)))!==null&&r!==void 0?r:!1}function s_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Zo(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function l_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n3 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,a,s;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!t3(n)||a_(n.config))return await this.generateContentInternal(l);const u=s_(n);if(u.length>0){const x=u.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let c,d;const h=wn(l.contents),g=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:o_;let y=0;for(;y<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const x=c.candidates[0].content,v=[];for(const b of(s=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(Zo(b)){const _=await b.callTool(c.functionCalls);v.push(..._)}y++,d={role:"user",parts:v},l.contents=wn(l.contents),l.contents.push(x),l.contents.push(d),l_(l.config)&&(h.push(x),h.push(d))}return l_(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{var r,i,o,a,s;if(this.maybeMoveToResponseJsonSchem(n),a_(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=s_(n);if(l.length>0){const d=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,c=(s=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const a=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:a.push(l);let s;return o?s={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:s={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},s}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new io(kr.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,a,s,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async l=>Zo(l)?await l.tool():l)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(s.config.tools=a,e.config&&e.config.tools&&EC(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),TC(u),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return s}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const a of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Zo(a)){const s=a,l=await s.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,s)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:o_;let a=!1,s=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){return Vn(this,arguments,function*(){for(var h,g,y,x,v,b;s<o;){a&&(s++,a=!1);const S=yield ce(u.processParamsMaybeAddMcpUsage(d)),E=yield ce(u.generateContentStreamInternal(S)),k=[],A=[];try{for(var w=!0,_=(g=void 0,Hn(E)),T;T=yield ce(_.next()),h=T.done,!h;w=!0){x=T.value,w=!1;const C=x;if(yield yield ce(C),C.candidates&&(!((v=C.candidates[0])===null||v===void 0)&&v.content)){A.push(C.candidates[0].content);for(const R of(b=C.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(s<o&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(R.functionCall.name)){const I=yield ce(c.get(R.functionCall.name).callTool([R.functionCall]));k.push(...I)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(C){g={error:C}}finally{try{!w&&!h&&(y=_.return)&&(yield ce(y.call(_)))}finally{if(g)throw g.error}}if(k.length>0){a=!0;const C=new cs;C.candidates=[{content:{role:"user",parts:k}}],yield yield ce(C);const R=[];R.push(...A),R.push({role:"user",parts:k});const I=wn(d.contents).concat(R);d.contents=I}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=t_(this.apiClient,e);return s=Q("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=r_(c),h=new cs;return Object.assign(h,d),h})}else{const u=e_(this.apiClient,e);return s=Q("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=n_(c),h=new cs;return Object.assign(h,d),h})}}async generateContentStreamInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=t_(this.apiClient,e);return s=Q("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(d){return Vn(this,arguments,function*(){var h,g,y,x;try{for(var v=!0,b=Hn(d),w;w=yield ce(b.next()),h=w.done,!h;v=!0){x=w.value,v=!1;const _=x,T=r_(yield ce(_.json()));T.sdkHttpResponse={headers:_.headers};const S=new cs;Object.assign(S,T),yield yield ce(S)}}catch(_){g={error:_}}finally{try{!v&&!h&&(y=b.return)&&(yield ce(y.call(b)))}finally{if(g)throw g.error}}})})}else{const u=e_(this.apiClient,e);return s=Q("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(d){return Vn(this,arguments,function*(){var h,g,y,x;try{for(var v=!0,b=Hn(d),w;w=yield ce(b.next()),h=w.done,!h;v=!0){x=w.value,v=!1;const _=x,T=n_(yield ce(_.json()));T.sdkHttpResponse={headers:_.headers};const S=new cs;Object.assign(S,T),yield yield ce(S)}}catch(_){g={error:_}}finally{try{!v&&!h&&(y=b.return)&&(yield ce(y.call(b)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Y5(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=Q5(c),h=new jw;return Object.assign(h,d),h})}else{const u=J5(this.apiClient,e);return s=Q("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=X5(c),h=new jw;return Object.assign(h,d),h})}}async generateImagesInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=u4(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=d4(c),h=new Lw;return Object.assign(h,d),h})}else{const u=l4(this.apiClient,e);return s=Q("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=c4(c),h=new Lw;return Object.assign(h,d),h})}}async editImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=H5(this.apiClient,e);return o=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=q5(l),c=new eL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=uF(this.apiClient,e);return o=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=cF(l),c=new tL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=V4(this.apiClient,e);return o=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=H4(l),c=new nL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=X4(this.apiClient,e);return o=Q("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=Q4(l),c=new rL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=C4(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Ym(c))}else{const u=A4(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Jm(c))}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=j4(this.apiClient,e);return s=Q("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=U4(c),h=new Uw;return Object.assign(h,d),h})}else{const u=D4(this.apiClient,e);return s=Q("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=L4(c),h=new Uw;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=sF(this.apiClient,e);return s=Q("{model}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Ym(c))}else{const u=aF(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Jm(c))}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=B5(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=z5(c),h=new Fw;return Object.assign(h,d),h})}else{const u=F5(this.apiClient,e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=G5(c),h=new Fw;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=j5(this.apiClient,e);return s=Q("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=U5(c),h=new Bw;return Object.assign(h,d),h})}else{const u=D5(this.apiClient,e);return s=Q("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=L5(c),h=new Bw;return Object.assign(h,d),h})}}async computeTokens(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=P5(this.apiClient,e);return o=Q("{model}:computeTokens",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=N5(l),c=new iL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=y4(this.apiClient,e);return s=Q("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const d=m4(c),h=new Yc;return Object.assign(h,d),h})}else{const u=g4(this.apiClient,e);return s=Q("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>{const d=p4(c),h=new Yc;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class r3 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Kj(e);return s=Q("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a}else{const u=Wj(e);return s=Q("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Fj(e);return o=Q("{resourceName}:fetchPredictOperation",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i3(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function o3(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>p3(o))),p(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&p(e,["role"],r),e}function a3(t,e,n){const r={},i=f(e,["expireTime"]);n!==void 0&&i!=null&&p(n,["expireTime"],i);const o=f(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&p(n,["newSessionExpireTime"],o);const a=f(e,["uses"]);n!==void 0&&a!=null&&p(n,["uses"],a);const s=f(e,["liveConnectConstraints"]);n!==void 0&&s!=null&&p(n,["bidiGenerateContentSetup"],h3(t,s));const l=f(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&p(n,["fieldMask"],l),r}function s3(t,e){const n={},r=f(e,["config"]);return r!=null&&p(n,["config"],a3(t,r,n)),n}function l3(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function u3(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const r=f(t,["args"]);r!=null&&p(e,["args"],r);const i=f(t,["name"]);if(i!=null&&p(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function c3(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function d3(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function f3(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&p(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&p(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","speechConfig"],Hv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&p(e,["setup","systemInstruction"],o3(Rt(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let E=Ua(x);Array.isArray(E)&&(E=E.map(k=>g3(La(k)))),p(e,["setup","tools"],E)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&p(e,["setup","sessionResumption"],m3(v));const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&p(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&p(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&p(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&p(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);if(e!==void 0&&S!=null&&p(e,["setup","proactivity"],S),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function h3(t,e){const n={},r=f(e,["model"]);r!=null&&p(n,["setup","model"],Se(t,r));const i=f(e,["config"]);return i!=null&&p(n,["config"],f3(i,n)),n}function p3(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&p(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&p(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&p(e,["fileData"],l3(o));const a=f(t,["functionCall"]);a!=null&&p(e,["functionCall"],u3(a));const s=f(t,["functionResponse"]);s!=null&&p(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&p(e,["inlineData"],i3(l));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const c=f(t,["thought"]);c!=null&&p(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&p(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&p(e,["videoMetadata"],h),e}function m3(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function g3(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&p(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&p(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&p(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),p(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&p(e,["googleMaps"],c3(a));const s=f(t,["googleSearch"]);s!=null&&p(e,["googleSearch"],d3(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&p(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&p(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function y3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function v3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=y3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];i.length>0&&(s=i.map(u=>a.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),s.length>0&&l.push(...s),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class x3 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=s3(this.apiClient,e);o=Q("auth_tokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=v3(s,e.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b3(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&p(e,["_query","force"],r),n}function w3(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&b3(r,e),e}function _3(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function S3(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&p(e,["_query","pageToken"],i),n}function E3(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const r=f(t,["config"]);return r!=null&&S3(r,e),e}function T3(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&p(e,["nextPageToken"],r);const i=f(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),p(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k3 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new io(kr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=_3(e);return o=Q("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=w3(e);i=Q("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=E3(e);return o=Q("{parent}/documents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=T3(l),c=new oL;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A3 extends Rr{constructor(e,n=new k3(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new io(kr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=yF(e);return o=Q("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=bF(e);return o=Q("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xF(e);i=Q("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=kF(e);return o=Q("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=AF(l),c=new aL;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=CF(e);return o=Q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=PF(l),c=new sL;return Object.assign(c,u),c})}}async importFile(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=SF(e);return o=Q("{file_search_store_name}:importFile",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=_F(l),c=new Fv;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let kC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return kC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const C3=()=>kC();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Zm=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class An extends Error{}class Bt extends An{constructor(e,n,r,i){super(`${Bt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new If({message:r,cause:Zm(n)});const o=n;return e===400?new CC(e,o,r,i):e===401?new PC(e,o,r,i):e===403?new NC(e,o,r,i):e===404?new IC(e,o,r,i):e===409?new OC(e,o,r,i):e===422?new RC(e,o,r,i):e===429?new MC(e,o,r,i):e>=500?new $C(e,o,r,i):new Bt(e,o,r,i)}}class eg extends Bt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class If extends Bt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class AC extends If{constructor({message:e}={}){super({message:e??"Request timed out."})}}class CC extends Bt{}class PC extends Bt{}class NC extends Bt{}class IC extends Bt{}class OC extends Bt{}class RC extends Bt{}class MC extends Bt{}class $C extends Bt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P3=/^[a-z][a-z0-9+.-]*:/i,N3=t=>P3.test(t);let tg=t=>(tg=Array.isArray,tg(t));const I3=tg;let O3=I3;const u_=O3;function R3(t){if(!t)return!0;for(const e in t)return!1;return!0}function M3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const $3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new An(`${t} must be an integer`);if(e<0)throw new An(`${t} must be a positive integer`);return e},D3=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j3=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const U3=()=>{var t,e,n,r,i;const o=L3();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":d_(Deno.build.os),"X-Stainless-Arch":c_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":d_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":c_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=F3();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function F3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}const c_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",d_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Du;const B3=()=>Du??(Du=U3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function DC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function z3(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return DC({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function jC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function V3(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const H3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const LC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ip(t,e,n){return LC(),new File(t,e??"unknown_file",n)}function q3(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const W3=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",K3=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&UC(t),J3=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function Y3(t,e,n){if(LC(),t=await t,K3(t))return t instanceof File?t:ip([await t.arrayBuffer()],t.name);if(J3(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ip(await ng(i),e,n)}const r=await ng(t);if(e||(e=q3(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return ip(r,e,n)}async function ng(t){var e,n,r,i,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(UC(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(W3(t))try{for(var s=!0,l=Hn(t),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const c=i;a.push(...await ng(c))}}catch(c){n={error:c}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const c=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${c?`; constructor: ${c}`:""}${X3(t)}`)}return a}function X3(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FC{constructor(e){this._client=e}}FC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const f_=Object.freeze(Object.create(null)),Q3=(t=BC)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],a=n.reduce((c,d,h)=>{var g,y,x;/[?#]/.test(d)&&(i=!0);const v=r[h];let b=(i?encodeURIComponent:t)(""+v);return h!==r.length&&(v==null||typeof v=="object"&&v.toString===((x=Object.getPrototypeOf((y=Object.getPrototypeOf((g=v.hasOwnProperty)!==null&&g!==void 0?g:f_))!==null&&y!==void 0?y:f_))===null||x===void 0?void 0:x.toString))&&(b=v+"",o.push({start:c.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),c+d+(h===r.length?"":b)},""),s=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(s))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((c,d)=>c.start-d.start),o.length>0){let c=0;const d=o.reduce((h,g)=>{const y=" ".repeat(g.start-c),x="^".repeat(g.length);return c=g.start+g.length,h+y+x},"");throw new An(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${a}
${d}`)}return a},ju=Q3(BC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GC extends FC{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=Qc(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new An("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new An("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ju`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(ju`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(ju`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:a=this._client.apiVersion}=o,s=Qc(o,["api_version"]);return this._client.get(ju`/${a}/interactions/${e}`,Object.assign(Object.assign({query:s},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}GC._key=Object.freeze(["interactions"]);class zC extends GC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z3(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Lu;function Wv(t){let e;return(Lu??(e=new globalThis.TextEncoder,Lu=e.encode.bind(e)))(t)}let Uu;function h_(t){let e;return(Uu??(e=new globalThis.TextDecoder,Uu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Of{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Wv(e):e;this.buffer=Z3([this.buffer,n]);const r=[];let i;for(;(i=eB(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(h_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=h_(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Of.NEWLINE_CHARS=new Set([`
`,"\r"]);Of.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function eB(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function tB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zc={off:0,error:200,warn:300,info:400,debug:500},p_=(t,e,n)=>{if(t){if(M3(Zc,t))return t;Dt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Zc))}`)}};function As(){}function Fu(t,e,n){return!e||Zc[t]>Zc[n]?As:e[t].bind(e)}const nB={error:As,warn:As,info:As,debug:As};let m_=new WeakMap;function Dt(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return nB;const i=m_.get(n);if(i&&i[0]===r)return i[1];const o={error:Fu("error",n,r),warn:Fu("warn",n,r),info:Fu("info",n,r),debug:Fu("debug",n,r)};return m_.set(n,[r,o]),o}const Ei=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Dt(r):console;function a(){return Vn(this,arguments,function*(){var l,u,c,d;if(i)throw new An("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,y=Hn(rB(e,n)),x;x=yield ce(y.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const v=d;if(!h)if(v.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield ce(JSON.parse(v.data))}catch(b){throw o.error("Could not parse message into JSON:",v.data),o.error("From chunk:",v.raw),b}}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield ce(c.call(y)))}finally{if(u)throw u.error}}h=!0}catch(v){if(Qm(v))return yield ce(void 0);throw v}finally{h||n.abort()}})}return new Fo(a,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return Vn(this,arguments,function*(){var l,u,c,d;const h=new Of,g=jC(e);try{for(var y=!0,x=Hn(g),v;v=yield ce(x.next()),l=v.done,!l;y=!0){d=v.value,y=!1;const b=d;for(const w of h.decode(b))yield yield ce(w)}}catch(b){u={error:b}}finally{try{!y&&!l&&(c=x.return)&&(yield ce(c.call(x)))}finally{if(u)throw u.error}}for(const b of h.flush())yield yield ce(b)})}function a(){return Vn(this,arguments,function*(){var l,u,c,d;if(i)throw new An("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,y=Hn(o()),x;x=yield ce(y.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const v=d;h||v&&(yield yield ce(JSON.parse(v)))}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield ce(c.call(y)))}finally{if(u)throw u.error}}h=!0}catch(v){if(Qm(v))return yield ce(void 0);throw v}finally{h||n.abort()}})}return new Fo(a,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();e.push(a),n.push(a)}return o.shift()}});return[new Fo(()=>i(e),this.controller,this.client),new Fo(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return DC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const a=Wv(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function rB(t,e){return Vn(this,arguments,function*(){var r,i,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new An("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new An("Attempted to iterate over a response with no body");const s=new oB,l=new Of,u=jC(t.body);try{for(var c=!0,d=Hn(iB(u)),h;h=yield ce(d.next()),r=h.done,!r;c=!0){a=h.value,c=!1;const g=a;for(const y of l.decode(g)){const x=s.decode(y);x&&(yield yield ce(x))}}}catch(g){i={error:g}}finally{try{!c&&!r&&(o=d.return)&&(yield ce(o.call(d)))}finally{if(i)throw i.error}}for(const g of l.flush()){const y=s.decode(g);y&&(yield yield ce(y))}})}function iB(t){return Vn(this,arguments,function*(){var n,r,i,o;let a=new Uint8Array;try{for(var s=!0,l=Hn(t),u;u=yield ce(l.next()),n=u.done,!n;s=!0){o=u.value,s=!1;const c=o;if(c==null)continue;const d=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?Wv(c):c;let h=new Uint8Array(a.length+d.length);h.set(a),h.set(d,a.length),a=h;let g;for(;(g=tB(a))!==-1;)yield yield ce(a.slice(0,g)),a=a.slice(g)}}catch(c){r={error:c}}finally{try{!s&&!n&&(i=l.return)&&(yield ce(i.call(l)))}finally{if(r)throw r.error}}a.length>0&&(yield yield ce(a))})}class oB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=aB(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function aB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var s;if(e.options.stream)return Dt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Fo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(s=l==null?void 0:l.split(";")[0])===null||s===void 0?void 0:s.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Dt(t).debug(`[${r}] response parsed`,Ei({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kv extends Promise{constructor(e,n,r=sB){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Kv(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VC=Symbol("brand.privateNullableHeaders");function*lB(t){if(!t)return;if(VC in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():u_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=u_(r[1])?r[1]:[r[1]];let a=!1;for(const s of o)s!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,s])}}const ds=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,a]of lB(r)){const s=o.toLowerCase();i.has(s)||(e.delete(o),i.add(s)),a===null?(e.delete(o),n.add(s)):(e.append(o,a),n.delete(s))}}return{[VC]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const op=t=>{var e,n,r,i,o,a;if(typeof globalThis.process<"u")return(r=(n=(e=Mj)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var HC;class Rf{constructor(e){var n,r,i,o,a,s,l,{baseURL:u=op("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=op("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:d="v1beta"}=e,h=Qc(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:c,apiVersion:d},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:Rf.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const y="warn";this.logLevel=y,this.logLevel=(a=(o=p_(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:p_(op("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(s=g.maxRetries)!==null&&s!==void 0?s:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:G3(),this.encoder=H3,this._options=g,this.apiKey=c,this.apiVersion=d,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=ds([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return ds([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return ds([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new An(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Eo}`}defaultIdempotencyKey(){return`stainless-node-retry-${C3()}`}makeStatusError(e,n,r,i){return Bt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=N3(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return R3(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Kv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,a;const s=await e,l=(i=s.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(s);const{req:u,url:c,timeout:d}=await this.buildRequest(s,{retryCount:l-n});await this.prepareRequest(u,{url:c,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(Dt(this).debug(`[${h}] sending request`,Ei({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:u.headers})),!((o=s.signal)===null||o===void 0)&&o.aborted)throw new eg;const x=new AbortController,v=await this.fetchWithTimeout(c,u,d,x).catch(Zm),b=Date.now();if(v instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(!((a=s.signal)===null||a===void 0)&&a.aborted)throw new eg;const T=Qm(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return Dt(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${_}`),Dt(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${_})`,Ei({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),this.retryRequest(s,n,r??h);throw Dt(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),Dt(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Ei({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),T?new AC:new If({cause:v})}const w=`[${h}${g}] ${u.method} ${c} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${b-y}ms`;if(!v.ok){const _=await this.shouldRetry(v);if(n&&_){const C=`retrying, ${n} attempts remaining`;return await V3(v.body),Dt(this).info(`${w} - ${C}`),Dt(this).debug(`[${h}] response error (${C})`,Ei({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),this.retryRequest(s,n,r??h,v.headers)}const T=_?"error; no more retries left":"error; not retryable";Dt(this).info(`${w} - ${T}`);const S=await v.text().catch(C=>Zm(C).message),E=D3(S),k=E?void 0:S;throw Dt(this).debug(`[${h}] response error (${T})`,Ei({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:k,durationMs:Date.now()-y})),this.makeStatusError(v.status,E,k,v.headers)}return Dt(this).info(w),Dt(this).debug(`[${h}] response start`,Ei({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),{response:v,options:s,controller:x,requestLogID:h,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:a,method:s}=o,l=Qc(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,d=Object.assign(Object.assign(Object.assign({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);s&&(d.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const u=parseFloat(s);Number.isNaN(u)||(a=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!a){const u=parseFloat(l);Number.isNaN(u)?a=Date.parse(l)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,u)}return await j3(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const a=Object.assign({},e),{method:s,path:l,query:u,defaultBaseURL:c}=a,d=this.buildURL(l,u,c);"timeout"in a&&$3("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:a}),y=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:d,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let s=ds([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),B3()),this._options.defaultHeaders,r,e.headers,a]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=ds([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:z3(e)}:this.encoder({body:e,headers:r})}}Rf.DEFAULT_TIMEOUT=6e4;class yt extends Rf{constructor(){super(...arguments),this.interactions=new zC(this)}}HC=yt;yt.GeminiNextGenAPIClient=HC;yt.GeminiNextGenAPIClientError=An;yt.APIError=Bt;yt.APIConnectionError=If;yt.APIConnectionTimeoutError=AC;yt.APIUserAbortError=eg;yt.NotFoundError=IC;yt.ConflictError=OC;yt.RateLimitError=MC;yt.BadRequestError=CC;yt.AuthenticationError=PC;yt.InternalServerError=$C;yt.PermissionDeniedError=NC;yt.UnprocessableEntityError=RC;yt.toFile=Y3;yt.Interactions=zC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uB(t,e){const n={},r=f(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function cB(t,e){const n={},r=f(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function dB(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function fB(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&p(n,["sdkHttpResponse"],r),n}function hB(t,e,n){const r={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=f(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&p(e,["displayName"],i),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(t,["epochCount"]);e!==void 0&&o!=null&&p(e,["tuningTask","hyperparameters","epochCount"],o);const a=f(t,["learningRateMultiplier"]);if(a!=null&&p(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=f(t,["batchSize"]);e!==void 0&&s!=null&&p(e,["tuningTask","hyperparameters","batchSize"],s);const l=f(t,["learningRate"]);if(e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","learningRate"],l),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function pB(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec"],g_(g))}else if(i==="PREFERENCE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec"],g_(g))}const o=f(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&p(e,["tunedModelDisplayName"],o);const a=f(t,["description"]);e!==void 0&&a!=null&&p(e,["description"],a);let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(s==="PREFERENCE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=f(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let c=f(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(c==="PREFERENCE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=f(t,["labels"]);e!==void 0&&d!=null&&p(e,["labels"],d);const h=f(t,["beta"]);return e!==void 0&&h!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function mB(t,e){const n={},r=f(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const o=f(t,["trainingDataset"]);o!=null&&kB(o);const a=f(t,["config"]);return a!=null&&hB(a,n),n}function gB(t,e){const n={},r=f(t,["baseModel"]);r!=null&&p(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&p(n,["preTunedModel"],i);const o=f(t,["trainingDataset"]);o!=null&&AB(o,n,e);const a=f(t,["config"]);return a!=null&&pB(a,n,e),n}function yB(t,e){const n={},r=f(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function vB(t,e){const n={},r=f(t,["name"]);return r!=null&&p(n,["_url","name"],r),n}function xB(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),r}function bB(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&p(e,["_query","pageToken"],o);const a=f(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),r}function wB(t,e){const n={},r=f(t,["config"]);return r!=null&&xB(r,n),n}function _B(t,e){const n={},r=f(t,["config"]);return r!=null&&bB(r,n),n}function SB(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=f(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>qC(s))),p(n,["tuningJobs"],a)}return n}function EB(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&p(n,["nextPageToken"],i);const o=f(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>rg(s))),p(n,["tuningJobs"],a)}return n}function TB(t,e){const n={},r=f(t,["name"]);r!=null&&p(n,["model"],r);const i=f(t,["name"]);return i!=null&&p(n,["endpoint"],i),n}function kB(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=f(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),p(n,["examples","examples"],i)}return n}function AB(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=f(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=f(t,["gcsUri"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=f(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=f(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function qC(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&p(n,["name"],i);const o=f(t,["state"]);o!=null&&p(n,["state"],lC(o));const a=f(t,["createTime"]);a!=null&&p(n,["createTime"],a);const s=f(t,["tuningTask","startTime"]);s!=null&&p(n,["startTime"],s);const l=f(t,["tuningTask","completeTime"]);l!=null&&p(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const c=f(t,["description"]);c!=null&&p(n,["description"],c);const d=f(t,["baseModel"]);d!=null&&p(n,["baseModel"],d);const h=f(t,["_self"]);return h!=null&&p(n,["tunedModel"],TB(h)),n}function rg(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&p(n,["name"],i);const o=f(t,["state"]);o!=null&&p(n,["state"],lC(o));const a=f(t,["createTime"]);a!=null&&p(n,["createTime"],a);const s=f(t,["startTime"]);s!=null&&p(n,["startTime"],s);const l=f(t,["endTime"]);l!=null&&p(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&p(n,["updateTime"],u);const c=f(t,["error"]);c!=null&&p(n,["error"],c);const d=f(t,["description"]);d!=null&&p(n,["description"],d);const h=f(t,["baseModel"]);h!=null&&p(n,["baseModel"],h);const g=f(t,["tunedModel"]);g!=null&&p(n,["tunedModel"],g);const y=f(t,["preTunedModel"]);y!=null&&p(n,["preTunedModel"],y);const x=f(t,["supervisedTuningSpec"]);x!=null&&p(n,["supervisedTuningSpec"],x);const v=f(t,["preferenceOptimizationSpec"]);v!=null&&p(n,["preferenceOptimizationSpec"],v);const b=f(t,["tuningDataStats"]);b!=null&&p(n,["tuningDataStats"],b);const w=f(t,["encryptionSpec"]);w!=null&&p(n,["encryptionSpec"],w);const _=f(t,["partnerModelTuningSpec"]);_!=null&&p(n,["partnerModelTuningSpec"],_);const T=f(t,["customBaseModel"]);T!=null&&p(n,["customBaseModel"],T);const S=f(t,["experiment"]);S!=null&&p(n,["experiment"],S);const E=f(t,["labels"]);E!=null&&p(n,["labels"],E);const k=f(t,["outputUri"]);k!=null&&p(n,["outputUri"],k);const A=f(t,["pipelineJob"]);A!=null&&p(n,["pipelineJob"],A);const C=f(t,["serviceAccount"]);C!=null&&p(n,["serviceAccount"],C);const R=f(t,["tunedModelDisplayName"]);R!=null&&p(n,["tunedModelDisplayName"],R);const I=f(t,["veoTuningSpec"]);return I!=null&&p(n,["veoTuningSpec"],I),n}function CB(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&p(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&p(n,["name"],i);const o=f(t,["metadata"]);o!=null&&p(n,["metadata"],o);const a=f(t,["done"]);a!=null&&p(n,["done"],a);const s=f(t,["error"]);return s!=null&&p(n,["error"],s),n}function g_(t,e){const n={},r=f(t,["gcsUri"]);r!=null&&p(n,["validationDatasetUri"],r);const i=f(t,["vertexDatasetResource"]);return i!=null&&p(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PB extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new io(kr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Hm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=vB(e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>rg(c))}else{const u=yB(e);return s=Q("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>qC(c))}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=_B(e);return s=Q("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=EB(c),h=new Gw;return Object.assign(h,d),h})}else{const u=wB(e);return s=Q("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=SB(c),h=new Gw;return Object.assign(h,d),h})}}async cancel(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=cB(e);return s=Q("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=fB(c),h=new zw;return Object.assign(h,d),h})}else{const u=uB(e);return s=Q("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=dB(c),h=new zw;return Object.assign(h,d),h})}}async tuneInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=gB(e,e);return o=Q("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>rg(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=mB(e);return o=Q("tunedModels",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>CB(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const IB=1024*1024*8,OB=3,RB=1e3,MB=2,ed="x-goog-upload-status";async function $B(t,e,n){var r;const i=await WC(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ed])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function DB(t,e,n){var r;const i=await WC(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ed])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=nC(o),s=new Bv;return Object.assign(s,a),s}async function WC(t,e,n){var r,i;let o=0,a=0,s=new qm(new Response),l="upload";for(o=t.size;a<o;){const u=Math.min(IB,o-a),c=t.slice(a,a+u);a+u>=o&&(l+=", finalize");let d=0,h=RB;for(;d<OB&&(s=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),!(!((r=s==null?void 0:s.headers)===null||r===void 0)&&r[ed]));)d++,await LB(h),h=h*MB;if(a+=u,((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[ed])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function jB(t){return{size:t.size,type:t.type}}function LB(t){return new Promise(e=>setTimeout(e,t))}class UB{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await $B(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DB(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FB{create(e,n,r){return new BB(e,n,r)}}class BB{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y_="x-goog-api-key";class GB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(y_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(y_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zB="gl-node/";class KC{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Lj(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new GB(this.apiKey);this.apiClient=new jF({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:zB+"web",uploader:new UB,downloader:new NB}),this.models=new n3(this.apiClient),this.live=new YF(this.apiClient,i,new FB),this.batches=new hU(this.apiClient),this.chats=new KU(this.models,this.apiClient),this.caches=new HU(this.apiClient),this.files=new i5(this.apiClient),this.operations=new r3(this.apiClient),this.authTokens=new x3(this.apiClient),this.tunings=new PB(this.apiClient),this.fileSearchStores=new A3(this.apiClient)}}const VB=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",JC=()=>{const t=VB();return console.log("Gemini Key Detected:","Yes",`(Length: ${t.length})`),new KC({apiKey:t})},YC=`
You are an expert AI nutritionist and mathematical calculator. 

SCENARIO 1: IMAGE/TEXT ESTIMATION
- Analyze food descriptions or images.
- Provide a detailed "receipt" breakdown of every ingredient.
- Estimate weights in grams (g) and calculate nutrition.

SCENARIO 2: STRICT RECALCULATION (User provided weights)
- If a list of ingredients with specific weights (grams) is provided, you MUST act as a precise calculator.
- IGNORE your previous estimations.
- Use the provided weights as the ABSOLUTE GROUND TRUTH.
- Calculate calories and macros strictly based on these weights.
- Return the recalculated totals.
`,XC=t=>{const e=(t==null?void 0:t.message)||String(t)||"",n=e.toLowerCase();return e.includes("429")||n.includes("quota")||n.includes("limit")||n.includes("exhausted")?"AI Limit Reached: You've sent too many requests. Please wait about 60 seconds for the quota to reset.":n.includes("api key")?"Configuration Error: Invalid API key. Please check your settings.":n.includes("network")||n.includes("fetch")?"Connection Error: Please check your internet connection and try again.":e||"An unexpected AI error occurred."};async function Jv(t,e=2,n=2e3){try{return await t()}catch(r){const i=(r==null?void 0:r.message)||"";if((i.includes("429")||i.toLowerCase().includes("quota"))&&e>0)return console.warn(`Gemini Quota hit. Retrying in ${n}ms... (${e} retries left)`),await new Promise(a=>setTimeout(a,n)),Jv(t,e-1,n*2);throw r}}const HB=async t=>{try{return await Jv(async()=>{const n=await JC().models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:"Analyze this image. Breakdown into ingredients, weights in grams, calories, and total nutrition."}]},config:{systemInstruction:YC,responseMimeType:"application/json",responseSchema:{type:we.OBJECT,properties:{item:{type:we.STRING},calories:{type:we.INTEGER},protein:{type:we.INTEGER},carbs:{type:we.INTEGER},fat:{type:we.INTEGER},confidence:{type:we.NUMBER},ingredients:{type:we.ARRAY,items:{type:we.OBJECT,properties:{name:{type:we.STRING},grams:{type:we.INTEGER},calories:{type:we.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(n.text||"{}")})}catch(e){throw console.error("Gemini Analysis Error:",e),new Error(XC(e))}},v_=async(t,e)=>{try{return await Jv(async()=>{let n="";e&&e.length>0?n=`USER MANUAL WEIGHT CORRECTION:
        The following ingredients have been updated with exact weights. 
        Perform a mathematical calculation for the nutrition of each item based strictly on these grams:
        
        ${e.map(a=>`- ${a.name}: ${a.grams}g`).join(`
`)}
        
        CRITICAL: 
        1. Calculate calories/macros from scratch for each item.
        2. Sum the totals.
        3. Do not adjust the weights provided.
        4. Return the new AnalysisResult.`:n=`Estimate nutrition for: "${t}".`;const i=await JC().models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{text:n}]}],config:{systemInstruction:YC,responseMimeType:"application/json",responseSchema:{type:we.OBJECT,properties:{item:{type:we.STRING},calories:{type:we.INTEGER},protein:{type:we.INTEGER},carbs:{type:we.INTEGER},fat:{type:we.INTEGER},confidence:{type:we.NUMBER},ingredients:{type:we.ARRAY,items:{type:we.OBJECT,properties:{name:{type:we.STRING},grams:{type:we.INTEGER},calories:{type:we.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(i.text||"{}")})}catch(n){throw console.error("Gemini Text Analysis Error:",n),new Error(XC(n))}};let Bu;const qB=new Uint8Array(16);function WB(){if(!Bu&&(Bu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Bu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bu(qB)}const bt=[];for(let t=0;t<256;++t)bt.push((t+256).toString(16).slice(1));function KB(t,e=0){return bt[t[e+0]]+bt[t[e+1]]+bt[t[e+2]]+bt[t[e+3]]+"-"+bt[t[e+4]]+bt[t[e+5]]+"-"+bt[t[e+6]]+bt[t[e+7]]+"-"+bt[t[e+8]]+bt[t[e+9]]+"-"+bt[t[e+10]]+bt[t[e+11]]+bt[t[e+12]]+bt[t[e+13]]+bt[t[e+14]]+bt[t[e+15]]}const JB=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x_={randomUUID:JB};function YB(t,e,n){if(x_.randomUUID&&!t)return x_.randomUUID();t=t||{};const r=t.random||(t.rng||WB)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,KB(r)}const XB=(t,e=600,n=150,r=!1)=>new Promise((i,o)=>{const a=t.size/1048576,s=new FileReader;s.readAsDataURL(t),s.onload=l=>{var c;const u=new Image;u.src=(c=l.target)==null?void 0:c.result,u.onload=()=>{const d=document.createElement("canvas");let h=u.width,g=u.height;h>e&&(g=e/h*g,h=e),d.width=h,d.height=g;const y=d.getContext("2d");y==null||y.drawImage(u,0,0,h,g);let x=.5,v=d.toDataURL("image/jpeg",x);const b=n*1024;if(v.split(",")[1].length*3/4>b&&(x=.35,v=d.toDataURL("image/jpeg",x),v.split(",")[1].length*3/4>b&&(x=.25,v=d.toDataURL("image/jpeg",x))),r){const T=v.split(",")[1].length*3/4/1024,S=(a*1024-T)/(a*1024)*100;console.log(` Image Optimization:
  Original: ${a.toFixed(2)}MB (${u.width}${u.height}px)
  Optimized: ${T.toFixed(0)}KB (${Math.round(h)}${Math.round(g)}px)
  Quality: ${(x*100).toFixed(0)}%
  Saved: ${S.toFixed(0)}% `)}i(v)},u.onerror=d=>o(d)},s.onerror=l=>o(l)}),QC=({onClose:t,onSuccess:e,editEntry:n})=>{const[r,i]=P.useState("scan"),[o,a]=P.useState(n?"details":"upload"),[s,l]=P.useState((n==null?void 0:n.imageUrl)||null),[u,c]=P.useState(!1),[d,h]=P.useState(!1),[g,y]=P.useState(!1),[x,v]=P.useState(null),b=P.useRef(null),[w,_]=P.useState(""),T=new Date,S=`${T.getHours().toString().padStart(2,"0")}:${T.getMinutes().toString().padStart(2,"0")}`,[E,k]=P.useState((n==null?void 0:n.date)||T.toISOString().split("T")[0]),[A,C]=P.useState((n==null?void 0:n.time)||S),[R,I]=P.useState((n==null?void 0:n.food_item)||""),[O,j]=P.useState((n==null?void 0:n.calories.toString())||""),[M,U]=P.useState((n==null?void 0:n.protein.toString())||""),[L,B]=P.useState((n==null?void 0:n.carbs.toString())||""),[N,$]=P.useState((n==null?void 0:n.fat.toString())||""),[F,V]=P.useState((n==null?void 0:n.ingredients)||[]),[q,te]=P.useState((n==null?void 0:n.confidence)||null),[de,pe]=P.useState((n==null?void 0:n.originalAiResponse)||null),Ie=async ee=>{if(ee.target.files&&ee.target.files[0]){const Oe=ee.target.files[0];try{const at=await XB(Oe,600,150,!0);l(at),v(null)}catch{v("Failed to process image.")}}},W=async()=>{if(s){c(!0),v(null);try{const ee=s.split(",")[1],Oe=await HB(ee);H(Oe),pe(Oe),a("details")}catch(ee){v(ee.message)}finally{c(!1)}}},X=async()=>{if(w.trim()){c(!0),v(null);try{const ee=await v_(w);H(ee),pe(ee),a("details")}catch(ee){v(ee.message)}finally{c(!1)}}},H=ee=>{I(ee.item),j(ee.calories.toString()),U(ee.protein.toString()),B(ee.carbs.toString()),$(ee.fat.toString()),V(ee.ingredients||[]),te(ee.confidence)},Z=async()=>{h(!0),v(null);try{const ee=await v_(R,F);H(ee)}catch(ee){v(ee.message)}finally{h(!1)}},ie=(ee,Oe,at)=>{const $t=[...F];if(Oe==="grams"||Oe==="calories"){const dn=at===""?0:parseInt(at);$t[ee]={...$t[ee],[Oe]:isNaN(dn)?0:dn}}else $t[ee]={...$t[ee],[Oe]:at};V($t)},z=ee=>{V(F.filter((Oe,at)=>at!==ee))},Te=()=>{V([...F,{name:"",grams:100,calories:0}])},fe=async()=>{if(!R.trim()||!O){v("Please fill required fields.");return}try{const[ee,Oe,at]=E.split("-").map(Number),[$t,dn]=A.split(":").map(Number),uo=new Date(ee,Oe-1,at,$t,dn);if(isNaN(uo.getTime()))throw new Error("Invalid date or time selected.");const hu=uo.toISOString(),ts=Number(O),AO=Number(M)||0,CO=Number(L)||0,PO=Number(N)||0;if(isNaN(ts))throw new Error("Calories must be a valid number.");const NO={id:(n==null?void 0:n.id)||YB(),timestamp:hu,date:E,time:A,food_item:R,calories:ts,protein:AO,carbs:CO,fat:PO,confidence:q||1,imageUrl:s||void 0,ingredients:F,originalAiResponse:de};y(!0),v(null),await vj(NO),e()}catch(ee){console.error("Save failed:",ee),v(ee.message||"Failed to save record.")}finally{y(!1)}},ke=x==null?void 0:x.includes("Limit Reached"),J=x==null?void 0:x.includes("Database Quota"),Me=x==null?void 0:x.includes("Browser Storage Full");return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] p-6 shadow-2xl border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[o==="details"&&!n&&m.jsx("button",{onClick:()=>a("upload"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:m.jsx(vf,{size:24,className:"text-gray-900 dark:text-gray-50"})}),m.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:n?"Edit Record":o==="upload"?"Track Meal":"Meal Receipt"})]}),m.jsx("button",{onClick:t,className:"p-2 bg-gray-100 dark:bg-white/5 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:m.jsx(Tr,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),x&&m.jsxs("div",{className:`mb-4 p-4 rounded-3xl flex flex-col gap-3 animate-in shake-1 duration-300 ${ke?"bg-amber-50 dark:bg-amber-950/30 border border-amber-100 dark:border-amber-900/30 text-amber-700 dark:text-amber-400":J||Me?"bg-orange-50 dark:bg-orange-950/30 border border-orange-100 dark:border-orange-900/30 text-orange-700 dark:text-orange-400":"bg-red-50 dark:bg-red-950/20 border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400"}`,children:[m.jsxs("div",{className:"flex items-start gap-3",children:[ke?m.jsx(mM,{className:"shrink-0 mt-0.5",size:18}):J||Me?m.jsx(_A,{className:"shrink-0 mt-0.5",size:18}):m.jsx(xA,{className:"shrink-0 mt-0.5",size:18}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:ke?"AI limit reached":Me?"Phone Storage Full":J?"Cloud Storage Full":"Action Failed"}),m.jsx("p",{className:"text-xs font-semibold leading-relaxed",children:x})]})]}),!Me&&(ke||!J)&&m.jsxs("button",{onClick:()=>{v(null),o==="upload"?W():Z()},className:"w-full py-2 bg-white/50 dark:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-white/80 dark:hover:bg-white/20 transition-all",children:[m.jsx(TM,{size:14})," Try Again"]}),Me&&m.jsx("div",{className:"pt-2 border-t border-orange-200 dark:border-orange-900/40",children:m.jsx("p",{className:"text-[10px] font-medium text-orange-600/70 dark:text-orange-400/70 italic",children:"Tip: Photos take up the most space. Delete old entries in the History tab to free up browser storage."})})]}),o==="upload"?m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-[20px]",children:[m.jsxs("button",{onClick:()=>i("scan"),className:`flex-1 py-3 flex items-center justify-center gap-2 rounded-[16px] text-xs font-bold transition-all ${r==="scan"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:[m.jsx(Ls,{size:16}),"Scan"]}),m.jsxs("button",{onClick:()=>i("chat"),className:`flex-1 py-3 flex items-center justify-center gap-2 rounded-[16px] text-xs font-bold transition-all ${r==="chat"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:[m.jsx(bM,{size:16}),"Chat"]}),m.jsxs("button",{onClick:()=>i("recipe"),className:`flex-1 py-3 flex items-center justify-center gap-2 rounded-[16px] text-xs font-bold transition-all ${r==="recipe"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"}`,children:[m.jsx(Bc,{size:16}),"Recipe"]})]}),r==="scan"&&m.jsxs(m.Fragment,{children:[s?m.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10",children:[m.jsx("img",{src:s,className:"w-full h-full object-cover"}),m.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md",children:m.jsx(Tr,{size:20})})]}):m.jsxs("div",{onClick:()=>{var ee;return(ee=b.current)==null?void 0:ee.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[m.jsx(Ls,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),m.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),m.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Let AI do the calorie math"})]}),m.jsx("input",{type:"file",ref:b,accept:"image/*",onChange:Ie,className:"hidden"}),m.jsx(Lt,{className:"w-full py-5 text-lg font-black",disabled:!s||u,isLoading:u,onClick:W,children:"Analyze Plate"})]}),r==="chat"&&m.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[m.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-5 rounded-[32px] border border-royal-100 dark:border-royal-900/30 transition-colors",children:[m.jsxs("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[m.jsx(vr,{size:14})," Describe your meal"]}),m.jsx("textarea",{value:w,onChange:ee=>_(ee.target.value),placeholder:"e.g. I had two slices of pepperoni pizza and a small Caesar salad with Italian dressing.",rows:4,className:"w-full bg-transparent border-none outline-none text-gray-900 dark:text-white font-medium text-sm resize-none placeholder-gray-400 dark:placeholder-gray-600"})]}),m.jsx(Lt,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",disabled:!w.trim()||u,isLoading:u,onClick:X,children:"Ask AI"})]}),r==="recipe"&&m.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300 text-center py-6",children:[m.jsx(Bc,{size:40,className:"mx-auto text-royal-400 mb-2"}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Recipe Mode Coming Soon"}),m.jsx("p",{className:"text-xs font-medium text-gray-400 px-8",children:"For now, use Chat mode to describe your recipe ingredients for estimation."}),m.jsx(Lt,{className:"w-full py-3 mt-4 text-xs font-bold text-gray-400 hover:text-royal-500 bg-gray-50 dark:bg-white/5",onClick:()=>a("details"),children:"Enter Details Manually"})]}),r!=="recipe"&&m.jsx("button",{onClick:()=>a("details"),className:"w-full py-3 text-sm font-bold text-gray-400 dark:text-gray-600 hover:text-royal-500",children:"Enter Details Manually"})]}):m.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[m.jsxs("div",{className:"bg-royal-600 rounded-[32px] p-6 text-white shadow-xl shadow-royal-200 dark:shadow-none",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-royal-100 text-[10px] font-black uppercase tracking-widest mb-1",children:"Estimated Calories"}),m.jsxs("div",{className:"flex items-baseline gap-1",children:[m.jsx("input",{type:"number",value:O,onChange:ee=>j(ee.target.value),className:"bg-transparent text-4xl font-black w-24 outline-none border-b-2 border-white/20 focus:border-white transition-colors"}),m.jsx("span",{className:"text-xl font-bold opacity-70",children:"kcal"})]})]}),m.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-md",children:m.jsx(_v,{size:24})})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[m.jsxs("div",{className:"relative w-full",children:[m.jsx("input",{type:"number",value:M,onChange:ee=>U(ee.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),m.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),m.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Protein"})]}),m.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[m.jsxs("div",{className:"relative w-full",children:[m.jsx("input",{type:"number",value:L,onChange:ee=>B(ee.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),m.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),m.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Carbs"})]}),m.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[m.jsxs("div",{className:"relative w-full",children:[m.jsx("input",{type:"number",value:N,onChange:ee=>$(ee.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),m.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),m.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Fat"})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[m.jsx(Yi,{size:18,className:"text-royal-400"}),m.jsx("input",{type:"date",value:E,onChange:ee=>k(ee.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]}),m.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[m.jsx(wA,{size:18,className:"text-royal-400"}),m.jsx("input",{type:"time",value:A,onChange:ee=>C(ee.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase ml-1",children:"Meal Title"}),m.jsx("input",{type:"text",value:R,onChange:ee=>I(ee.target.value),className:"w-full p-4 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-2xl font-bold dark:text-white mt-1"})]}),m.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-[32px] p-5 border border-gray-100 dark:border-white/5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[m.jsx(vr,{size:14,className:"text-royal-500"})," Ingredient Receipt"]}),m.jsx("button",{onClick:Te,className:"text-royal-500 hover:text-royal-600",children:m.jsx(EM,{size:18})})]}),m.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto no-scrollbar pr-1",children:F.map((ee,Oe)=>m.jsxs("div",{className:"flex items-center gap-2 group animate-in slide-in-from-left duration-200",children:[m.jsx("input",{type:"text",value:ee.name,onChange:at=>ie(Oe,"name",at.target.value),className:"flex-1 bg-white dark:bg-white/10 p-2.5 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none focus:border-royal-300 dark:text-white",placeholder:"Ingredient"}),m.jsxs("div",{className:"relative w-20",children:[m.jsx("input",{type:"number",value:ee.grams===0?"":ee.grams,onChange:at=>ie(Oe,"grams",at.target.value),className:"w-full bg-white dark:bg-white/10 p-2.5 pr-6 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none text-right dark:text-white"}),m.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[8px] font-black text-gray-400",children:"g"})]}),m.jsx("button",{onClick:()=>z(Oe),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx(xf,{size:16})})]},Oe))}),m.jsxs(Lt,{variant:"ghost",className:"w-full mt-4 py-3 text-[10px] font-black uppercase tracking-widest text-royal-600 bg-royal-100/50 hover:bg-royal-100",onClick:Z,isLoading:d,children:[m.jsx(Nm,{size:14,className:`mr-2 ${d?"animate-spin":""}`}),"Recalculate Totals"]})]}),m.jsx(Lt,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",onClick:fe,isLoading:g,disabled:g,children:n?"Update Record":"Save & Track"})]})]})})},QB=({currentGoal:t,onClose:e,onSave:n})=>{const[r,i]=P.useState(t.toString()),o=()=>{const a=parseInt(r,10);!isNaN(a)&&a>0&&n(a)};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white w-full max-w-xs rounded-[32px] p-6 shadow-2xl border border-white/50 animate-in zoom-in-95 duration-200",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-lg font-extrabold text-gray-900",children:"Daily Calorie Goal"}),m.jsx("button",{onClick:e,className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",children:m.jsx(Tr,{size:18,className:"text-gray-600"})})]}),m.jsxs("div",{className:"mb-8",children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Target Calories"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:r,onChange:a=>i(a.target.value),className:"w-full p-5 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 transition-all font-extrabold text-3xl text-center text-gray-900",autoFocus:!0}),m.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-gray-400 text-sm font-bold",children:"kcal"})]})]}),m.jsx(Lt,{className:"w-full py-4 shadow-lg shadow-royal-200",onClick:o,children:"Update Goal"})]})})},ig=({entry:t,onClose:e,onDelete:n,onEdit:r})=>{const[i,o]=P.useState(!1),[a,s]=P.useState(!1),l=async()=>{confirm("Permanently remove this record?")&&(o(!0),await n(t.id),e())},u=async()=>{if(confirm("Remove the photo to save storage space? Nutritional data will be kept.")){s(!0);try{await Ej(t.id),e(),window.dispatchEvent(new CustomEvent("food-entry-updated"))}catch(c){console.error("Failed to clear image",c),alert("Failed to clear image. Please try again.")}finally{s(!1)}}};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 dark:bg-black/60 backdrop-blur-md p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl dark:shadow-black border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[m.jsxs("div",{className:"relative h-64 bg-gray-100 dark:bg-white/5",children:[t.imageUrl?m.jsxs(m.Fragment,{children:[m.jsx("img",{src:t.imageUrl,className:"w-full h-full object-cover"}),m.jsxs("button",{onClick:u,disabled:a,className:"absolute bottom-4 right-4 p-2.5 bg-white/20 hover:bg-white/40 text-white rounded-full backdrop-blur-md border border-white/20 transition-all flex items-center gap-2",title:"Remove photo to save space",children:[a?m.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):m.jsx(gM,{size:18}),m.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Clear Image"})]})]}):m.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-300 dark:text-gray-700",children:[m.jsx(Bc,{size:48,className:"mb-2 opacity-50"}),m.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-40",children:"No Photo Attached"})]}),m.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-white/80 dark:bg-black/40 text-gray-900 dark:text-white rounded-full backdrop-blur-md hover:bg-white dark:hover:bg-black/60 shadow-lg transition-colors z-10",children:m.jsx(Tr,{size:20})}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent pointer-events-none"}),m.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white pointer-events-none",children:[m.jsx("h2",{className:"text-3xl font-black leading-tight tracking-tight",children:t.food_item}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-white/70 font-bold mt-2",children:[m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx(Yi,{size:14})," ",t.date]}),m.jsxs("div",{className:"flex items-center gap-1.5",children:[m.jsx(wA,{size:14})," ",t.time]})]})]})]}),m.jsxs("div",{className:"p-8 space-y-6",children:[m.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[m.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/20 p-3 rounded-2xl flex flex-col items-center border border-royal-100/50",children:[m.jsx("span",{className:"text-lg font-black text-royal-600",children:t.calories}),m.jsx("span",{className:"text-[8px] font-black uppercase text-royal-400",children:"kcal"})]}),m.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 p-3 rounded-2xl flex flex-col items-center border border-emerald-100/50",children:[m.jsxs("span",{className:"text-lg font-black text-emerald-600",children:[t.protein,"g"]}),m.jsx("span",{className:"text-[8px] font-black uppercase text-emerald-400",children:"Prot"})]}),m.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-3 rounded-2xl flex flex-col items-center border border-blue-100/50",children:[m.jsxs("span",{className:"text-lg font-black text-blue-600",children:[t.carbs,"g"]}),m.jsx("span",{className:"text-[8px] font-black uppercase text-blue-400",children:"Carb"})]}),m.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 p-3 rounded-2xl flex flex-col items-center border border-orange-100/50",children:[m.jsxs("span",{className:"text-lg font-black text-orange-600",children:[t.fat,"g"]}),m.jsx("span",{className:"text-[8px] font-black uppercase text-orange-400",children:"Fat"})]})]}),t.ingredients&&t.ingredients.length>0&&m.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-3xl p-6 border border-gray-100 dark:border-white/5",children:[m.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[m.jsx(vM,{size:14})," Ingredient Receipt"]}),m.jsx("div",{className:"space-y-3",children:t.ingredients.map((c,d)=>m.jsxs("div",{className:"flex justify-between items-center text-sm font-bold border-b border-gray-100 dark:border-white/5 pb-2 last:border-0 last:pb-0",children:[m.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:c.name}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("span",{className:"text-gray-400",children:[c.grams,"g"]}),m.jsxs("span",{className:"text-royal-500 text-xs w-12 text-right",children:[c.calories,"cal"]})]})]},d))})]}),m.jsxs("div",{className:"flex gap-3",children:[m.jsxs(Lt,{variant:"ghost",className:"flex-1 text-red-500 py-4 font-black",onClick:l,isLoading:i,children:[m.jsx(xf,{size:18,className:"mr-2"})," Delete"]}),m.jsxs(Lt,{className:"flex-[2] py-4 font-black shadow-lg shadow-royal-200",onClick:()=>r(t),children:[m.jsx(SA,{size:18,className:"mr-2"})," Edit Meal"]})]})]})]})})};var ZB=Array.isArray,Yt=ZB,e6=typeof pu=="object"&&pu&&pu.Object===Object&&pu,ZC=e6,t6=ZC,n6=typeof self=="object"&&self&&self.Object===Object&&self,r6=t6||n6||Function("return this")(),sr=r6,i6=sr,o6=i6.Symbol,au=o6,b_=au,eP=Object.prototype,a6=eP.hasOwnProperty,s6=eP.toString,fs=b_?b_.toStringTag:void 0;function l6(t){var e=a6.call(t,fs),n=t[fs];try{t[fs]=void 0;var r=!0}catch{}var i=s6.call(t);return r&&(e?t[fs]=n:delete t[fs]),i}var u6=l6,c6=Object.prototype,d6=c6.toString;function f6(t){return d6.call(t)}var h6=f6,w_=au,p6=u6,m6=h6,g6="[object Null]",y6="[object Undefined]",__=w_?w_.toStringTag:void 0;function v6(t){return t==null?t===void 0?y6:g6:__&&__ in Object(t)?p6(t):m6(t)}var $r=v6;function x6(t){return t!=null&&typeof t=="object"}var Dr=x6,b6=$r,w6=Dr,_6="[object Symbol]";function S6(t){return typeof t=="symbol"||w6(t)&&b6(t)==_6}var Ba=S6,E6=Yt,T6=Ba,k6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,A6=/^\w*$/;function C6(t,e){if(E6(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||T6(t)?!0:A6.test(t)||!k6.test(t)||e!=null&&t in Object(e)}var Yv=C6;function P6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var hi=P6;const Ga=Ue(hi);var N6=$r,I6=hi,O6="[object AsyncFunction]",R6="[object Function]",M6="[object GeneratorFunction]",$6="[object Proxy]";function D6(t){if(!I6(t))return!1;var e=N6(t);return e==R6||e==M6||e==O6||e==$6}var Xv=D6;const me=Ue(Xv);var j6=sr,L6=j6["__core-js_shared__"],U6=L6,ap=U6,S_=function(){var t=/[^.]+$/.exec(ap&&ap.keys&&ap.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function F6(t){return!!S_&&S_ in t}var B6=F6,G6=Function.prototype,z6=G6.toString;function V6(t){if(t!=null){try{return z6.call(t)}catch{}try{return t+""}catch{}}return""}var tP=V6,H6=Xv,q6=B6,W6=hi,K6=tP,J6=/[\\^$.*+?()[\]{}|]/g,Y6=/^\[object .+?Constructor\]$/,X6=Function.prototype,Q6=Object.prototype,Z6=X6.toString,eG=Q6.hasOwnProperty,tG=RegExp("^"+Z6.call(eG).replace(J6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nG(t){if(!W6(t)||q6(t))return!1;var e=H6(t)?tG:Y6;return e.test(K6(t))}var rG=nG;function iG(t,e){return t==null?void 0:t[e]}var oG=iG,aG=rG,sG=oG;function lG(t,e){var n=sG(t,e);return aG(n)?n:void 0}var oo=lG,uG=oo,cG=uG(Object,"create"),Mf=cG,E_=Mf;function dG(){this.__data__=E_?E_(null):{},this.size=0}var fG=dG;function hG(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var pG=hG,mG=Mf,gG="__lodash_hash_undefined__",yG=Object.prototype,vG=yG.hasOwnProperty;function xG(t){var e=this.__data__;if(mG){var n=e[t];return n===gG?void 0:n}return vG.call(e,t)?e[t]:void 0}var bG=xG,wG=Mf,_G=Object.prototype,SG=_G.hasOwnProperty;function EG(t){var e=this.__data__;return wG?e[t]!==void 0:SG.call(e,t)}var TG=EG,kG=Mf,AG="__lodash_hash_undefined__";function CG(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kG&&e===void 0?AG:e,this}var PG=CG,NG=fG,IG=pG,OG=bG,RG=TG,MG=PG;function za(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}za.prototype.clear=NG;za.prototype.delete=IG;za.prototype.get=OG;za.prototype.has=RG;za.prototype.set=MG;var $G=za;function DG(){this.__data__=[],this.size=0}var jG=DG;function LG(t,e){return t===e||t!==t&&e!==e}var Qv=LG,UG=Qv;function FG(t,e){for(var n=t.length;n--;)if(UG(t[n][0],e))return n;return-1}var $f=FG,BG=$f,GG=Array.prototype,zG=GG.splice;function VG(t){var e=this.__data__,n=BG(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zG.call(e,n,1),--this.size,!0}var HG=VG,qG=$f;function WG(t){var e=this.__data__,n=qG(e,t);return n<0?void 0:e[n][1]}var KG=WG,JG=$f;function YG(t){return JG(this.__data__,t)>-1}var XG=YG,QG=$f;function ZG(t,e){var n=this.__data__,r=QG(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ez=ZG,tz=jG,nz=HG,rz=KG,iz=XG,oz=ez;function Va(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Va.prototype.clear=tz;Va.prototype.delete=nz;Va.prototype.get=rz;Va.prototype.has=iz;Va.prototype.set=oz;var Df=Va,az=oo,sz=sr,lz=az(sz,"Map"),Zv=lz,T_=$G,uz=Df,cz=Zv;function dz(){this.size=0,this.__data__={hash:new T_,map:new(cz||uz),string:new T_}}var fz=dz;function hz(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var pz=hz,mz=pz;function gz(t,e){var n=t.__data__;return mz(e)?n[typeof e=="string"?"string":"hash"]:n.map}var jf=gz,yz=jf;function vz(t){var e=yz(this,t).delete(t);return this.size-=e?1:0,e}var xz=vz,bz=jf;function wz(t){return bz(this,t).get(t)}var _z=wz,Sz=jf;function Ez(t){return Sz(this,t).has(t)}var Tz=Ez,kz=jf;function Az(t,e){var n=kz(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Cz=Az,Pz=fz,Nz=xz,Iz=_z,Oz=Tz,Rz=Cz;function Ha(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ha.prototype.clear=Pz;Ha.prototype.delete=Nz;Ha.prototype.get=Iz;Ha.prototype.has=Oz;Ha.prototype.set=Rz;var e0=Ha,nP=e0,Mz="Expected a function";function t0(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Mz);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(t0.Cache||nP),n}t0.Cache=nP;var rP=t0;const $z=Ue(rP);var Dz=rP,jz=500;function Lz(t){var e=Dz(t,function(r){return n.size===jz&&n.clear(),r}),n=e.cache;return e}var Uz=Lz,Fz=Uz,Bz=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gz=/\\(\\)?/g,zz=Fz(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Bz,function(n,r,i,o){e.push(i?o.replace(Gz,"$1"):r||n)}),e}),Vz=zz;function Hz(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var n0=Hz,k_=au,qz=n0,Wz=Yt,Kz=Ba,A_=k_?k_.prototype:void 0,C_=A_?A_.toString:void 0;function iP(t){if(typeof t=="string")return t;if(Wz(t))return qz(t,iP)+"";if(Kz(t))return C_?C_.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Jz=iP,Yz=Jz;function Xz(t){return t==null?"":Yz(t)}var oP=Xz,Qz=Yt,Zz=Yv,eV=Vz,tV=oP;function nV(t,e){return Qz(t)?t:Zz(t,e)?[t]:eV(tV(t))}var aP=nV,rV=Ba;function iV(t){if(typeof t=="string"||rV(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Lf=iV,oV=aP,aV=Lf;function sV(t,e){e=oV(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[aV(e[n++])];return n&&n==r?t:void 0}var r0=sV,lV=r0;function uV(t,e,n){var r=t==null?void 0:lV(t,e);return r===void 0?n:r}var sP=uV;const _n=Ue(sP);function cV(t){return t==null}var dV=cV;const xe=Ue(dV);var fV=$r,hV=Yt,pV=Dr,mV="[object String]";function gV(t){return typeof t=="string"||!hV(t)&&pV(t)&&fV(t)==mV}var yV=gV;const Xi=Ue(yV);var lP={exports:{}},Ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=Symbol.for("react.element"),o0=Symbol.for("react.portal"),Uf=Symbol.for("react.fragment"),Ff=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),Gf=Symbol.for("react.provider"),zf=Symbol.for("react.context"),vV=Symbol.for("react.server_context"),Vf=Symbol.for("react.forward_ref"),Hf=Symbol.for("react.suspense"),qf=Symbol.for("react.suspense_list"),Wf=Symbol.for("react.memo"),Kf=Symbol.for("react.lazy"),xV=Symbol.for("react.offscreen"),uP;uP=Symbol.for("react.module.reference");function Pn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case i0:switch(t=t.type,t){case Uf:case Bf:case Ff:case Hf:case qf:return t;default:switch(t=t&&t.$$typeof,t){case vV:case zf:case Vf:case Kf:case Wf:case Gf:return t;default:return e}}case o0:return e}}}Ne.ContextConsumer=zf;Ne.ContextProvider=Gf;Ne.Element=i0;Ne.ForwardRef=Vf;Ne.Fragment=Uf;Ne.Lazy=Kf;Ne.Memo=Wf;Ne.Portal=o0;Ne.Profiler=Bf;Ne.StrictMode=Ff;Ne.Suspense=Hf;Ne.SuspenseList=qf;Ne.isAsyncMode=function(){return!1};Ne.isConcurrentMode=function(){return!1};Ne.isContextConsumer=function(t){return Pn(t)===zf};Ne.isContextProvider=function(t){return Pn(t)===Gf};Ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===i0};Ne.isForwardRef=function(t){return Pn(t)===Vf};Ne.isFragment=function(t){return Pn(t)===Uf};Ne.isLazy=function(t){return Pn(t)===Kf};Ne.isMemo=function(t){return Pn(t)===Wf};Ne.isPortal=function(t){return Pn(t)===o0};Ne.isProfiler=function(t){return Pn(t)===Bf};Ne.isStrictMode=function(t){return Pn(t)===Ff};Ne.isSuspense=function(t){return Pn(t)===Hf};Ne.isSuspenseList=function(t){return Pn(t)===qf};Ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Uf||t===Bf||t===Ff||t===Hf||t===qf||t===xV||typeof t=="object"&&t!==null&&(t.$$typeof===Kf||t.$$typeof===Wf||t.$$typeof===Gf||t.$$typeof===zf||t.$$typeof===Vf||t.$$typeof===uP||t.getModuleId!==void 0)};Ne.typeOf=Pn;lP.exports=Ne;var bV=lP.exports,wV=$r,_V=Dr,SV="[object Number]";function EV(t){return typeof t=="number"||_V(t)&&wV(t)==SV}var cP=EV;const TV=Ue(cP);var kV=cP;function AV(t){return kV(t)&&t!=+t}var CV=AV;const qa=Ue(CV);var Bn=function(e){return e===0?0:e>0?1:-1},Mi=function(e){return Xi(e)&&e.indexOf("%")===e.length-1},Y=function(e){return TV(e)&&!qa(e)},PV=function(e){return xe(e)},ft=function(e){return Y(e)||Xi(e)},NV=0,su=function(e){var n=++NV;return"".concat(e||"").concat(n)},Qi=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Y(e)&&!Xi(e))return r;var o;if(Mi(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return qa(o)&&(o=r),i&&o>n&&(o=n),o},To=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},IV=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},yn=function(e,n){return Y(e)&&Y(n)?function(r){return e+r*(n-e)}:function(){return n}};function td(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):_n(r,e))===n})}var OV=function(e,n){return Y(e)&&Y(n)?e-n:Xi(e)&&Xi(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ea(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function og(t){"@babel/helpers - typeof";return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(t)}var RV=["viewBox","children"],MV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],P_=["points","pathLength"],sp={svg:RV,polygon:P_,polyline:P_},a0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],nd=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(P.isValidElement(e)&&(r=e.props),!Ga(r))return null;var i={};return Object.keys(r).forEach(function(o){a0.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},$V=function(e,n,r){return function(i){return e(n,r,i),null}},rd=function(e,n,r){if(!Ga(e)||og(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];a0.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=$V(a,n,r))}),i},DV=["children"],jV=["children"];function N_(t,e){if(t==null)return{};var n=LV(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ag(t){"@babel/helpers - typeof";return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(t)}var I_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},xr=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},O_=null,lp=null,s0=function t(e){if(e===O_&&Array.isArray(lp))return lp;var n=[];return P.Children.forEach(e,function(r){xe(r)||(bV.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),lp=n,O_=e,n};function qn(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return xr(i)}):r=[xr(e)],s0(t).forEach(function(i){var o=_n(i,"type.displayName")||_n(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function en(t,e){var n=qn(t,e);return n&&n[0]}var R_=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Y(r)||r<=0||!Y(i)||i<=0)},UV=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],FV=function(e){return e&&e.type&&Xi(e.type)&&UV.indexOf(e.type)>=0},BV=function(e){return e&&ag(e)==="object"&&"clipDot"in e},GV=function(e,n,r,i){var o,a=(o=sp==null?void 0:sp[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!me(e)&&(i&&a.includes(n)||MV.includes(n))||r&&a0.includes(n)},ve=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(P.isValidElement(e)&&(i=e.props),!Ga(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;GV((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},sg=function t(e,n){if(e===n)return!0;var r=P.Children.count(e);if(r!==P.Children.count(n))return!1;if(r===0)return!0;if(r===1)return M_(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!M_(o,a))return!1}return!0},M_=function(e,n){if(xe(e)&&xe(n))return!0;if(!xe(e)&&!xe(n)){var r=e.props||{},i=r.children,o=N_(r,DV),a=n.props||{},s=a.children,l=N_(a,jV);return i&&s?ea(o,l)&&sg(i,s):!i&&!s?ea(o,l):!1}return!1},$_=function(e,n){var r=[],i={};return s0(e).forEach(function(o,a){if(FV(o))r.push(o);else if(o){var s=xr(o.type),l=n[s]||{},u=l.handler,c=l.once;if(u&&(!c||!i[s])){var d=u(o,s,a);r.push(d),i[s]=!0}}}),r},zV=function(e){var n=e&&e.type;return n&&I_[n]?I_[n]:null},VV=function(e,n){return s0(n).indexOf(e)},HV=["children","width","height","viewBox","className","style","title","desc"];function lg(){return lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lg.apply(this,arguments)}function qV(t,e){if(t==null)return{};var n=WV(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function WV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ug(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,u=qV(t,HV),c=i||{width:n,height:r,x:0,y:0},d=he("recharts-surface",o);return D.createElement("svg",lg({},ve(u,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),D.createElement("title",null,s),D.createElement("desc",null,l),e)}var KV=["children","className"];function cg(){return cg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cg.apply(this,arguments)}function JV(t,e){if(t==null)return{};var n=YV(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function YV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Je=D.forwardRef(function(t,e){var n=t.children,r=t.className,i=JV(t,KV),o=he("recharts-layer",r);return D.createElement("g",cg({className:o},ve(i,!0),{ref:e}),n)}),Gi=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function XV(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var QV=XV,ZV=QV;function eH(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:ZV(t,e,n)}var tH=eH,nH="\\ud800-\\udfff",rH="\\u0300-\\u036f",iH="\\ufe20-\\ufe2f",oH="\\u20d0-\\u20ff",aH=rH+iH+oH,sH="\\ufe0e\\ufe0f",lH="\\u200d",uH=RegExp("["+lH+nH+aH+sH+"]");function cH(t){return uH.test(t)}var dP=cH;function dH(t){return t.split("")}var fH=dH,fP="\\ud800-\\udfff",hH="\\u0300-\\u036f",pH="\\ufe20-\\ufe2f",mH="\\u20d0-\\u20ff",gH=hH+pH+mH,yH="\\ufe0e\\ufe0f",vH="["+fP+"]",dg="["+gH+"]",fg="\\ud83c[\\udffb-\\udfff]",xH="(?:"+dg+"|"+fg+")",hP="[^"+fP+"]",pP="(?:\\ud83c[\\udde6-\\uddff]){2}",mP="[\\ud800-\\udbff][\\udc00-\\udfff]",bH="\\u200d",gP=xH+"?",yP="["+yH+"]?",wH="(?:"+bH+"(?:"+[hP,pP,mP].join("|")+")"+yP+gP+")*",_H=yP+gP+wH,SH="(?:"+[hP+dg+"?",dg,pP,mP,vH].join("|")+")",EH=RegExp(fg+"(?="+fg+")|"+SH+_H,"g");function TH(t){return t.match(EH)||[]}var kH=TH,AH=fH,CH=dP,PH=kH;function NH(t){return CH(t)?PH(t):AH(t)}var IH=NH,OH=tH,RH=dP,MH=IH,$H=oP;function DH(t){return function(e){e=$H(e);var n=RH(e)?MH(e):void 0,r=n?n[0]:e.charAt(0),i=n?OH(n,1).join(""):e.slice(1);return r[t]()+i}}var jH=DH,LH=jH,UH=LH("toUpperCase"),FH=UH;const Jf=Ue(FH);function je(t){return function(){return t}}const vP=Math.cos,id=Math.sin,Yn=Math.sqrt,od=Math.PI,Yf=2*od,hg=Math.PI,pg=2*hg,Ti=1e-6,BH=pg-Ti;function xP(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function GH(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return xP;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class zH{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?xP:GH(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,u=i-n,c=a-e,d=s-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Ti)if(!(Math.abs(d*l-u*c)>Ti)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,y=i-s,x=l*l+u*u,v=g*g+y*y,b=Math.sqrt(x),w=Math.sqrt(h),_=o*Math.tan((hg-Math.acos((x+h-v)/(2*b*w)))/2),T=_/w,S=_/b;Math.abs(T-1)>Ti&&this._append`L${e+T*c},${n+T*d}`,this._append`A${o},${o},0,0,${+(d*g>c*y)},${this._x1=e+S*l},${this._y1=n+S*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,d=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Ti||Math.abs(this._y1-c)>Ti)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%pg+pg),h>BH?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:h>Ti&&this._append`A${r},${r},0,${+(h>=hg)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function l0(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new zH(e)}function u0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function bP(t){this._context=t}bP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Xf(t){return new bP(t)}function wP(t){return t[0]}function _P(t){return t[1]}function SP(t,e){var n=je(!0),r=null,i=Xf,o=null,a=l0(s);t=typeof t=="function"?t:t===void 0?wP:je(t),e=typeof e=="function"?e:e===void 0?_P:je(e);function s(l){var u,c=(l=u0(l)).length,d,h=!1,g;for(r==null&&(o=i(g=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,u,l),+e(d,u,l));if(g)return o=null,g+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:je(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:je(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:je(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function Gu(t,e,n){var r=null,i=je(!0),o=null,a=Xf,s=null,l=l0(u);t=typeof t=="function"?t:t===void 0?wP:je(+t),e=typeof e=="function"?e:je(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?_P:je(+n);function u(d){var h,g,y,x=(d=u0(d)).length,v,b=!1,w,_=new Array(x),T=new Array(x);for(o==null&&(s=a(w=l())),h=0;h<=x;++h){if(!(h<x&&i(v=d[h],h,d))===b)if(b=!b)g=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=g;--y)s.point(_[y],T[y]);s.lineEnd(),s.areaEnd()}b&&(_[h]=+t(v,h,d),T[h]=+e(v,h,d),s.point(r?+r(v,h,d):_[h],n?+n(v,h,d):T[h]))}if(w)return s=null,w+""||null}function c(){return SP().defined(i).curve(a).context(o)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:je(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:je(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:je(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:je(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:je(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:je(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:je(!!d),u):i},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}class EP{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function VH(t){return new EP(t,!0)}function HH(t){return new EP(t,!1)}const c0={draw(t,e){const n=Yn(e/od);t.moveTo(n,0),t.arc(0,0,n,0,Yf)}},qH={draw(t,e){const n=Yn(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},TP=Yn(1/3),WH=TP*2,KH={draw(t,e){const n=Yn(e/WH),r=n*TP;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},JH={draw(t,e){const n=Yn(e),r=-n/2;t.rect(r,r,n,n)}},YH=.8908130915292852,kP=id(od/10)/id(7*od/10),XH=id(Yf/10)*kP,QH=-vP(Yf/10)*kP,ZH={draw(t,e){const n=Yn(e*YH),r=XH*n,i=QH*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Yf*o/5,s=vP(a),l=id(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},up=Yn(3),eq={draw(t,e){const n=-Yn(e/(up*3));t.moveTo(0,n*2),t.lineTo(-up*n,-n),t.lineTo(up*n,-n),t.closePath()}},fn=-.5,hn=Yn(3)/2,mg=1/Yn(12),tq=(mg/2+1)*3,nq={draw(t,e){const n=Yn(e/tq),r=n/2,i=n*mg,o=r,a=n*mg+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(fn*r-hn*i,hn*r+fn*i),t.lineTo(fn*o-hn*a,hn*o+fn*a),t.lineTo(fn*s-hn*l,hn*s+fn*l),t.lineTo(fn*r+hn*i,fn*i-hn*r),t.lineTo(fn*o+hn*a,fn*a-hn*o),t.lineTo(fn*s+hn*l,fn*l-hn*s),t.closePath()}};function rq(t,e){let n=null,r=l0(i);t=typeof t=="function"?t:je(t||c0),e=typeof e=="function"?e:je(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:je(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:je(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function ad(){}function sd(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function AP(t){this._context=t}AP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sd(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function iq(t){return new AP(t)}function CP(t){this._context=t}CP.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:sd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function oq(t){return new CP(t)}function PP(t){this._context=t}PP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:sd(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function aq(t){return new PP(t)}function NP(t){this._context=t}NP.prototype={areaStart:ad,areaEnd:ad,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function sq(t){return new NP(t)}function D_(t){return t<0?-1:1}function j_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(D_(o)+D_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function L_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cp(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function ld(t){this._context=t}ld.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cp(this,this._t0,L_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cp(this,L_(this,n=j_(this,t,e)),n);break;default:cp(this,this._t0,n=j_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function IP(t){this._context=new OP(t)}(IP.prototype=Object.create(ld.prototype)).point=function(t,e){ld.prototype.point.call(this,e,t)};function OP(t){this._context=t}OP.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function lq(t){return new ld(t)}function uq(t){return new IP(t)}function RP(t){this._context=t}RP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=U_(t),i=U_(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function U_(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function cq(t){return new RP(t)}function Qf(t,e){this._context=t,this._t=e}Qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function dq(t){return new Qf(t,.5)}function fq(t){return new Qf(t,0)}function hq(t){return new Qf(t,1)}function ha(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function gg(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function pq(t,e){return t[e]}function mq(t){const e=[];return e.key=t,e}function gq(){var t=je([]),e=gg,n=ha,r=pq;function i(o){var a=Array.from(t.apply(this,arguments),mq),s,l=a.length,u=-1,c;for(const d of o)for(s=0,++u;s<l;++s)(a[s][u]=[0,+r(d,a[s].key,u,o)]).data=d;for(s=0,c=u0(e(a));s<l;++s)a[c[s]].index=s;return n(a,c),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:je(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:je(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?gg:typeof o=="function"?o:je(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??ha,i):n},i}function yq(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}ha(t,e)}}function vq(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}ha(t,e)}}function xq(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,u=0;s<a;++s){for(var c=t[e[s]],d=c[r][1]||0,h=c[r-1][1]||0,g=(d-h)/2,y=0;y<s;++y){var x=t[e[y]],v=x[r][1]||0,b=x[r-1][1]||0;g+=v-b}l+=d,u+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,ha(t,e)}}function yl(t){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(t)}var bq=["type","size","sizeType"];function yg(){return yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yg.apply(this,arguments)}function F_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function B_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F_(Object(n),!0).forEach(function(r){wq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wq(t,e,n){return e=_q(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _q(t){var e=Sq(t,"string");return yl(e)=="symbol"?e:e+""}function Sq(t,e){if(yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Eq(t,e){if(t==null)return{};var n=Tq(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Tq(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var MP={symbolCircle:c0,symbolCross:qH,symbolDiamond:KH,symbolSquare:JH,symbolStar:ZH,symbolTriangle:eq,symbolWye:nq},kq=Math.PI/180,Aq=function(e){var n="symbol".concat(Jf(e));return MP[n]||c0},Cq=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*kq;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Pq=function(e,n){MP["symbol".concat(Jf(e))]=n},d0=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=Eq(e,bq),u=B_(B_({},l),{},{type:r,size:o,sizeType:s}),c=function(){var v=Aq(r),b=rq().type(v).size(Cq(o,s,r));return b()},d=u.className,h=u.cx,g=u.cy,y=ve(u,!0);return h===+h&&g===+g&&o===+o?D.createElement("path",yg({},y,{className:he("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(g,")"),d:c()})):null};d0.registerSymbol=Pq;function pa(t){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(t)}function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vg.apply(this,arguments)}function G_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nq(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G_(Object(n),!0).forEach(function(r){vl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oq(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,DP(r.key),r)}}function Rq(t,e,n){return e&&Oq(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mq(t,e,n){return e=ud(e),$q(t,$P()?Reflect.construct(e,n||[],ud(t).constructor):e.apply(t,n))}function $q(t,e){if(e&&(pa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dq(t)}function Dq(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $P(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($P=function(){return!!t})()}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ud(t)}function jq(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xg(t,e)}function xg(t,e){return xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xg(t,e)}function vl(t,e,n){return e=DP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function DP(t){var e=Lq(t,"string");return pa(e)=="symbol"?e:e+""}function Lq(t,e){if(pa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var pn=32,f0=function(t){function e(){return Iq(this,e),Mq(this,e,arguments)}return jq(e,t),Rq(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=pn/2,a=pn/6,s=pn/3,l=r.inactive?i:r.color;if(r.type==="plainline")return D.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:pn,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return D.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(pn,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return D.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if(D.isValidElement(r.legendIcon)){var u=Nq({},r);return delete u.legendIcon,D.cloneElement(r.legendIcon,u)}return D.createElement(d0,{fill:l,cx:o,cy:o,size:pn,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:pn,height:pn},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(g,y){var x=g.formatter||l,v=he(vl(vl({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=me(g.value)?null:g.value;Gi(!me(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=g.inactive?u:g.color;return D.createElement("li",vg({className:v,style:d,key:"legend-item-".concat(y)},rd(r.props,g,y)),D.createElement(ug,{width:a,height:a,viewBox:c,style:h},r.renderIcon(g)),D.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},x?x(b,g,y):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return D.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(P.PureComponent);vl(f0,"displayName","Legend");vl(f0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Uq=Df;function Fq(){this.__data__=new Uq,this.size=0}var Bq=Fq;function Gq(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var zq=Gq;function Vq(t){return this.__data__.get(t)}var Hq=Vq;function qq(t){return this.__data__.has(t)}var Wq=qq,Kq=Df,Jq=Zv,Yq=e0,Xq=200;function Qq(t,e){var n=this.__data__;if(n instanceof Kq){var r=n.__data__;if(!Jq||r.length<Xq-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Yq(r)}return n.set(t,e),this.size=n.size,this}var Zq=Qq,e8=Df,t8=Bq,n8=zq,r8=Hq,i8=Wq,o8=Zq;function Wa(t){var e=this.__data__=new e8(t);this.size=e.size}Wa.prototype.clear=t8;Wa.prototype.delete=n8;Wa.prototype.get=r8;Wa.prototype.has=i8;Wa.prototype.set=o8;var jP=Wa,a8="__lodash_hash_undefined__";function s8(t){return this.__data__.set(t,a8),this}var l8=s8;function u8(t){return this.__data__.has(t)}var c8=u8,d8=e0,f8=l8,h8=c8;function cd(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new d8;++e<n;)this.add(t[e])}cd.prototype.add=cd.prototype.push=f8;cd.prototype.has=h8;var LP=cd;function p8(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var UP=p8;function m8(t,e){return t.has(e)}var FP=m8,g8=LP,y8=UP,v8=FP,x8=1,b8=2;function w8(t,e,n,r,i,o){var a=n&x8,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var d=-1,h=!0,g=n&b8?new g8:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var y=t[d],x=e[d];if(r)var v=a?r(x,y,d,e,t,o):r(y,x,d,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(g){if(!y8(e,function(b,w){if(!v8(g,w)&&(y===b||i(y,b,n,r,o)))return g.push(w)})){h=!1;break}}else if(!(y===x||i(y,x,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var BP=w8,_8=sr,S8=_8.Uint8Array,E8=S8;function T8(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var k8=T8;function A8(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var h0=A8,z_=au,V_=E8,C8=Qv,P8=BP,N8=k8,I8=h0,O8=1,R8=2,M8="[object Boolean]",$8="[object Date]",D8="[object Error]",j8="[object Map]",L8="[object Number]",U8="[object RegExp]",F8="[object Set]",B8="[object String]",G8="[object Symbol]",z8="[object ArrayBuffer]",V8="[object DataView]",H_=z_?z_.prototype:void 0,dp=H_?H_.valueOf:void 0;function H8(t,e,n,r,i,o,a){switch(n){case V8:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case z8:return!(t.byteLength!=e.byteLength||!o(new V_(t),new V_(e)));case M8:case $8:case L8:return C8(+t,+e);case D8:return t.name==e.name&&t.message==e.message;case U8:case B8:return t==e+"";case j8:var s=N8;case F8:var l=r&O8;if(s||(s=I8),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=R8,a.set(t,e);var c=P8(s(t),s(e),r,i,o,a);return a.delete(t),c;case G8:if(dp)return dp.call(t)==dp.call(e)}return!1}var q8=H8;function W8(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var GP=W8,K8=GP,J8=Yt;function Y8(t,e,n){var r=e(t);return J8(t)?r:K8(r,n(t))}var X8=Y8;function Q8(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var Z8=Q8;function eW(){return[]}var tW=eW,nW=Z8,rW=tW,iW=Object.prototype,oW=iW.propertyIsEnumerable,q_=Object.getOwnPropertySymbols,aW=q_?function(t){return t==null?[]:(t=Object(t),nW(q_(t),function(e){return oW.call(t,e)}))}:rW,sW=aW;function lW(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var uW=lW,cW=$r,dW=Dr,fW="[object Arguments]";function hW(t){return dW(t)&&cW(t)==fW}var pW=hW,W_=pW,mW=Dr,zP=Object.prototype,gW=zP.hasOwnProperty,yW=zP.propertyIsEnumerable,vW=W_(function(){return arguments}())?W_:function(t){return mW(t)&&gW.call(t,"callee")&&!yW.call(t,"callee")},p0=vW,dd={exports:{}};function xW(){return!1}var bW=xW;dd.exports;(function(t,e){var n=sr,r=bW,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u})(dd,dd.exports);var VP=dd.exports,wW=9007199254740991,_W=/^(?:0|[1-9]\d*)$/;function SW(t,e){var n=typeof t;return e=e??wW,!!e&&(n=="number"||n!="symbol"&&_W.test(t))&&t>-1&&t%1==0&&t<e}var m0=SW,EW=9007199254740991;function TW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=EW}var g0=TW,kW=$r,AW=g0,CW=Dr,PW="[object Arguments]",NW="[object Array]",IW="[object Boolean]",OW="[object Date]",RW="[object Error]",MW="[object Function]",$W="[object Map]",DW="[object Number]",jW="[object Object]",LW="[object RegExp]",UW="[object Set]",FW="[object String]",BW="[object WeakMap]",GW="[object ArrayBuffer]",zW="[object DataView]",VW="[object Float32Array]",HW="[object Float64Array]",qW="[object Int8Array]",WW="[object Int16Array]",KW="[object Int32Array]",JW="[object Uint8Array]",YW="[object Uint8ClampedArray]",XW="[object Uint16Array]",QW="[object Uint32Array]",Be={};Be[VW]=Be[HW]=Be[qW]=Be[WW]=Be[KW]=Be[JW]=Be[YW]=Be[XW]=Be[QW]=!0;Be[PW]=Be[NW]=Be[GW]=Be[IW]=Be[zW]=Be[OW]=Be[RW]=Be[MW]=Be[$W]=Be[DW]=Be[jW]=Be[LW]=Be[UW]=Be[FW]=Be[BW]=!1;function ZW(t){return CW(t)&&AW(t.length)&&!!Be[kW(t)]}var e9=ZW;function t9(t){return function(e){return t(e)}}var HP=t9,fd={exports:{}};fd.exports;(function(t,e){var n=ZC,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(fd,fd.exports);var n9=fd.exports,r9=e9,i9=HP,K_=n9,J_=K_&&K_.isTypedArray,o9=J_?i9(J_):r9,qP=o9,a9=uW,s9=p0,l9=Yt,u9=VP,c9=m0,d9=qP,f9=Object.prototype,h9=f9.hasOwnProperty;function p9(t,e){var n=l9(t),r=!n&&s9(t),i=!n&&!r&&u9(t),o=!n&&!r&&!i&&d9(t),a=n||r||i||o,s=a?a9(t.length,String):[],l=s.length;for(var u in t)(e||h9.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||c9(u,l)))&&s.push(u);return s}var m9=p9,g9=Object.prototype;function y9(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||g9;return t===n}var v9=y9;function x9(t,e){return function(n){return t(e(n))}}var WP=x9,b9=WP,w9=b9(Object.keys,Object),_9=w9,S9=v9,E9=_9,T9=Object.prototype,k9=T9.hasOwnProperty;function A9(t){if(!S9(t))return E9(t);var e=[];for(var n in Object(t))k9.call(t,n)&&n!="constructor"&&e.push(n);return e}var C9=A9,P9=Xv,N9=g0;function I9(t){return t!=null&&N9(t.length)&&!P9(t)}var Zf=I9,O9=m9,R9=C9,M9=Zf;function $9(t){return M9(t)?O9(t):R9(t)}var y0=$9,D9=X8,j9=sW,L9=y0;function U9(t){return D9(t,L9,j9)}var F9=U9,Y_=F9,B9=1,G9=Object.prototype,z9=G9.hasOwnProperty;function V9(t,e,n,r,i,o){var a=n&B9,s=Y_(t),l=s.length,u=Y_(e),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var h=s[d];if(!(a?h in e:z9.call(e,h)))return!1}var g=o.get(t),y=o.get(e);if(g&&y)return g==e&&y==t;var x=!0;o.set(t,e),o.set(e,t);for(var v=a;++d<l;){h=s[d];var b=t[h],w=e[h];if(r)var _=a?r(w,b,h,e,t,o):r(b,w,h,t,e,o);if(!(_===void 0?b===w||i(b,w,n,r,o):_)){x=!1;break}v||(v=h=="constructor")}if(x&&!v){var T=t.constructor,S=e.constructor;T!=S&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof S=="function"&&S instanceof S)&&(x=!1)}return o.delete(t),o.delete(e),x}var H9=V9,q9=oo,W9=sr,K9=q9(W9,"DataView"),J9=K9,Y9=oo,X9=sr,Q9=Y9(X9,"Promise"),Z9=Q9,eK=oo,tK=sr,nK=eK(tK,"Set"),KP=nK,rK=oo,iK=sr,oK=rK(iK,"WeakMap"),aK=oK,bg=J9,wg=Zv,_g=Z9,Sg=KP,Eg=aK,JP=$r,Ka=tP,X_="[object Map]",sK="[object Object]",Q_="[object Promise]",Z_="[object Set]",eS="[object WeakMap]",tS="[object DataView]",lK=Ka(bg),uK=Ka(wg),cK=Ka(_g),dK=Ka(Sg),fK=Ka(Eg),ki=JP;(bg&&ki(new bg(new ArrayBuffer(1)))!=tS||wg&&ki(new wg)!=X_||_g&&ki(_g.resolve())!=Q_||Sg&&ki(new Sg)!=Z_||Eg&&ki(new Eg)!=eS)&&(ki=function(t){var e=JP(t),n=e==sK?t.constructor:void 0,r=n?Ka(n):"";if(r)switch(r){case lK:return tS;case uK:return X_;case cK:return Q_;case dK:return Z_;case fK:return eS}return e});var hK=ki,fp=jP,pK=BP,mK=q8,gK=H9,nS=hK,rS=Yt,iS=VP,yK=qP,vK=1,oS="[object Arguments]",aS="[object Array]",zu="[object Object]",xK=Object.prototype,sS=xK.hasOwnProperty;function bK(t,e,n,r,i,o){var a=rS(t),s=rS(e),l=a?aS:nS(t),u=s?aS:nS(e);l=l==oS?zu:l,u=u==oS?zu:u;var c=l==zu,d=u==zu,h=l==u;if(h&&iS(t)){if(!iS(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new fp),a||yK(t)?pK(t,e,n,r,i,o):mK(t,e,l,n,r,i,o);if(!(n&vK)){var g=c&&sS.call(t,"__wrapped__"),y=d&&sS.call(e,"__wrapped__");if(g||y){var x=g?t.value():t,v=y?e.value():e;return o||(o=new fp),i(x,v,n,r,o)}}return h?(o||(o=new fp),gK(t,e,n,r,i,o)):!1}var wK=bK,_K=wK,lS=Dr;function YP(t,e,n,r,i){return t===e?!0:t==null||e==null||!lS(t)&&!lS(e)?t!==t&&e!==e:_K(t,e,n,r,YP,i)}var v0=YP,SK=jP,EK=v0,TK=1,kK=2;function AK(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in t))return!1}else{var d=new SK;if(r)var h=r(u,c,l,t,e,d);if(!(h===void 0?EK(c,u,TK|kK,r,d):h))return!1}}return!0}var CK=AK,PK=hi;function NK(t){return t===t&&!PK(t)}var XP=NK,IK=XP,OK=y0;function RK(t){for(var e=OK(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,IK(i)]}return e}var MK=RK;function $K(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var QP=$K,DK=CK,jK=MK,LK=QP;function UK(t){var e=jK(t);return e.length==1&&e[0][2]?LK(e[0][0],e[0][1]):function(n){return n===t||DK(n,t,e)}}var FK=UK;function BK(t,e){return t!=null&&e in Object(t)}var GK=BK,zK=aP,VK=p0,HK=Yt,qK=m0,WK=g0,KK=Lf;function JK(t,e,n){e=zK(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=KK(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&WK(i)&&qK(a,i)&&(HK(t)||VK(t)))}var YK=JK,XK=GK,QK=YK;function ZK(t,e){return t!=null&&QK(t,e,XK)}var e7=ZK,t7=v0,n7=sP,r7=e7,i7=Yv,o7=XP,a7=QP,s7=Lf,l7=1,u7=2;function c7(t,e){return i7(t)&&o7(e)?a7(s7(t),e):function(n){var r=n7(n,t);return r===void 0&&r===e?r7(n,t):t7(e,r,l7|u7)}}var d7=c7;function f7(t){return t}var Ja=f7;function h7(t){return function(e){return e==null?void 0:e[t]}}var p7=h7,m7=r0;function g7(t){return function(e){return m7(e,t)}}var y7=g7,v7=p7,x7=y7,b7=Yv,w7=Lf;function _7(t){return b7(t)?v7(w7(t)):x7(t)}var S7=_7,E7=FK,T7=d7,k7=Ja,A7=Yt,C7=S7;function P7(t){return typeof t=="function"?t:t==null?k7:typeof t=="object"?A7(t)?T7(t[0],t[1]):E7(t):C7(t)}var Ya=P7;function N7(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var I7=N7;function O7(t){return t!==t}var R7=O7;function M7(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var $7=M7,D7=I7,j7=R7,L7=$7;function U7(t,e,n){return e===e?L7(t,e,n):D7(t,j7,n)}var F7=U7,B7=F7;function G7(t,e){var n=t==null?0:t.length;return!!n&&B7(t,e,0)>-1}var z7=G7;function V7(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var H7=V7;function q7(){}var W7=q7,hp=KP,K7=W7,J7=h0,Y7=1/0,X7=hp&&1/J7(new hp([,-0]))[1]==Y7?function(t){return new hp(t)}:K7,Q7=X7,Z7=LP,eJ=z7,tJ=H7,nJ=FP,rJ=Q7,iJ=h0,oJ=200;function aJ(t,e,n){var r=-1,i=eJ,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=tJ;else if(o>=oJ){var u=e?null:rJ(t);if(u)return iJ(u);a=!1,i=nJ,l=new Z7}else l=e?[]:s;e:for(;++r<o;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}var sJ=aJ,lJ=Ya,uJ=sJ;function cJ(t,e){return t&&t.length?uJ(t,lJ(e)):[]}var dJ=cJ;const uS=Ue(dJ);function ZP(t,e,n){return e===!0?uS(t,n):me(e)?uS(t,e):t}function ma(t){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(t)}var fJ=["ref"];function cS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cS(Object(n),!0).forEach(function(r){eh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tN(r.key),r)}}function pJ(t,e,n){return e&&dS(t.prototype,e),n&&dS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mJ(t,e,n){return e=hd(e),gJ(t,eN()?Reflect.construct(e,n||[],hd(t).constructor):e.apply(t,n))}function gJ(t,e){if(e&&(ma(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yJ(t)}function yJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eN=function(){return!!t})()}function hd(t){return hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hd(t)}function vJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tg(t,e)}function Tg(t,e){return Tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tg(t,e)}function eh(t,e,n){return e=tN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tN(t){var e=xJ(t,"string");return ma(e)=="symbol"?e:e+""}function xJ(t,e){if(ma(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ma(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bJ(t,e){if(t==null)return{};var n=wJ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function _J(t){return t.value}function SJ(t,e){if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return D.createElement(t,e);e.ref;var n=bJ(e,fJ);return D.createElement(f0,n)}var fS=1,ta=function(t){function e(){var n;hJ(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=mJ(this,e,[].concat(i)),eh(n,"lastBoundingBox",{width:-1,height:-1}),n}return vJ(e,t),pJ(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>fS||Math.abs(i.height-this.lastBoundingBox.height)>fS)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?lr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var g=this.getBBoxSnapshot();d={left:((u||0)-g.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((c||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return lr(lr({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=lr(lr({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return D.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},SJ(o,lr(lr({},this.props),{},{payload:ZP(c,u,_J)})))}}],[{key:"getWithHeight",value:function(r,i){var o=lr(lr({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Y(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(P.PureComponent);eh(ta,"displayName","Legend");eh(ta,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var hS=au,EJ=p0,TJ=Yt,pS=hS?hS.isConcatSpreadable:void 0;function kJ(t){return TJ(t)||EJ(t)||!!(pS&&t&&t[pS])}var AJ=kJ,CJ=GP,PJ=AJ;function nN(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=PJ),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?nN(s,e-1,n,r,i):CJ(i,s):r||(i[i.length]=s)}return i}var rN=nN;function NJ(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var IJ=NJ,OJ=IJ,RJ=OJ(),MJ=RJ,$J=MJ,DJ=y0;function jJ(t,e){return t&&$J(t,e,DJ)}var iN=jJ,LJ=Zf;function UJ(t,e){return function(n,r){if(n==null)return n;if(!LJ(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var FJ=UJ,BJ=iN,GJ=FJ,zJ=GJ(BJ),x0=zJ,VJ=x0,HJ=Zf;function qJ(t,e){var n=-1,r=HJ(t)?Array(t.length):[];return VJ(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var oN=qJ;function WJ(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var KJ=WJ,mS=Ba;function JJ(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=mS(t),a=e!==void 0,s=e===null,l=e===e,u=mS(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var YJ=JJ,XJ=YJ;function QJ(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=XJ(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var ZJ=QJ,pp=n0,eY=r0,tY=Ya,nY=oN,rY=KJ,iY=HP,oY=ZJ,aY=Ja,sY=Yt;function lY(t,e,n){e.length?e=pp(e,function(o){return sY(o)?function(a){return eY(a,o.length===1?o[0]:o)}:o}):e=[aY];var r=-1;e=pp(e,iY(tY));var i=nY(t,function(o,a,s){var l=pp(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return rY(i,function(o,a){return oY(o,a,n)})}var uY=lY;function cY(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var dY=cY,fY=dY,gS=Math.max;function hY(t,e,n){return e=gS(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=gS(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),fY(t,this,s)}}var pY=hY;function mY(t){return function(){return t}}var gY=mY,yY=oo,vY=function(){try{var t=yY(Object,"defineProperty");return t({},"",{}),t}catch{}}(),aN=vY,xY=gY,yS=aN,bY=Ja,wY=yS?function(t,e){return yS(t,"toString",{configurable:!0,enumerable:!1,value:xY(e),writable:!0})}:bY,_Y=wY,SY=800,EY=16,TY=Date.now;function kY(t){var e=0,n=0;return function(){var r=TY(),i=EY-(r-n);if(n=r,i>0){if(++e>=SY)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var AY=kY,CY=_Y,PY=AY,NY=PY(CY),IY=NY,OY=Ja,RY=pY,MY=IY;function $Y(t,e){return MY(RY(t,e,OY),t+"")}var DY=$Y,jY=Qv,LY=Zf,UY=m0,FY=hi;function BY(t,e,n){if(!FY(n))return!1;var r=typeof e;return(r=="number"?LY(n)&&UY(e,n.length):r=="string"&&e in n)?jY(n[e],t):!1}var th=BY,GY=rN,zY=uY,VY=DY,vS=th,HY=VY(function(t,e){if(t==null)return[];var n=e.length;return n>1&&vS(t,e[0],e[1])?e=[]:n>2&&vS(e[0],e[1],e[2])&&(e=[e[0]]),zY(t,GY(e,1),[])}),qY=HY;const b0=Ue(qY);function xl(t){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(t)}function kg(){return kg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kg.apply(this,arguments)}function WY(t,e){return XY(t)||YY(t,e)||JY(t,e)||KY()}function KY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JY(t,e){if(t){if(typeof t=="string")return xS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xS(t,e)}}function xS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function YY(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function XY(t){if(Array.isArray(t))return t}function bS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bS(Object(n),!0).forEach(function(r){QY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QY(t,e,n){return e=ZY(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZY(t){var e=eX(t,"string");return xl(e)=="symbol"?e:e+""}function eX(t,e){if(xl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tX(t){return Array.isArray(t)&&ft(t[0])&&ft(t[1])?t.join(" ~ "):t}var nX=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,h=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,x=e.label,v=e.labelFormatter,b=e.accessibilityLayer,w=b===void 0?!1:b,_=function(){if(c&&c.length){var O={padding:0,margin:0},j=(h?b0(c,h):c).map(function(M,U){if(M.type==="none")return null;var L=mp({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},s),B=M.formatter||d||tX,N=M.value,$=M.name,F=N,V=$;if(B&&F!=null&&V!=null){var q=B(N,$,M,U,c);if(Array.isArray(q)){var te=WY(q,2);F=te[0],V=te[1]}else F=q}return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:L},ft(V)?D.createElement("span",{className:"recharts-tooltip-item-name"},V):null,ft(V)?D.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,D.createElement("span",{className:"recharts-tooltip-item-value"},F),D.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:O},j)}return null},T=mp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),S=mp({margin:0},u),E=!xe(x),k=E?x:"",A=he("recharts-default-tooltip",g),C=he("recharts-tooltip-label",y);E&&v&&c!==void 0&&c!==null&&(k=v(x,c));var R=w?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",kg({className:A,style:T},R),D.createElement("p",{className:C,style:S},D.isValidElement(k)?k:"".concat(k)),_())};function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function Vu(t,e,n){return e=rX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rX(t){var e=iX(t,"string");return bl(e)=="symbol"?e:e+""}function iX(t,e){if(bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hs="recharts-tooltip-wrapper",oX={visibility:"hidden"};function aX(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return he(hs,Vu(Vu(Vu(Vu({},"".concat(hs,"-right"),Y(n)&&e&&Y(e.x)&&n>=e.x),"".concat(hs,"-left"),Y(n)&&e&&Y(e.x)&&n<e.x),"".concat(hs,"-bottom"),Y(r)&&e&&Y(e.y)&&r>=e.y),"".concat(hs,"-top"),Y(r)&&e&&Y(e.y)&&r<e.y))}function wS(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(o&&Y(o[r]))return o[r];var c=n[r]-s-i,d=n[r]+i;if(e[r])return a[r]?c:d;if(a[r]){var h=c,g=l[r];return h<g?Math.max(d,l[r]):Math.max(c,l[r])}var y=d+s,x=l[r]+u;return y>x?Math.max(c,l[r]):Math.max(d,l[r])}function sX(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function lX(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,u,c,d;return a.height>0&&a.width>0&&n?(c=wS({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=wS({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=sX({translateX:c,translateY:d,useTranslate3d:s})):u=oX,{cssProperties:u,cssClasses:aX({translateX:c,translateY:d,coordinate:n})}}function ga(t){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(t)}function _S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_S(Object(n),!0).forEach(function(r){Cg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_S(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lN(r.key),r)}}function dX(t,e,n){return e&&cX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fX(t,e,n){return e=pd(e),hX(t,sN()?Reflect.construct(e,n||[],pd(t).constructor):e.apply(t,n))}function hX(t,e){if(e&&(ga(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pX(t)}function pX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sN=function(){return!!t})()}function pd(t){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pd(t)}function mX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ag(t,e)}function Ag(t,e){return Ag=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ag(t,e)}function Cg(t,e,n){return e=lN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lN(t){var e=gX(t,"string");return ga(e)=="symbol"?e:e+""}function gX(t,e){if(ga(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ga(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ES=1,yX=function(t){function e(){var n;uX(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=fX(this,e,[].concat(i)),Cg(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Cg(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return mX(e,t),dX(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>ES||Math.abs(r.height-this.state.lastBoundingBox.height)>ES)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,g=i.offset,y=i.position,x=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,_=lX({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:g,position:y,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),T=_.cssClasses,S=_.cssProperties,E=SS(SS({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return D.createElement("div",{tabIndex:-1,className:T,style:E,ref:function(A){r.wrapperNode=A}},u)}}])}(P.PureComponent),vX=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Xa={isSsr:vX()};function ya(t){"@babel/helpers - typeof";return ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(t)}function TS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TS(Object(n),!0).forEach(function(r){w0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cN(r.key),r)}}function wX(t,e,n){return e&&bX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _X(t,e,n){return e=md(e),SX(t,uN()?Reflect.construct(e,n||[],md(t).constructor):e.apply(t,n))}function SX(t,e){if(e&&(ya(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EX(t)}function EX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uN=function(){return!!t})()}function md(t){return md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},md(t)}function TX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pg(t,e)}function Pg(t,e){return Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pg(t,e)}function w0(t,e,n){return e=cN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cN(t){var e=kX(t,"string");return ya(e)=="symbol"?e:e+""}function kX(t,e){if(ya(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ya(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function AX(t){return t.dataKey}function CX(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(nX,e)}var dr=function(t){function e(){return xX(this,e),_X(this,e,arguments)}return TX(e,t),wX(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,h=i.isAnimationActive,g=i.offset,y=i.payload,x=i.payloadUniqBy,v=i.position,b=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,S=y??[];d&&S.length&&(S=ZP(y.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),x,AX));var E=S.length>0;return D.createElement(yX,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:c,hasPayload:E,offset:g,position:v,reverseDirection:b,useTranslate3d:w,viewBox:_,wrapperStyle:T},CX(u,kS(kS({},this.props),{},{payload:S})))}}])}(P.PureComponent);w0(dr,"displayName","Tooltip");w0(dr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Xa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var PX=sr,NX=function(){return PX.Date.now()},IX=NX,OX=/\s/;function RX(t){for(var e=t.length;e--&&OX.test(t.charAt(e)););return e}var MX=RX,$X=MX,DX=/^\s+/;function jX(t){return t&&t.slice(0,$X(t)+1).replace(DX,"")}var LX=jX,UX=LX,AS=hi,FX=Ba,CS=NaN,BX=/^[-+]0x[0-9a-f]+$/i,GX=/^0b[01]+$/i,zX=/^0o[0-7]+$/i,VX=parseInt;function HX(t){if(typeof t=="number")return t;if(FX(t))return CS;if(AS(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=AS(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=UX(t);var n=GX.test(t);return n||zX.test(t)?VX(t.slice(2),n?2:8):BX.test(t)?CS:+t}var dN=HX,qX=hi,gp=IX,PS=dN,WX="Expected a function",KX=Math.max,JX=Math.min;function YX(t,e,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(WX);e=PS(e)||0,qX(n)&&(c=!!n.leading,d="maxWait"in n,o=d?KX(PS(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function g(E){var k=r,A=i;return r=i=void 0,u=E,a=t.apply(A,k),a}function y(E){return u=E,s=setTimeout(b,e),c?g(E):a}function x(E){var k=E-l,A=E-u,C=e-k;return d?JX(C,o-A):C}function v(E){var k=E-l,A=E-u;return l===void 0||k>=e||k<0||d&&A>=o}function b(){var E=gp();if(v(E))return w(E);s=setTimeout(b,x(E))}function w(E){return s=void 0,h&&r?g(E):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function T(){return s===void 0?a:w(gp())}function S(){var E=gp(),k=v(E);if(r=arguments,i=this,l=E,k){if(s===void 0)return y(l);if(d)return clearTimeout(s),s=setTimeout(b,e),g(l)}return s===void 0&&(s=setTimeout(b,e)),a}return S.cancel=_,S.flush=T,S}var XX=YX,QX=XX,ZX=hi,eQ="Expected a function";function tQ(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(eQ);return ZX(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),QX(t,e,{leading:r,maxWait:e,trailing:i})}var nQ=tQ;const fN=Ue(nQ);function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}function NS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NS(Object(n),!0).forEach(function(r){rQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rQ(t,e,n){return e=iQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iQ(t){var e=oQ(t,"string");return wl(e)=="symbol"?e:e+""}function oQ(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aQ(t,e){return cQ(t)||uQ(t,e)||lQ(t,e)||sQ()}function sQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lQ(t,e){if(t){if(typeof t=="string")return IS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IS(t,e)}}function IS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function cQ(t){if(Array.isArray(t))return t}var dQ=P.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,h=t.maxHeight,g=t.children,y=t.debounce,x=y===void 0?0:y,v=t.id,b=t.className,w=t.onResize,_=t.style,T=_===void 0?{}:_,S=P.useRef(null),E=P.useRef();E.current=w,P.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var k=P.useState({containerWidth:i.width,containerHeight:i.height}),A=aQ(k,2),C=A[0],R=A[1],I=P.useCallback(function(j,M){R(function(U){var L=Math.round(j),B=Math.round(M);return U.containerWidth===L&&U.containerHeight===B?U:{containerWidth:L,containerHeight:B}})},[]);P.useEffect(function(){var j=function($){var F,V=$[0].contentRect,q=V.width,te=V.height;I(q,te),(F=E.current)===null||F===void 0||F.call(E,q,te)};x>0&&(j=fN(j,x,{trailing:!0,leading:!1}));var M=new ResizeObserver(j),U=S.current.getBoundingClientRect(),L=U.width,B=U.height;return I(L,B),M.observe(S.current),function(){M.disconnect()}},[I,x]);var O=P.useMemo(function(){var j=C.containerWidth,M=C.containerHeight;if(j<0||M<0)return null;Gi(Mi(a)||Mi(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Gi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=Mi(a)?j:a,L=Mi(l)?M:l;n&&n>0&&(U?L=U/n:L&&(U=L*n),h&&L>h&&(L=h)),Gi(U>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,L,a,l,c,d,n);var B=!Array.isArray(g)&&xr(g.type).endsWith("Chart");return D.Children.map(g,function(N){return D.isValidElement(N)?P.cloneElement(N,Hu({width:U,height:L},B?{style:Hu({height:"100%",width:"100%",maxHeight:L,maxWidth:U},N.props.style)}:{})):N})},[n,g,l,h,d,c,C,a]);return D.createElement("div",{id:v?"".concat(v):void 0,className:he("recharts-responsive-container",b),style:Hu(Hu({},T),{},{width:a,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:S},O)}),hN=function(e){return null};hN.displayName="Cell";function _l(t){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(t)}function OS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ng(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OS(Object(n),!0).forEach(function(r){fQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fQ(t,e,n){return e=hQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hQ(t){var e=pQ(t,"string");return _l(e)=="symbol"?e:e+""}function pQ(t,e){if(_l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xo={widthCache:{},cacheCount:0},mQ=2e3,gQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},RS="recharts_measurement_span";function yQ(t){var e=Ng({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var Bs=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Xa.isSsr)return{width:0,height:0};var r=yQ(n),i=JSON.stringify({text:e,copyStyle:r});if(xo.widthCache[i])return xo.widthCache[i];try{var o=document.getElementById(RS);o||(o=document.createElement("span"),o.setAttribute("id",RS),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Ng(Ng({},gQ),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return xo.widthCache[i]=l,++xo.cacheCount>mQ&&(xo.cacheCount=0,xo.widthCache={}),l}catch{return{width:0,height:0}}},vQ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}function gd(t,e){return _Q(t)||wQ(t,e)||bQ(t,e)||xQ()}function xQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bQ(t,e){if(t){if(typeof t=="string")return MS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MS(t,e)}}function MS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function _Q(t){if(Array.isArray(t))return t}function SQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,TQ(r.key),r)}}function EQ(t,e,n){return e&&$S(t.prototype,e),n&&$S(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TQ(t){var e=kQ(t,"string");return Sl(e)=="symbol"?e:e+""}function kQ(t,e){if(Sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var DS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,CQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pN={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},PQ=Object.keys(pN),Bo="NaN";function NQ(t,e){return t*pN[e]}var qu=function(){function t(e,n){SQ(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!AQ.test(n)&&(this.num=NaN,this.unit=""),PQ.includes(n)&&(this.num=NQ(e,n),this.unit="px")}return EQ(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=CQ.exec(n))!==null&&r!==void 0?r:[],o=gd(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function mN(t){if(t.includes(Bo))return Bo;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=DS.exec(e))!==null&&n!==void 0?n:[],i=gd(r,4),o=i[1],a=i[2],s=i[3],l=qu.parse(o??""),u=qu.parse(s??""),c=a==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Bo;e=e.replace(DS,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=jS.exec(e))!==null&&d!==void 0?d:[],g=gd(h,4),y=g[1],x=g[2],v=g[3],b=qu.parse(y??""),w=qu.parse(v??""),_=x==="+"?b.add(w):b.subtract(w);if(_.isNaN())return Bo;e=e.replace(jS,_.toString())}return e}var LS=/\(([^()]*)\)/;function IQ(t){for(var e=t;e.includes("(");){var n=LS.exec(e),r=gd(n,2),i=r[1];e=e.replace(LS,mN(i))}return e}function OQ(t){var e=t.replace(/\s+/g,"");return e=IQ(e),e=mN(e),e}function RQ(t){try{return OQ(t)}catch{return Bo}}function yp(t){var e=RQ(t.slice(5,-1));return e===Bo?"":e}var MQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$Q=["dx","dy","angle","className","breakAll"];function Ig(){return Ig=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ig.apply(this,arguments)}function US(t,e){if(t==null)return{};var n=DQ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function FS(t,e){return FQ(t)||UQ(t,e)||LQ(t,e)||jQ()}function jQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LQ(t,e){if(t){if(typeof t=="string")return BS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BS(t,e)}}function BS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function UQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function FQ(t){if(Array.isArray(t))return t}var gN=/[ \f\n\r\t\v\u2028\u2029]+/,yN=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];xe(n)||(r?o=n.toString().split(""):o=n.toString().split(gN));var a=o.map(function(l){return{word:l,width:Bs(l,i).width}}),s=r?0:Bs("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},BQ=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,u=e.breakAll,c=Y(a),d=s,h=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(L,B){var N=B.word,$=B.width,F=L[L.length-1];if(F&&(i==null||o||F.width+$+r<Number(i)))F.words.push(N),F.width+=$+r;else{var V={words:[N],width:$};L.push(V)}return L},[])},g=h(n),y=function(U){return U.reduce(function(L,B){return L.width>B.width?L:B})};if(!c)return g;for(var x="",v=function(U){var L=d.slice(0,U),B=yN({breakAll:u,style:l,children:L+x}).wordsWithComputedWidth,N=h(B),$=N.length>a||y(N).width>Number(i);return[$,N]},b=0,w=d.length-1,_=0,T;b<=w&&_<=d.length-1;){var S=Math.floor((b+w)/2),E=S-1,k=v(E),A=FS(k,2),C=A[0],R=A[1],I=v(S),O=FS(I,1),j=O[0];if(!C&&!j&&(b=S+1),C&&j&&(w=S-1),!C&&j){T=R;break}_++}return T||g},GS=function(e){var n=xe(e)?[]:e.toString().split(gN);return[{words:n}]},GQ=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!Xa.isSsr){var l,u,c=yN({breakAll:a,children:i,style:o});if(c){var d=c.wordsWithComputedWidth,h=c.spaceWidth;l=d,u=h}else return GS(i);return BQ({breakAll:a,children:i,maxLines:s,style:o},l,u,n,r)}return GS(i)},zS="#808080",yd=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,h=e.textAnchor,g=h===void 0?"start":h,y=e.verticalAnchor,x=y===void 0?"end":y,v=e.fill,b=v===void 0?zS:v,w=US(e,MQ),_=P.useMemo(function(){return GQ({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),T=w.dx,S=w.dy,E=w.angle,k=w.className,A=w.breakAll,C=US(w,$Q);if(!ft(r)||!ft(o))return null;var R=r+(Y(T)?T:0),I=o+(Y(S)?S:0),O;switch(x){case"start":O=yp("calc(".concat(u,")"));break;case"middle":O=yp("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:O=yp("calc(".concat(_.length-1," * -").concat(s,")"));break}var j=[];if(d){var M=_[0].width,U=w.width;j.push("scale(".concat((Y(U)?U/M:1)/M,")"))}return E&&j.push("rotate(".concat(E,", ").concat(R,", ").concat(I,")")),j.length&&(C.transform=j.join(" ")),D.createElement("text",Ig({},ve(C,!0),{x:R,y:I,className:he("recharts-text",k),textAnchor:g,fill:b.includes("url")?zS:b}),_.map(function(L,B){var N=L.words.join(A?"":" ");return D.createElement("tspan",{x:R,dy:B===0?O:s,key:"".concat(N,"-").concat(B)},N)}))};function oi(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function zQ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _0(t){let e,n,r;t.length!==2?(e=oi,n=(s,l)=>oi(t(s),l),r=(s,l)=>t(s)-l):(e=t===oi||t===zQ?t:VQ,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:a,right:o}}function VQ(){return 0}function vN(t){return t===null?NaN:+t}function*HQ(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const qQ=_0(oi),lu=qQ.right;_0(vN).center;class VS extends Map{constructor(e,n=JQ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(HS(this,e))}has(e){return super.has(HS(this,e))}set(e,n){return super.set(WQ(this,e),n)}delete(e){return super.delete(KQ(this,e))}}function HS({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function WQ({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function KQ({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function JQ(t){return t!==null&&typeof t=="object"?t.valueOf():t}function YQ(t=oi){if(t===oi)return xN;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function xN(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const XQ=Math.sqrt(50),QQ=Math.sqrt(10),ZQ=Math.sqrt(2);function vd(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=XQ?10:o>=QQ?5:o>=ZQ?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?vd(t,e,n*2):[s,l,u]}function Og(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?vd(e,t,n):vd(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function Rg(t,e,n){return e=+e,t=+t,n=+n,vd(t,e,n)[2]}function Mg(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Rg(e,t,n):Rg(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function qS(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function WS(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function bN(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?xN:YQ(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/l+h)),y=Math.min(r,Math.floor(e+(l-u)*d/l+h));bN(t,e,g,y,i)}const o=t[e];let a=n,s=r;for(ps(t,n,e),i(t[r],o)>0&&ps(t,n,r);a<s;){for(ps(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?ps(t,n,s):(++s,ps(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function ps(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function eZ(t,e,n){if(t=Float64Array.from(HQ(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return WS(t);if(e>=1)return qS(t);var r,i=(r-1)*e,o=Math.floor(i),a=qS(bN(t,o).subarray(0,o+1)),s=WS(t.subarray(o+1));return a+(s-a)*(i-o)}}function tZ(t,e,n=vN){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function nZ(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function Nn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function jr(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const $g=Symbol("implicit");function S0(){var t=new VS,e=[],n=[],r=$g;function i(o){let a=t.get(o);if(a===void 0){if(r!==$g)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new VS;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return S0(e,n).unknown(r)},Nn.apply(i,arguments),i}function El(){var t=S0().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var h=e().length,g=i<r,y=g?i:r,x=g?r:i;o=(x-y)/Math.max(1,h-l+u*2),s&&(o=Math.floor(o)),y+=(x-y-o*(h-l))*c,a=o*(1-l),s&&(y=Math.round(y),a=Math.round(a));var v=nZ(h).map(function(b){return y+o*b});return n(g?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,d()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return El(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},Nn.apply(d(),arguments)}function wN(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return wN(e())},t}function Gs(){return wN(El.apply(null,arguments).paddingInner(1))}function E0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function _N(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function uu(){}var Tl=.7,xd=1/Tl,na="\\s*([+-]?\\d+)\\s*",kl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ir="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rZ=/^#([0-9a-f]{3,8})$/,iZ=new RegExp(`^rgb\\(${na},${na},${na}\\)$`),oZ=new RegExp(`^rgb\\(${ir},${ir},${ir}\\)$`),aZ=new RegExp(`^rgba\\(${na},${na},${na},${kl}\\)$`),sZ=new RegExp(`^rgba\\(${ir},${ir},${ir},${kl}\\)$`),lZ=new RegExp(`^hsl\\(${kl},${ir},${ir}\\)$`),uZ=new RegExp(`^hsla\\(${kl},${ir},${ir},${kl}\\)$`),KS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};E0(uu,Al,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:JS,formatHex:JS,formatHex8:cZ,formatHsl:dZ,formatRgb:YS,toString:YS});function JS(){return this.rgb().formatHex()}function cZ(){return this.rgb().formatHex8()}function dZ(){return SN(this).formatHsl()}function YS(){return this.rgb().formatRgb()}function Al(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=rZ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?XS(e):n===3?new qt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Wu(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Wu(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=iZ.exec(t))?new qt(e[1],e[2],e[3],1):(e=oZ.exec(t))?new qt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=aZ.exec(t))?Wu(e[1],e[2],e[3],e[4]):(e=sZ.exec(t))?Wu(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=lZ.exec(t))?e1(e[1],e[2]/100,e[3]/100,1):(e=uZ.exec(t))?e1(e[1],e[2]/100,e[3]/100,e[4]):KS.hasOwnProperty(t)?XS(KS[t]):t==="transparent"?new qt(NaN,NaN,NaN,0):null}function XS(t){return new qt(t>>16&255,t>>8&255,t&255,1)}function Wu(t,e,n,r){return r<=0&&(t=e=n=NaN),new qt(t,e,n,r)}function fZ(t){return t instanceof uu||(t=Al(t)),t?(t=t.rgb(),new qt(t.r,t.g,t.b,t.opacity)):new qt}function Dg(t,e,n,r){return arguments.length===1?fZ(t):new qt(t,e,n,r??1)}function qt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}E0(qt,Dg,_N(uu,{brighter(t){return t=t==null?xd:Math.pow(xd,t),new qt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Tl:Math.pow(Tl,t),new qt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qt(zi(this.r),zi(this.g),zi(this.b),bd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:QS,formatHex:QS,formatHex8:hZ,formatRgb:ZS,toString:ZS}));function QS(){return`#${$i(this.r)}${$i(this.g)}${$i(this.b)}`}function hZ(){return`#${$i(this.r)}${$i(this.g)}${$i(this.b)}${$i((isNaN(this.opacity)?1:this.opacity)*255)}`}function ZS(){const t=bd(this.opacity);return`${t===1?"rgb(":"rgba("}${zi(this.r)}, ${zi(this.g)}, ${zi(this.b)}${t===1?")":`, ${t})`}`}function bd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function zi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $i(t){return t=zi(t),(t<16?"0":"")+t.toString(16)}function e1(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Fn(t,e,n,r)}function SN(t){if(t instanceof Fn)return new Fn(t.h,t.s,t.l,t.opacity);if(t instanceof uu||(t=Al(t)),!t)return new Fn;if(t instanceof Fn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Fn(a,s,l,t.opacity)}function pZ(t,e,n,r){return arguments.length===1?SN(t):new Fn(t,e,n,r??1)}function Fn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}E0(Fn,pZ,_N(uu,{brighter(t){return t=t==null?xd:Math.pow(xd,t),new Fn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Tl:Math.pow(Tl,t),new Fn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new qt(vp(t>=240?t-240:t+120,i,r),vp(t,i,r),vp(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Fn(t1(this.h),Ku(this.s),Ku(this.l),bd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bd(this.opacity);return`${t===1?"hsl(":"hsla("}${t1(this.h)}, ${Ku(this.s)*100}%, ${Ku(this.l)*100}%${t===1?")":`, ${t})`}`}}));function t1(t){return t=(t||0)%360,t<0?t+360:t}function Ku(t){return Math.max(0,Math.min(1,t||0))}function vp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const T0=t=>()=>t;function mZ(t,e){return function(n){return t+n*e}}function gZ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function yZ(t){return(t=+t)==1?EN:function(e,n){return n-e?gZ(e,n,t):T0(isNaN(e)?n:e)}}function EN(t,e){var n=e-t;return n?mZ(t,n):T0(isNaN(t)?e:t)}const n1=function t(e){var n=yZ(e);function r(i,o){var a=n((i=Dg(i)).r,(o=Dg(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=EN(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function vZ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function xZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function bZ(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Qa(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function wZ(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function wd(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function _Z(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Qa(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var jg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xp=new RegExp(jg.source,"g");function SZ(t){return function(){return t}}function EZ(t){return function(e){return t(e)+""}}function TZ(t,e){var n=jg.lastIndex=xp.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=jg.exec(t))&&(i=xp.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:wd(r,i)})),n=xp.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?EZ(l[0].x):SZ(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function Qa(t,e){var n=typeof e,r;return e==null||n==="boolean"?T0(e):(n==="number"?wd:n==="string"?(r=Al(e))?(e=r,n1):TZ:e instanceof Al?n1:e instanceof Date?wZ:xZ(e)?vZ:Array.isArray(e)?bZ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_Z:wd)(t,e)}function k0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function kZ(t,e){e===void 0&&(e=t,t=Qa);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function AZ(t){return function(){return t}}function _d(t){return+t}var r1=[0,1];function Ut(t){return t}function Lg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:AZ(isNaN(e)?NaN:.5)}function CZ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function PZ(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Lg(i,r),o=n(a,o)):(r=Lg(r,i),o=n(o,a)),function(s){return o(r(s))}}function NZ(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Lg(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=lu(t,s,1,r)-1;return o[l](i[l](s))}}function cu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function nh(){var t=r1,e=r1,n=Qa,r,i,o,a=Ut,s,l,u;function c(){var h=Math.min(t.length,e.length);return a!==Ut&&(a=CZ(t[0],t[h-1])),s=h>2?NZ:PZ,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((u||(u=s(e,t.map(r),wd)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,_d),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=k0,c()},d.clamp=function(h){return arguments.length?(a=h?!0:Ut,c()):a!==Ut},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,g){return r=h,i=g,c()}}function A0(){return nh()(Ut,Ut)}function IZ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Sd(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function va(t){return t=Sd(Math.abs(t)),t?t[1]:NaN}function OZ(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function RZ(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var MZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cl(t){if(!(e=MZ.exec(t)))throw new Error("invalid format: "+t);var e;return new C0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Cl.prototype=C0.prototype;function C0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}C0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $Z(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var TN;function DZ(t,e){var n=Sd(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(TN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Sd(t,Math.max(0,e+o-1))[0]}function i1(t,e){var n=Sd(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const o1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:IZ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>i1(t*100,e),r:i1,s:DZ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function a1(t){return t}var s1=Array.prototype.map,l1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jZ(t){var e=t.grouping===void 0||t.thousands===void 0?a1:OZ(s1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?a1:RZ(s1.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Cl(d);var h=d.fill,g=d.align,y=d.sign,x=d.symbol,v=d.zero,b=d.width,w=d.comma,_=d.precision,T=d.trim,S=d.type;S==="n"?(w=!0,S="g"):o1[S]||(_===void 0&&(_=12),T=!0,S="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var E=x==="$"?n:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=x==="$"?r:/[%p]/.test(S)?a:"",A=o1[S],C=/[defgprs%]/.test(S);_=_===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(I){var O=E,j=k,M,U,L;if(S==="c")j=A(I)+j,I="";else{I=+I;var B=I<0||1/I<0;if(I=isNaN(I)?l:A(Math.abs(I),_),T&&(I=$Z(I)),B&&+I==0&&y!=="+"&&(B=!1),O=(B?y==="("?y:s:y==="-"||y==="("?"":y)+O,j=(S==="s"?l1[8+TN/3]:"")+j+(B&&y==="("?")":""),C){for(M=-1,U=I.length;++M<U;)if(L=I.charCodeAt(M),48>L||L>57){j=(L===46?i+I.slice(M+1):I.slice(M))+j,I=I.slice(0,M);break}}}w&&!v&&(I=e(I,1/0));var N=O.length+I.length+j.length,$=N<b?new Array(b-N+1).join(h):"";switch(w&&v&&(I=e($+I,$.length?b-j.length:1/0),$=""),g){case"<":I=O+I+j+$;break;case"=":I=O+$+I+j;break;case"^":I=$.slice(0,N=$.length>>1)+O+I+j+$.slice(N);break;default:I=$+O+I+j;break}return o(I)}return R.toString=function(){return d+""},R}function c(d,h){var g=u((d=Cl(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(va(h)/3)))*3,x=Math.pow(10,-y),v=l1[8+y/3];return function(b){return g(x*b)+v}}return{format:u,formatPrefix:c}}var Ju,P0,kN;LZ({thousands:",",grouping:[3],currency:["$",""]});function LZ(t){return Ju=jZ(t),P0=Ju.format,kN=Ju.formatPrefix,Ju}function UZ(t){return Math.max(0,-va(Math.abs(t)))}function FZ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(va(e)/3)))*3-va(Math.abs(t)))}function BZ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,va(e)-va(t))+1}function AN(t,e,n,r){var i=Mg(t,e,n),o;switch(r=Cl(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=FZ(i,a))&&(r.precision=o),kN(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=BZ(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=UZ(i))&&(r.precision=o-(r.type==="%")*2);break}}return P0(r)}function pi(t){var e=t.domain;return t.ticks=function(n){var r=e();return Og(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return AN(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=Rg(a,s,n),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Ed(){var t=A0();return t.copy=function(){return cu(t,Ed())},Nn.apply(t,arguments),pi(t)}function CN(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,_d),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return CN(t).unknown(e)},t=arguments.length?Array.from(t,_d):[0,1],pi(n)}function PN(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function u1(t){return Math.log(t)}function c1(t){return Math.exp(t)}function GZ(t){return-Math.log(-t)}function zZ(t){return-Math.exp(-t)}function VZ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function HZ(t){return t===10?VZ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function qZ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function d1(t){return(e,n)=>-t(-e,n)}function N0(t){const e=t(u1,c1),n=e.domain;let r=10,i,o;function a(){return i=qZ(r),o=HZ(r),n()[0]<0?(i=d1(i),o=d1(o),t(GZ,zZ)):t(u1,c1),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=i(u),g=i(c),y,x;const v=s==null?10:+s;let b=[];if(!(r%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(y=1;y<r;++y)if(x=h<0?y/o(-h):y*o(h),!(x<u)){if(x>c)break;b.push(x)}}else for(;h<=g;++h)for(y=r-1;y>=1;--y)if(x=h>0?y/o(-h):y*o(h),!(x<u)){if(x>c)break;b.push(x)}b.length*2<v&&(b=Og(u,c,v))}else b=Og(h,g,Math.min(g-h,v)).map(o);return d?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Cl(l)).precision==null&&(l.trim=!0),l=P0(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return c=>{let d=c/o(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(PN(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function NN(){const t=N0(nh()).domain([1,10]);return t.copy=()=>cu(t,NN()).base(t.base()),Nn.apply(t,arguments),t}function f1(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function h1(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function I0(t){var e=1,n=t(f1(e),h1(e));return n.constant=function(r){return arguments.length?t(f1(e=+r),h1(e)):e},pi(n)}function IN(){var t=I0(nh());return t.copy=function(){return cu(t,IN()).constant(t.constant())},Nn.apply(t,arguments)}function p1(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function WZ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function KZ(t){return t<0?-t*t:t*t}function O0(t){var e=t(Ut,Ut),n=1;function r(){return n===1?t(Ut,Ut):n===.5?t(WZ,KZ):t(p1(n),p1(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},pi(e)}function R0(){var t=O0(nh());return t.copy=function(){return cu(t,R0()).exponent(t.exponent())},Nn.apply(t,arguments),t}function JZ(){return R0.apply(null,arguments).exponent(.5)}function m1(t){return Math.sign(t)*t*t}function YZ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function ON(){var t=A0(),e=[0,1],n=!1,r;function i(o){var a=YZ(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(m1(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,_d)).map(m1)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return ON(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Nn.apply(i,arguments),pi(i)}function RN(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=tZ(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[lu(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(oi),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return RN().domain(t).range(e).unknown(r)},Nn.apply(o,arguments)}function MN(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[lu(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return MN().domain([t,e]).range(i).unknown(o)},Nn.apply(pi(a),arguments)}function $N(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[lu(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return $N().domain(t).range(e).unknown(n)},Nn.apply(i,arguments)}const bp=new Date,wp=new Date;function ht(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return l},i.filter=o=>ht(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(bp.setTime(+o),wp.setTime(+a),t(bp),t(wp),Math.floor(n(bp,wp))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Td=ht(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Td.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ht(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Td);Td.range;const mr=1e3,xn=mr*60,gr=xn*60,Ar=gr*24,M0=Ar*7,g1=Ar*30,_p=Ar*365,Di=ht(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*mr)},(t,e)=>(e-t)/mr,t=>t.getUTCSeconds());Di.range;const $0=ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*mr)},(t,e)=>{t.setTime(+t+e*xn)},(t,e)=>(e-t)/xn,t=>t.getMinutes());$0.range;const D0=ht(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*xn)},(t,e)=>(e-t)/xn,t=>t.getUTCMinutes());D0.range;const j0=ht(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*mr-t.getMinutes()*xn)},(t,e)=>{t.setTime(+t+e*gr)},(t,e)=>(e-t)/gr,t=>t.getHours());j0.range;const L0=ht(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*gr)},(t,e)=>(e-t)/gr,t=>t.getUTCHours());L0.range;const du=ht(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*xn)/Ar,t=>t.getDate()-1);du.range;const rh=ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ar,t=>t.getUTCDate()-1);rh.range;const DN=ht(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ar,t=>Math.floor(t/Ar));DN.range;function ao(t){return ht(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*xn)/M0)}const ih=ao(0),kd=ao(1),XZ=ao(2),QZ=ao(3),xa=ao(4),ZZ=ao(5),eee=ao(6);ih.range;kd.range;XZ.range;QZ.range;xa.range;ZZ.range;eee.range;function so(t){return ht(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/M0)}const oh=so(0),Ad=so(1),tee=so(2),nee=so(3),ba=so(4),ree=so(5),iee=so(6);oh.range;Ad.range;tee.range;nee.range;ba.range;ree.range;iee.range;const U0=ht(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());U0.range;const F0=ht(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());F0.range;const Cr=ht(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ht(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Cr.range;const Pr=ht(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ht(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Pr.range;function jN(t,e,n,r,i,o){const a=[[Di,1,mr],[Di,5,5*mr],[Di,15,15*mr],[Di,30,30*mr],[o,1,xn],[o,5,5*xn],[o,15,15*xn],[o,30,30*xn],[i,1,gr],[i,3,3*gr],[i,6,6*gr],[i,12,12*gr],[r,1,Ar],[r,2,2*Ar],[n,1,M0],[e,1,g1],[e,3,3*g1],[t,1,_p]];function s(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const g=d&&typeof d.range=="function"?d:l(u,c,d),y=g?g.range(u,+c+1):[];return h?y.reverse():y}function l(u,c,d){const h=Math.abs(c-u)/d,g=_0(([,,v])=>v).right(a,h);if(g===a.length)return t.every(Mg(u/_p,c/_p,d));if(g===0)return Td.every(Math.max(Mg(u,c,d),1));const[y,x]=a[h/a[g-1][2]<a[g][2]/h?g-1:g];return y.every(x)}return[s,l]}const[oee,aee]=jN(Pr,F0,oh,DN,L0,D0),[see,lee]=jN(Cr,U0,ih,du,j0,$0);function Sp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ep(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ms(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function uee(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=gs(i),c=ys(i),d=gs(o),h=ys(o),g=gs(a),y=ys(a),x=gs(s),v=ys(s),b=gs(l),w=ys(l),_={a:B,A:N,b:$,B:F,c:null,d:_1,e:_1,f:Oee,g:Gee,G:Vee,H:Pee,I:Nee,j:Iee,L:LN,m:Ree,M:Mee,p:V,q,Q:T1,s:k1,S:$ee,u:Dee,U:jee,V:Lee,w:Uee,W:Fee,x:null,X:null,y:Bee,Y:zee,Z:Hee,"%":E1},T={a:te,A:de,b:pe,B:Ie,c:null,d:S1,e:S1,f:Jee,g:ote,G:ste,H:qee,I:Wee,j:Kee,L:FN,m:Yee,M:Xee,p:W,q:X,Q:T1,s:k1,S:Qee,u:Zee,U:ete,V:tte,w:nte,W:rte,x:null,X:null,y:ite,Y:ate,Z:lte,"%":E1},S={a:R,A:I,b:O,B:j,c:M,d:b1,e:b1,f:Tee,g:x1,G:v1,H:w1,I:w1,j:wee,L:Eee,m:bee,M:_ee,p:C,q:xee,Q:Aee,s:Cee,S:See,u:pee,U:mee,V:gee,w:hee,W:yee,x:U,X:L,y:x1,Y:v1,Z:vee,"%":kee};_.x=E(n,_),_.X=E(r,_),_.c=E(e,_),T.x=E(n,T),T.X=E(r,T),T.c=E(e,T);function E(H,Z){return function(ie){var z=[],Te=-1,fe=0,ke=H.length,J,Me,ee;for(ie instanceof Date||(ie=new Date(+ie));++Te<ke;)H.charCodeAt(Te)===37&&(z.push(H.slice(fe,Te)),(Me=y1[J=H.charAt(++Te)])!=null?J=H.charAt(++Te):Me=J==="e"?" ":"0",(ee=Z[J])&&(J=ee(ie,Me)),z.push(J),fe=Te+1);return z.push(H.slice(fe,Te)),z.join("")}}function k(H,Z){return function(ie){var z=ms(1900,void 0,1),Te=A(z,H,ie+="",0),fe,ke;if(Te!=ie.length)return null;if("Q"in z)return new Date(z.Q);if("s"in z)return new Date(z.s*1e3+("L"in z?z.L:0));if(Z&&!("Z"in z)&&(z.Z=0),"p"in z&&(z.H=z.H%12+z.p*12),z.m===void 0&&(z.m="q"in z?z.q:0),"V"in z){if(z.V<1||z.V>53)return null;"w"in z||(z.w=1),"Z"in z?(fe=Ep(ms(z.y,0,1)),ke=fe.getUTCDay(),fe=ke>4||ke===0?Ad.ceil(fe):Ad(fe),fe=rh.offset(fe,(z.V-1)*7),z.y=fe.getUTCFullYear(),z.m=fe.getUTCMonth(),z.d=fe.getUTCDate()+(z.w+6)%7):(fe=Sp(ms(z.y,0,1)),ke=fe.getDay(),fe=ke>4||ke===0?kd.ceil(fe):kd(fe),fe=du.offset(fe,(z.V-1)*7),z.y=fe.getFullYear(),z.m=fe.getMonth(),z.d=fe.getDate()+(z.w+6)%7)}else("W"in z||"U"in z)&&("w"in z||(z.w="u"in z?z.u%7:"W"in z?1:0),ke="Z"in z?Ep(ms(z.y,0,1)).getUTCDay():Sp(ms(z.y,0,1)).getDay(),z.m=0,z.d="W"in z?(z.w+6)%7+z.W*7-(ke+5)%7:z.w+z.U*7-(ke+6)%7);return"Z"in z?(z.H+=z.Z/100|0,z.M+=z.Z%100,Ep(z)):Sp(z)}}function A(H,Z,ie,z){for(var Te=0,fe=Z.length,ke=ie.length,J,Me;Te<fe;){if(z>=ke)return-1;if(J=Z.charCodeAt(Te++),J===37){if(J=Z.charAt(Te++),Me=S[J in y1?Z.charAt(Te++):J],!Me||(z=Me(H,ie,z))<0)return-1}else if(J!=ie.charCodeAt(z++))return-1}return z}function C(H,Z,ie){var z=u.exec(Z.slice(ie));return z?(H.p=c.get(z[0].toLowerCase()),ie+z[0].length):-1}function R(H,Z,ie){var z=g.exec(Z.slice(ie));return z?(H.w=y.get(z[0].toLowerCase()),ie+z[0].length):-1}function I(H,Z,ie){var z=d.exec(Z.slice(ie));return z?(H.w=h.get(z[0].toLowerCase()),ie+z[0].length):-1}function O(H,Z,ie){var z=b.exec(Z.slice(ie));return z?(H.m=w.get(z[0].toLowerCase()),ie+z[0].length):-1}function j(H,Z,ie){var z=x.exec(Z.slice(ie));return z?(H.m=v.get(z[0].toLowerCase()),ie+z[0].length):-1}function M(H,Z,ie){return A(H,e,Z,ie)}function U(H,Z,ie){return A(H,n,Z,ie)}function L(H,Z,ie){return A(H,r,Z,ie)}function B(H){return a[H.getDay()]}function N(H){return o[H.getDay()]}function $(H){return l[H.getMonth()]}function F(H){return s[H.getMonth()]}function V(H){return i[+(H.getHours()>=12)]}function q(H){return 1+~~(H.getMonth()/3)}function te(H){return a[H.getUTCDay()]}function de(H){return o[H.getUTCDay()]}function pe(H){return l[H.getUTCMonth()]}function Ie(H){return s[H.getUTCMonth()]}function W(H){return i[+(H.getUTCHours()>=12)]}function X(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var Z=E(H+="",_);return Z.toString=function(){return H},Z},parse:function(H){var Z=k(H+="",!1);return Z.toString=function(){return H},Z},utcFormat:function(H){var Z=E(H+="",T);return Z.toString=function(){return H},Z},utcParse:function(H){var Z=k(H+="",!0);return Z.toString=function(){return H},Z}}}var y1={"-":"",_:" ",0:"0"},vt=/^\s*\d+/,cee=/^%/,dee=/[\\^$*+?|[\]().{}]/g;function Ee(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function fee(t){return t.replace(dee,"\\$&")}function gs(t){return new RegExp("^(?:"+t.map(fee).join("|")+")","i")}function ys(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function hee(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function pee(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function mee(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function gee(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function yee(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function v1(t,e,n){var r=vt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function x1(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function vee(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xee(t,e,n){var r=vt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function bee(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function b1(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function wee(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function w1(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function _ee(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function See(t,e,n){var r=vt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Eee(t,e,n){var r=vt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Tee(t,e,n){var r=vt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function kee(t,e,n){var r=cee.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Aee(t,e,n){var r=vt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Cee(t,e,n){var r=vt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function _1(t,e){return Ee(t.getDate(),e,2)}function Pee(t,e){return Ee(t.getHours(),e,2)}function Nee(t,e){return Ee(t.getHours()%12||12,e,2)}function Iee(t,e){return Ee(1+du.count(Cr(t),t),e,3)}function LN(t,e){return Ee(t.getMilliseconds(),e,3)}function Oee(t,e){return LN(t,e)+"000"}function Ree(t,e){return Ee(t.getMonth()+1,e,2)}function Mee(t,e){return Ee(t.getMinutes(),e,2)}function $ee(t,e){return Ee(t.getSeconds(),e,2)}function Dee(t){var e=t.getDay();return e===0?7:e}function jee(t,e){return Ee(ih.count(Cr(t)-1,t),e,2)}function UN(t){var e=t.getDay();return e>=4||e===0?xa(t):xa.ceil(t)}function Lee(t,e){return t=UN(t),Ee(xa.count(Cr(t),t)+(Cr(t).getDay()===4),e,2)}function Uee(t){return t.getDay()}function Fee(t,e){return Ee(kd.count(Cr(t)-1,t),e,2)}function Bee(t,e){return Ee(t.getFullYear()%100,e,2)}function Gee(t,e){return t=UN(t),Ee(t.getFullYear()%100,e,2)}function zee(t,e){return Ee(t.getFullYear()%1e4,e,4)}function Vee(t,e){var n=t.getDay();return t=n>=4||n===0?xa(t):xa.ceil(t),Ee(t.getFullYear()%1e4,e,4)}function Hee(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ee(e/60|0,"0",2)+Ee(e%60,"0",2)}function S1(t,e){return Ee(t.getUTCDate(),e,2)}function qee(t,e){return Ee(t.getUTCHours(),e,2)}function Wee(t,e){return Ee(t.getUTCHours()%12||12,e,2)}function Kee(t,e){return Ee(1+rh.count(Pr(t),t),e,3)}function FN(t,e){return Ee(t.getUTCMilliseconds(),e,3)}function Jee(t,e){return FN(t,e)+"000"}function Yee(t,e){return Ee(t.getUTCMonth()+1,e,2)}function Xee(t,e){return Ee(t.getUTCMinutes(),e,2)}function Qee(t,e){return Ee(t.getUTCSeconds(),e,2)}function Zee(t){var e=t.getUTCDay();return e===0?7:e}function ete(t,e){return Ee(oh.count(Pr(t)-1,t),e,2)}function BN(t){var e=t.getUTCDay();return e>=4||e===0?ba(t):ba.ceil(t)}function tte(t,e){return t=BN(t),Ee(ba.count(Pr(t),t)+(Pr(t).getUTCDay()===4),e,2)}function nte(t){return t.getUTCDay()}function rte(t,e){return Ee(Ad.count(Pr(t)-1,t),e,2)}function ite(t,e){return Ee(t.getUTCFullYear()%100,e,2)}function ote(t,e){return t=BN(t),Ee(t.getUTCFullYear()%100,e,2)}function ate(t,e){return Ee(t.getUTCFullYear()%1e4,e,4)}function ste(t,e){var n=t.getUTCDay();return t=n>=4||n===0?ba(t):ba.ceil(t),Ee(t.getUTCFullYear()%1e4,e,4)}function lte(){return"+0000"}function E1(){return"%"}function T1(t){return+t}function k1(t){return Math.floor(+t/1e3)}var bo,GN,zN;ute({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ute(t){return bo=uee(t),GN=bo.format,bo.parse,zN=bo.utcFormat,bo.utcParse,bo}function cte(t){return new Date(t)}function dte(t){return t instanceof Date?+t:+new Date(+t)}function B0(t,e,n,r,i,o,a,s,l,u){var c=A0(),d=c.invert,h=c.domain,g=u(".%L"),y=u(":%S"),x=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),w=u("%b %d"),_=u("%B"),T=u("%Y");function S(E){return(l(E)<E?g:s(E)<E?y:a(E)<E?x:o(E)<E?v:r(E)<E?i(E)<E?b:w:n(E)<E?_:T)(E)}return c.invert=function(E){return new Date(d(E))},c.domain=function(E){return arguments.length?h(Array.from(E,dte)):h().map(cte)},c.ticks=function(E){var k=h();return t(k[0],k[k.length-1],E??10)},c.tickFormat=function(E,k){return k==null?S:u(k)},c.nice=function(E){var k=h();return(!E||typeof E.range!="function")&&(E=e(k[0],k[k.length-1],E??10)),E?h(PN(k,E)):c},c.copy=function(){return cu(c,B0(t,e,n,r,i,o,a,s,l,u))},c}function fte(){return Nn.apply(B0(see,lee,Cr,U0,ih,du,j0,$0,Di,GN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hte(){return Nn.apply(B0(oee,aee,Pr,F0,oh,rh,L0,D0,Di,zN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ah(){var t=0,e=1,n,r,i,o,a=Ut,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(o(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(h){var g,y;return arguments.length?([g,y]=h,a=d(g,y),u):[a(0),a(1)]}}return u.range=c(Qa),u.rangeRound=c(k0),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function mi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function VN(){var t=pi(ah()(Ut));return t.copy=function(){return mi(t,VN())},jr.apply(t,arguments)}function HN(){var t=N0(ah()).domain([1,10]);return t.copy=function(){return mi(t,HN()).base(t.base())},jr.apply(t,arguments)}function qN(){var t=I0(ah());return t.copy=function(){return mi(t,qN()).constant(t.constant())},jr.apply(t,arguments)}function G0(){var t=O0(ah());return t.copy=function(){return mi(t,G0()).exponent(t.exponent())},jr.apply(t,arguments)}function pte(){return G0.apply(null,arguments).exponent(.5)}function WN(){var t=[],e=Ut;function n(r){if(r!=null&&!isNaN(r=+r))return e((lu(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(oi),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>eZ(t,o/r))},n.copy=function(){return WN(e).domain(t)},jr.apply(n,arguments)}function sh(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,u=Ut,c,d=!1,h;function g(x){return isNaN(x=+x)?h:(x=.5+((x=+c(x))-o)*(r*x<r*o?s:l),u(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=c(t=+t),o=c(e=+e),a=c(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(u=x,g):u};function y(x){return function(v){var b,w,_;return arguments.length?([b,w,_]=v,u=kZ(x,[b,w,_]),g):[u(0),u(.5),u(1)]}}return g.range=y(Qa),g.rangeRound=y(k0),g.unknown=function(x){return arguments.length?(h=x,g):h},function(x){return c=x,i=x(t),o=x(e),a=x(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g}}function KN(){var t=pi(sh()(Ut));return t.copy=function(){return mi(t,KN())},jr.apply(t,arguments)}function JN(){var t=N0(sh()).domain([.1,1,10]);return t.copy=function(){return mi(t,JN()).base(t.base())},jr.apply(t,arguments)}function YN(){var t=I0(sh());return t.copy=function(){return mi(t,YN()).constant(t.constant())},jr.apply(t,arguments)}function z0(){var t=O0(sh());return t.copy=function(){return mi(t,z0()).exponent(t.exponent())},jr.apply(t,arguments)}function mte(){return z0.apply(null,arguments).exponent(.5)}const A1=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:El,scaleDiverging:KN,scaleDivergingLog:JN,scaleDivergingPow:z0,scaleDivergingSqrt:mte,scaleDivergingSymlog:YN,scaleIdentity:CN,scaleImplicit:$g,scaleLinear:Ed,scaleLog:NN,scaleOrdinal:S0,scalePoint:Gs,scalePow:R0,scaleQuantile:RN,scaleQuantize:MN,scaleRadial:ON,scaleSequential:VN,scaleSequentialLog:HN,scaleSequentialPow:G0,scaleSequentialQuantile:WN,scaleSequentialSqrt:pte,scaleSequentialSymlog:qN,scaleSqrt:JZ,scaleSymlog:IN,scaleThreshold:$N,scaleTime:fte,scaleUtc:hte,tickFormat:AN},Symbol.toStringTag,{value:"Module"}));var gte=Ba;function yte(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!gte(a):n(a,s)))var s=a,l=o}return l}var XN=yte;function vte(t,e){return t>e}var xte=vte,bte=XN,wte=xte,_te=Ja;function Ste(t){return t&&t.length?bte(t,_te,wte):void 0}var Ete=Ste;const Jr=Ue(Ete);function Tte(t,e){return t<e}var kte=Tte,Ate=XN,Cte=kte,Pte=Ja;function Nte(t){return t&&t.length?Ate(t,Pte,Cte):void 0}var Ite=Nte;const lh=Ue(Ite);var Ote=n0,Rte=Ya,Mte=oN,$te=Yt;function Dte(t,e){var n=$te(t)?Ote:Mte;return n(t,Rte(e))}var jte=Dte,Lte=rN,Ute=jte;function Fte(t,e){return Lte(Ute(t,e),1)}var Bte=Fte;const Gte=Ue(Bte);var zte=v0;function Vte(t,e){return zte(t,e)}var Hte=Vte;const Pl=Ue(Hte);var Za=1e9,qte={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},H0,He=!0,Cn="[DecimalError] ",Vi=Cn+"Invalid argument: ",V0=Cn+"Exponent out of range: ",es=Math.floor,Ai=Math.pow,Wte=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,rn,pt=1e7,Ge=7,QN=9007199254740991,Cd=es(QN/Ge),re={};re.absoluteValue=re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};re.comparedTo=re.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};re.decimalPlaces=re.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Ge;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};re.dividedBy=re.div=function(t){return br(this,new this.constructor(t))};re.dividedToIntegerBy=re.idiv=function(t){var e=this,n=e.constructor;return $e(br(e,new n(t),0,1),n.precision)};re.equals=re.eq=function(t){return!this.cmp(t)};re.exponent=function(){return ot(this)};re.greaterThan=re.gt=function(t){return this.cmp(t)>0};re.greaterThanOrEqualTo=re.gte=function(t){return this.cmp(t)>=0};re.isInteger=re.isint=function(){return this.e>this.d.length-2};re.isNegative=re.isneg=function(){return this.s<0};re.isPositive=re.ispos=function(){return this.s>0};re.isZero=function(){return this.s===0};re.lessThan=re.lt=function(t){return this.cmp(t)<0};re.lessThanOrEqualTo=re.lte=function(t){return this.cmp(t)<1};re.logarithm=re.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(rn))throw Error(Cn+"NaN");if(n.s<1)throw Error(Cn+(n.s?"NaN":"-Infinity"));return n.eq(rn)?new r(0):(He=!1,e=br(Nl(n,o),Nl(t,o),o),He=!0,$e(e,i))};re.minus=re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?tI(e,t):ZN(e,(t.s=-t.s,t))};re.modulo=re.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Cn+"NaN");return n.s?(He=!1,e=br(n,t,0,1).times(t),He=!0,n.minus(e)):$e(new r(n),i)};re.naturalExponential=re.exp=function(){return eI(this)};re.naturalLogarithm=re.ln=function(){return Nl(this)};re.negated=re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};re.plus=re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?ZN(e,t):tI(e,(t.s=-t.s,t))};re.precision=re.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Vi+t);if(e=ot(i)+1,r=i.d.length-1,n=r*Ge+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};re.squareRoot=re.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Cn+"NaN")}for(t=ot(s),He=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=er(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=es((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(br(s,o,a+2)).times(.5),er(o.d).slice(0,a)===(e=er(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if($e(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return He=!0,$e(r,n)};re.times=re.mul=function(t){var e,n,r,i,o,a,s,l,u,c=this,d=c.constructor,h=c.d,g=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=h.length,u=g.length,l<u&&(o=h,h=g,g=o,a=l,l=u,u=a),o=[],a=l+u,r=a;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+g[r]*h[i-r-1]+e,o[i--]=s%pt|0,e=s/pt|0;o[i]=(o[i]+e)%pt|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,He?$e(t,d.precision):t};re.toDecimalPlaces=re.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ar(t,0,Za),e===void 0?e=r.rounding:ar(e,0,8),$e(n,t+ot(n)+1,e))};re.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Zi(r,!0):(ar(t,0,Za),e===void 0?e=i.rounding:ar(e,0,8),r=$e(new i(r),t+1,e),n=Zi(r,!0,t+1)),n};re.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?Zi(i):(ar(t,0,Za),e===void 0?e=o.rounding:ar(e,0,8),r=$e(new o(i),t+ot(i)+1,e),n=Zi(r.abs(),!1,t+ot(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};re.toInteger=re.toint=function(){var t=this,e=t.constructor;return $e(new e(t),ot(t)+1,e.rounding)};re.toNumber=function(){return+this};re.toPower=re.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(rn);if(s=new l(s),!s.s){if(t.s<1)throw Error(Cn+"Infinity");return s}if(s.eq(rn))return s;if(r=l.precision,t.eq(rn))return $e(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=c<0?-c:c)<=QN){for(i=new l(rn),e=Math.ceil(r/Ge+4),He=!1;n%2&&(i=i.times(s),P1(i.d,e)),n=es(n/2),n!==0;)s=s.times(s),P1(s.d,e);return He=!0,t.s<0?new l(rn).div(i):$e(i,r)}}else if(o<0)throw Error(Cn+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,He=!1,i=t.times(Nl(s,r+u)),He=!0,i=eI(i),i.s=o,i};re.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=ot(i),r=Zi(i,n<=o.toExpNeg||n>=o.toExpPos)):(ar(t,1,Za),e===void 0?e=o.rounding:ar(e,0,8),i=$e(new o(i),t,e),n=ot(i),r=Zi(i,t<=n||n<=o.toExpNeg,t)),r};re.toSignificantDigits=re.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ar(t,1,Za),e===void 0?e=r.rounding:ar(e,0,8)),$e(new r(n),t,e)};re.toString=re.valueOf=re.val=re.toJSON=re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ot(t),n=t.constructor;return Zi(t,e<=n.toExpNeg||e>=n.toExpPos)};function ZN(t,e){var n,r,i,o,a,s,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),He?$e(e,d):e;if(l=t.d,u=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=u.length):(r=u,i=a,s=l.length),a=Math.ceil(d/Ge),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,r=u,u=l,l=r),n=0;o;)n=(l[--o]=l[o]+u[o]+n)/pt|0,l[o]%=pt;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,He?$e(e,d):e}function ar(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Vi+t)}function er(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Ge-r.length,n&&(o+=zr(n)),o+=r;a=t[e],r=a+"",n=Ge-r.length,n&&(o+=zr(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var br=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%pt|0,a=o/pt|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*pt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,u,c,d,h,g,y,x,v,b,w,_,T,S,E,k,A,C=r.constructor,R=r.s==i.s?1:-1,I=r.d,O=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(Cn+"Division by zero");for(l=r.e-i.e,k=O.length,S=I.length,g=new C(R),y=g.d=[],u=0;O[u]==(I[u]||0);)++u;if(O[u]>(I[u]||0)&&--l,o==null?w=o=C.precision:a?w=o+(ot(r)-ot(i))+1:w=o,w<0)return new C(0);if(w=w/Ge+2|0,u=0,k==1)for(c=0,O=O[0],w++;(u<S||c)&&w--;u++)_=c*pt+(I[u]||0),y[u]=_/O|0,c=_%O|0;else{for(c=pt/(O[0]+1)|0,c>1&&(O=t(O,c),I=t(I,c),k=O.length,S=I.length),T=k,x=I.slice(0,k),v=x.length;v<k;)x[v++]=0;A=O.slice(),A.unshift(0),E=O[0],O[1]>=pt/2&&++E;do c=0,s=e(O,x,k,v),s<0?(b=x[0],k!=v&&(b=b*pt+(x[1]||0)),c=b/E|0,c>1?(c>=pt&&(c=pt-1),d=t(O,c),h=d.length,v=x.length,s=e(d,x,h,v),s==1&&(c--,n(d,k<h?A:O,h))):(c==0&&(s=c=1),d=O.slice()),h=d.length,h<v&&d.unshift(0),n(x,d,v),s==-1&&(v=x.length,s=e(O,x,k,v),s<1&&(c++,n(x,k<v?A:O,v))),v=x.length):s===0&&(c++,x=[0]),y[u++]=c,s&&x[0]?x[v++]=I[T]||0:(x=[I[T]],v=1);while((T++<S||x[0]!==void 0)&&w--)}return y[0]||y.shift(),g.e=l,$e(g,a?o+ot(g)+1:o)}}();function eI(t,e){var n,r,i,o,a,s,l=0,u=0,c=t.constructor,d=c.precision;if(ot(t)>16)throw Error(V0+ot(t));if(!t.s)return new c(rn);for(He=!1,s=d,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(Ai(2,u))/Math.LN10*2+5|0,s+=r,n=i=o=new c(rn),c.precision=s;;){if(i=$e(i.times(t),s),n=n.times(++l),a=o.plus(br(i,n,s)),er(a.d).slice(0,s)===er(o.d).slice(0,s)){for(;u--;)o=$e(o.times(o),s);return c.precision=d,e==null?(He=!0,$e(o,d)):o}o=a}}function ot(t){for(var e=t.e*Ge,n=t.d[0];n>=10;n/=10)e++;return e}function Tp(t,e,n){if(e>t.LN10.sd())throw He=!0,n&&(t.precision=n),Error(Cn+"LN10 precision limit exceeded");return $e(new t(t.LN10),e)}function zr(t){for(var e="";t--;)e+="0";return e}function Nl(t,e){var n,r,i,o,a,s,l,u,c,d=1,h=10,g=t,y=g.d,x=g.constructor,v=x.precision;if(g.s<1)throw Error(Cn+(g.s?"NaN":"-Infinity"));if(g.eq(rn))return new x(0);if(e==null?(He=!1,u=v):u=e,g.eq(10))return e==null&&(He=!0),Tp(x,u);if(u+=h,x.precision=u,n=er(y),r=n.charAt(0),o=ot(g),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=er(g.d),r=n.charAt(0),d++;o=ot(g),r>1?(g=new x("0."+n),o++):g=new x(r+"."+n.slice(1))}else return l=Tp(x,u+2,v).times(o+""),g=Nl(new x(r+"."+n.slice(1)),u-h).plus(l),x.precision=v,e==null?(He=!0,$e(g,v)):g;for(s=a=g=br(g.minus(rn),g.plus(rn),u),c=$e(g.times(g),u),i=3;;){if(a=$e(a.times(c),u),l=s.plus(br(a,new x(i),u)),er(l.d).slice(0,u)===er(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(Tp(x,u+2,v).times(o+""))),s=br(s,new x(d),u),x.precision=v,e==null?(He=!0,$e(s,v)):s;s=l,i+=2}}function C1(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=es(n/Ge),t.d=[],r=(n+1)%Ge,n<0&&(r+=Ge),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Ge;r<i;)t.d.push(+e.slice(r,r+=Ge));e=e.slice(r),r=Ge-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),He&&(t.e>Cd||t.e<-Cd))throw Error(V0+n)}else t.s=0,t.e=0,t.d=[0];return t}function $e(t,e,n){var r,i,o,a,s,l,u,c,d=t.d;for(a=1,o=d[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Ge,i=e,u=d[c=0];else{if(c=Math.ceil((r+1)/Ge),o=d.length,c>=o)return t;for(u=o=d[c],a=1;o>=10;o/=10)a++;r%=Ge,i=r-Ge+a}if(n!==void 0&&(o=Ai(10,a-i-1),s=u/o%10|0,l=e<0||d[c+1]!==void 0||u%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?u/Ai(10,a-i):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(o=ot(t),d.length=1,e=e-o-1,d[0]=Ai(10,(Ge-e%Ge)%Ge),t.e=es(-e/Ge)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,o=1,c--):(d.length=c+1,o=Ai(10,Ge-r),d[c]=i>0?(u/Ai(10,a-i)%Ai(10,i)|0)*o:0),l)for(;;)if(c==0){(d[0]+=o)==pt&&(d[0]=1,++t.e);break}else{if(d[c]+=o,d[c]!=pt)break;d[c--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(He&&(t.e>Cd||t.e<-Cd))throw Error(V0+ot(t));return t}function tI(t,e){var n,r,i,o,a,s,l,u,c,d,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),He?$e(e,g):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),a=u-r,a){for(c=a<0,c?(n=l,a=-a,s=d.length):(n=d,r=u,s=l.length),i=Math.max(Math.ceil(g/Ge),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=d.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}a=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=pt-1;--l[o],l[i]+=pt}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,He?$e(e,g):e):new h(0)}function Zi(t,e,n){var r,i=ot(t),o=er(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+zr(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+zr(-i-1)+o,n&&(r=n-a)>0&&(o+=zr(r))):i>=a?(o+=zr(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+zr(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=zr(r))),t.s<0?"-"+o:o}function P1(t,e){if(t.length>e)return t.length=e,!0}function nI(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Vi+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return C1(a,o.toString())}else if(typeof o!="string")throw Error(Vi+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,Wte.test(o))C1(a,o);else throw Error(Vi+o)}if(i.prototype=re,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=nI,i.config=i.set=Kte,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Kte(t){if(!t||typeof t!="object")throw Error(Cn+"Object expected");var e,n,r,i=["precision",1,Za,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(es(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Vi+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Vi+n+": "+r);return this}var H0=nI(qte);rn=new H0(1);const Re=H0;function Jte(t){return Zte(t)||Qte(t)||Xte(t)||Yte()}function Yte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xte(t,e){if(t){if(typeof t=="string")return Ug(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ug(t,e)}}function Qte(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function Zte(t){if(Array.isArray(t))return Ug(t)}function Ug(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ene=function(e){return e},rI={},iI=function(e){return e===rI},N1=function(e){return function n(){return arguments.length===0||arguments.length===1&&iI(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},tne=function t(e,n){return e===1?n:N1(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==rI}).length;return a>=e?n.apply(void 0,i):t(e-a,N1(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=i.map(function(d){return iI(d)?l.shift():d});return n.apply(void 0,Jte(c).concat(l))}))})},uh=function(e){return tne(e.length,e)},Fg=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},nne=uh(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),rne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return ene;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},Bg=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},oI=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function ine(t){var e;return t===0?e=1:e=Math.floor(new Re(t).abs().log(10).toNumber())+1,e}function one(t,e,n){for(var r=new Re(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var ane=uh(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),sne=uh(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),lne=uh(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const ch={rangeStep:one,getDigitCount:ine,interpolateNumber:ane,uninterpolateNumber:sne,uninterpolateTruncation:lne};function Gg(t){return dne(t)||cne(t)||aI(t)||une()}function une(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function dne(t){if(Array.isArray(t))return zg(t)}function Il(t,e){return pne(t)||hne(t,e)||aI(t,e)||fne()}function fne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aI(t,e){if(t){if(typeof t=="string")return zg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zg(t,e)}}function zg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hne(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function pne(t){if(Array.isArray(t))return t}function sI(t){var e=Il(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function lI(t,e,n){if(t.lte(0))return new Re(0);var r=ch.getDigitCount(t.toNumber()),i=new Re(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Re(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Re(Math.ceil(l))}function mne(t,e,n){var r=1,i=new Re(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Re(10).pow(ch.getDigitCount(t)-1),i=new Re(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Re(Math.floor(t)))}else t===0?i=new Re(Math.floor((e-1)/2)):n||(i=new Re(Math.floor(t)));var a=Math.floor((e-1)/2),s=rne(nne(function(l){return i.add(new Re(l-a).mul(r)).toNumber()}),Fg);return s(0,e)}function uI(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Re(0),tickMin:new Re(0),tickMax:new Re(0)};var o=lI(new Re(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Re(0):(a=new Re(t).add(e).div(2),a=a.sub(new Re(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Re(e).sub(a).div(o).toNumber()),u=s+l+1;return u>n?uI(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,s=e>0?s:s+(n-u)),{step:o,tickMin:a.sub(new Re(s).mul(o)),tickMax:a.add(new Re(l).mul(o))})}function gne(t){var e=Il(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=sI([n,r]),l=Il(s,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(Gg(Fg(0,i-1).map(function(){return 1/0}))):[].concat(Gg(Fg(0,i-1).map(function(){return-1/0})),[c]);return n>r?Bg(d):d}if(u===c)return mne(u,i,o);var h=uI(u,c,a,o),g=h.step,y=h.tickMin,x=h.tickMax,v=ch.rangeStep(y,x.add(new Re(.1).mul(g)),g);return n>r?Bg(v):v}function yne(t,e){var n=Il(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=sI([r,i]),s=Il(a,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),d=lI(new Re(u).sub(l).div(c-1),o,0),h=[].concat(Gg(ch.rangeStep(new Re(l),new Re(u).sub(new Re(.99).mul(d)),d)),[u]);return r>i?Bg(h):h}var vne=oI(gne),xne=oI(yne),bne="Invariant failed";function eo(t,e){throw new Error(bne)}var wne=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function wa(t){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wa(t)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pd.apply(this,arguments)}function _ne(t,e){return kne(t)||Tne(t,e)||Ene(t,e)||Sne()}function Sne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ene(t,e){if(t){if(typeof t=="string")return I1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I1(t,e)}}function I1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function kne(t){if(Array.isArray(t))return t}function Ane(t,e){if(t==null)return{};var n=Cne(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Pne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fI(r.key),r)}}function Ine(t,e,n){return e&&Nne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function One(t,e,n){return e=Nd(e),Rne(t,cI()?Reflect.construct(e,n||[],Nd(t).constructor):e.apply(t,n))}function Rne(t,e){if(e&&(wa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mne(t)}function Mne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cI=function(){return!!t})()}function Nd(t){return Nd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nd(t)}function $ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vg(t,e)}function Vg(t,e){return Vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Vg(t,e)}function dI(t,e,n){return e=fI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fI(t){var e=Dne(t,"string");return wa(e)=="symbol"?e:e+""}function Dne(t,e){if(wa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dh=function(t){function e(){return Pne(this,e),One(this,e,arguments)}return $ne(e,t),Ine(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,h=Ane(r,wne),g=ve(h,!1);this.props.direction==="x"&&c.type!=="number"&&eo();var y=l.map(function(x){var v=u(x,s),b=v.x,w=v.y,_=v.value,T=v.errorVal;if(!T)return null;var S=[],E,k;if(Array.isArray(T)){var A=_ne(T,2);E=A[0],k=A[1]}else E=k=T;if(o==="vertical"){var C=c.scale,R=w+i,I=R+a,O=R-a,j=C(_-E),M=C(_+k);S.push({x1:M,y1:I,x2:M,y2:O}),S.push({x1:j,y1:R,x2:M,y2:R}),S.push({x1:j,y1:I,x2:j,y2:O})}else if(o==="horizontal"){var U=d.scale,L=b+i,B=L-a,N=L+a,$=U(_-E),F=U(_+k);S.push({x1:B,y1:F,x2:N,y2:F}),S.push({x1:L,y1:$,x2:L,y2:F}),S.push({x1:B,y1:$,x2:N,y2:$})}return D.createElement(Je,Pd({className:"recharts-errorBar",key:"bar-".concat(S.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},g),S.map(function(V){return D.createElement("line",Pd({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return D.createElement(Je,{className:"recharts-errorBars"},y)}}])}(D.Component);dI(dh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});dI(dh,"displayName","ErrorBar");function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}function O1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O1(Object(n),!0).forEach(function(r){jne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jne(t,e,n){return e=Lne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lne(t){var e=Une(t,"string");return Ol(e)=="symbol"?e:e+""}function Une(t,e){if(Ol(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ol(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var hI=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=en(n,ta);if(!a)return null;var s=ta.defaultProps,l=s!==void 0?bi(bi({},s),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:o==="children"?u=(r||[]).reduce(function(c,d){var h=d.item,g=d.props,y=g.sectors||g.data||[];return c.concat(y.map(function(x){return{type:a.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(r||[]).map(function(c){var d=c.item,h=d.type.defaultProps,g=h!==void 0?bi(bi({},h),d.props):{},y=g.dataKey,x=g.name,v=g.legendType,b=g.hide;return{inactive:b,dataKey:y,type:l.iconType||v||"square",color:q0(d),value:x||y,payload:g}}),bi(bi(bi({},l),ta.getWithHeight(a,i)),{},{payload:u,item:a})};function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function R1(t){return zne(t)||Gne(t)||Bne(t)||Fne()}function Fne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bne(t,e){if(t){if(typeof t=="string")return Hg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hg(t,e)}}function Gne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zne(t){if(Array.isArray(t))return Hg(t)}function Hg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function M1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M1(Object(n),!0).forEach(function(r){ra(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ra(t,e,n){return e=Vne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vne(t){var e=Hne(t,"string");return Rl(e)=="symbol"?e:e+""}function Hne(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ln(t,e,n){return xe(t)||xe(e)?n:ft(e)?_n(t,e,n):me(e)?e(t):n}function zs(t,e,n,r){var i=Gte(t,function(s){return ln(s,e)});if(n==="number"){var o=i.filter(function(s){return Y(s)||parseFloat(s)});return o.length?[lh(o),Jr(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!xe(s)}):i;return a.map(function(s){return ft(s)||s instanceof Date?s:""})}var qne=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var c=u>0?i[u-1].coordinate:i[s-1].coordinate,d=i[u].coordinate,h=u>=s-1?i[0].coordinate:i[u+1].coordinate,g=void 0;if(Bn(d-c)!==Bn(h-d)){var y=[];if(Bn(h-d)===Bn(l[1]-l[0])){g=h;var x=d+l[1]-l[0];y[0]=Math.min(x,(x+c)/2),y[1]=Math.max(x,(x+c)/2)}else{g=c;var v=h+l[1]-l[0];y[0]=Math.min(d,(v+d)/2),y[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){a=i[u].index;break}}else{var w=Math.min(c,h),_=Math.max(c,h);if(e>(w+d)/2&&e<=(_+d)/2){a=i[u].index;break}}}else for(var T=0;T<s;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){a=r[T].index;break}return a},q0=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?et(et({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},Wne=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,u=s.length;l<u;l++)for(var c=o[s[l]].stackGroups,d=Object.keys(c),h=0,g=d.length;h<g;h++){var y=c[d[h]],x=y.items,v=y.cateAxisId,b=x.filter(function(k){return xr(k.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,_=w!==void 0?et(et({},w),b[0].props):b[0].props,T=_.barSize,S=_[v];a[S]||(a[S]=[]);var E=xe(T)?n:T;a[S].push({item:b[0],stackList:b.slice(1),barSize:xe(E)?void 0:Qi(E,r,0)})}}return a},Kne=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var u=Qi(n,i,0,!0),c,d=[];if(a[0].barSize===+a[0].barSize){var h=!1,g=i/l,y=a.reduce(function(T,S){return T+S.barSize||0},0);y+=(l-1)*u,y>=i&&(y-=(l-1)*u,u=0),y>=i&&g>0&&(h=!0,g*=.9,y=l*g);var x=(i-y)/2>>0,v={offset:x-u,size:0};c=a.reduce(function(T,S){var E={item:S.item,position:{offset:v.offset+v.size+u,size:h?g:S.barSize}},k=[].concat(R1(T),[E]);return v=k[k.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:v})}),k},d)}else{var b=Qi(r,i,0,!0);i-2*b-(l-1)*u<=0&&(u=0);var w=(i-2*b-(l-1)*u)/l;w>1&&(w>>=0);var _=s===+s?Math.min(w,s):w;c=a.reduce(function(T,S,E){var k=[].concat(R1(T),[{item:S.item,position:{offset:b+(w+u)*E+(w-_)/2,size:_}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:k[k.length-1].position})}),k},d)}return c},Jne=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),u=hI({children:o,legendWidth:l});if(u){var c=i||{},d=c.width,h=c.height,g=u.align,y=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&y==="middle")&&g!=="center"&&Y(e[g]))return et(et({},e),{},ra({},g,e[g]+(d||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&y!=="middle"&&Y(e[y]))return et(et({},e),{},ra({},y,e[y]+(h||0)))}return e},Yne=function(e,n,r){return xe(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},pI=function(e,n,r,i,o){var a=n.props.children,s=qn(a,dh).filter(function(u){return Yne(i,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=ln(c,r);if(xe(d))return u;var h=Array.isArray(d)?[lh(d),Jr(d)]:[d,d],g=l.reduce(function(y,x){var v=ln(c,x,0),b=h[0]-Math.abs(Array.isArray(v)?v[0]:v),w=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},Xne=function(e,n,r,i,o){var a=n.map(function(s){return pI(e,s,r,o,i)}).filter(function(s){return!xe(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},mI=function(e,n,r,i,o){var a=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&pI(e,l,u,i)||zs(e,u,r,o)});if(r==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)s[u[c]]||(s[u[c]]=!0,l.push(u[c]));return l},[])},gI=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},ji=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?Bn(s[0]-s[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var h=o?o.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return c.filter(function(d){return!qa(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:o?o[d]:d,index:h,offset:u}})},kp=new WeakMap,Yu=function(e,n){if(typeof n!="function")return e;kp.has(e)||kp.set(e,new WeakMap);var r=kp.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},Qne=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:El(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Ed(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Gs(),realScaleType:"point"}:o==="category"?{scale:El(),realScaleType:"band"}:{scale:Ed(),realScaleType:"linear"};if(Xi(i)){var l="scale".concat(Jf(i));return{scale:(A1[l]||Gs)(),realScaleType:A1[l]?l:"point"}}return me(i)?{scale:i}:{scale:Gs(),realScaleType:"point"}},$1=1e-4,Zne=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-$1,a=Math.max(i[0],i[1])+$1,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},ere=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},tre=function(e,n){if(!n||n.length!==2||!Y(n[0])||!Y(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Y(e[0])||e[0]<r)&&(o[0]=r),(!Y(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},nre=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=qa(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},rre=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=qa(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},ire={sign:nre,expand:yq,none:ha,silhouette:vq,wiggle:xq,positive:rre},ore=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=ire[r],a=gq().keys(i).value(function(s,l){return+ln(s,l,0)}).order(gg).offset(o);return a(e)},are=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},u=s.reduce(function(d,h){var g,y=(g=h.type)!==null&&g!==void 0&&g.defaultProps?et(et({},h.type.defaultProps),h.props):h.props,x=y.stackId,v=y.hide;if(v)return d;var b=y[r],w=d[b]||{hasStack:!1,stackGroups:{}};if(ft(x)){var _=w.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),w.hasStack=!0,w.stackGroups[x]=_}else w.stackGroups[su("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return et(et({},d),{},ra({},b,w))},l),c={};return Object.keys(u).reduce(function(d,h){var g=u[h];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,v){var b=g.stackGroups[v];return et(et({},x),{},ra({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:ore(e,b.items,o)}))},y)}return et(et({},d),{},ra({},h,g))},c)},sre=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=vne(u,o,s);return e.domain([lh(c),Jr(c)]),{niceTicks:c}}if(o&&i==="number"){var d=e.domain(),h=xne(d,o,s);return{niceTicks:h}}return null};function D1(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!xe(i[e.dataKey])){var s=td(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=ln(i,xe(a)?e.dataKey:a);return xe(l)?null:e.scale(l)}var j1=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=ln(a,n.dataKey,n.domain[s]);return xe(l)?null:n.scale(l)-o/2+i},lre=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},ure=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?et(et({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(ft(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},cre=function(e){return e.reduce(function(n,r){return[lh(r.concat([n[0]]).filter(Y)),Jr(r.concat([n[1]]).filter(Y))]},[1/0,-1/0])},yI=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(u,c){var d=cre(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},L1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,U1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qg=function(e,n,r){if(me(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Y(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(L1.test(e[0])){var o=+L1.exec(e[0])[1];i[0]=n[0]-o}else me(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Y(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(U1.test(e[1])){var a=+U1.exec(e[1])[1];i[1]=n[1]+a}else me(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Id=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=b0(n,function(d){return d.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var u=o[s],c=o[s-1];a=Math.min((u.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},F1=function(e,n,r){return!e||!e.length||Pl(e,_n(r,"type.defaultProps.domain"))?n:e},vI=function(e,n){var r=e.type.defaultProps?et(et({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return et(et({},ve(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:q0(e),value:ln(n,i),type:l,payload:n,chartType:u,hide:c})};function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function B1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B1(Object(n),!0).forEach(function(r){dre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dre(t,e,n){return e=fre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fre(t){var e=hre(t,"string");return Ml(e)=="symbol"?e:e+""}function hre(t,e){if(Ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Od=Math.PI/180,pre=function(e){return e*180/Math.PI},Et=function(e,n,r,i){return{x:e+Math.cos(-Od*i)*r,y:n+Math.sin(-Od*i)*r}},mre=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},gre=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=mre({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:s,angle:pre(u),angleInRadian:u}},yre=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},vre=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},z1=function(e,n){var r=e.x,i=e.y,o=gre({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,u=n.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var c=yre(n),d=c.startAngle,h=c.endAngle,g=s,y;if(d<=h){for(;g>h;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=h}else{for(;g>d;)g-=360;for(;g<h;)g+=360;y=g>=h&&g<=d}return y?G1(G1({},n),{},{radius:a,angle:vre(g,n)}):null};function $l(t){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(t)}var xre=["offset"];function bre(t){return Ere(t)||Sre(t)||_re(t)||wre()}function wre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _re(t,e){if(t){if(typeof t=="string")return Wg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wg(t,e)}}function Sre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ere(t){if(Array.isArray(t))return Wg(t)}function Wg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tre(t,e){if(t==null)return{};var n=kre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function kre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function V1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V1(Object(n),!0).forEach(function(r){Are(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Are(t,e,n){return e=Cre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cre(t){var e=Pre(t,"string");return $l(e)=="symbol"?e:e+""}function Pre(t,e){if($l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dl(){return Dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dl.apply(this,arguments)}var Nre=function(e){var n=e.value,r=e.formatter,i=xe(e.children)?n:e.children;return me(r)?r(i):i},Ire=function(e,n){var r=Bn(n-e),i=Math.min(Math.abs(n-e),360);return r*i},Ore=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,u=l.cx,c=l.cy,d=l.innerRadius,h=l.outerRadius,g=l.startAngle,y=l.endAngle,x=l.clockWise,v=(d+h)/2,b=Ire(g,y),w=b>=0?1:-1,_,T;i==="insideStart"?(_=g+w*a,T=x):i==="insideEnd"?(_=y-w*a,T=!x):i==="end"&&(_=y+w*a,T=x),T=b<=0?T:!T;var S=Et(u,c,v,_),E=Et(u,c,v,_+(T?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(T?0:1,`,
    `).concat(E.x,",").concat(E.y),A=xe(e.id)?su("recharts-radial-line-"):e.id;return D.createElement("text",Dl({},r,{dominantBaseline:"central",className:he("recharts-radial-bar-label",s)}),D.createElement("defs",null,D.createElement("path",{id:A,d:k})),D.createElement("textPath",{xlinkHref:"#".concat(A)},n))},Rre=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,c=o.startAngle,d=o.endAngle,h=(c+d)/2;if(i==="outside"){var g=Et(a,s,u+r,h),y=g.x,x=g.y;return{x:y,y:x,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,b=Et(a,s,v,h),w=b.x,_=b.y;return{x:w,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Mre=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,u=a.width,c=a.height,d=c>=0?1:-1,h=d*i,g=d>0?"end":"start",y=d>0?"start":"end",x=u>=0?1:-1,v=x*i,b=x>0?"end":"start",w=x>0?"start":"end";if(o==="top"){var _={x:s+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return lt(lt({},_),r?{height:Math.max(l-r.y,0),width:u}:{})}if(o==="bottom"){var T={x:s+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:y};return lt(lt({},T),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(o==="left"){var S={x:s-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"};return lt(lt({},S),r?{width:Math.max(S.x-r.x,0),height:c}:{})}if(o==="right"){var E={x:s+u+v,y:l+c/2,textAnchor:w,verticalAnchor:"middle"};return lt(lt({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:c}:{})}var k=r?{width:u,height:c}:{};return o==="insideLeft"?lt({x:s+v,y:l+c/2,textAnchor:w,verticalAnchor:"middle"},k):o==="insideRight"?lt({x:s+u-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"},k):o==="insideTop"?lt({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:y},k):o==="insideBottom"?lt({x:s+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:g},k):o==="insideTopLeft"?lt({x:s+v,y:l+h,textAnchor:w,verticalAnchor:y},k):o==="insideTopRight"?lt({x:s+u-v,y:l+h,textAnchor:b,verticalAnchor:y},k):o==="insideBottomLeft"?lt({x:s+v,y:l+c-h,textAnchor:w,verticalAnchor:g},k):o==="insideBottomRight"?lt({x:s+u-v,y:l+c-h,textAnchor:b,verticalAnchor:g},k):Ga(o)&&(Y(o.x)||Mi(o.x))&&(Y(o.y)||Mi(o.y))?lt({x:s+Qi(o.x,u),y:l+Qi(o.y,c),textAnchor:"end",verticalAnchor:"end"},k):lt({x:s+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},$re=function(e){return"cx"in e&&Y(e.cx)};function It(t){var e=t.offset,n=e===void 0?5:e,r=Tre(t,xre),i=lt({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,h=i.textBreakAll;if(!o||xe(s)&&xe(l)&&!P.isValidElement(u)&&!me(u))return null;if(P.isValidElement(u))return P.cloneElement(u,i);var g;if(me(u)){if(g=P.createElement(u,i),P.isValidElement(g))return g}else g=Nre(i);var y=$re(o),x=ve(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Ore(i,g,x);var v=y?Rre(i):Mre(i);return D.createElement(yd,Dl({className:he("recharts-label",d)},x,v,{breakAll:h}),g)}It.displayName="Label";var xI=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,h=e.y,g=e.top,y=e.left,x=e.width,v=e.height,b=e.clockWise,w=e.labelViewBox;if(w)return w;if(Y(x)&&Y(v)){if(Y(d)&&Y(h))return{x:d,y:h,width:x,height:v};if(Y(g)&&Y(y))return{x:g,y,width:x,height:v}}return Y(d)&&Y(h)?{x:d,y:h,width:0,height:0}:Y(n)&&Y(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:b}:e.viewBox?e.viewBox:{}},Dre=function(e,n){return e?e===!0?D.createElement(It,{key:"label-implicit",viewBox:n}):ft(e)?D.createElement(It,{key:"label-implicit",viewBox:n,value:e}):P.isValidElement(e)?e.type===It?P.cloneElement(e,{key:"label-implicit",viewBox:n}):D.createElement(It,{key:"label-implicit",content:e,viewBox:n}):me(e)?D.createElement(It,{key:"label-implicit",content:e,viewBox:n}):Ga(e)?D.createElement(It,Dl({viewBox:n},e,{key:"label-implicit"})):null:null},jre=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=xI(e),a=qn(i,It).map(function(l,u){return P.cloneElement(l,{viewBox:n||o,key:"label-".concat(u)})});if(!r)return a;var s=Dre(e.label,n||o);return[s].concat(bre(a))};It.parseViewBox=xI;It.renderCallByParent=jre;function Lre(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Ure=Lre;const Fre=Ue(Ure);function jl(t){"@babel/helpers - typeof";return jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jl(t)}var Bre=["valueAccessor"],Gre=["data","dataKey","clockWise","id","textBreakAll"];function zre(t){return Wre(t)||qre(t)||Hre(t)||Vre()}function Vre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hre(t,e){if(t){if(typeof t=="string")return Kg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kg(t,e)}}function qre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Wre(t){if(Array.isArray(t))return Kg(t)}function Kg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rd(){return Rd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rd.apply(this,arguments)}function H1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?H1(Object(n),!0).forEach(function(r){Kre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kre(t,e,n){return e=Jre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jre(t){var e=Yre(t,"string");return jl(e)=="symbol"?e:e+""}function Yre(t,e){if(jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function W1(t,e){if(t==null)return{};var n=Xre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Xre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Qre=function(e){return Array.isArray(e.value)?Fre(e.value):e.value};function ai(t){var e=t.valueAccessor,n=e===void 0?Qre:e,r=W1(t,Bre),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,u=W1(r,Gre);return!i||!i.length?null:D.createElement(Je,{className:"recharts-label-list"},i.map(function(c,d){var h=xe(o)?n(c,d):ln(c&&c.payload,o),g=xe(s)?{}:{id:"".concat(s,"-").concat(d)};return D.createElement(It,Rd({},ve(c,!0),u,g,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:It.parseViewBox(xe(a)?c:q1(q1({},c),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}ai.displayName="LabelList";function Zre(t,e){return t?t===!0?D.createElement(ai,{key:"labelList-implicit",data:e}):D.isValidElement(t)||me(t)?D.createElement(ai,{key:"labelList-implicit",data:e,content:t}):Ga(t)?D.createElement(ai,Rd({data:e},t,{key:"labelList-implicit"})):null:null}function eie(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=qn(r,ai).map(function(a,s){return P.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=Zre(t.label,e);return[o].concat(zre(i))}ai.renderCallByParent=eie;function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}function Jg(){return Jg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jg.apply(this,arguments)}function K1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function J1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K1(Object(n),!0).forEach(function(r){tie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tie(t,e,n){return e=nie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nie(t){var e=rie(t,"string");return Ll(e)=="symbol"?e:e+""}function rie(t,e){if(Ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iie=function(e,n){var r=Bn(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Xu=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(s?1:-1)+i,d=Math.asin(l/c)/Od,h=u?o:o+a*d,g=Et(n,r,c,h),y=Et(n,r,i,h),x=u?o-a*d:o,v=Et(n,r,c*Math.cos(d*Od),x);return{center:g,circleTangency:y,lineTangency:v,theta:d}},bI=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=iie(a,s),u=a+l,c=Et(n,r,o,a),d=Et(n,r,o,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=Et(n,r,i,a),y=Et(n,r,i,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},oie=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=Bn(c-u),h=Xu({cx:n,cy:r,radius:o,angle:u,sign:d,cornerRadius:a,cornerIsExternal:l}),g=h.circleTangency,y=h.lineTangency,x=h.theta,v=Xu({cx:n,cy:r,radius:o,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:l}),b=v.circleTangency,w=v.lineTangency,_=v.theta,T=l?Math.abs(u-c):Math.abs(u-c)-x-_;if(T<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):bI({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:c});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var E=Xu({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),k=E.circleTangency,A=E.lineTangency,C=E.theta,R=Xu({cx:n,cy:r,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),I=R.circleTangency,O=R.lineTangency,j=R.theta,M=l?Math.abs(u-c):Math.abs(u-c)-C-j;if(M<0&&a===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(d>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},aie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},wI=function(e){var n=J1(J1({},aie),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,h=n.className;if(a<o||c===d)return null;var g=he("recharts-sector",h),y=a-o,x=Qi(s,y,0,!0),v;return x>0&&Math.abs(c-d)<360?v=oie({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(x,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):v=bI({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:d}),D.createElement("path",Jg({},ve(n,!0),{className:g,d:v,role:"img"}))};function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Yg(){return Yg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yg.apply(this,arguments)}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(r){sie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sie(t,e,n){return e=lie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lie(t){var e=uie(t,"string");return Ul(e)=="symbol"?e:e+""}function uie(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q1={curveBasisClosed:oq,curveBasisOpen:aq,curveBasis:iq,curveBumpX:VH,curveBumpY:HH,curveLinearClosed:sq,curveLinear:Xf,curveMonotoneX:lq,curveMonotoneY:uq,curveNatural:cq,curveStep:dq,curveStepAfter:hq,curveStepBefore:fq},Qu=function(e){return e.x===+e.x&&e.y===+e.y},vs=function(e){return e.x},xs=function(e){return e.y},cie=function(e,n){if(me(e))return e;var r="curve".concat(Jf(e));return(r==="curveMonotone"||r==="curveBump")&&n?Q1["".concat(r).concat(n==="vertical"?"Y":"X")]:Q1[r]||Xf},die=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=cie(r,s),d=u?o.filter(function(x){return Qu(x)}):o,h;if(Array.isArray(a)){var g=u?a.filter(function(x){return Qu(x)}):a,y=d.map(function(x,v){return X1(X1({},x),{},{base:g[v]})});return s==="vertical"?h=Gu().y(xs).x1(vs).x0(function(x){return x.base.x}):h=Gu().x(vs).y1(xs).y0(function(x){return x.base.y}),h.defined(Qu).curve(c),h(y)}return s==="vertical"&&Y(a)?h=Gu().y(xs).x1(vs).x0(a):Y(a)?h=Gu().x(vs).y1(xs).y0(a):h=SP().x(vs).y(xs),h.defined(Qu).curve(c),h(d)},Vs=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?die(e):i;return P.createElement("path",Yg({},ve(e,!1),nd(e),{className:he("recharts-curve",n),d:a,ref:o}))},_I={exports:{}},fie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hie=fie,pie=hie;function SI(){}function EI(){}EI.resetWarningCache=SI;var mie=function(){function t(r,i,o,a,s,l){if(l!==pie){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:EI,resetWarningCache:SI};return n.PropTypes=n,n};_I.exports=mie();var gie=_I.exports;const Ae=Ue(gie),{getOwnPropertyNames:yie,getOwnPropertySymbols:vie}=Object,{hasOwnProperty:xie}=Object.prototype;function Ap(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function Zu(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);const l=t(n,r,i);return o.delete(n),o.delete(r),l}}function bie(t){return t!=null?t[Symbol.toStringTag]:void 0}function Z1(t){return yie(t).concat(vie(t))}const wie=Object.hasOwn||((t,e)=>xie.call(t,e));function lo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const _ie="__v",Sie="__o",Eie="_owner",{getOwnPropertyDescriptor:eE,keys:tE}=Object;function Tie(t,e){return t.byteLength===e.byteLength&&Md(new Uint8Array(t),new Uint8Array(e))}function kie(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function Aie(t,e){return t.byteLength===e.byteLength&&Md(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Cie(t,e){return lo(t.getTime(),e.getTime())}function Pie(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Nie(t,e){return t===e}function nE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let a,s,l=0;for(;(a=o.next())&&!a.done;){const u=e.entries();let c=!1,d=0;for(;(s=u.next())&&!s.done;){if(i[d]){d++;continue}const h=a.value,g=s.value;if(n.equals(h[0],g[0],l,d,t,e,n)&&n.equals(h[1],g[1],h[0],g[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const Iie=lo;function Oie(t,e,n){const r=tE(t);let i=r.length;if(tE(e).length!==i)return!1;for(;i-- >0;)if(!TI(t,e,n,r[i]))return!1;return!0}function bs(t,e,n){const r=Z1(t);let i=r.length;if(Z1(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=r[i],!TI(t,e,n,o)||(a=eE(t,o),s=eE(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function Rie(t,e){return lo(t.valueOf(),e.valueOf())}function Mie(t,e){return t.source===e.source&&t.flags===e.flags}function rE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let a,s;for(;(a=o.next())&&!a.done;){const l=e.values();let u=!1,c=0;for(;(s=l.next())&&!s.done;){if(!i[c]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function Md(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function $ie(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function TI(t,e,n,r){return(r===Eie||r===Sie||r===_ie)&&(t.$$typeof||e.$$typeof)?!0:wie(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const Die="[object ArrayBuffer]",jie="[object Arguments]",Lie="[object Boolean]",Uie="[object DataView]",Fie="[object Date]",Bie="[object Error]",Gie="[object Map]",zie="[object Number]",Vie="[object Object]",Hie="[object RegExp]",qie="[object Set]",Wie="[object String]",Kie={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Jie="[object URL]",Yie=Object.prototype.toString;function Xie({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:g,unknownTagComparators:y}){return function(v,b,w){if(v===b)return!0;if(v==null||b==null)return!1;const _=typeof v;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(v,b,w):_==="function"?o(v,b,w):!1;const T=v.constructor;if(T!==b.constructor)return!1;if(T===Object)return l(v,b,w);if(Array.isArray(v))return e(v,b,w);if(T===Date)return r(v,b,w);if(T===RegExp)return c(v,b,w);if(T===Map)return a(v,b,w);if(T===Set)return d(v,b,w);const S=Yie.call(v);if(S===Fie)return r(v,b,w);if(S===Hie)return c(v,b,w);if(S===Gie)return a(v,b,w);if(S===qie)return d(v,b,w);if(S===Vie)return typeof v.then!="function"&&typeof b.then!="function"&&l(v,b,w);if(S===Jie)return g(v,b,w);if(S===Bie)return i(v,b,w);if(S===jie)return l(v,b,w);if(Kie[S])return h(v,b,w);if(S===Die)return t(v,b,w);if(S===Uie)return n(v,b,w);if(S===Lie||S===zie||S===Wie)return u(v,b,w);if(y){let E=y[S];if(!E){const k=bie(v);k&&(E=y[k])}if(E)return E(v,b,w)}return!1}}function Qie({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:Tie,areArraysEqual:n?bs:kie,areDataViewsEqual:Aie,areDatesEqual:Cie,areErrorsEqual:Pie,areFunctionsEqual:Nie,areMapsEqual:n?Ap(nE,bs):nE,areNumbersEqual:Iie,areObjectsEqual:n?bs:Oie,arePrimitiveWrappersEqual:Rie,areRegExpsEqual:Mie,areSetsEqual:n?Ap(rE,bs):rE,areTypedArraysEqual:n?Ap(Md,bs):Md,areUrlsEqual:$ie,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Zu(r.areArraysEqual),o=Zu(r.areMapsEqual),a=Zu(r.areObjectsEqual),s=Zu(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return r}function Zie(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function eoe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(s,l){const{cache:u=t?new WeakMap:void 0,meta:c}=n();return e(s,l,{cache:u,equals:r,meta:c,strict:i})};if(t)return function(s,l){return e(s,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(s,l){return e(s,l,o)}}const toe=gi();gi({strict:!0});gi({circular:!0});gi({circular:!0,strict:!0});gi({createInternalComparator:()=>lo});gi({strict:!0,createInternalComparator:()=>lo});gi({circular:!0,createInternalComparator:()=>lo});gi({circular:!0,createInternalComparator:()=>lo,strict:!0});function gi(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=Qie(t),a=Xie(o),s=n?n(a):Zie(a);return eoe({circular:e,comparator:a,createState:r,equals:s,strict:i})}function noe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function iE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):noe(i)};requestAnimationFrame(r)}function Xg(t){"@babel/helpers - typeof";return Xg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(t)}function roe(t){return soe(t)||aoe(t)||ooe(t)||ioe()}function ioe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ooe(t,e){if(t){if(typeof t=="string")return oE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oE(t,e)}}function oE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function soe(t){if(Array.isArray(t))return t}function loe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=roe(a),l=s[0],u=s.slice(1);if(typeof l=="number"){iE(i.bind(null,u),l);return}i(l),iE(i.bind(null,u));return}Xg(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function aE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aE(Object(n),!0).forEach(function(r){kI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kI(t,e,n){return e=uoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uoe(t){var e=coe(t,"string");return Fl(e)==="symbol"?e:String(e)}function coe(t,e){if(Fl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var doe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},foe=function(e){return e},hoe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Hs=function(e,n){return Object.keys(n).reduce(function(r,i){return sE(sE({},r),{},kI({},i,e(i,n[i])))},{})},lE=function(e,n,r){return e.map(function(i){return"".concat(hoe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function poe(t,e){return yoe(t)||goe(t,e)||AI(t,e)||moe()}function moe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function goe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function yoe(t){if(Array.isArray(t))return t}function voe(t){return woe(t)||boe(t)||AI(t)||xoe()}function xoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AI(t,e){if(t){if(typeof t=="string")return Qg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qg(t,e)}}function boe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function woe(t){if(Array.isArray(t))return Qg(t)}function Qg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $d=1e-4,CI=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},PI=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},uE=function(e,n){return function(r){var i=CI(e,n);return PI(i,r)}},_oe=function(e,n){return function(r){var i=CI(e,n),o=[].concat(voe(i.map(function(a,s){return a*s}).slice(1)),[0]);return PI(o,r)}},cE=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=poe(u,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var d=uE(i,a),h=uE(o,s),g=_oe(i,a),y=function(b){return b>1?1:b<0?0:b},x=function(b){for(var w=b>1?1:b,_=w,T=0;T<8;++T){var S=d(_)-w,E=g(_);if(Math.abs(S-w)<$d||E<$d)return h(_);_=y(_-S/E)}return h(_)};return x.isStepper=!1,x},Soe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(c,d,h){var g=-(c-d)*r,y=h*o,x=h+(g-y)*s/1e3,v=h*s/1e3+c;return Math.abs(v-d)<$d&&Math.abs(x)<$d?[d,0]:[v,x]};return l.isStepper=!0,l.dt=s,l},Eoe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return cE(i);case"spring":return Soe();default:if(i.split("(")[0]==="cubic-bezier")return cE(i)}return typeof i=="function"?i:null};function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function dE(t){return Aoe(t)||koe(t)||NI(t)||Toe()}function Toe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Aoe(t){if(Array.isArray(t))return ey(t)}function fE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _t(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(n),!0).forEach(function(r){Zg(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zg(t,e,n){return e=Coe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Coe(t){var e=Poe(t,"string");return Bl(e)==="symbol"?e:String(e)}function Poe(t,e){if(Bl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Noe(t,e){return Roe(t)||Ooe(t,e)||NI(t,e)||Ioe()}function Ioe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NI(t,e){if(t){if(typeof t=="string")return ey(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ey(t,e)}}function ey(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ooe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Roe(t){if(Array.isArray(t))return t}var Dd=function(e,n,r){return e+(n-e)*r},ty=function(e){var n=e.from,r=e.to;return n!==r},Moe=function t(e,n,r){var i=Hs(function(o,a){if(ty(a)){var s=e(a.from,a.to,a.velocity),l=Noe(s,2),u=l[0],c=l[1];return _t(_t({},a),{},{from:u,velocity:c})}return a},n);return r<1?Hs(function(o,a){return ty(a)?_t(_t({},a),{},{velocity:Dd(a.velocity,i[o].velocity,r),from:Dd(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const $oe=function(t,e,n,r,i){var o=doe(t,e),a=o.reduce(function(v,b){return _t(_t({},v),{},Zg({},b,[t[b],e[b]]))},{}),s=o.reduce(function(v,b){return _t(_t({},v),{},Zg({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,u,c,d=function(){return null},h=function(){return Hs(function(b,w){return w.from},s)},g=function(){return!Object.values(s).filter(ty).length},y=function(b){u||(u=b);var w=b-u,_=w/n.dt;s=Moe(n,s,_),i(_t(_t(_t({},t),e),h())),u=b,g()||(l=requestAnimationFrame(d))},x=function(b){c||(c=b);var w=(b-c)/r,_=Hs(function(S,E){return Dd.apply(void 0,dE(E).concat([n(w)]))},a);if(i(_t(_t(_t({},t),e),_)),w<1)l=requestAnimationFrame(d);else{var T=Hs(function(S,E){return Dd.apply(void 0,dE(E).concat([n(1)]))},a);i(_t(_t(_t({},t),e),T))}};return d=n.isStepper?y:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function _a(t){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(t)}var Doe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function joe(t,e){if(t==null)return{};var n=Loe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Loe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Cp(t){return Goe(t)||Boe(t)||Foe(t)||Uoe()}function Uoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Foe(t,e){if(t){if(typeof t=="string")return ny(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ny(t,e)}}function Boe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Goe(t){if(Array.isArray(t))return ny(t)}function ny(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){Cs(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cs(t,e,n){return e=II(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Voe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,II(r.key),r)}}function Hoe(t,e,n){return e&&Voe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function II(t){var e=qoe(t,"string");return _a(e)==="symbol"?e:String(e)}function qoe(t,e){if(_a(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_a(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Woe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ry(t,e)}function ry(t,e){return ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ry(t,e)}function Koe(t){var e=Joe();return function(){var r=jd(t),i;if(e){var o=jd(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return iy(this,i)}}function iy(t,e){if(e&&(_a(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oy(t)}function oy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Joe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jd(t){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jd(t)}var Nr=function(t){Woe(n,t);var e=Koe(n);function n(r,i){var o;zoe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,u=a.from,c=a.to,d=a.steps,h=a.children,g=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(oy(o)),o.changeStyle=o.changeStyle.bind(oy(o)),!s||g<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:c}),iy(o);if(d&&d.length)o.state={style:d[0].style};else if(u){if(typeof h=="function")return o.state={style:u},iy(o);o.state={style:l?Cs({},l,u):u}}else o.state={style:{}};return o}return Hoe(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,c=o.to,d=o.from,h=this.state.style;if(s){if(!a){var g={style:l?Cs({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(g);return}if(!(toe(i.to,c)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=y||u?d:i.to;if(this.state&&h){var v={style:l?Cs({},l,x):x};(l&&h[l]!==x||!l&&h!==x)&&this.setState(v)}this.runAnimation(On(On({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,g=$oe(a,s,Eoe(u),l,this.changeStyle),y=function(){o.stopJSAnimation=g()};this.manager.start([h,c,y,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,u=a[0],c=u.style,d=u.duration,h=d===void 0?0:d,g=function(x,v,b){if(b===0)return x;var w=v.duration,_=v.easing,T=_===void 0?"ease":_,S=v.style,E=v.properties,k=v.onAnimationEnd,A=b>0?a[b-1]:v,C=E||Object.keys(S);if(typeof T=="function"||T==="spring")return[].concat(Cp(x),[o.runJSAnimation.bind(o,{from:A.style,to:S,duration:w,easing:T}),w]);var R=lE(C,w,T),I=On(On(On({},A.style),S),{},{transition:R});return[].concat(Cp(x),[I,w,k]).filter(foe)};return this.manager.start([l].concat(Cp(a.reduce(g,[c,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=loe());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var x=s?Cs({},s,l):l,v=lE(Object.keys(x),a,u);y.start([c,o,On(On({},x),{},{transition:v}),a,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=joe(i,Doe),u=P.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||u===0||a<=0)return o;var d=function(g){var y=g.props,x=y.style,v=x===void 0?{}:x,b=y.className,w=P.cloneElement(g,On(On({},l),{},{style:On(On({},v),c),className:b}));return w};return u===1?d(P.Children.only(o)):D.createElement("div",null,P.Children.map(o,function(h){return d(h)}))}}]),n}(P.PureComponent);Nr.displayName="Animate";Nr.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Nr.propTypes={from:Ae.oneOfType([Ae.object,Ae.string]),to:Ae.oneOfType([Ae.object,Ae.string]),attributeName:Ae.string,duration:Ae.number,begin:Ae.number,easing:Ae.oneOfType([Ae.string,Ae.func]),steps:Ae.arrayOf(Ae.shape({duration:Ae.number.isRequired,style:Ae.object.isRequired,easing:Ae.oneOfType([Ae.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ae.func]),properties:Ae.arrayOf("string"),onAnimationEnd:Ae.func})),children:Ae.oneOfType([Ae.node,Ae.func]),isActive:Ae.bool,canBegin:Ae.bool,onAnimationEnd:Ae.func,shouldReAnimate:Ae.bool,onAnimationStart:Ae.func,onAnimationReStart:Ae.func};function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}function Ld(){return Ld=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ld.apply(this,arguments)}function Yoe(t,e){return eae(t)||Zoe(t,e)||Qoe(t,e)||Xoe()}function Xoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qoe(t,e){if(t){if(typeof t=="string")return pE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pE(t,e)}}function pE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zoe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function eae(t){if(Array.isArray(t))return t}function mE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mE(Object(n),!0).forEach(function(r){tae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tae(t,e,n){return e=nae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nae(t){var e=rae(t,"string");return Gl(e)=="symbol"?e:e+""}function rae(t,e){if(Gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yE=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var d=[0,0,0,0],h=0,g=4;h<g;h++)d[h]=o[h]>a?a:o[h];c="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+s*d[1])),c+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),c+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-s*d[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var y=Math.min(a,o);c="M ".concat(e,",").concat(n+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+s*y,`
            L `).concat(e+r,",").concat(n+i-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-s*y," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},iae=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),c=Math.max(o,o+s),d=Math.min(a,a+l),h=Math.max(a,a+l);return r>=u&&r<=c&&i>=d&&i<=h}return!1},oae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W0=function(e){var n=gE(gE({},oae),e),r=P.useRef(),i=P.useState(-1),o=Yoe(i,2),a=o[0],s=o[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,h=n.radius,g=n.className,y=n.animationEasing,x=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var _=he("recharts-rectangle",g);return w?D.createElement(Nr,{canBegin:a>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:x,animationEasing:y,isActive:w},function(T){var S=T.width,E=T.height,k=T.x,A=T.y;return D.createElement(Nr,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,isActive:b,easing:y},D.createElement("path",Ld({},ve(n,!0),{className:_,d:yE(k,A,S,E,h),ref:r})))}):D.createElement("path",Ld({},ve(n,!0),{className:_,d:yE(l,u,c,d,h)}))};function ay(){return ay=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ay.apply(this,arguments)}var K0=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=he("recharts-dot",o);return n===+n&&r===+r&&i===+i?P.createElement("circle",ay({},ve(e,!1),nd(e),{className:a,cx:n,cy:r,r:i})):null};function zl(t){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(t)}var aae=["x","y","top","left","width","height","className"];function sy(){return sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sy.apply(this,arguments)}function vE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vE(Object(n),!0).forEach(function(r){lae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lae(t,e,n){return e=uae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uae(t){var e=cae(t,"string");return zl(e)=="symbol"?e:e+""}function cae(t,e){if(zl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dae(t,e){if(t==null)return{};var n=fae(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function fae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var hae=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},pae=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,h=e.height,g=h===void 0?0:h,y=e.className,x=dae(e,aae),v=sae({x:r,y:o,top:s,left:u,width:d,height:g},x);return!Y(r)||!Y(o)||!Y(d)||!Y(g)||!Y(s)||!Y(u)?null:D.createElement("path",sy({},ve(v,!0),{className:he("recharts-cross",y),d:hae(r,o,d,g,s,u)}))},mae=WP,gae=mae(Object.getPrototypeOf,Object),yae=gae,vae=$r,xae=yae,bae=Dr,wae="[object Object]",_ae=Function.prototype,Sae=Object.prototype,OI=_ae.toString,Eae=Sae.hasOwnProperty,Tae=OI.call(Object);function kae(t){if(!bae(t)||vae(t)!=wae)return!1;var e=xae(t);if(e===null)return!0;var n=Eae.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&OI.call(n)==Tae}var Aae=kae;const Cae=Ue(Aae);var Pae=$r,Nae=Dr,Iae="[object Boolean]";function Oae(t){return t===!0||t===!1||Nae(t)&&Pae(t)==Iae}var Rae=Oae;const Mae=Ue(Rae);function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ud.apply(this,arguments)}function $ae(t,e){return Uae(t)||Lae(t,e)||jae(t,e)||Dae()}function Dae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jae(t,e){if(t){if(typeof t=="string")return xE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xE(t,e)}}function xE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Uae(t){if(Array.isArray(t))return t}function bE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bE(Object(n),!0).forEach(function(r){Fae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fae(t,e,n){return e=Bae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bae(t){var e=Gae(t,"string");return Vl(e)=="symbol"?e:e+""}function Gae(t,e){if(Vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _E=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},zae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vae=function(e){var n=wE(wE({},zae),e),r=P.useRef(),i=P.useState(-1),o=$ae(i,2),a=o[0],s=o[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,h=n.height,g=n.className,y=n.animationEasing,x=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||h!==+h||c===0&&d===0||h===0)return null;var w=he("recharts-trapezoid",g);return b?D.createElement(Nr,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:h,x:l,y:u},duration:x,animationEasing:y,isActive:b},function(_){var T=_.upperWidth,S=_.lowerWidth,E=_.height,k=_.x,A=_.y;return D.createElement(Nr,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,easing:y},D.createElement("path",Ud({},ve(n,!0),{className:w,d:_E(k,A,T,S,E),ref:r})))}):D.createElement("g",null,D.createElement("path",Ud({},ve(n,!0),{className:w,d:_E(l,u,c,d,h)})))},Hae=["option","shapeType","propTransformer","activeClassName","isActive"];function Hl(t){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hl(t)}function qae(t,e){if(t==null)return{};var n=Wae(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Wae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function SE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SE(Object(n),!0).forEach(function(r){Kae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kae(t,e,n){return e=Jae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jae(t){var e=Yae(t,"string");return Hl(e)=="symbol"?e:e+""}function Yae(t,e){if(Hl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xae(t,e){return Fd(Fd({},e),t)}function Qae(t,e){return t==="symbols"}function EE(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return D.createElement(W0,n);case"trapezoid":return D.createElement(Vae,n);case"sector":return D.createElement(wI,n);case"symbols":if(Qae(e))return D.createElement(d0,n);break;default:return null}}function Zae(t){return P.isValidElement(t)?t.props:t}function ese(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Xae:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=qae(t,Hae),u;if(P.isValidElement(e))u=P.cloneElement(e,Fd(Fd({},l),Zae(e)));else if(me(e))u=e(l);else if(Cae(e)&&!Mae(e)){var c=i(e,l);u=D.createElement(EE,{shapeType:n,elementProps:c})}else{var d=l;u=D.createElement(EE,{shapeType:n,elementProps:d})}return s?D.createElement(Je,{className:a},u):u}function fh(t,e){return e!=null&&"trapezoids"in t.props}function hh(t,e){return e!=null&&"sectors"in t.props}function ql(t,e){return e!=null&&"points"in t.props}function tse(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function nse(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function rse(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function ise(t,e){var n;return fh(t,e)?n=tse:hh(t,e)?n=nse:ql(t,e)&&(n=rse),n}function ose(t,e){var n;return fh(t,e)?n="trapezoids":hh(t,e)?n="sectors":ql(t,e)&&(n="points"),n}function ase(t,e){if(fh(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(hh(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return ql(t,e)?e.payload:{}}function sse(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=ose(n,e),o=ase(n,e),a=r.filter(function(l,u){var c=Pl(o,l),d=n.props[i].filter(function(y){var x=ise(n,e);return x(y,e)}),h=n.props[i].indexOf(d[d.length-1]),g=u===h;return c&&g}),s=r.indexOf(a[a.length-1]);return s}var lse=Math.ceil,use=Math.max;function cse(t,e,n,r){for(var i=-1,o=use(lse((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var dse=cse,fse=dN,TE=1/0,hse=17976931348623157e292;function pse(t){if(!t)return t===0?t:0;if(t=fse(t),t===TE||t===-TE){var e=t<0?-1:1;return e*hse}return t===t?t:0}var mse=pse,gse=dse,yse=th,Pp=mse;function vse(t){return function(e,n,r){return r&&typeof r!="number"&&yse(e,n,r)&&(n=r=void 0),e=Pp(e),n===void 0?(n=e,e=0):n=Pp(n),r=r===void 0?e<n?1:-1:Pp(r),gse(e,n,r,t)}}var xse=vse,bse=xse,wse=bse(),_se=wse;const Bd=Ue(_se);function Wl(t){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(t)}function kE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(n),!0).forEach(function(r){RI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RI(t,e,n){return e=Sse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sse(t){var e=Ese(t,"string");return Wl(e)=="symbol"?e:e+""}function Ese(t,e){if(Wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tse=["Webkit","Moz","O","ms"],kse=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=Tse.reduce(function(o,a){return AE(AE({},o),{},RI({},a+r,n))},{});return i[e]=n,i};function Sa(t){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(t)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}function CE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CE(Object(n),!0).forEach(function(r){Qt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ase(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$I(r.key),r)}}function Cse(t,e,n){return e&&PE(t.prototype,e),n&&PE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Pse(t,e,n){return e=zd(e),Nse(t,MI()?Reflect.construct(e,n||[],zd(t).constructor):e.apply(t,n))}function Nse(t,e){if(e&&(Sa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ise(t)}function Ise(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(MI=function(){return!!t})()}function zd(t){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zd(t)}function Ose(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ly(t,e)}function ly(t,e){return ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ly(t,e)}function Qt(t,e,n){return e=$I(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $I(t){var e=Rse(t,"string");return Sa(e)=="symbol"?e:e+""}function Rse(t,e){if(Sa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Mse=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Gs().domain(Bd(0,l)).range([o,o+a-s]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},NE=function(e){return e.changedTouches&&!!e.changedTouches.length},Ea=function(t){function e(n){var r;return Ase(this,e),r=Pse(this,e,[n]),Qt(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),Qt(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),Qt(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),Qt(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Qt(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Qt(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Qt(r,"handleSlideDragStart",function(i){var o=NE(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Ose(e,t),Cse(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,c=u.length-1,d=Math.min(i,o),h=Math.max(i,o),g=e.getIndexInRange(a,d),y=e.getIndexInRange(a,h);return{startIndex:g-g%l,endIndex:y===c?c:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=ln(o[r],s,r);return me(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,h=l.startIndex,g=l.endIndex,y=l.onChange,x=r.pageX-o;x>0?x=Math.min(x,u+c-d-s,u+c-d-a):x<0&&(x=Math.max(x,u-a,u-s));var v=this.getIndex({startX:a+x,endX:s+x});(v.startIndex!==h||v.endIndex!==g)&&y&&y(v),this.setState({startX:a+x,endX:s+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=NE(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[a],c=this.props,d=c.x,h=c.width,g=c.travellerWidth,y=c.onChange,x=c.gap,v=c.data,b={startX:this.state.startX,endX:this.state.endX},w=r.pageX-o;w>0?w=Math.min(w,d+h-g-u):w<0&&(w=Math.max(w,d-u)),b[a]=u+w;var _=this.getIndex(b),T=_.startIndex,S=_.endIndex,E=function(){var A=v.length-1;return a==="startX"&&(s>l?T%x===0:S%x===0)||s<l&&S===A||a==="endX"&&(s>l?S%x===0:T%x===0)||s>l&&S===A};this.setState(Qt(Qt({},a,u+w),"brushMoveStartX",r.pageX),function(){y&&E()&&y(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,u=a.endX,c=this.state[i],d=s.indexOf(c);if(d!==-1){var h=d+r;if(!(h===-1||h>=s.length)){var g=s[h];i==="startX"&&g>=u||i==="endX"&&g<=l||this.setState(Qt({},i,g),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,u=r.stroke;return D.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,u=r.children,c=r.padding,d=P.Children.only(u);return d?D.cloneElement(d,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,h=l.traveller,g=l.ariaLabel,y=l.data,x=l.startIndex,v=l.endIndex,b=Math.max(r,this.props.x),w=Np(Np({},ve(this.props,!1)),{},{x:b,y:u,width:c,height:d}),_=g||"Min value: ".concat((o=y[x])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=y[v])===null||a===void 0?void 0:a.name);return D.createElement(Je,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,u=o.travellerWidth,c=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return D.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:a,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,h=c.endX,g=5,y={pointerEvents:"none",fill:u};return D.createElement(Je,{className:"recharts-brush-texts"},D.createElement(yd,Gd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-g,y:a+s/2},y),this.getTextOfTick(i)),D.createElement(yd,Gd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+g,y:a+s/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,h=this.state,g=h.startX,y=h.endX,x=h.isTextActive,v=h.isSlideMoving,b=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!Y(s)||!Y(l)||!Y(u)||!Y(c)||u<=0||c<=0)return null;var _=he("recharts-brush",o),T=D.Children.count(a)===1,S=kse("userSelect","none");return D.createElement(Je,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(x||v||b||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,u=Math.floor(o+s/2)-1;return D.createElement(D.Fragment,null,D.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),D.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),D.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return D.isValidElement(r)?o=D.cloneElement(r,i):me(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return Np({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a},o&&o.length?Mse({data:o,width:a,x:s,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(P.PureComponent);Qt(Ea,"displayName","Brush");Qt(Ea,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var $se=x0;function Dse(t,e){var n;return $se(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var jse=Dse,Lse=UP,Use=Ya,Fse=jse,Bse=Yt,Gse=th;function zse(t,e,n){var r=Bse(t)?Lse:Fse;return n&&Gse(t,e,n)&&(e=void 0),r(t,Use(e))}var Vse=zse;const Hse=Ue(Vse);var or=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},IE=aN;function qse(t,e,n){e=="__proto__"&&IE?IE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var Wse=qse,Kse=Wse,Jse=iN,Yse=Ya;function Xse(t,e){var n={};return e=Yse(e),Jse(t,function(r,i,o){Kse(n,i,e(r,i,o))}),n}var Qse=Xse;const Zse=Ue(Qse);function ele(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var tle=ele,nle=x0;function rle(t,e){var n=!0;return nle(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var ile=rle,ole=tle,ale=ile,sle=Ya,lle=Yt,ule=th;function cle(t,e,n){var r=lle(t)?ole:ale;return n&&ule(t,e,n)&&(e=void 0),r(t,sle(e))}var dle=cle;const fle=Ue(dle);var hle=["x","y"];function Kl(t){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(t)}function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(this,arguments)}function OE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OE(Object(n),!0).forEach(function(r){ple(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ple(t,e,n){return e=mle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mle(t){var e=gle(t,"string");return Kl(e)=="symbol"?e:e+""}function gle(t,e){if(Kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yle(t,e){if(t==null)return{};var n=vle(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xle(t,e){var n=t.x,r=t.y,i=yle(t,hle),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),d="".concat(e.width||i.width),h=parseInt(d,10);return ws(ws(ws(ws(ws({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function RE(t){return D.createElement(ese,uy({shapeType:"rectangle",propTransformer:xle,activeClassName:"recharts-active-bar"},t))}var ble=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=Y(r)||PV(r);return o?e(r,i):(o||eo(),n)}},wle=["value","background"],DI;function Ta(t){"@babel/helpers - typeof";return Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ta(t)}function _le(t,e){if(t==null)return{};var n=Sle(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vd(){return Vd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vd.apply(this,arguments)}function ME(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ME(Object(n),!0).forEach(function(r){Yr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ele(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,LI(r.key),r)}}function Tle(t,e,n){return e&&$E(t.prototype,e),n&&$E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function kle(t,e,n){return e=Hd(e),Ale(t,jI()?Reflect.construct(e,n||[],Hd(t).constructor):e.apply(t,n))}function Ale(t,e){if(e&&(Ta(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cle(t)}function Cle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jI=function(){return!!t})()}function Hd(t){return Hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hd(t)}function Ple(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cy(t,e)}function cy(t,e){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},cy(t,e)}function Yr(t,e,n){return e=LI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function LI(t){var e=Nle(t,"string");return Ta(e)=="symbol"?e:e+""}function Nle(t,e){if(Ta(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ta(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fu=function(t){function e(){var n;Ele(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=kle(this,e,[].concat(i)),Yr(n,"state",{isAnimationFinished:!1}),Yr(n,"id",su("recharts-bar-")),Yr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Yr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Ple(e,t),Tle(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,u=o.activeBar,c=ve(this.props,!1);return r&&r.map(function(d,h){var g=h===l,y=g?u:a,x=nt(nt(nt({},c),d),{},{isActive:g,option:y,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return D.createElement(Je,Vd({className:"recharts-bar-rectangle"},rd(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),D.createElement(RE,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,d=i.animationId,h=this.state.prevData;return D.createElement(Nr,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,x=o.map(function(v,b){var w=h&&h[b];if(w){var _=yn(w.x,v.x),T=yn(w.y,v.y),S=yn(w.width,v.width),E=yn(w.height,v.height);return nt(nt({},v),{},{x:_(y),y:T(y),width:S(y),height:E(y)})}if(a==="horizontal"){var k=yn(0,v.height),A=k(y);return nt(nt({},v),{},{y:v.y+v.height-A,height:A})}var C=yn(0,v.width),R=C(y);return nt(nt({},v),{},{width:R})});return D.createElement(Je,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Pl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=ve(this.props.background,!1);return o.map(function(u,c){u.value;var d=u.background,h=_le(u,wle);if(!d)return null;var g=nt(nt(nt(nt(nt({},h),{},{fill:"#eee"},d),l),rd(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,className:"recharts-bar-background-rectangle"});return D.createElement(RE,Vd({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,u=o.layout,c=o.children,d=qn(c,dh);if(!d)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,g=function(v,b){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:ln(v,b)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return D.createElement(Je,y,d.map(function(x){return D.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,h=r.height,g=r.isAnimationActive,y=r.background,x=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=he("recharts-bar",a),w=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,T=w||_,S=xe(x)?this.id:x;return D.createElement(Je,{className:b},w||_?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(S)},D.createElement("rect",{x:w?u:u-d/2,y:_?c:c-h/2,width:w?d:d*2,height:_?h:h*2}))):null,D.createElement(Je,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,S),(!g||v)&&ai.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(P.PureComponent);DI=fu;Yr(fu,"displayName","Bar");Yr(fu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Xa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Yr(fu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,g=ere(r,n);if(!g)return null;var y=e.layout,x=n.type.defaultProps,v=x!==void 0?nt(nt({},x),n.props):n.props,b=v.dataKey,w=v.children,_=v.minPointSize,T=y==="horizontal"?a:o,S=u?T.scale.domain():null,E=lre({numericAxis:T}),k=qn(w,hN),A=d.map(function(C,R){var I,O,j,M,U,L;u?I=tre(u[c+R],S):(I=ln(C,b),Array.isArray(I)||(I=[E,I]));var B=ble(_,DI.defaultProps.minPointSize)(I[1],R);if(y==="horizontal"){var N,$=[a.scale(I[0]),a.scale(I[1])],F=$[0],V=$[1];O=j1({axis:o,ticks:s,bandSize:i,offset:g.offset,entry:C,index:R}),j=(N=V??F)!==null&&N!==void 0?N:void 0,M=g.size;var q=F-V;if(U=Number.isNaN(q)?0:q,L={x:O,y:a.y,width:M,height:a.height},Math.abs(B)>0&&Math.abs(U)<Math.abs(B)){var te=Bn(U||B)*(Math.abs(B)-Math.abs(U));j-=te,U+=te}}else{var de=[o.scale(I[0]),o.scale(I[1])],pe=de[0],Ie=de[1];if(O=pe,j=j1({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:C,index:R}),M=Ie-pe,U=g.size,L={x:o.x,y:j,width:o.width,height:U},Math.abs(B)>0&&Math.abs(M)<Math.abs(B)){var W=Bn(M||B)*(Math.abs(B)-Math.abs(M));M+=W}}return nt(nt(nt({},C),{},{x:O,y:j,width:M,height:U,value:u?I:I[1],payload:C,background:L},k&&k[R]&&k[R].props),{},{tooltipPayload:[vI(n,C)],tooltipPosition:{x:O+M/2,y:j+U/2}})});return nt({data:A,layout:y},h)});function Jl(t){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(t)}function Ile(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UI(r.key),r)}}function Ole(t,e,n){return e&&DE(t.prototype,e),n&&DE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jE(Object(n),!0).forEach(function(r){ph(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ph(t,e,n){return e=UI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UI(t){var e=Rle(t,"string");return Jl(e)=="symbol"?e:e+""}function Rle(t,e){if(Jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mle=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!en(u,fu);return c.reduce(function(g,y){var x=n[y],v=x.orientation,b=x.domain,w=x.padding,_=w===void 0?{}:w,T=x.mirror,S=x.reversed,E="".concat(v).concat(T?"Mirror":""),k,A,C,R,I;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var O=b[1]-b[0],j=1/0,M=x.categoricalDomain.sort(OV);if(M.forEach(function(de,pe){pe>0&&(j=Math.min((de||0)-(M[pe-1]||0),j))}),Number.isFinite(j)){var U=j/O,L=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(k=U*L/2),x.padding==="no-gap"){var B=Qi(e.barCategoryGap,U*L),N=U*L/2;k=N-B-(N-B)/L*B}}}i==="xAxis"?A=[r.left+(_.left||0)+(k||0),r.left+r.width-(_.right||0)-(k||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(k||0),r.top+r.height-(_.bottom||0)-(k||0)]:A=x.range,S&&(A=[A[1],A[0]]);var $=Qne(x,o,h),F=$.scale,V=$.realScaleType;F.domain(b).range(A),Zne(F);var q=sre(F,Ln(Ln({},x),{},{realScaleType:V}));i==="xAxis"?(I=v==="top"&&!T||v==="bottom"&&T,C=r.left,R=d[E]-I*x.height):i==="yAxis"&&(I=v==="left"&&!T||v==="right"&&T,C=d[E]-I*x.width,R=r.top);var te=Ln(Ln(Ln({},x),q),{},{realScaleType:V,x:C,y:R,scale:F,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return te.bandSize=Id(te,q),!x.hide&&i==="xAxis"?d[E]+=(I?-1:1)*te.height:x.hide||(d[E]+=(I?-1:1)*te.width),Ln(Ln({},g),{},ph({},y,te))},{})},FI=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},$le=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return FI({x:n,y:r},{x:i,y:o})},BI=function(){function t(e){Ile(this,t),this.scale=e}return Ole(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();ph(BI,"EPS",1e-4);var J0=function(e){var n=Object.keys(e).reduce(function(r,i){return Ln(Ln({},r),{},ph({},i,BI.create(e[i])))},{});return Ln(Ln({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return Zse(i,function(l,u){return n[u].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return fle(i,function(o,a){return n[a].isInRange(o)})}})};function Dle(t){return(t%180+180)%180}var jle=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Dle(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},Lle=$z(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),GI=P.createContext(void 0),zI=P.createContext(void 0),VI=P.createContext(void 0),Ule=P.createContext({}),HI=P.createContext(void 0),qI=P.createContext(0),WI=P.createContext(0),LE=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,u=e.height,c=Lle(o);return D.createElement(GI.Provider,{value:r},D.createElement(zI.Provider,{value:i},D.createElement(Ule.Provider,{value:o},D.createElement(VI.Provider,{value:c},D.createElement(HI.Provider,{value:a},D.createElement(qI.Provider,{value:u},D.createElement(WI.Provider,{value:l},s)))))))},Fle=function(){return P.useContext(HI)},KI=function(e){var n=P.useContext(GI);n==null&&eo();var r=n[e];return r==null&&eo(),r},JI=function(e){var n=P.useContext(zI);n==null&&eo();var r=n[e];return r==null&&eo(),r},Ble=function(){var e=P.useContext(VI);return e},YI=function(){return P.useContext(WI)},XI=function(){return P.useContext(qI)};function ka(t){"@babel/helpers - typeof";return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(t)}function Gle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ZI(r.key),r)}}function Vle(t,e,n){return e&&zle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hle(t,e,n){return e=qd(e),qle(t,QI()?Reflect.construct(e,n||[],qd(t).constructor):e.apply(t,n))}function qle(t,e){if(e&&(ka(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wle(t)}function Wle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function QI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QI=function(){return!!t})()}function qd(t){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qd(t)}function Kle(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dy(t,e)}function dy(t,e){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dy(t,e)}function UE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UE(Object(n),!0).forEach(function(r){Y0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y0(t,e,n){return e=ZI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZI(t){var e=Jle(t,"string");return ka(e)=="symbol"?e:e+""}function Jle(t,e){if(ka(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Yle(t,e){return eue(t)||Zle(t,e)||Qle(t,e)||Xle()}function Xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qle(t,e){if(t){if(typeof t=="string")return BE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BE(t,e)}}function BE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zle(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function eue(t){if(Array.isArray(t))return t}function fy(){return fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fy.apply(this,arguments)}var tue=function(e,n){var r;return D.isValidElement(e)?r=D.cloneElement(e,n):me(e)?r=e(n):r=D.createElement("line",fy({},n,{className:"recharts-reference-line-line"})),r},nue=function(e,n,r,i,o,a,s,l,u){var c=o.x,d=o.y,h=o.width,g=o.height;if(r){var y=u.y,x=e.y.apply(y,{position:a});if(or(u,"discard")&&!e.y.isInRange(x))return null;var v=[{x:c+h,y:x},{x:c,y:x}];return l==="left"?v.reverse():v}if(n){var b=u.x,w=e.x.apply(b,{position:a});if(or(u,"discard")&&!e.x.isInRange(w))return null;var _=[{x:w,y:d+g},{x:w,y:d}];return s==="top"?_.reverse():_}if(i){var T=u.segment,S=T.map(function(E){return e.apply(E,{position:a})});return or(u,"discard")&&Hse(S,function(E){return!e.isInRange(E)})?null:S}return null};function rue(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,u=Fle(),c=KI(i),d=JI(o),h=Ble();if(!u||!h)return null;Gi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=J0({x:c.scale,y:d.scale}),y=ft(e),x=ft(n),v=r&&r.length===2,b=nue(g,y,x,v,h,t.position,c.orientation,d.orientation,t);if(!b)return null;var w=Yle(b,2),_=w[0],T=_.x,S=_.y,E=w[1],k=E.x,A=E.y,C=or(t,"hidden")?"url(#".concat(u,")"):void 0,R=FE(FE({clipPath:C},ve(t,!0)),{},{x1:T,y1:S,x2:k,y2:A});return D.createElement(Je,{className:he("recharts-reference-line",s)},tue(a,R),It.renderCallByParent(t,$le({x1:T,y1:S,x2:k,y2:A})))}var X0=function(t){function e(){return Gle(this,e),Hle(this,e,arguments)}return Kle(e,t),Vle(e,[{key:"render",value:function(){return D.createElement(rue,this.props)}}])}(D.Component);Y0(X0,"displayName","ReferenceLine");Y0(X0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(this,arguments)}function Aa(t){"@babel/helpers - typeof";return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(t)}function GE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GE(Object(n),!0).forEach(function(r){mh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tO(r.key),r)}}function aue(t,e,n){return e&&oue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function sue(t,e,n){return e=Wd(e),lue(t,eO()?Reflect.construct(e,n||[],Wd(t).constructor):e.apply(t,n))}function lue(t,e){if(e&&(Aa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uue(t)}function uue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eO=function(){return!!t})()}function Wd(t){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wd(t)}function cue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&py(t,e)}function py(t,e){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},py(t,e)}function mh(t,e,n){return e=tO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tO(t){var e=due(t,"string");return Aa(e)=="symbol"?e:e+""}function due(t,e){if(Aa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Aa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fue=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=J0({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return or(e,"discard")&&!a.isInRange(s)?null:s},gh=function(t){function e(){return iue(this,e),sue(this,e,arguments)}return cue(e,t),aue(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,u=ft(i),c=ft(o);if(Gi(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=fue(this.props);if(!d)return null;var h=d.x,g=d.y,y=this.props,x=y.shape,v=y.className,b=or(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=zE(zE({clipPath:b},ve(this.props,!0)),{},{cx:h,cy:g});return D.createElement(Je,{className:he("recharts-reference-dot",v)},e.renderDot(x,w),It.renderCallByParent(this.props,{x:h-a,y:g-a,width:2*a,height:2*a}))}}])}(D.Component);mh(gh,"displayName","ReferenceDot");mh(gh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});mh(gh,"renderDot",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):me(t)?n=t(e):n=D.createElement(K0,hy({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}function Ca(t){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function VE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VE(Object(n),!0).forEach(function(r){yh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rO(r.key),r)}}function mue(t,e,n){return e&&pue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function gue(t,e,n){return e=Kd(e),yue(t,nO()?Reflect.construct(e,n||[],Kd(t).constructor):e.apply(t,n))}function yue(t,e){if(e&&(Ca(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vue(t)}function vue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nO=function(){return!!t})()}function Kd(t){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(t)}function xue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gy(t,e)}function gy(t,e){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gy(t,e)}function yh(t,e,n){return e=rO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rO(t){var e=bue(t,"string");return Ca(e)=="symbol"?e:e+""}function bue(t,e){if(Ca(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ca(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var wue=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,u=o.y2,c=o.xAxis,d=o.yAxis;if(!c||!d)return null;var h=J0({x:c.scale,y:d.scale}),g={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return or(o,"discard")&&(!h.isInRange(g)||!h.isInRange(y))?null:FI(g,y)},vh=function(t){function e(){return hue(this,e),gue(this,e,arguments)}return xue(e,t),mue(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;Gi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=ft(i),h=ft(o),g=ft(a),y=ft(s),x=this.props.shape;if(!d&&!h&&!g&&!y&&!x)return null;var v=wue(d,h,g,y,this.props);if(!v&&!x)return null;var b=or(this.props,"hidden")?"url(#".concat(c,")"):void 0;return D.createElement(Je,{className:he("recharts-reference-area",l)},e.renderRect(x,HE(HE({clipPath:b},ve(this.props,!0)),v)),It.renderCallByParent(this.props,v))}}])}(D.Component);yh(vh,"displayName","ReferenceArea");yh(vh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});yh(vh,"renderRect",function(t,e){var n;return D.isValidElement(t)?n=D.cloneElement(t,e):me(t)?n=t(e):n=D.createElement(W0,my({},e,{className:"recharts-reference-area-rect"})),n});function iO(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function _ue(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return jle(r,n)}function Sue(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Jd(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Eue(t,e){return iO(t,e+1)}function Tue(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,u=1,c=a,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:iO(r,u)};var x=l,v,b=function(){return v===void 0&&(v=n(y,x)),v},w=y.coordinate,_=l===0||Jd(t,w,b,c,s);_||(l=0,c=a,u+=1),_&&(c=w+t*(b()/2+i),l+=u)},h;u<=o.length;)if(h=d(),h)return h.v;return[]}function Yl(t){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl(t)}function qE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(n),!0).forEach(function(r){kue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kue(t,e,n){return e=Aue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aue(t){var e=Cue(t,"string");return Yl(e)=="symbol"?e:e+""}function Cue(t,e){if(Yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pue(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,u=function(h){var g=o[h],y,x=function(){return y===void 0&&(y=n(g,h)),y};if(h===a-1){var v=t*(g.coordinate+t*x()/2-l);o[h]=g=Pt(Pt({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else o[h]=g=Pt(Pt({},g),{},{tickCoord:g.coordinate});var b=Jd(t,g.tickCoord,x,s,l);b&&(l=g.tickCoord-t*(x()/2+i),o[h]=Pt(Pt({},g),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}function Nue(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,u=e.end;if(o){var c=r[s-1],d=n(c,s-1),h=t*(c.coordinate+t*d/2-u);a[s-1]=c=Pt(Pt({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var g=Jd(t,c.tickCoord,function(){return d},l,u);g&&(u=c.tickCoord-t*(d/2+i),a[s-1]=Pt(Pt({},c),{},{isShow:!0}))}for(var y=o?s-1:s,x=function(w){var _=a[w],T,S=function(){return T===void 0&&(T=n(_,w)),T};if(w===0){var E=t*(_.coordinate-t*S()/2-l);a[w]=_=Pt(Pt({},_),{},{tickCoord:E<0?_.coordinate-E*t:_.coordinate})}else a[w]=_=Pt(Pt({},_),{},{tickCoord:_.coordinate});var k=Jd(t,_.tickCoord,S,l,u);k&&(l=_.tickCoord+t*(S()/2+i),a[w]=Pt(Pt({},_),{},{isShow:!0}))},v=0;v<y;v++)x(v);return a}function Iue(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Y(l)||Xa.isSsr)return Eue(i,typeof l=="number"&&Y(l)?l:0);var h=[],g=s==="top"||s==="bottom"?"width":"height",y=c&&g==="width"?Bs(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function(_,T){var S=me(u)?u(_.value,T):_.value;return g==="width"?_ue(Bs(S,{fontSize:e,letterSpacing:n}),y,d):Bs(S,{fontSize:e,letterSpacing:n})[g]},v=i.length>=2?Bn(i[1].coordinate-i[0].coordinate):1,b=Sue(o,v,g);return l==="equidistantPreserveStart"?Tue(v,b,x,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=Nue(v,b,x,i,a,l==="preserveStartEnd"):h=Pue(v,b,x,i,a),h.filter(function(w){return w.isShow}))}var Oue=["viewBox"],Rue=["viewBox"],Mue=["ticks"];function Pa(t){"@babel/helpers - typeof";return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(t)}function Go(){return Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Go.apply(this,arguments)}function WE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(r){Q0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ip(t,e){if(t==null)return{};var n=$ue(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $ue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Due(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aO(r.key),r)}}function jue(t,e,n){return e&&KE(t.prototype,e),n&&KE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lue(t,e,n){return e=Yd(e),Uue(t,oO()?Reflect.construct(e,n||[],Yd(t).constructor):e.apply(t,n))}function Uue(t,e){if(e&&(Pa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fue(t)}function Fue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oO=function(){return!!t})()}function Yd(t){return Yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yd(t)}function Bue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yy(t,e)}function yy(t,e){return yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yy(t,e)}function Q0(t,e,n){return e=aO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aO(t){var e=Gue(t,"string");return Pa(e)=="symbol"?e:e+""}function Gue(t,e){if(Pa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xh=function(t){function e(n){var r;return Due(this,e),r=Lue(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Bue(e,t),jue(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Ip(r,Oue),s=this.props,l=s.viewBox,u=Ip(s,Rue);return!ea(o,l)||!ea(a,u)||!ea(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.orientation,c=i.tickSize,d=i.mirror,h=i.tickMargin,g,y,x,v,b,w,_=d?-1:1,T=r.tickSize||c,S=Y(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":g=y=r.coordinate,v=a+ +!d*l,x=v-_*T,w=x-_*h,b=S;break;case"left":x=v=r.coordinate,y=o+ +!d*s,g=y-_*T,b=g-_*h,w=S;break;case"right":x=v=r.coordinate,y=o+ +d*s,g=y+_*T,b=g+_*h,w=S;break;default:g=y=r.coordinate,v=a+ +d*l,x=v+_*T,w=x+_*h,b=S;break}return{line:{x1:g,y1:x,x2:y,y2:v},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=st(st(st({},ve(this.props,!1)),ve(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=st(st({},d),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var g=+(l==="left"&&!u||l==="right"&&u);d=st(st({},d),{},{x1:i+g*a,y1:o,x2:i+g*a,y2:o+s})}return D.createElement("line",Go({},d,{className:he("recharts-cartesian-axis-line",_n(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,u=s.stroke,c=s.tick,d=s.tickFormatter,h=s.unit,g=Iue(st(st({},this.props),{},{ticks:r}),i,o),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),v=ve(this.props,!1),b=ve(c,!1),w=st(st({},v),{},{fill:"none"},ve(l,!1)),_=g.map(function(T,S){var E=a.getTickLineCoord(T),k=E.line,A=E.tick,C=st(st(st(st({textAnchor:y,verticalAnchor:x},v),{},{stroke:"none",fill:u},b),A),{},{index:S,payload:T,visibleTicksCount:g.length,tickFormatter:d});return D.createElement(Je,Go({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},rd(a.props,T,S)),l&&D.createElement("line",Go({},w,k,{className:he("recharts-cartesian-axis-tick-line",_n(l,"className"))})),c&&e.renderTickItem(c,C,"".concat(me(d)?d(T.value,S):T.value).concat(h||"")))});return D.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var d=this.props,h=d.ticks,g=Ip(d,Mue),y=h;return me(l)&&(y=h&&h.length>0?l(this.props):l(g)),a<=0||s<=0||!y||!y.length?null:D.createElement(Je,{className:he("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),It.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=he(i.className,"recharts-cartesian-axis-tick-value");return D.isValidElement(r)?a=D.cloneElement(r,st(st({},i),{},{className:s})):me(r)?a=r(st(st({},i),{},{className:s})):a=D.createElement(yd,Go({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(P.Component);Q0(xh,"displayName","CartesianAxis");Q0(xh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var zue=["layout","type","stroke","connectNulls","isRange","ref"],Vue=["key"],sO;function Na(t){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(t)}function lO(t,e){if(t==null)return{};var n=Hue(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hue(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Li(){return Li=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Li.apply(this,arguments)}function JE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JE(Object(n),!0).forEach(function(r){tr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function que(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cO(r.key),r)}}function Wue(t,e,n){return e&&YE(t.prototype,e),n&&YE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kue(t,e,n){return e=Xd(e),Jue(t,uO()?Reflect.construct(e,n||[],Xd(t).constructor):e.apply(t,n))}function Jue(t,e){if(e&&(Na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yue(t)}function Yue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uO=function(){return!!t})()}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xd(t)}function Xue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vy(t,e)}function vy(t,e){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},vy(t,e)}function tr(t,e,n){return e=cO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cO(t){var e=Que(t,"string");return Na(e)=="symbol"?e:e+""}function Que(t,e){if(Na(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Na(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var yi=function(t){function e(){var n;que(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Kue(this,e,[].concat(i)),tr(n,"state",{isAnimationFinished:!0}),tr(n,"id",su("recharts-area-")),tr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),me(a)&&a()}),tr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),me(a)&&a()}),n}return Xue(e,t),Wue(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,u=l.dot,c=l.points,d=l.dataKey,h=ve(this.props,!1),g=ve(u,!0),y=c.map(function(v,b){var w=Ur(Ur(Ur({key:"dot-".concat(b),r:3},h),g),{},{index:b,cx:v.x,cy:v.y,dataKey:d,value:v.value,payload:v.payload,points:c});return e.renderDotItem(u,w)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return D.createElement(Je,Li({className:"recharts-area-dots"},x),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,u=a[a.length-1].x,c=r*Math.abs(l-u),d=Jr(a.map(function(h){return h.y||0}));return Y(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(Jr(o.map(function(h){return h.y||0})),d)),Y(d)?D.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,u=a[a.length-1].y,c=r*Math.abs(l-u),d=Jr(a.map(function(h){return h.x||0}));return Y(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(Jr(o.map(function(h){return h.x||0})),d)),Y(d)?D.createElement("rect",{x:0,y:l<u?l:l-c,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,u=s.type,c=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var g=lO(s,zue);return D.createElement(Je,{clipPath:o?"url(#clipPath-".concat(a,")"):null},D.createElement(Vs,Li({},ve(g,!0),{points:r,connectNulls:d,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&D.createElement(Vs,Li({},ve(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:r})),c!=="none"&&h&&D.createElement(Vs,Li({},ve(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,u=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,g=a.animationId,y=this.state,x=y.prevPoints,v=y.prevBaseLine;return D.createElement(Nr,{begin:c,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(x){var _=x.length/s.length,T=s.map(function(A,C){var R=Math.floor(C*_);if(x[R]){var I=x[R],O=yn(I.x,A.x),j=yn(I.y,A.y);return Ur(Ur({},A),{},{x:O(w),y:j(w)})}return A}),S;if(Y(l)&&typeof l=="number"){var E=yn(v,l);S=E(w)}else if(xe(l)||qa(l)){var k=yn(v,0);S=k(w)}else S=l.map(function(A,C){var R=Math.floor(C*_);if(v[R]){var I=v[R],O=yn(I.x,A.x),j=yn(I.y,A.y);return Ur(Ur({},A),{},{x:O(w),y:j(w)})}return A});return o.renderAreaStatically(T,S,r,i)}return D.createElement(Je,null,D.createElement("defs",null,D.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(w))),D.createElement(Je,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,u=this.state,c=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&a&&a.length&&(!c&&h>0||!Pl(c,a)||!Pl(d,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,u=i.top,c=i.left,d=i.xAxis,h=i.yAxis,g=i.width,y=i.height,x=i.isAnimationActive,v=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,w=s.length===1,_=he("recharts-area",l),T=d&&d.allowDataOverflow,S=h&&h.allowDataOverflow,E=T||S,k=xe(v)?this.id:v,A=(r=ve(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=A.r,R=C===void 0?3:C,I=A.strokeWidth,O=I===void 0?2:I,j=BV(a)?a:{},M=j.clipDot,U=M===void 0?!0:M,L=R*2+O;return D.createElement(Je,{className:_},T||S?D.createElement("defs",null,D.createElement("clipPath",{id:"clipPath-".concat(k)},D.createElement("rect",{x:T?c:c-g/2,y:S?u:u-y/2,width:T?g:g*2,height:S?y:y*2})),!U&&D.createElement("clipPath",{id:"clipPath-dots-".concat(k)},D.createElement("rect",{x:c-L/2,y:u-L/2,width:g+L,height:y+L}))):null,w?null:this.renderArea(E,k),(a||w)&&this.renderDots(E,U,k),(!x||b)&&ai.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(P.PureComponent);sO=yi;tr(yi,"displayName","Area");tr(yi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Xa.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});tr(yi,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(Y(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});tr(yi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,l=t.dataKey,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,g=e.layout,y=u&&u.length,x=sO.getBaseValue(e,n,r,i),v=g==="horizontal",b=!1,w=d.map(function(T,S){var E;y?E=u[c+S]:(E=ln(T,l),Array.isArray(E)?b=!0:E=[x,E]);var k=E[1]==null||y&&ln(T,l)==null;return v?{x:D1({axis:r,ticks:o,bandSize:s,entry:T,index:S}),y:k?null:i.scale(E[1]),value:E,payload:T}:{x:k?null:r.scale(E[1]),y:D1({axis:i,ticks:a,bandSize:s,entry:T,index:S}),value:E,payload:T}}),_;return y||b?_=w.map(function(T){var S=Array.isArray(T.value)?T.value[0]:null;return v?{x:T.x,y:S!=null&&T.y!=null?i.scale(S):null}:{x:S!=null?r.scale(S):null,y:T.y}}):_=v?i.scale(x):r.scale(x),Ur({points:w,baseLine:_,layout:g,isRange:b},h)});tr(yi,"renderDotItem",function(t,e){var n;if(D.isValidElement(t))n=D.cloneElement(t,e);else if(me(t))n=t(e);else{var r=he("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=lO(e,Vue);n=D.createElement(K0,Li({},o,{key:i,className:r}))}return n});function Ia(t){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(t)}function Zue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ece(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hO(r.key),r)}}function tce(t,e,n){return e&&ece(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nce(t,e,n){return e=Qd(e),rce(t,dO()?Reflect.construct(e,n||[],Qd(t).constructor):e.apply(t,n))}function rce(t,e){if(e&&(Ia(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ice(t)}function ice(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dO=function(){return!!t})()}function Qd(t){return Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qd(t)}function oce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xy(t,e)}function xy(t,e){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xy(t,e)}function fO(t,e,n){return e=hO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hO(t){var e=ace(t,"string");return Ia(e)=="symbol"?e:e+""}function ace(t,e){if(Ia(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ia(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function by(){return by=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},by.apply(this,arguments)}function sce(t){var e=t.xAxisId,n=YI(),r=XI(),i=KI(e);return i==null?null:P.createElement(xh,by({},i,{className:he("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return ji(a,!0)}}))}var Z0=function(t){function e(){return Zue(this,e),nce(this,e,arguments)}return oce(e,t),tce(e,[{key:"render",value:function(){return P.createElement(sce,this.props)}}])}(P.Component);fO(Z0,"displayName","XAxis");fO(Z0,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Oa(t){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(t)}function lce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gO(r.key),r)}}function cce(t,e,n){return e&&uce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function dce(t,e,n){return e=Zd(e),fce(t,pO()?Reflect.construct(e,n||[],Zd(t).constructor):e.apply(t,n))}function fce(t,e){if(e&&(Oa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hce(t)}function hce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pO=function(){return!!t})()}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zd(t)}function pce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wy(t,e)}function wy(t,e){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wy(t,e)}function mO(t,e,n){return e=gO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gO(t){var e=mce(t,"string");return Oa(e)=="symbol"?e:e+""}function mce(t,e){if(Oa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}var gce=function(e){var n=e.yAxisId,r=YI(),i=XI(),o=JI(n);return o==null?null:P.createElement(xh,_y({},o,{className:he("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return ji(s,!0)}}))},ex=function(t){function e(){return lce(this,e),dce(this,e,arguments)}return pce(e,t),cce(e,[{key:"render",value:function(){return P.createElement(gce,this.props)}}])}(P.Component);mO(ex,"displayName","YAxis");mO(ex,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function XE(t){return bce(t)||xce(t)||vce(t)||yce()}function yce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vce(t,e){if(t){if(typeof t=="string")return Sy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sy(t,e)}}function xce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bce(t){if(Array.isArray(t))return Sy(t)}function Sy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ey=function(e,n,r,i,o){var a=qn(e,X0),s=qn(e,gh),l=[].concat(XE(a),XE(s)),u=qn(e,vh),c="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(x,v){if(v.props[c]===r&&or(v.props,"extendDomain")&&Y(v.props[d])){var b=v.props[d];return[Math.min(x[0],b),Math.max(x[1],b)]}return x},h)),u.length){var g="".concat(d,"1"),y="".concat(d,"2");h=u.reduce(function(x,v){if(v.props[c]===r&&or(v.props,"extendDomain")&&Y(v.props[g])&&Y(v.props[y])){var b=v.props[g],w=v.props[y];return[Math.min(x[0],b,w),Math.max(x[1],b,w)]}return x},h)}return o&&o.length&&(h=o.reduce(function(x,v){return Y(v)?[Math.min(x[0],v),Math.max(x[1],v)]:x},h)),h},yO={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,d||l,h),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,y=new Array(g);h<g;h++)y[h]=d[h].fn;return y},s.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,c,d,h,g,y){var x=n?n+u:u;if(!this._events[x])return!1;var v=this._events[x],b=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,h),!0;case 5:return v.fn.call(v.context,c,d,h,g),!0;case 6:return v.fn.call(v.context,c,d,h,g,y),!0}for(_=1,w=new Array(b-1);_<b;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var T=v.length,S;for(_=0;_<T;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),b){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,c);break;case 3:v[_].fn.call(v[_].context,c,d);break;case 4:v[_].fn.call(v[_].context,c,d,h);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];v[_].fn.apply(v[_].context,w)}}return!0},s.prototype.on=function(u,c,d){return o(this,u,c,d,!1)},s.prototype.once=function(u,c,d){return o(this,u,c,d,!0)},s.prototype.removeListener=function(u,c,d,h){var g=n?n+u:u;if(!this._events[g])return this;if(!c)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===c&&(!h||y.once)&&(!d||y.context===d)&&a(this,g);else{for(var x=0,v=[],b=y.length;x<b;x++)(y[x].fn!==c||h&&!y[x].once||d&&y[x].context!==d)&&v.push(y[x]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(yO);var wce=yO.exports;const _ce=Ue(wce);var Op=new _ce,Rp="recharts.syncMouseEvents";function Xl(t){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xl(t)}function Sce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ece(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vO(r.key),r)}}function Tce(t,e,n){return e&&Ece(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mp(t,e,n){return e=vO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vO(t){var e=kce(t,"string");return Xl(e)=="symbol"?e:e+""}function kce(t,e){if(Xl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ace=function(){function t(){Sce(this,t),Mp(this,"activeIndex",0),Mp(this,"coordinateList",[]),Mp(this,"layout","horizontal")}return Tce(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,h=n.mouseHandlerCallback,g=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+l+u,h=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Cce(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Y(r)&&Y(i))return!0}return!1}function Pce(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function xO(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Et(e,n,r,i),s=Et(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function Nce(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,h=Et(s,l,u,d),g=Et(s,l,c,d);r=h.x,i=h.y,o=g.x,a=g.y}else return xO(e);return[{x:r,y:i},{x:o,y:a}]}function Ql(t){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(t)}function QE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ec(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(n),!0).forEach(function(r){Ice(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ice(t,e,n){return e=Oce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oce(t){var e=Rce(t,"string");return Ql(e)=="symbol"?e:e+""}function Rce(t,e){if(Ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mce(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,x=Vs;if(h==="ScatterChart")y=a,x=pae;else if(h==="BarChart")y=Pce(d,a,l,c),x=W0;else if(d==="radial"){var v=xO(a),b=v.cx,w=v.cy,_=v.radius,T=v.startAngle,S=v.endAngle;y={cx:b,cy:w,startAngle:T,endAngle:S,innerRadius:_,outerRadius:_},x=wI}else y={points:Nce(d,a,l)},x=Vs;var E=ec(ec(ec(ec({stroke:"#ccc",pointerEvents:"none"},l),y),ve(g,!1)),{},{payload:s,payloadIndex:u,className:he("recharts-tooltip-cursor",g.className)});return P.isValidElement(g)?P.cloneElement(g,E):P.createElement(x,E)}var $ce=["item"],Dce=["children","className","width","height","style","compact","title","desc"];function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(t)}function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zo.apply(this,arguments)}function ZE(t,e){return Uce(t)||Lce(t,e)||wO(t,e)||jce()}function jce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Uce(t){if(Array.isArray(t))return t}function eT(t,e){if(t==null)return{};var n=Fce(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Fce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_O(r.key),r)}}function zce(t,e,n){return e&&Gce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vce(t,e,n){return e=ef(e),Hce(t,bO()?Reflect.construct(e,n||[],ef(t).constructor):e.apply(t,n))}function Hce(t,e){if(e&&(Ra(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qce(t)}function qce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!t})()}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ef(t)}function Wce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ty(t,e)}function Ty(t,e){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ty(t,e)}function Ma(t){return Yce(t)||Jce(t)||wO(t)||Kce()}function Kce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wO(t,e){if(t){if(typeof t=="string")return ky(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ky(t,e)}}function Jce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yce(t){if(Array.isArray(t))return ky(t)}function ky(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(n),!0).forEach(function(r){se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function se(t,e,n){return e=_O(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _O(t){var e=Xce(t,"string");return Ra(e)=="symbol"?e:e+""}function Xce(t,e){if(Ra(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ra(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qce={xAxis:["bottom","top"],yAxis:["left","right"]},Zce={width:"100%",height:"100%"},SO={x:0,y:0};function tc(t){return t}var ede=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},tde=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return G(G(G({},i),Et(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,u=i.angle;return G(G(G({},i),Et(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return SO},bh=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat(Ma(s),Ma(u)):s},[]);return a.length>0?a:e&&e.length&&Y(i)&&Y(o)?e.slice(i,o+1):[]};function EO(t){return t==="number"?[0,"auto"]:void 0}var Ay=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=bh(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var g=d===void 0?s:d;h=td(g,a.dataKey,i)}else h=d&&d[r]||s[r];return h?[].concat(Ma(l),[vI(u,h)]):l},[])},nT=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=ede(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=qne(a,s,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,h=Ay(e,n,c,d),g=tde(r,s,c,o);return{activeTooltipIndex:c,activeLabel:d,activePayload:h,activeCoordinate:g}}return null},nde=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=e.stackOffset,g=gI(c,o);return r.reduce(function(y,x){var v,b=x.type.defaultProps!==void 0?G(G({},x.type.defaultProps),x.props):x.props,w=b.type,_=b.dataKey,T=b.allowDataOverflow,S=b.allowDuplicatedCategory,E=b.scale,k=b.ticks,A=b.includeHidden,C=b[a];if(y[C])return y;var R=bh(e.data,{graphicalItems:i.filter(function(q){var te,de=a in q.props?q.props[a]:(te=q.type.defaultProps)===null||te===void 0?void 0:te[a];return de===C}),dataStartIndex:l,dataEndIndex:u}),I=R.length,O,j,M;Cce(b.domain,T,w)&&(O=qg(b.domain,null,T),g&&(w==="number"||E!=="auto")&&(M=zs(R,_,"category")));var U=EO(w);if(!O||O.length===0){var L,B=(L=b.domain)!==null&&L!==void 0?L:U;if(_){if(O=zs(R,_,w),w==="category"&&g){var N=IV(O);S&&N?(j=O,O=Bd(0,I)):S||(O=F1(B,O,x).reduce(function(q,te){return q.indexOf(te)>=0?q:[].concat(Ma(q),[te])},[]))}else if(w==="category")S?O=O.filter(function(q){return q!==""&&!xe(q)}):O=F1(B,O,x).reduce(function(q,te){return q.indexOf(te)>=0||te===""||xe(te)?q:[].concat(Ma(q),[te])},[]);else if(w==="number"){var $=Xne(R,i.filter(function(q){var te,de,pe=a in q.props?q.props[a]:(te=q.type.defaultProps)===null||te===void 0?void 0:te[a],Ie="hide"in q.props?q.props.hide:(de=q.type.defaultProps)===null||de===void 0?void 0:de.hide;return pe===C&&(A||!Ie)}),_,o,c);$&&(O=$)}g&&(w==="number"||E!=="auto")&&(M=zs(R,_,"category"))}else g?O=Bd(0,I):s&&s[C]&&s[C].hasStack&&w==="number"?O=h==="expand"?[0,1]:yI(s[C].stackGroups,l,u):O=mI(R,i.filter(function(q){var te=a in q.props?q.props[a]:q.type.defaultProps[a],de="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return te===C&&(A||!de)}),w,c,!0);if(w==="number")O=Ey(d,O,C,o,k),B&&(O=qg(B,O,T));else if(w==="category"&&B){var F=B,V=O.every(function(q){return F.indexOf(q)>=0});V&&(O=F)}}return G(G({},y),{},se({},C,G(G({},b),{},{axisType:o,domain:O,categoricalDomain:M,duplicateDomain:j,originalDomain:(v=b.domain)!==null&&v!==void 0?v:U,isCategorical:g,layout:c})))},{})},rde=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=bh(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),g=h.length,y=gI(c,o),x=-1;return r.reduce(function(v,b){var w=b.type.defaultProps!==void 0?G(G({},b.type.defaultProps),b.props):b.props,_=w[a],T=EO("number");if(!v[_]){x++;var S;return y?S=Bd(0,g):s&&s[_]&&s[_].hasStack?(S=yI(s[_].stackGroups,l,u),S=Ey(d,S,_,o)):(S=qg(T,mI(h,r.filter(function(E){var k,A,C=a in E.props?E.props[a]:(k=E.type.defaultProps)===null||k===void 0?void 0:k[a],R="hide"in E.props?E.props.hide:(A=E.type.defaultProps)===null||A===void 0?void 0:A.hide;return C===_&&!R}),"number",c),i.defaultProps.allowDataOverflow),S=Ey(d,S,_,o)),G(G({},v),{},se({},_,G(G({axisType:o},i.defaultProps),{},{hide:!0,orientation:_n(Qce,"".concat(o,".").concat(x%2),null),domain:S,originalDomain:T,isCategorical:y,layout:c})))}return v},{})},ide=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(i,"Id"),h=qn(c,o),g={};return h&&h.length?g=nde(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(g=rde(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),g},ode=function(e){var n=To(e),r=ji(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:b0(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Id(n,r)}},rT=function(e){var n=e.children,r=e.defaultShowTooltip,i=en(n,Ea),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},ade=function(e){return!e||!e.length?!1:e.some(function(n){var r=xr(n&&n.type);return r&&r.indexOf("Bar")>=0})},iT=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},sde=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,u=r.width,c=r.height,d=r.children,h=r.margin||{},g=en(d,Ea),y=en(d,ta),x=Object.keys(l).reduce(function(S,E){var k=l[E],A=k.orientation;return!k.mirror&&!k.hide?G(G({},S),{},se({},A,S[A]+k.width)):S},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(S,E){var k=a[E],A=k.orientation;return!k.mirror&&!k.hide?G(G({},S),{},se({},A,_n(S,"".concat(A))+k.height)):S},{top:h.top||0,bottom:h.bottom||0}),b=G(G({},v),x),w=b.bottom;g&&(b.bottom+=g.props.height||Ea.defaultProps.height),y&&n&&(b=Jne(b,i,r,n));var _=u-b.left-b.right,T=c-b.top-b.bottom;return G(G({brushBottom:w},b),{},{width:Math.max(_,0),height:Math.max(T,0)})},lde=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},ude=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,h=function(b,w){var _=w.graphicalItems,T=w.stackGroups,S=w.offset,E=w.updateId,k=w.dataStartIndex,A=w.dataEndIndex,C=b.barSize,R=b.layout,I=b.barGap,O=b.barCategoryGap,j=b.maxBarSize,M=iT(R),U=M.numericAxisName,L=M.cateAxisName,B=ade(_),N=[];return _.forEach(function($,F){var V=bh(b.data,{graphicalItems:[$],dataStartIndex:k,dataEndIndex:A}),q=$.type.defaultProps!==void 0?G(G({},$.type.defaultProps),$.props):$.props,te=q.dataKey,de=q.maxBarSize,pe=q["".concat(U,"Id")],Ie=q["".concat(L,"Id")],W={},X=l.reduce(function($t,dn){var uo=w["".concat(dn.axisType,"Map")],hu=q["".concat(dn.axisType,"Id")];uo&&uo[hu]||dn.axisType==="zAxis"||eo();var ts=uo[hu];return G(G({},$t),{},se(se({},dn.axisType,ts),"".concat(dn.axisType,"Ticks"),ji(ts)))},W),H=X[L],Z=X["".concat(L,"Ticks")],ie=T&&T[pe]&&T[pe].hasStack&&ure($,T[pe].stackGroups),z=xr($.type).indexOf("Bar")>=0,Te=Id(H,Z),fe=[],ke=B&&Wne({barSize:C,stackGroups:T,totalSize:lde(X,L)});if(z){var J,Me,ee=xe(de)?j:de,Oe=(J=(Me=Id(H,Z,!0))!==null&&Me!==void 0?Me:ee)!==null&&J!==void 0?J:0;fe=Kne({barGap:I,barCategoryGap:O,bandSize:Oe!==Te?Oe:Te,sizeList:ke[Ie],maxBarSize:ee}),Oe!==Te&&(fe=fe.map(function($t){return G(G({},$t),{},{position:G(G({},$t.position),{},{offset:$t.position.offset-Oe/2})})}))}var at=$&&$.type&&$.type.getComposedData;at&&N.push({props:G(G({},at(G(G({},X),{},{displayedData:V,props:b,dataKey:te,item:$,bandSize:Te,barPosition:fe,offset:S,stackedData:ie,layout:R,dataStartIndex:k,dataEndIndex:A}))),{},se(se(se({key:$.key||"item-".concat(F)},U,X[U]),L,X[L]),"animationId",E)),childIndex:VV($,b.children),item:$})}),N},g=function(b,w){var _=b.props,T=b.dataStartIndex,S=b.dataEndIndex,E=b.updateId;if(!R_({props:_}))return null;var k=_.children,A=_.layout,C=_.stackOffset,R=_.data,I=_.reverseStackOrder,O=iT(A),j=O.numericAxisName,M=O.cateAxisName,U=qn(k,r),L=are(R,U,"".concat(j,"Id"),"".concat(M,"Id"),C,I),B=l.reduce(function(q,te){var de="".concat(te.axisType,"Map");return G(G({},q),{},se({},de,ide(_,G(G({},te),{},{graphicalItems:U,stackGroups:te.axisType===j&&L,dataStartIndex:T,dataEndIndex:S}))))},{}),N=sde(G(G({},B),{},{props:_,graphicalItems:U}),w==null?void 0:w.legendBBox);Object.keys(B).forEach(function(q){B[q]=c(_,B[q],N,q.replace("Map",""),n)});var $=B["".concat(M,"Map")],F=ode($),V=h(_,G(G({},B),{},{dataStartIndex:T,dataEndIndex:S,updateId:E,graphicalItems:U,stackGroups:L,offset:N}));return G(G({formattedGraphicalItems:V,graphicalItems:U,offset:N,stackGroups:L},F),B)},y=function(v){function b(w){var _,T,S;return Bce(this,b),S=Vce(this,b,[w]),se(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),se(S,"accessibilityManager",new Ace),se(S,"handleLegendBBoxUpdate",function(E){if(E){var k=S.state,A=k.dataStartIndex,C=k.dataEndIndex,R=k.updateId;S.setState(G({legendBBox:E},g({props:S.props,dataStartIndex:A,dataEndIndex:C,updateId:R},G(G({},S.state),{},{legendBBox:E}))))}}),se(S,"handleReceiveSyncEvent",function(E,k,A){if(S.props.syncId===E){if(A===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(k)}}),se(S,"handleBrushChange",function(E){var k=E.startIndex,A=E.endIndex;if(k!==S.state.dataStartIndex||A!==S.state.dataEndIndex){var C=S.state.updateId;S.setState(function(){return G({dataStartIndex:k,dataEndIndex:A},g({props:S.props,dataStartIndex:k,dataEndIndex:A,updateId:C},S.state))}),S.triggerSyncEvent({dataStartIndex:k,dataEndIndex:A})}}),se(S,"handleMouseEnter",function(E){var k=S.getMouseInfo(E);if(k){var A=G(G({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseEnter;me(C)&&C(A,E)}}),se(S,"triggeredAfterMouseMove",function(E){var k=S.getMouseInfo(E),A=k?G(G({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseMove;me(C)&&C(A,E)}),se(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),se(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),se(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),se(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};S.setState(k),S.triggerSyncEvent(k);var A=S.props.onMouseLeave;me(A)&&A(k,E)}),se(S,"handleOuterEvent",function(E){var k=zV(E),A=_n(S.props,"".concat(k));if(k&&me(A)){var C,R;/.*touch.*/i.test(k)?R=S.getMouseInfo(E.changedTouches[0]):R=S.getMouseInfo(E),A((C=R)!==null&&C!==void 0?C:{},E)}}),se(S,"handleClick",function(E){var k=S.getMouseInfo(E);if(k){var A=G(G({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onClick;me(C)&&C(A,E)}}),se(S,"handleMouseDown",function(E){var k=S.props.onMouseDown;if(me(k)){var A=S.getMouseInfo(E);k(A,E)}}),se(S,"handleMouseUp",function(E){var k=S.props.onMouseUp;if(me(k)){var A=S.getMouseInfo(E);k(A,E)}}),se(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),se(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),se(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),se(S,"handleDoubleClick",function(E){var k=S.props.onDoubleClick;if(me(k)){var A=S.getMouseInfo(E);k(A,E)}}),se(S,"handleContextMenu",function(E){var k=S.props.onContextMenu;if(me(k)){var A=S.getMouseInfo(E);k(A,E)}}),se(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&Op.emit(Rp,S.props.syncId,E,S.eventEmitterSymbol)}),se(S,"applySyncEvent",function(E){var k=S.props,A=k.layout,C=k.syncMethod,R=S.state.updateId,I=E.dataStartIndex,O=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState(G({dataStartIndex:I,dataEndIndex:O},g({props:S.props,dataStartIndex:I,dataEndIndex:O,updateId:R},S.state)));else if(E.activeTooltipIndex!==void 0){var j=E.chartX,M=E.chartY,U=E.activeTooltipIndex,L=S.state,B=L.offset,N=L.tooltipTicks;if(!B)return;if(typeof C=="function")U=C(N,E);else if(C==="value"){U=-1;for(var $=0;$<N.length;$++)if(N[$].value===E.activeLabel){U=$;break}}var F=G(G({},B),{},{x:B.left,y:B.top}),V=Math.min(j,F.x+F.width),q=Math.min(M,F.y+F.height),te=N[U]&&N[U].value,de=Ay(S.state,S.props.data,U),pe=N[U]?{x:A==="horizontal"?N[U].coordinate:V,y:A==="horizontal"?q:N[U].coordinate}:SO;S.setState(G(G({},E),{},{activeLabel:te,activeCoordinate:pe,activePayload:de,activeTooltipIndex:U}))}else S.setState(E)}),se(S,"renderCursor",function(E){var k,A=S.state,C=A.isTooltipActive,R=A.activeCoordinate,I=A.activePayload,O=A.offset,j=A.activeTooltipIndex,M=A.tooltipAxisBandSize,U=S.getTooltipEventType(),L=(k=E.props.active)!==null&&k!==void 0?k:C,B=S.props.layout,N=E.key||"_recharts-cursor";return D.createElement(Mce,{key:N,activeCoordinate:R,activePayload:I,activeTooltipIndex:j,chartName:n,element:E,isActive:L,layout:B,offset:O,tooltipAxisBandSize:M,tooltipEventType:U})}),se(S,"renderPolarAxis",function(E,k,A){var C=_n(E,"type.axisType"),R=_n(S.state,"".concat(C,"Map")),I=E.type.defaultProps,O=I!==void 0?G(G({},I),E.props):E.props,j=R&&R[O["".concat(C,"Id")]];return P.cloneElement(E,G(G({},j),{},{className:he(C,j.className),key:E.key||"".concat(k,"-").concat(A),ticks:ji(j,!0)}))}),se(S,"renderPolarGrid",function(E){var k=E.props,A=k.radialLines,C=k.polarAngles,R=k.polarRadius,I=S.state,O=I.radiusAxisMap,j=I.angleAxisMap,M=To(O),U=To(j),L=U.cx,B=U.cy,N=U.innerRadius,$=U.outerRadius;return P.cloneElement(E,{polarAngles:Array.isArray(C)?C:ji(U,!0).map(function(F){return F.coordinate}),polarRadius:Array.isArray(R)?R:ji(M,!0).map(function(F){return F.coordinate}),cx:L,cy:B,innerRadius:N,outerRadius:$,key:E.key||"polar-grid",radialLines:A})}),se(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,k=S.props,A=k.children,C=k.width,R=k.height,I=S.props.margin||{},O=C-(I.left||0)-(I.right||0),j=hI({children:A,formattedGraphicalItems:E,legendWidth:O,legendContent:u});if(!j)return null;var M=j.item,U=eT(j,$ce);return P.cloneElement(M,G(G({},U),{},{chartWidth:C,chartHeight:R,margin:I,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),se(S,"renderTooltip",function(){var E,k=S.props,A=k.children,C=k.accessibilityLayer,R=en(A,dr);if(!R)return null;var I=S.state,O=I.isTooltipActive,j=I.activeCoordinate,M=I.activePayload,U=I.activeLabel,L=I.offset,B=(E=R.props.active)!==null&&E!==void 0?E:O;return P.cloneElement(R,{viewBox:G(G({},L),{},{x:L.left,y:L.top}),active:B,label:U,payload:B?M:[],coordinate:j,accessibilityLayer:C})}),se(S,"renderBrush",function(E){var k=S.props,A=k.margin,C=k.data,R=S.state,I=R.offset,O=R.dataStartIndex,j=R.dataEndIndex,M=R.updateId;return P.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Yu(S.handleBrushChange,E.props.onChange),data:C,x:Y(E.props.x)?E.props.x:I.left,y:Y(E.props.y)?E.props.y:I.top+I.height+I.brushBottom-(A.bottom||0),width:Y(E.props.width)?E.props.width:I.width,startIndex:O,endIndex:j,updateId:"brush-".concat(M)})}),se(S,"renderReferenceElement",function(E,k,A){if(!E)return null;var C=S,R=C.clipPathId,I=S.state,O=I.xAxisMap,j=I.yAxisMap,M=I.offset,U=E.type.defaultProps||{},L=E.props,B=L.xAxisId,N=B===void 0?U.xAxisId:B,$=L.yAxisId,F=$===void 0?U.yAxisId:$;return P.cloneElement(E,{key:E.key||"".concat(k,"-").concat(A),xAxis:O[N],yAxis:j[F],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:R})}),se(S,"renderActivePoints",function(E){var k=E.item,A=E.activePoint,C=E.basePoint,R=E.childIndex,I=E.isRange,O=[],j=k.props.key,M=k.item.type.defaultProps!==void 0?G(G({},k.item.type.defaultProps),k.item.props):k.item.props,U=M.activeDot,L=M.dataKey,B=G(G({index:R,dataKey:L,cx:A.x,cy:A.y,r:4,fill:q0(k.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},ve(U,!1)),nd(U));return O.push(b.renderActiveDot(U,B,"".concat(j,"-activePoint-").concat(R))),C?O.push(b.renderActiveDot(U,G(G({},B),{},{cx:C.x,cy:C.y}),"".concat(j,"-basePoint-").concat(R))):I&&O.push(null),O}),se(S,"renderGraphicChild",function(E,k,A){var C=S.filterFormatItem(E,k,A);if(!C)return null;var R=S.getTooltipEventType(),I=S.state,O=I.isTooltipActive,j=I.tooltipAxis,M=I.activeTooltipIndex,U=I.activeLabel,L=S.props.children,B=en(L,dr),N=C.props,$=N.points,F=N.isRange,V=N.baseLine,q=C.item.type.defaultProps!==void 0?G(G({},C.item.type.defaultProps),C.item.props):C.item.props,te=q.activeDot,de=q.hide,pe=q.activeBar,Ie=q.activeShape,W=!!(!de&&O&&B&&(te||pe||Ie)),X={};R!=="axis"&&B&&B.props.trigger==="click"?X={onClick:Yu(S.handleItemMouseEnter,E.props.onClick)}:R!=="axis"&&(X={onMouseLeave:Yu(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Yu(S.handleItemMouseEnter,E.props.onMouseEnter)});var H=P.cloneElement(E,G(G({},C.props),X));function Z(dn){return typeof j.dataKey=="function"?j.dataKey(dn.payload):null}if(W)if(M>=0){var ie,z;if(j.dataKey&&!j.allowDuplicatedCategory){var Te=typeof j.dataKey=="function"?Z:"payload.".concat(j.dataKey.toString());ie=td($,Te,U),z=F&&V&&td(V,Te,U)}else ie=$==null?void 0:$[M],z=F&&V&&V[M];if(Ie||pe){var fe=E.props.activeIndex!==void 0?E.props.activeIndex:M;return[P.cloneElement(E,G(G(G({},C.props),X),{},{activeIndex:fe})),null,null]}if(!xe(ie))return[H].concat(Ma(S.renderActivePoints({item:C,activePoint:ie,basePoint:z,childIndex:M,isRange:F})))}else{var ke,J=(ke=S.getItemByXY(S.state.activeCoordinate))!==null&&ke!==void 0?ke:{graphicalItem:H},Me=J.graphicalItem,ee=Me.item,Oe=ee===void 0?E:ee,at=Me.childIndex,$t=G(G(G({},C.props),X),{},{activeIndex:at});return[P.cloneElement(Oe,$t),null,null]}return F?[H,null,null]:[H,null]}),se(S,"renderCustomized",function(E,k,A){return P.cloneElement(E,G(G({key:"recharts-customized-".concat(A)},S.props),S.state))}),se(S,"renderMap",{CartesianGrid:{handler:tc,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:tc},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:tc},YAxis:{handler:tc},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((_=w.id)!==null&&_!==void 0?_:su("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=fN(S.triggeredAfterMouseMove,(T=w.throttleDelay)!==null&&T!==void 0?T:1e3/60),S.state={},S}return Wce(b,v),zce(b,[{key:"componentDidMount",value:function(){var _,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,T=_.children,S=_.data,E=_.height,k=_.layout,A=en(T,dr);if(A){var C=A.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,I=Ay(this.state,S,C,R),O=this.state.tooltipTicks[C].coordinate,j=(this.state.offset.top+E)/2,M=k==="horizontal",U=M?{x:O,y:j}:{y:O,x:j},L=this.state.formattedGraphicalItems.find(function(N){var $=N.item;return $.type.name==="Scatter"});L&&(U=G(G({},U),L.props.points[C].tooltipPosition),I=L.props.points[C].tooltipPayload);var B={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:R,activePayload:I,activeCoordinate:U};this.setState(B),this.renderCursor(A),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(_){sg([en(_.children,dr)],[en(this.props.children,dr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=en(this.props.children,dr);if(_&&typeof _.props.shared=="boolean"){var T=_.props.shared?"axis":"item";return s.indexOf(T)>=0?T:o}return o}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var T=this.container,S=T.getBoundingClientRect(),E=vQ(S),k={chartX:Math.round(_.pageX-E.left),chartY:Math.round(_.pageY-E.top)},A=S.width/T.offsetWidth||1,C=this.inRange(k.chartX,k.chartY,A);if(!C)return null;var R=this.state,I=R.xAxisMap,O=R.yAxisMap,j=this.getTooltipEventType(),M=nT(this.state,this.props.data,this.props.layout,C);if(j!=="axis"&&I&&O){var U=To(I).scale,L=To(O).scale,B=U&&U.invert?U.invert(k.chartX):null,N=L&&L.invert?L.invert(k.chartY):null;return G(G({},k),{},{xValue:B,yValue:N},M)}return M?G(G({},k),M):null}},{key:"inRange",value:function(_,T){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,k=_/S,A=T/S;if(E==="horizontal"||E==="vertical"){var C=this.state.offset,R=k>=C.left&&k<=C.left+C.width&&A>=C.top&&A<=C.top+C.height;return R?{x:k,y:A}:null}var I=this.state,O=I.angleAxisMap,j=I.radiusAxisMap;if(O&&j){var M=To(O);return z1({x:k,y:A},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,T=this.getTooltipEventType(),S=en(_,dr),E={};S&&T==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=nd(this.props,this.handleOuterEvent);return G(G({},k),E)}},{key:"addListener",value:function(){Op.on(Rp,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Op.removeListener(Rp,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,T,S){for(var E=this.state.formattedGraphicalItems,k=0,A=E.length;k<A;k++){var C=E[k];if(C.item===_||C.props.key===_.key||T===xr(C.item.type)&&S===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,T=this.state.offset,S=T.left,E=T.top,k=T.height,A=T.width;return D.createElement("defs",null,D.createElement("clipPath",{id:_},D.createElement("rect",{x:S,y:E,height:k,width:A})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(T,S){var E=ZE(S,2),k=E[0],A=E[1];return G(G({},T),{},se({},k,A.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(T,S){var E=ZE(S,2),k=E[0],A=E[1];return G(G({},T),{},se({},k,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(_){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(_){var T=this.state,S=T.formattedGraphicalItems,E=T.activeItem;if(S&&S.length)for(var k=0,A=S.length;k<A;k++){var C=S[k],R=C.props,I=C.item,O=I.type.defaultProps!==void 0?G(G({},I.type.defaultProps),I.props):I.props,j=xr(I.type);if(j==="Bar"){var M=(R.data||[]).find(function(N){return iae(_,N)});if(M)return{graphicalItem:C,payload:M}}else if(j==="RadialBar"){var U=(R.data||[]).find(function(N){return z1(_,N)});if(U)return{graphicalItem:C,payload:U}}else if(fh(C,E)||hh(C,E)||ql(C,E)){var L=sse({graphicalItem:C,activeTooltipItem:E,itemData:O.data}),B=O.activeIndex===void 0?L:O.activeIndex;return{graphicalItem:G(G({},C),{},{childIndex:B}),payload:ql(C,E)?O.data[L]:C.props.data[L]}}}return null}},{key:"render",value:function(){var _=this;if(!R_(this))return null;var T=this.props,S=T.children,E=T.className,k=T.width,A=T.height,C=T.style,R=T.compact,I=T.title,O=T.desc,j=eT(T,Dce),M=ve(j,!1);if(R)return D.createElement(LE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement(ug,zo({},M,{width:k,height:A,title:I,desc:O}),this.renderClipPath(),$_(S,this.renderMap)));if(this.props.accessibilityLayer){var U,L;M.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,M.role=(L=this.props.role)!==null&&L!==void 0?L:"application",M.onKeyDown=function(N){_.accessibilityManager.keyboardEvent(N)},M.onFocus=function(){_.accessibilityManager.focus()}}var B=this.parseEventsOfWrapper();return D.createElement(LE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},D.createElement("div",zo({className:he("recharts-wrapper",E),style:G({position:"relative",cursor:"default",width:k,height:A},C)},B,{ref:function($){_.container=$}}),D.createElement(ug,zo({},M,{width:k,height:A,title:I,desc:O,style:Zce}),this.renderClipPath(),$_(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);se(y,"displayName",n),se(y,"defaultProps",G({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),se(y,"getDerivedStateFromProps",function(v,b){var w=v.dataKey,_=v.data,T=v.children,S=v.width,E=v.height,k=v.layout,A=v.stackOffset,C=v.margin,R=b.dataStartIndex,I=b.dataEndIndex;if(b.updateId===void 0){var O=rT(v);return G(G(G({},O),{},{updateId:0},g(G(G({props:v},O),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:_,prevWidth:S,prevHeight:E,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:T})}if(w!==b.prevDataKey||_!==b.prevData||S!==b.prevWidth||E!==b.prevHeight||k!==b.prevLayout||A!==b.prevStackOffset||!ea(C,b.prevMargin)){var j=rT(v),M={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},U=G(G({},nT(b,_,k)),{},{updateId:b.updateId+1}),L=G(G(G({},j),M),U);return G(G(G({},L),g(G({props:v},L),b)),{},{prevDataKey:w,prevData:_,prevWidth:S,prevHeight:E,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:T})}if(!sg(T,b.prevChildren)){var B,N,$,F,V=en(T,Ea),q=V&&(B=(N=V.props)===null||N===void 0?void 0:N.startIndex)!==null&&B!==void 0?B:R,te=V&&($=(F=V.props)===null||F===void 0?void 0:F.endIndex)!==null&&$!==void 0?$:I,de=q!==R||te!==I,pe=!xe(_),Ie=pe&&!de?b.updateId:b.updateId+1;return G(G({updateId:Ie},g(G(G({props:v},b),{},{updateId:Ie,dataStartIndex:q,dataEndIndex:te}),b)),{},{prevChildren:T,dataStartIndex:q,dataEndIndex:te})}return null}),se(y,"renderActiveDot",function(v,b,w){var _;return P.isValidElement(v)?_=P.cloneElement(v,b):me(v)?_=v(b):_=D.createElement(K0,b),D.createElement(Je,{className:"recharts-active-dot",key:w},_)});var x=P.forwardRef(function(b,w){return D.createElement(y,zo({},b,{ref:w}))});return x.displayName=y.displayName,x},cde=ude({chartName:"AreaChart",GraphicalChild:yi,axisComponents:[{axisType:"xAxis",AxisComp:Z0},{axisType:"yAxis",AxisComp:ex}],formatAxisMap:Mle});const dde=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[i,o]=P.useState(!1),[a,s]=P.useState(!1),[l,u]=P.useState(null),[c,d]=P.useState(null),[h,g]=P.useState(0),[y,x]=P.useState(2e3),[v,b]=P.useState(0),[w,_]=P.useState(!0),[T,S]=P.useState(""),E=async()=>{try{const O=await XA(),j=new Date().toISOString().split("T")[0],M=O.filter($=>$.date===j);M.sort(($,F)=>F.timestamp.localeCompare($.timestamp)),e(M),g(M.reduce(($,F)=>$+F.calories,0));const U=await Mv();x(U);const L=await $v();L!=null&&L.name&&S(L.name);const N=(await Sj()).slice(0,7).reverse().map($=>({cal:$.totalCalories}));for(;N.length<7;)N.unshift({cal:0});r(N)}catch(O){console.error("Failed to load dashboard data",O)}finally{_(!1)}};P.useEffect(()=>{E();const O=()=>E();return window.addEventListener("food-entry-updated",O),()=>window.removeEventListener("food-entry-updated",O)},[]),P.useEffect(()=>{if(w)return;const O=Math.min(h/y*100,100),j=setTimeout(()=>{b(O)},100);return()=>clearTimeout(j)},[h,y,w]);const k=async O=>{await QA(O),await E()},A=O=>{u(null),d(O),o(!0)},C=async O=>{await kf(O),x(O),s(!1)},R=()=>{const O=h/y*100;if(O>=100)return{background:"repeating-linear-gradient(45deg, #facc15, #facc15 12px, #171717 12px, #171717 24px)",boxShadow:"0 0 12px rgba(250, 204, 21, 0.4)"};if(O<=60)return{background:"#10b981",boxShadow:"0 0 12px rgba(16, 185, 129, 0.4)"};if(O<=80)return{background:`linear-gradient(90deg, #10b981 0%, #10b981 ${60/O*100}%, #facc15 100%)`,boxShadow:"0 0 12px rgba(250, 204, 21, 0.3)"};const j=60/O*100,M=80/O*100;return{background:`linear-gradient(90deg, #10b981 0%, #10b981 ${j}%, #facc15 ${M}%, #f97316 100%)`,boxShadow:"0 0 12px rgba(249, 115, 22, 0.3)"}},I=O=>{if(O.isManual)return O.imageUrl?m.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-amber-50 dark:bg-amber-950/20 text-amber-600 dark:text-amber-400 text-[10px] font-bold tracking-wide",children:[m.jsx(_M,{size:10}),"EDITED"]}):m.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 text-[10px] font-bold tracking-wide",children:[m.jsx(da,{size:10}),"MANUAL"]});const j=Math.round(O.confidence*100),M=j>80?"bg-emerald-50 dark:bg-emerald-950/20 text-emerald-600 dark:text-emerald-400":j>50?"bg-orange-50 dark:bg-orange-950/20 text-orange-600 dark:text-orange-400":"bg-rose-50 dark:bg-rose-950/20 text-rose-600 dark:text-rose-400";return m.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[10px] font-bold tracking-wide ${M}`,children:[m.jsx(vr,{size:10}),j,"% AI"]})};return m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in fade-in duration-500 overflow-hidden relative",children:[m.jsxs("div",{className:"flex-shrink-0 px-6 pt-10 space-y-8 pb-4",children:[m.jsxs("header",{className:"flex justify-between items-end",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),m.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:["Hello ",T||"there",", ",m.jsx("br",{}),"Let's Eat Well."]})]}),m.jsx("div",{className:"w-12 h-12 bg-royal-100 dark:bg-royal-950/30 rounded-full flex items-center justify-center text-royal-600 dark:text-royal-400 shadow-sm border border-white dark:border-white/5",children:m.jsx(hb,{size:20})})]}),m.jsxs("div",{className:`relative rounded-[32px] p-6 text-white overflow-hidden shadow-xl transition-all duration-500 ${h>y?"bg-red-500 shadow-red-200 dark:shadow-red-900/40":"bg-royal-600 shadow-royal-200 dark:shadow-royal-900/40"}`,children:[m.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),m.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-black/10 rounded-full blur-3xl"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-start mb-6",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-white/70 text-xs font-bold uppercase tracking-widest mb-1",children:"Calories Consumed"}),m.jsxs("div",{className:"flex items-baseline gap-1",children:[m.jsx("span",{className:"text-5xl font-bold tracking-tighter",children:w?"...":h}),m.jsx("span",{className:"text-lg text-white/60 font-medium",children:"kcal"})]})]}),m.jsx("div",{className:"text-right",children:m.jsxs("div",{className:"flex items-center justify-end gap-2 text-white/80 mb-1",children:[m.jsxs("span",{className:"text-xs font-semibold",children:["Goal: ",y]}),m.jsx("button",{onClick:()=>s(!0),className:"p-1.5 rounded-full bg-white/20 hover:bg-white/30 transition-colors backdrop-blur-sm",children:m.jsx(SA,{size:10})})]})})]}),m.jsx("div",{className:"w-full bg-black/20 rounded-full h-4 mb-3 overflow-hidden backdrop-blur-sm relative",children:m.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out will-change-[width] flex items-center justify-center overflow-hidden",style:{width:`${v}%`,...R()},children:h/y>=1&&m.jsx("span",{className:"text-[10px] font-black tracking-tighter text-white drop-shadow-md animate-pulse",children:"OVER LIMIT"})})}),m.jsx("div",{className:"flex justify-end",children:h>y?m.jsxs("div",{className:"flex items-center gap-1.5 bg-white/20 backdrop-blur-md px-3 py-1 rounded-full animate-pulse",children:[m.jsx(sM,{size:14,className:"text-white",fill:"white"}),m.jsxs("span",{className:"font-bold text-xs text-white",children:[Math.abs(y-h).toLocaleString()," kcal over limit"]})]}):m.jsxs("p",{className:"text-xs font-medium text-white/80",children:[Math.max(y-h,0).toLocaleString()," kcal remaining"]})})]})]}),m.jsxs(Ot,{className:"flex items-center justify-between p-4 overflow-hidden relative",children:[m.jsxs("div",{className:"z-10",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(Yo,{size:14,className:"text-royal-600 dark:text-royal-400"}),m.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"Weekly Trend"})]}),m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Consistent Tracking"})]}),m.jsx("div",{className:"absolute right-0 bottom-0 top-0 w-32 opacity-50 dark:opacity-30",children:m.jsx(dQ,{width:"100%",height:"100%",children:m.jsxs(cde,{data:n,children:[m.jsx("defs",{children:m.jsxs("linearGradient",{id:"colorCal",x1:"0",y1:"0",x2:"0",y2:"1",children:[m.jsx("stop",{offset:"5%",stopColor:"#7c3aed",stopOpacity:.3}),m.jsx("stop",{offset:"95%",stopColor:"#7c3aed",stopOpacity:0})]})}),m.jsx(yi,{type:"monotone",dataKey:"cal",stroke:"#7c3aed",strokeWidth:3,fillOpacity:1,fill:"url(#colorCal)"})]})})})]})]}),m.jsx("div",{className:"flex-shrink-0 px-6 mb-4",children:m.jsxs("div",{className:"flex items-center justify-between px-1",children:[m.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-50",children:"Recent Meals"}),m.jsxs("span",{className:"text-xs font-medium text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-white/5 px-2 py-1 rounded-lg",children:[t.length," items"]})]})}),m.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar px-6 pb-32",children:w?m.jsx("div",{className:"space-y-4",children:[1,2].map(O=>m.jsx("div",{className:"h-24 bg-white dark:bg-[#1a1c26] rounded-[32px] animate-pulse shadow-sm border border-white/5 dark:border-white/5"},O))}):t.length===0?m.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#1a1c26] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:[m.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-300 dark:text-gray-700",children:m.jsx(hb,{size:24})}),m.jsx("p",{className:"text-gray-400 dark:text-gray-500 font-medium mb-1",children:"No meals tracked today."}),m.jsx("p",{className:"text-xs text-gray-300 dark:text-gray-700",children:"Tap the + button to add one."})]}):m.jsx("div",{className:"space-y-4",children:t.map(O=>m.jsxs(Ot,{className:"flex gap-4 items-center p-4 group",onClick:()=>u(O),children:[m.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-white/5 rounded-2xl overflow-hidden flex-shrink-0 shadow-inner",children:O.imageUrl?m.jsx("img",{src:O.imageUrl,alt:O.food_item,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 dark:text-gray-700",children:m.jsx(da,{size:20})})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:"flex items-center gap-2 mb-1",children:m.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 truncate text-base",children:O.food_item})}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("p",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500",children:O.time}),I(O)]})]}),m.jsxs("div",{className:"text-right pl-2",children:[m.jsx("span",{className:"block font-extrabold text-gray-900 dark:text-gray-50 text-lg",children:O.calories}),m.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase",children:"kcal"})]})]},O.id))})}),m.jsx("button",{onClick:()=>{d(null),o(!0)},className:"absolute bottom-28 right-6 w-16 h-16 bg-royal-600 text-white rounded-[24px] shadow-[0_12px_24px_-6px_rgba(124,58,237,0.5)] flex items-center justify-center hover:scale-105 hover:bg-royal-700 active:scale-95 transition-all z-[60]",children:m.jsx(Sv,{size:32,strokeWidth:2.5})}),i&&m.jsx(QC,{editEntry:c,onClose:()=>{o(!1),d(null)},onSuccess:()=>{o(!1),d(null),E()}}),a&&m.jsx(QB,{currentGoal:y,onClose:()=>s(!1),onSave:C}),l&&m.jsx(ig,{entry:l,onClose:()=>u(null),onDelete:k,onEdit:A})]})},fde=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",hde=()=>{const t=fde();return new KC({apiKey:t})},pde=`You are **Cal Coach**, an AI fitness and nutrition coach. Your mission is to provide simple, actionable advice to help users reach their goals.

**Core Principles:**
1. **Keep it Simple:** Use short, clear sentences. No jargon or complicated explanations.
2. **Focus on What Matters:** Only highlight the most important insights and actions.
3. **Be Encouraging:** Always stay positive and supportive, even when pointing out areas for improvement.
4. **Card-Friendly Format:** Structure responses to be visually scannable with emojis, bullet points, and short sections.

**Response Guidelines:**

When analyzing nutrition:
- Start with a simple status emoji ( Good /  Needs Work /  Excellent)
- Show only the most critical metrics (Calories, Protein)
- Use 2-3 bullet points max for observation
- Give 2-3 actionable next steps
- Keep total response under 150 words

When providing plans (workout/meal):
- Use simple bullet format, not complex tables
- Show only key exercises or meals (3-5 items max)
- Include specific numbers (reps, grams, servings)
- Add emoji indicators for visual appeal

When answering questions:
- Answer directly in 2-3 sentences
- Add one practical example if needed
- No lengthy explanations

**Formatting Style:**
 **Status**
Brief one-line summary

**Key Points:**
 Point 1 with number
 Point 2 with number
 Point 3 with number

**Action Steps:**
1. Simple action
2. Simple action

**Never:**
- Use complex tables with multiple columns
- Write long paragraphs
- Include technical disclaimers (assume user knows to consult doctors)
- Use phases like "Phase 1", "Phase 2"
- Repeat the user's data back to them

**Context Provided:**
You will receive user profile data and recent food tracking history in each message. Use this to provide personalized analysis and recommendations.`,TO=async()=>{try{const t={},e=await $v();e&&(t.userName=e.name,t.height=e.height,t.weight=e.weight,t.age=e.age,t.gender=e.gender,t.activityLevel=e.activityLevel,t.goal=e.goal,t.equipmentAccess=e.equipmentAccess);const n=await Mv();t.dailyGoal=n;const r=await xj(),i=new Date().toISOString().split("T")[0],o=r.filter(s=>s.date===i);t.todayCalories=o.reduce((s,l)=>s+l.calories,0),t.todayProtein=o.reduce((s,l)=>s+l.protein,0),t.todayCarbs=o.reduce((s,l)=>s+l.carbs,0),t.todayFat=o.reduce((s,l)=>s+l.fat,0);const a=new Map;return r.forEach(s=>{a.has(s.date)||a.set(s.date,[]),a.get(s.date).push(s)}),t.recentEntries=Array.from(a.entries()).slice(0,7).map(([s,l])=>({date:s,totalCalories:l.reduce((u,c)=>u+c.calories,0),totalProtein:l.reduce((u,c)=>u+c.protein,0),totalCarbs:l.reduce((u,c)=>u+c.carbs,0),totalFat:l.reduce((u,c)=>u+c.fat,0),entryCount:l.length})),t}catch(t){return console.error("Failed to build coach context:",t),{}}},mde=t=>{let e=`**User Profile & Current Data:**

`;return t.userName&&(e+=`- Name: ${t.userName}
`),t.height&&(e+=`- Height: ${t.height} cm
`),t.weight&&(e+=`- Weight: ${t.weight} kg
`),t.age&&(e+=`- Age: ${t.age} years
`),t.gender&&(e+=`- Gender: ${t.gender.charAt(0).toUpperCase()+t.gender.slice(1)}
`),t.activityLevel&&(e+=`- Activity Level: ${{sedentary:"Sedentary",light:"Lightly Active",moderate:"Moderately Active",very:"Very Active",extra:"Extra Active"}[t.activityLevel]}
`),t.goal&&(e+=`- Goal: ${{cut:"Cut (Lose Fat)",bulk:"Bulk (Gain Muscle)",maintain:"Maintain"}[t.goal]}
`),t.equipmentAccess&&(e+=`- Equipment: ${{gym:"Gym Access",home:"Home Equipment",bodyweight:"Bodyweight Only"}[t.equipmentAccess]}
`),t.dailyGoal&&(e+=`- Daily Calorie Goal: ${t.dailyGoal} kcal
`),e+=`
**Today's Nutrition (${new Date().toLocaleDateString()}):**
`,e+=`- Calories: ${t.todayCalories||0} kcal
`,e+=`- Protein: ${t.todayProtein||0}g
`,e+=`- Carbs: ${t.todayCarbs||0}g
`,e+=`- Fat: ${t.todayFat||0}g
`,t.recentEntries&&t.recentEntries.length>0&&(e+=`
**Last 7 Days Summary:**
`,t.recentEntries.forEach(n=>{e+=`
${n.date}:
`,e+=`  - ${n.totalCalories} kcal | Protein: ${n.totalProtein}g | Carbs: ${n.totalCarbs}g | Fat: ${n.totalFat}g | Meals: ${n.entryCount}
`})),e+=`
---

`,e},$p=async(t,e)=>{try{const n=hde(),r=await TO(),i=e.slice(-4).map(s=>`${s.role==="user"?"User":"Coach"}: ${s.content}`).join(`

`),o=`${mde(r)}${i?`**Recent Conversation:**
${i}

`:""}**User's Current Message:**
${t}`;return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{parts:[{text:o}]}],config:{systemInstruction:pde,temperature:.7,topP:.95}})).text||"I apologize, but I couldn't generate a response. Please try again."}catch(n){console.error("Coach message error:",n);const r=(n==null?void 0:n.message)||String(n);throw r.includes("429")||r.toLowerCase().includes("quota")?new Error("Rate limit reached. Please wait a moment and try again."):r.toLowerCase().includes("api key")?new Error("Configuration error. Please check your API settings."):new Error("Failed to get coach response. Please try again.")}},gde=t=>{t.toLowerCase();const e=/\b(workout|exercise|training|routine|fitness|gym)\b/i.test(t),n=/day\s+\d+:/i.test(t),r=/\d+\s*(sets?|reps?|x)/i.test(t)||/sets?:\s*\d+/i.test(t)||/\d+\s*x\s*\d+/i.test(t),i=/(push-?up|pull-?up|squat|deadlift|bench\s+press|plank|lunge|curl|press|row)/i.test(t);return e&&(r||n||i)},oT=t=>{const e=[];let n="AI Workout Plan";const r=t.match(/(?:^|\n)(?:##?\s*)?([A-Z][\w\s&]+(?:Day|Workout|Training|Routine))/i);r&&(n=r[1].trim());const i=t.split(`
`).map(o=>o.trim());for(let o=0;o<i.length;o++){const a=i[o];if(!a||a.startsWith("#")||a.startsWith("**Action")||a.startsWith("**Key"))continue;let s="",l=3,u="10",c="60s",d=a.replace(/^[\-\*]\s*/,"").replace(/^\d+\.\s*/,"");const h=d.match(/(\d+)\s*(?:sets?|x)/i)||d.match(/sets?:\s*(\d+)/i);h&&(l=parseInt(h[1]));const g=d.match(/(\d+(?:-\d+)?)\s*reps?/i)||d.match(/reps?:\s*(\d+(?:-\d+)?)/i);if(g)u=g[1];else{const v=d.match(/\dx(\d+(?:-\d+)?)/i);v&&(u=v[1])}const y=d.match(/(\d+(?:s|sec|seconds?|min|minutes?))/i)||d.match(/rest:\s*(\d+(?:s|sec|min)?)/i);y&&(c=y[1].toLowerCase().replace("seconds","s").replace("sec","s").replace("minutes","min").replace("minute","min"));const x=d.match(/^([A-Za-z][\w\s\-'()]+?)(?:\s*[-:|]|\s+\d)/);x?s=x[1].trim():/^[A-Za-z][\w\s\-'()]+$/.test(d)&&d.length<50&&(s=d),s&&!s.match(/^(sets?|reps?|rest|action|next|step)/i)&&e.push({id:`ex-${Date.now()}-${e.length}`,name:s,sets:l,reps:u,rest:c,completed:!1})}return{title:n,exercises:e}},yde=t=>{const e=/Day\s+(\d+):?\s*(.+?)(?=Day\s+\d+:|$)/gis,n=Array.from(t.matchAll(e));if(n.length<2){const{title:i,exercises:o}=oT(t);return{isMultiDay:!1,days:[{dayNumber:1,title:i,exercises:o,isRestDay:o.length===0}]}}const r=n.map(i=>{const o=parseInt(i[1]),a=i[2].trim(),s=/^(rest|recovery|off)\s*$/i.test(a)||a.toLowerCase().includes("rest day"),l=a.match(/repeat\s+day\s+(\d+)/i);if(s)return{dayNumber:o,title:"Rest Day",exercises:[],isRestDay:!0};if(l)return{dayNumber:o,title:a,exercises:[],isRestDay:!1,repeatsDayNumber:parseInt(l[1])};const{title:u,exercises:c}=oT(a);return{dayNumber:o,title:u==="AI Workout Plan"?a.split(`
`)[0]:u,exercises:c,isRestDay:c.length===0}});return r.forEach(i=>{if(i.repeatsDayNumber){const o=i.repeatsDayNumber,a=r.find(s=>s.dayNumber===o);a&&(i.title=a.title,i.exercises=a.exercises.map(s=>({...s,id:`ex-${Date.now()}-${Math.random()}`}))),delete i.repeatsDayNumber}}),{isMultiDay:!0,days:r}},vde=({isOpen:t,onClose:e,workoutText:n})=>{const[r,i]=P.useState(new Date().toISOString().split("T")[0]),[o,a]=P.useState(!1),[s,l]=P.useState(null);if(P.useEffect(()=>{if(t&&n){const x=yde(n);l(x)}},[t,n]),!t)return null;const u=async()=>{if(s){a(!0);try{await Rj(r,s.days);const x=s.days.length,v=s.isMultiDay?`${x}-day`:"single-day";alert(`${v} workout plan saved successfully! Go check it out in the Workout Plan page.`),e()}catch(x){console.error("Failed to save workout:",x),alert("Failed to save workout plan")}finally{a(!1)}}},c=()=>{if(!s||!s.isMultiDay)return null;const x=new Date(r),v=new Date(x);return v.setDate(v.getDate()+s.days.length-1),v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d=new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),h=c(),g=(s==null?void 0:s.days.length)||0,y=(s==null?void 0:s.isMultiDay)||!1;return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:m.jsxs(Ot,{className:"w-full max-w-md animate-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[m.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Save Workout Plan"}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:m.jsx(Tr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[y&&m.jsxs("div",{className:"p-4 bg-royal-50 dark:bg-royal-950/20 border-2 border-royal-200 dark:border-royal-800/50 rounded-xl",children:[m.jsxs("p",{className:"text-sm font-bold text-royal-900 dark:text-royal-100 mb-1",children:[" ",g,"-Day Workout Plan"]}),m.jsxs("p",{className:"text-xs text-royal-700 dark:text-royal-300",children:["Will be saved from ",m.jsx("strong",{children:d})," to ",m.jsx("strong",{children:h})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:y?"Choose Start Date":"Choose Date"}),m.jsx("input",{type:"date",value:r,onChange:x=>i(x.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"}),m.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:y?`Select the first day of your ${g}-day plan`:"Select which day you want to use this workout plan"})]})]}),m.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[m.jsx("button",{onClick:e,disabled:o,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),m.jsxs("button",{onClick:u,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:[m.jsx(Ev,{size:18}),m.jsx("span",{children:o?"Saving...":y?`Save ${g}-Day Plan`:"Save Plan"})]})]})]})})},xde=({onNavigate:t})=>{const[e,n]=P.useState([]),[r,i]=P.useState(""),[o,a]=P.useState(!1),[s,l]=P.useState(null),[u,c]=P.useState(!1),[d,h]=P.useState(new Set),[g,y]=P.useState(!1),[x,v]=P.useState(!0),[b,w]=P.useState(!1),[_,T]=P.useState(""),S=P.useRef(null),E=P.useRef(null),k=P.useRef(null),A=M=>!!(M.activityLevel&&M.goal&&M.equipmentAccess);P.useEffect(()=>{(async()=>{const U=await TO();if(l(U),!A(U)){c(!0);return}await Ij();const L=new Date().toISOString().split("T")[0],B=await Nj();if(B.length>0)n(B),h(new Set([L]));else{const N={id:"welcome",role:"assistant",content:` **Hi ${U.userName||"there"}! I'm Cal Coach.**

How can I help you today?`,timestamp:Date.now()};n([N])}})()},[]),P.useEffect(()=>{var M;(M=S.current)==null||M.scrollIntoView({behavior:"smooth"})},[e]);const C=async()=>{var U;if(!r.trim()||o)return;const M={id:`user-${Date.now()}`,role:"user",content:r,timestamp:Date.now()};n(L=>[...L,M]),i(""),a(!0),vo(M).catch(L=>console.error("Failed to save user message:",L));try{const L=await $p(r,e),B={id:`assistant-${Date.now()}`,role:"assistant",content:L,timestamp:Date.now()};n(N=>[...N,B]),vo(B).catch(N=>console.error("Failed to save assistant message:",N))}catch(L){const B={id:`error-${Date.now()}`,role:"assistant",content:` ${L.message||"Failed to get response. Please try again."}`,timestamp:Date.now()};n(N=>[...N,B])}finally{a(!1),(U=E.current)==null||U.focus()}},R=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),C())},I=()=>{t(Ce.PROFILE)},O=async()=>{if(!(g||!x)){y(!0);try{const U=Array.from(d).sort()[0];if(!U){v(!1);return}const L=new Date(U);L.setDate(L.getDate()-1);const B=L.toISOString().split("T")[0],N=new Date().toISOString().split("T")[0];if(Math.floor((new Date(N).getTime()-new Date(B).getTime())/(1e3*60*60*24))>=7){v(!1);return}const F=await tC(B);F.length>0?(n(V=>[...F,...V]),h(V=>new Set([...V,B]))):h(V=>new Set([...V,B]))}catch(M){console.error("Failed to load previous day messages:",M)}finally{y(!1)}}},j=()=>{const M=k.current;M&&M.scrollTop<50&&!g&&x&&O()};return u?m.jsx("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:m.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:m.jsxs(Ot,{className:"p-8 max-w-md w-full relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-royal-100 dark:bg-royal-950/20 rounded-full blur-3xl"}),m.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-32 h-32 bg-royal-100 dark:bg-royal-950/20 rounded-full blur-3xl"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-lg mx-auto mb-6",children:m.jsx(fb,{size:32})}),m.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-gray-50 text-center mb-3",children:"Set Your Training Goals"}),m.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6 leading-relaxed",children:["To provide you with personalized AI coaching, please complete your"," ",m.jsx("span",{className:"font-bold text-royal-600 dark:text-royal-400",children:"Training Goal Setting"})," ","in your Profile."]}),m.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-4 mb-6",children:[m.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-3",children:"We need to know:"}),m.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),m.jsx("span",{children:"Your activity level (sedentary to extra active)"})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),m.jsx("span",{children:"Your fitness goal (cut, bulk, or maintain)"})]}),m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),m.jsx("span",{children:"Your equipment access (gym, home, or bodyweight)"})]})]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:I,className:"w-full flex items-center justify-center gap-2 py-4 bg-royal-600 hover:bg-royal-700 text-white rounded-[20px] font-bold transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[m.jsx(fb,{size:20}),m.jsx("span",{children:"Go to Profile"}),m.jsx(Fc,{size:20})]}),m.jsx("button",{onClick:()=>c(!1),className:"w-full py-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 rounded-[20px] font-semibold transition-all text-sm",children:"I'll do this later"})]})]})]})})}):m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:[m.jsxs("header",{className:"flex justify-between items-end mb-6 flex-shrink-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"Your Personal Coach"}),m.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:"Cal Coach"})]}),m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-sm",children:m.jsx(vr,{size:20})})]}),m.jsxs("div",{ref:k,onScroll:j,className:"flex-1 overflow-y-auto space-y-4 mb-4 no-scrollbar",children:[g&&m.jsx("div",{className:"flex justify-center py-3 animate-in fade-in duration-300",children:m.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 text-sm",children:[m.jsx(Kh,{size:14,className:"animate-spin"}),m.jsx("span",{children:"Loading earlier messages..."})]})}),!g&&x&&e.length>0&&d.size>0&&m.jsx("div",{className:"flex justify-center py-2",children:m.jsx("button",{onClick:O,className:"text-xs text-gray-400 dark:text-gray-500 hover:text-royal-600 dark:hover:text-royal-400 transition-colors",children:" Load previous day"})}),e.map(M=>m.jsx("div",{className:`flex ${M.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:m.jsx("div",{className:`max-w-[85%] ${M.role==="user"?"bg-royal-600 text-white rounded-[24px] px-5 py-3 shadow-lg":""}`,children:M.role==="assistant"?m.jsxs("div",{children:[m.jsx(Ot,{className:"p-5",children:m.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:m.jsx("div",{className:"text-gray-800 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:M.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}})})}),gde(M.content)&&m.jsxs("button",{onClick:()=>{T(M.content),w(!0)},className:"mt-3 flex items-center gap-2 px-4 py-2 bg-royal-600 hover:bg-royal-700 text-white text-sm font-semibold rounded-xl transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[m.jsx(Ev,{size:16}),m.jsx("span",{children:"Save as Workout Plan"})]})]}):m.jsx("p",{className:"text-sm font-medium leading-relaxed",children:M.content})})},M.id)),e.length===1&&e[0].id==="welcome"&&!o&&m.jsx("div",{className:"grid grid-cols-1 gap-3 mt-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-300",children:[{title:"Analyze Nutrition",desc:"Get insights on your recent eating habits",icon:"",text:"Analyze my recent nutrition",color:"from-blue-500/30 to-royal-500/30",baseBg:"bg-blue-50/40 dark:bg-blue-900/10",iconBg:"bg-blue-100 dark:bg-blue-900/40",iconBorder:"border-blue-200 dark:border-blue-700/50"},{title:"Workout Plan",desc:"Create a personalized fitness routine",icon:"",text:"Create a workout plan for me",color:"from-royal-500/30 to-indigo-500/30",baseBg:"bg-royal-50/40 dark:bg-royal-950/20",iconBg:"bg-royal-100 dark:bg-royal-950/40",iconBorder:"border-royal-200 dark:border-royal-700/50"},{title:"Calculate TDEE",desc:"Find out your daily energy expenditure",icon:"",text:"Calculate my TDEE",color:"from-orange-500/30 to-royal-500/30",baseBg:"bg-orange-50/40 dark:bg-orange-900/10",iconBg:"bg-orange-100 dark:bg-orange-900/40",iconBorder:"border-orange-200 dark:border-orange-700/50"},{title:"Macro Targets",desc:"Set optimal protein, carb, and fat goals",icon:"",text:"Help me set macro targets",color:"from-violet-500/30 to-fuchsia-500/30",baseBg:"bg-violet-50/40 dark:bg-violet-900/10",iconBg:"bg-violet-100 dark:bg-violet-900/40",iconBorder:"border-violet-200 dark:border-violet-700/50"}].map((M,U)=>m.jsxs("button",{onClick:()=>{(async B=>{if(o)return;const N={id:`user-${Date.now()}`,role:"user",content:B,timestamp:Date.now()};n($=>[...$,N]),a(!0),vo(N).catch($=>console.error("Failed to save user message:",$));try{const $=await $p(B,e),F={id:`assistant-${Date.now()}`,role:"assistant",content:$,timestamp:Date.now()};n(V=>[...V,F]),vo(F).catch(V=>console.error("Failed to save assistant message:",V))}catch($){const F={id:`error-${Date.now()}`,role:"assistant",content:` ${$.message||"Failed to get response."}`,timestamp:Date.now()};n(V=>[...V,F])}finally{a(!1)}})(M.text)},className:`flex items-center gap-4 p-4 ${M.baseBg} border-2 border-gray-100 dark:border-white/10 rounded-2xl hover:border-royal-500 dark:hover:border-royal-400 hover:shadow-xl hover:shadow-royal-500/10 transition-all text-left group active:scale-[0.98] relative overflow-hidden`,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${M.color} opacity-0 group-hover:opacity-100 transition-opacity`}),m.jsx("div",{className:`relative z-10 w-12 h-12 ${M.iconBg} ${M.iconBorder} border rounded-xl flex items-center justify-center text-2xl group-hover:scale-110 transition-transform shadow-sm group-hover:shadow-md`,children:M.icon}),m.jsxs("div",{className:"relative z-10 flex-1",children:[m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 text-sm tracking-tight",children:M.title}),m.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-0.5 font-semibold opacity-80",children:M.desc})]}),m.jsx("div",{className:"relative z-10 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 dark:bg-white/10 group-hover:bg-royal-500 group-hover:text-white transition-all shadow-sm",children:m.jsx(Fc,{size:16,className:"text-gray-400 dark:text-gray-500 group-hover:text-white group-hover:translate-x-0.5 transition-all"})})]},U))}),o&&m.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:m.jsx(Ot,{className:"p-5",children:m.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[m.jsx(Kh,{size:16,className:"animate-spin"}),m.jsx("span",{className:"text-sm",children:"Coach is thinking..."})]})})}),m.jsx("div",{ref:S})]}),e.length>1&&!o&&m.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 px-1 no-scrollbar animate-in fade-in slide-in-from-bottom-2 duration-500",children:[{title:"Analyze Nutrition",icon:"",text:"Analyze my recent nutrition",color:"from-blue-500/30 to-royal-500/30",baseBg:"bg-blue-50/40 dark:bg-blue-900/10",iconBg:"bg-blue-100 dark:bg-blue-900/40",iconBorder:"border-blue-200 dark:border-blue-700/50"},{title:"Workout Plan",icon:"",text:"Create a workout plan for me",color:"from-royal-500/30 to-indigo-500/30",baseBg:"bg-royal-50/40 dark:bg-royal-950/20",iconBg:"bg-royal-100 dark:bg-royal-950/40",iconBorder:"border-royal-200 dark:border-royal-700/50"},{title:"Calculate TDEE",icon:"",text:"Calculate my TDEE",color:"from-orange-500/30 to-royal-500/30",baseBg:"bg-orange-50/40 dark:bg-orange-900/10",iconBg:"bg-orange-100 dark:bg-orange-900/40",iconBorder:"border-orange-200 dark:border-orange-700/50"},{title:"Macro Targets",icon:"",text:"Help me set macro targets",color:"from-violet-500/30 to-fuchsia-500/30",baseBg:"bg-violet-50/40 dark:bg-violet-900/10",iconBg:"bg-violet-100 dark:bg-violet-900/40",iconBorder:"border-violet-200 dark:border-violet-700/50"}].map((M,U)=>m.jsxs("button",{onClick:()=>{(async B=>{if(o)return;const N={id:`user-${Date.now()}`,role:"user",content:B,timestamp:Date.now()};n($=>[...$,N]),a(!0),vo(N).catch($=>console.error("Failed to save user message:",$));try{const $=await $p(B,e),F={id:`assistant-${Date.now()}`,role:"assistant",content:$,timestamp:Date.now()};n(V=>[...V,F]),vo(F).catch(V=>console.error("Failed to save assistant message:",V))}catch($){const F={id:`error-${Date.now()}`,role:"assistant",content:` ${$.message||"Failed to get response."}`,timestamp:Date.now()};n(V=>[...V,F])}finally{a(!1)}})(M.text)},className:`flex flex-shrink-0 items-center gap-3 p-3 min-w-[180px] ${M.baseBg} border-2 border-gray-100 dark:border-white/10 rounded-2xl hover:border-royal-500 dark:hover:border-royal-400 transition-all text-left group active:scale-[0.98] relative overflow-hidden`,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${M.color} opacity-0 group-hover:opacity-100 transition-opacity`}),m.jsx("div",{className:`relative z-10 w-10 h-10 ${M.iconBg} ${M.iconBorder} border rounded-xl flex items-center justify-center text-xl group-hover:scale-110 transition-transform shadow-sm`,children:M.icon}),m.jsx("div",{className:"relative z-10 flex-1",children:m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 text-xs tracking-tight leading-tight",children:M.title})})]},U))}),m.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-[#1a1c26] rounded-[24px] p-3 shadow-diffused dark:shadow-diffused-dark border border-gray-100 dark:border-white/5",children:m.jsxs("div",{className:"flex gap-2 items-end",children:[m.jsx("textarea",{ref:E,value:r,onChange:M=>i(M.target.value),onKeyDown:R,placeholder:"Ask your coach anything...",className:"flex-1 bg-transparent text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 resize-none outline-none text-sm min-h-[40px] max-h-[120px] py-2 px-3",rows:1,disabled:o}),m.jsx("button",{onClick:C,disabled:!r.trim()||o,className:"flex-shrink-0 w-10 h-10 bg-royal-600 text-white rounded-[16px] flex items-center justify-center hover:bg-royal-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:o?m.jsx(Kh,{size:18,className:"animate-spin"}):m.jsx(kM,{size:18})})]})}),m.jsx(vde,{isOpen:b,onClose:()=>w(!1),workoutText:_})]})},bde=({isOpen:t,onClose:e,defaultDate:n,onSave:r})=>{const[i,o]=P.useState(""),[a,s]=P.useState(n.toISOString().split("T")[0]),[l,u]=P.useState([{name:"",sets:3,reps:"10",rest:"60s"}]),[c,d]=P.useState(!1);if(!t)return null;const h=()=>{u([...l,{name:"",sets:3,reps:"10",rest:"60s"}])},g=v=>{u(l.filter((b,w)=>w!==v))},y=(v,b,w)=>{const _=[...l];_[v]={..._[v],[b]:w},u(_)},x=async()=>{if(!i.trim()){alert("Please enter a workout title");return}const v=l.filter(b=>b.name.trim());if(v.length===0){alert("Please add at least one exercise");return}d(!0);try{const b=v.map((w,_)=>({...w,id:`ex-${Date.now()}-${_}`,completed:!1}));await Kc(a,i,b),o(""),u([{name:"",sets:3,reps:"10",rest:"60s"}]),s(n.toISOString().split("T")[0]),r==null||r(),e()}catch(b){console.error("Failed to save workout:",b),alert("Failed to save workout plan")}finally{d(!1)}};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:m.jsxs(Ot,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[m.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Create Workout Plan"}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:m.jsx(Tr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Workout Title"}),m.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"e.g., Chest & Triceps, Leg Day",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),m.jsx("input",{type:"date",value:a,onChange:v=>s(v.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Exercises"}),m.jsxs("button",{onClick:h,className:"flex items-center gap-1 px-3 py-1.5 bg-royal-600 hover:bg-royal-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[m.jsx(Sv,{size:16}),m.jsx("span",{children:"Add Exercise"})]})]}),m.jsx("div",{className:"space-y-4",children:l.map((v,b)=>m.jsx("div",{className:"p-4 bg-gray-50 dark:bg-white/5 rounded-xl border-2 border-gray-100 dark:border-white/5",children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsxs("div",{className:"flex-1 space-y-3",children:[m.jsx("input",{type:"text",value:v.name,onChange:w=>y(b,"name",w.target.value),placeholder:"Exercise name",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"}),m.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Sets"}),m.jsx("input",{type:"number",value:v.sets,onChange:w=>y(b,"sets",parseInt(w.target.value)||0),min:"1",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Reps"}),m.jsx("input",{type:"text",value:v.reps,onChange:w=>y(b,"reps",w.target.value),placeholder:"8-10",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Rest"}),m.jsx("input",{type:"text",value:v.rest,onChange:w=>y(b,"rest",w.target.value),placeholder:"60s",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]})]})]}),l.length>1&&m.jsx("button",{onClick:()=>g(b),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg transition-colors",children:m.jsx(xf,{size:18})})]})},b))})]})]}),m.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[m.jsx("button",{onClick:e,disabled:c,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),m.jsx("button",{onClick:x,disabled:c,className:"px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:c?"Saving...":"Save Workout"})]})]})})},wde=({isOpen:t,onClose:e,exercise:n,onSave:r})=>{const[i,o]=P.useState(""),[a,s]=P.useState(3),[l,u]=P.useState("10"),[c,d]=P.useState("60s"),[h,g]=P.useState(!1);if(P.useEffect(()=>{n&&(o(n.name),s(n.sets),u(n.reps),d(n.rest))},[n]),!t||!n)return null;const y=async()=>{if(!i.trim()){alert("Please enter an exercise name");return}g(!0);const x={...n,name:i.trim(),sets:a,reps:l.trim(),rest:c.trim()};r(x),g(!1)};return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:m.jsxs(Ot,{className:"w-full max-w-md animate-in zoom-in-95 duration-300",children:[m.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[m.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Edit Exercise"}),m.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:m.jsx(Tr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),m.jsxs("div",{className:"p-6 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Exercise Name"}),m.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"e.g., Bench Press",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Sets"}),m.jsx("input",{type:"number",value:a,onChange:x=>s(parseInt(x.target.value)||0),min:"1",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Reps"}),m.jsx("input",{type:"text",value:l,onChange:x=>u(x.target.value),placeholder:"8-10",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Rest"}),m.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),placeholder:"60s",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]})]})]}),m.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[m.jsx("button",{onClick:e,disabled:h,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),m.jsxs("button",{onClick:y,disabled:h,className:"flex items-center gap-2 px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:[m.jsx(Ev,{size:18}),m.jsx("span",{children:h?"Saving...":"Save Changes"})]})]})]})})},_de=({onNavigate:t})=>{const[e,n]=P.useState(new Date),[r,i]=P.useState(new Date),[o,a]=P.useState(null),[s,l]=P.useState(new Set),[u,c]=P.useState(!1),[d,h]=P.useState(!1),[g,y]=P.useState(null),[x,v]=P.useState(!1),b=async()=>{const N=e.getFullYear(),$=e.getMonth()+1,F=await Ub(N,$);l(new Set(F));const V=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,q=await Lb(V);a(q)};P.useEffect(()=>{(async()=>{const $=e.getFullYear(),F=e.getMonth()+1,V=await Ub($,F);l(new Set(V))})()},[e]),P.useEffect(()=>{(async()=>{c(!0);const $=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,F=await Lb($);a(F),c(!1)})()},[r]);const _=(()=>{const N=e.getFullYear(),$=e.getMonth(),F=new Date(N,$,1),V=new Date(N,$+1,0),q=F.getDay(),te=V.getDate(),de=[];for(let pe=0;pe<q;pe++)de.push(null);for(let pe=1;pe<=te;pe++)de.push(new Date(N,$,pe));return de})(),T=new Date;T.setHours(0,0,0,0);const S=(N,$)=>N.getFullYear()===$.getFullYear()&&N.getMonth()===$.getMonth()&&N.getDate()===$.getDate(),E=()=>{n(new Date(e.getFullYear(),e.getMonth()-1))},k=()=>{n(new Date(e.getFullYear(),e.getMonth()+1))},A=N=>{i(N)},C=N=>{o&&a({...o,exercises:o.exercises.map($=>$.id===N?{...$,completed:!$.completed}:$)})},R=N=>{y(N),v(!0)},I=async N=>{if(o&&confirm("Are you sure you want to delete this exercise?")){const $=o.exercises.filter(V=>V.id!==N);a({...o,exercises:$});const F=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;await Kc(F,o.title,$)}},O=async N=>{if(!o)return;const $=o.exercises.map(V=>V.id===N.id?N:V);a({...o,exercises:$});const F=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;await Kc(F,o.title,$),v(!1),y(null)},j=(o==null?void 0:o.exercises.filter(N=>N.completed).length)||0,M=(o==null?void 0:o.exercises.length)||0,U=M>0?j/M*100:0,L=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],B=["January","February","March","April","May","June","July","August","September","October","November","December"];return m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:[m.jsxs("header",{className:"flex justify-between items-end mb-6 flex-shrink-0",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"Your Training Schedule"}),m.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:"Workout Plan"})]}),m.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-sm",children:m.jsx(Gc,{size:20})})]}),m.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 no-scrollbar",children:[m.jsxs(Ot,{className:"p-6",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Yi,{size:16,className:"text-royal-600 dark:text-royal-400"}),m.jsxs("h2",{className:"text-sm font-bold text-gray-900 dark:text-gray-50 uppercase tracking-wide",children:[B[e.getMonth()]," ",e.getFullYear()]})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("button",{onClick:E,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:m.jsx(vf,{size:18,className:"text-gray-600 dark:text-gray-400"})}),m.jsx("button",{onClick:k,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:m.jsx(Bi,{size:18,className:"text-gray-600 dark:text-gray-400"})})]})]}),m.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:L.map((N,$)=>m.jsx("div",{className:"text-center text-xs font-bold text-gray-400 dark:text-gray-500 py-1",children:N},$))}),m.jsx("div",{className:"grid grid-cols-7 gap-1",children:_.map((N,$)=>{if(!N)return m.jsx("div",{className:"aspect-square"},`empty-${$}`);const F=S(N,r),V=S(N,T),q=N.toISOString().split("T")[0],te=s.has(q);return m.jsxs("button",{onClick:()=>A(N),className:`
                                        aspect-square flex flex-col items-center justify-center p-1 rounded-xl transition-all relative text-sm
                                        ${F?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 scale-105 font-bold":"bg-gray-50 dark:bg-white/5 text-gray-700 dark:text-gray-300 hover:bg-royal-50 dark:hover:bg-royal-900/20 hover:scale-105"}
                                    `,children:[m.jsx("span",{children:N.getDate()}),V&&!F&&m.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-royal-600 dark:bg-royal-400 rounded-full"}),te&&m.jsx("div",{className:`absolute top-1 right-1 w-1.5 h-1.5 rounded-full ${F?"bg-white":"bg-royal-600 dark:bg-royal-400"}`})]},$)})})]}),u?m.jsx(Ot,{className:"p-8",children:m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("div",{className:"w-8 h-8 border-2 border-royal-600 border-t-transparent rounded-full animate-spin"})})}):o?m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-lg font-extrabold text-gray-900 dark:text-gray-50",children:S(r,T)?"Today's Workout":"Workout Plan"}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold mt-0.5",children:o.title})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"text-2xl font-extrabold text-royal-600 dark:text-royal-400",children:[j,"/",M]}),m.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold",children:"Completed"})]})]}),m.jsx("div",{className:"mb-6 bg-gray-100 dark:bg-white/5 rounded-full h-2 overflow-hidden",children:m.jsx("div",{className:"h-full bg-gradient-to-r from-royal-500 to-royal-600 transition-all duration-500 ease-out rounded-full",style:{width:`${U}%`}})}),m.jsx("div",{className:"space-y-3",children:o.exercises.map(N=>m.jsx("button",{onClick:()=>C(N.id),className:`
                                        w-full text-left transition-all active:scale-[0.98]
                                        ${N.completed?"opacity-60":""}
                                    `,children:m.jsx(Ot,{className:`p-4 ${N.completed?"bg-royal-50/50 dark:bg-royal-900/10":""}`,children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("div",{className:"flex-shrink-0 mt-0.5",children:N.completed?m.jsx(Pm,{size:24,className:"text-royal-600 dark:text-royal-400",strokeWidth:2.5}):m.jsx(cM,{size:24,className:"text-gray-300 dark:text-gray-600",strokeWidth:2})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h3",{className:`
                                                    font-bold text-sm mb-2
                                                    ${N.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-50"}
                                                `,children:N.name}),m.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Sets:"}),m.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:N.sets})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Reps:"}),m.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:N.reps})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Rest:"}),m.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:N.rest})]})]})]}),m.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[m.jsx("button",{onClick:$=>{$.stopPropagation(),R(N)},className:"p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit exercise",children:m.jsx(SM,{size:14,className:"text-blue-600 dark:text-blue-400"})}),m.jsx("button",{onClick:$=>{$.stopPropagation(),I(N.id)},className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete exercise",children:m.jsx(xf,{size:14,className:"text-red-600 dark:text-red-400"})})]})]})})},N.id))}),j===M&&M>0&&m.jsx(Ot,{className:"p-6 mt-6 bg-gradient-to-br from-royal-50 to-royal-100 dark:from-royal-950/30 dark:to-royal-900/20 border-2 border-royal-200 dark:border-royal-800/50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"w-16 h-16 bg-royal-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:m.jsx(Pm,{size:32,className:"text-white",strokeWidth:2.5})}),m.jsx("h3",{className:"text-xl font-extrabold text-royal-900 dark:text-royal-100 mb-2",children:"Workout Complete! "}),m.jsx("p",{className:"text-sm text-royal-700 dark:text-royal-300 font-semibold",children:"Great job! You've completed all exercises for today."})]})})]}):m.jsx(Ot,{className:"p-8",children:m.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[m.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-white/10 dark:to-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:m.jsx(Gc,{size:32,className:"text-gray-400 dark:text-gray-500"})}),m.jsx("h3",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"No Workout Plan Yet"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:S(r,T)?"Ready to crush today's workout? Get a personalized plan from your AI coach or create your own!":"No workout plan for this date. Add one to stay on track!"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("button",{onClick:()=>t==null?void 0:t(Ce.CAL_COACH),className:"w-full flex items-center justify-center gap-2 py-4 bg-royal-600 hover:bg-royal-700 text-white rounded-[20px] font-bold transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[m.jsx(vr,{size:20}),m.jsx("span",{children:"Get AI Plan from Coach"})]}),m.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 py-4 bg-white dark:bg-white/5 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-900 dark:text-gray-50 rounded-[20px] font-bold transition-all border-2 border-gray-200 dark:border-white/10 active:scale-95",children:[m.jsx(Sv,{size:20}),m.jsx("span",{children:"Create Custom Plan"})]})]})]})})]}),m.jsx(wde,{isOpen:x,onClose:()=>{v(!1),y(null)},exercise:g,onSave:O}),m.jsx(bde,{isOpen:d,onClose:()=>h(!1),defaultDate:r,onSave:b})]})},Sde=({summary:t,onClose:e})=>{const n=new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return m.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:m.jsxs("div",{className:"bg-white w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl border border-white/50 animate-in slide-in-from-bottom duration-300",children:[m.jsxs("div",{className:"relative bg-royal-50 p-8 pb-10",children:[m.jsx("div",{className:"absolute top-6 right-6",children:m.jsx("button",{onClick:e,className:"p-2 bg-white text-gray-900 rounded-full shadow-sm hover:bg-gray-100 transition-colors",children:m.jsx(Tr,{size:20})})}),m.jsxs("div",{className:"flex items-center gap-2 text-royal-600 mb-3",children:[m.jsx(Yi,{size:20}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Daily Report"})]}),m.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 leading-tight",children:n})]}),m.jsxs("div",{className:"p-8 -mt-6 bg-white rounded-t-[32px] relative shadow-[-10px_-10px_30px_rgba(0,0,0,0.02)]",children:[m.jsxs("div",{className:"bg-white rounded-[32px] p-6 border border-gray-100 shadow-[0_10px_30px_-10px_rgba(0,0,0,0.05)] mb-8 flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1 block",children:"Total Consumed"}),m.jsxs("div",{className:"flex items-baseline gap-1",children:[m.jsx("span",{className:"text-5xl font-extrabold text-gray-900 tracking-tighter",children:t.totalCalories}),m.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"kcal"})]})]}),m.jsx("div",{className:"w-14 h-14 rounded-2xl bg-royal-50 flex items-center justify-center text-royal-600",children:m.jsx(_v,{size:28})})]}),m.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[m.jsx(Bc,{size:16})," Macro Breakdown"]}),m.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-emerald-50 hover:border-emerald-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[m.jsx("div",{className:"w-1.5 h-10 bg-emerald-400 rounded-full"}),m.jsxs("div",{children:[m.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalProtein,"g"]}),m.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Protein"})]})]})}),m.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-blue-50 hover:border-blue-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[m.jsx("div",{className:"w-1.5 h-10 bg-blue-400 rounded-full"}),m.jsxs("div",{children:[m.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalCarbs,"g"]}),m.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Carbs"})]})]})}),m.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-orange-50 hover:border-orange-100 transition-colors",children:m.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[m.jsx("div",{className:"w-1.5 h-10 bg-orange-400 rounded-full"}),m.jsxs("div",{children:[m.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalFat,"g"]}),m.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Fat"})]})]})})]}),m.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 flex justify-between items-center text-xs font-bold text-gray-400 uppercase tracking-wider",children:[m.jsxs("span",{children:[t.entries.length," meals tracked"]}),m.jsxs("span",{className:"flex items-center gap-1.5 text-royal-600",children:[m.jsx(Yo,{size:14}),"See History Tab"]})]})]})]})})},Ede=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(2e3),[i,o]=P.useState(!0),[a,s]=P.useState("week"),[l,u]=P.useState(null),[c,d]=P.useState(null),[h,g]=P.useState(!1),[y,x]=P.useState(null),[v,b]=P.useState(new Date().toISOString().split("T")[0]),[w,_]=P.useState(new Date().toISOString().substring(0,7)),[T,S]=P.useState(!1),[E,k]=P.useState({}),[A,C]=P.useState({}),[R,I]=P.useState({}),[O,j]=P.useState({}),M=P.useRef(null);document.documentElement.classList.contains("dark");const U=P.useCallback(()=>{if(M.current){const W=M.current;W.scrollLeft=W.scrollWidth}},[]);P.useEffect(()=>{const W=setTimeout(U,100);return()=>clearTimeout(W)},[a,U]);const L=async()=>{o(!0);try{const[W,X]=await Promise.all([bj(),Mv()]);e(W),r(X),B(v)}catch(W){console.error("Failed to load history data",W)}finally{o(!1)}},B=P.useCallback(async W=>{if(!A[W]){I(X=>({...X,[W]:!0}));try{const X=await wj(W);C(H=>({...H,[W]:X}))}catch(X){console.error(`Failed to load entries for ${W}`,X)}finally{I(X=>({...X,[W]:!1}))}}},[A]),N=P.useCallback(async W=>{if(O[W]===void 0){j(X=>({...X,[W]:null}));try{const X=await _j(W);j(H=>({...H,[W]:X}))}catch(X){console.error(`Failed to load image for entry ${W}`,X)}}},[O]);P.useEffect(()=>{L();const W=()=>{C({}),j({}),L()};return window.addEventListener("food-entry-updated",W),()=>window.removeEventListener("food-entry-updated",W)},[]),P.useEffect(()=>{v&&a==="week"&&B(v)},[v,B,a]);const $=async W=>{await QA(W),C({}),j({}),await L()},F=W=>{u(null),x(W),g(!0)},V=W=>(O[W.id]===void 0&&N(W.id),{...W,imageUrl:O[W.id]||void 0}),q=P.useMemo(()=>{if(a==="week"){const W=[],X=new Date,H=new Date(X.getFullYear(),X.getMonth(),1);for(let Z=new Date(H);Z<=X;Z.setDate(Z.getDate()+1)){const ie=Z.getFullYear(),z=String(Z.getMonth()+1).padStart(2,"0"),Te=String(Z.getDate()).padStart(2,"0"),fe=`${ie}-${z}-${Te}`;W.push({id:fe,name:Z.toLocaleDateString("en-US",{weekday:"short"}),label:Z.getDate().toString(),date:fe})}return W}else{const W=new Set;return t.forEach(H=>{const Z=H.date.substring(0,7);W.add(Z)}),Array.from(W).sort().map(H=>{const[Z,ie]=H.split("-"),z=new Date(parseInt(Z),parseInt(ie)-1,1);return{id:H,name:z.toLocaleDateString("en-US",{year:"2-digit"}),label:z.toLocaleDateString("en-US",{month:"short"}),date:H}})}},[a,t]),te=P.useMemo(()=>{if(a==="week")return t.find(W=>W.date===v)||{date:v,totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0};{const X=t.filter(H=>H.date.startsWith(w)).reduce((H,Z)=>({totalCalories:H.totalCalories+Z.totalCalories,totalProtein:H.totalProtein+Z.totalProtein,totalCarbs:H.totalCarbs+Z.totalCarbs,totalFat:H.totalFat+Z.totalFat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0});return{date:w,...X}}},[t,v,w,a]),de=P.useMemo(()=>a!=="month"?[]:Object.entries(A).filter(([X])=>X.startsWith(w)).flatMap(([X,H])=>H).sort((X,H)=>H.timestamp.localeCompare(X.timestamp)),[A,w,a]),pe=P.useMemo(()=>{if(a!=="month")return{};const W={};return Object.entries(A).filter(([X])=>X.startsWith(w)).forEach(([X,H])=>{H.length>0&&(W[X]=H.sort((Z,ie)=>ie.timestamp.localeCompare(Z.timestamp)))}),W},[A,w,a]),Ie=W=>{k(X=>({...X,[W]:!X[W]}))};return P.useEffect(()=>{a==="month"&&t.filter(X=>X.date.startsWith(w)).map(X=>X.date).forEach(X=>B(X))},[a,w,t,B]),T?m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in slide-in-from-right duration-500 bg-[#F8F9FE] dark:bg-[#0F111A]",children:[m.jsxs("div",{className:"px-6 pt-10 pb-32 overflow-y-auto no-scrollbar",children:[m.jsxs("button",{onClick:()=>S(!1),className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 mb-6 hover:text-royal-600 transition-colors",children:[m.jsx(vf,{size:20}),m.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Back to Report"})]}),m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:"History Log"}),m.jsx("div",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 bg-royal-50 dark:bg-royal-900/20 px-3 py-1.5 rounded-xl border border-royal-100 dark:border-royal-800/50",children:a==="week"?new Date(v).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):new Date(w+"-01").toLocaleDateString(void 0,{month:"long",year:"numeric"})})]}),m.jsx("div",{className:"space-y-4",children:a==="week"?R[v]?m.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(W=>m.jsx("div",{className:"h-20 bg-white dark:bg-[#1A1C26] rounded-[24px] animate-pulse border border-gray-100 dark:border-white/5"},W))}):(A[v]||[]).length>0?(A[v]||[]).map(W=>{const X=V(W);return m.jsxs("div",{onClick:()=>u(X),className:"bg-white dark:bg-[#1A1C26] p-4 flex justify-between items-center rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5 transition-all cursor-pointer active:scale-[0.98]",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 dark:bg-white/5 overflow-hidden shadow-inner border border-gray-100 dark:border-white/5",children:X.imageUrl?m.jsx("img",{src:X.imageUrl,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-white/10 text-gray-300 dark:text-gray-700",children:m.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-700"})})}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-50 font-bold",children:W.food_item}),m.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:W.time})]})]}),m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:W.calories}),m.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]},W.id)}):m.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] p-12 text-center border border-dashed border-gray-200 dark:border-white/10",children:[m.jsx(Yi,{size:32,className:"mx-auto text-gray-200 dark:text-white/5 mb-4"}),m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm font-medium",children:"No meals logged for this day."})]}):Object.keys(pe).length>0?Object.entries(pe).sort(([W],[X])=>X.localeCompare(W)).map(([W,X])=>{const H=E[W],Z=X.reduce((ie,z)=>ie+z.calories,0);return m.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] border border-gray-100 dark:border-white/5 overflow-hidden",children:[m.jsxs("button",{onClick:()=>Ie(W),className:"w-full p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition-all",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:`transition-transform duration-200 ${H?"rotate-90":""}`,children:m.jsx(Bi,{size:16,className:"text-gray-400"})}),m.jsxs("div",{className:"flex flex-col items-start",children:[m.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:new Date(W).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),m.jsxs("span",{className:"text-[9px] font-medium text-gray-400",children:[X.length," meal",X.length!==1?"s":""]})]})]}),m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:Z}),m.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]}),H&&m.jsx("div",{className:"border-t border-gray-100 dark:border-white/5",children:X.map(ie=>{const z=V(ie);return m.jsxs("div",{onClick:()=>u(z),className:"p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition-all cursor-pointer border-b border-gray-50 dark:border-white/5 last:border-b-0",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 dark:bg-white/5 overflow-hidden shadow-inner border border-gray-100 dark:border-white/5",children:z.imageUrl?m.jsx("img",{src:z.imageUrl,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-white/10 text-gray-300 dark:text-gray-700",children:m.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-700"})})}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-50 font-bold leading-tight",children:ie.food_item}),m.jsx("span",{className:"text-[9px] text-gray-400 dark:text-gray-500",children:ie.time})]})]}),m.jsxs("div",{className:"flex flex-col items-end",children:[m.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:ie.calories}),m.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]},ie.id)})})]},W)}):m.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] p-12 text-center border border-dashed border-gray-200 dark:border-white/10",children:[m.jsx(Yi,{size:32,className:"mx-auto text-gray-200 dark:text-white/5 mb-4"}),m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm font-medium",children:"No data for this month."})]})})]}),l&&m.jsx(ig,{entry:l,onClose:()=>u(null),onDelete:$,onEdit:F})]}):m.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in fade-in duration-500 overflow-y-auto no-scrollbar relative bg-[#F8F9FE] dark:bg-[#0F111A]",children:[m.jsxs("div",{className:"px-6 pt-10 pb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:"Report"}),m.jsxs("div",{className:"flex p-1 bg-white dark:bg-[#1A1C26] rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[m.jsx("button",{onClick:()=>s("week"),className:`px-3 py-1 rounded-lg text-[10px] font-bold transition-all ${a==="week"?"bg-royal-600 text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-royal-500"}`,children:"Weekly"}),m.jsx("button",{onClick:()=>s("month"),className:`px-3 py-1 rounded-lg text-[10px] font-bold transition-all ${a==="month"?"bg-royal-600 text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-royal-500"}`,children:"Monthly"})]})]}),m.jsxs("div",{className:"relative mb-8",children:[m.jsx("div",{ref:M,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 px-1 snap-x",style:{WebkitOverflowScrolling:"touch"},children:q.map(W=>{const X=a==="week"?W.id===v:W.id===w,H=t.some(Z=>a==="week"?Z.date===W.id:Z.date.startsWith(W.id));return m.jsxs("button",{onClick:()=>a==="week"?b(W.id):_(W.id),className:`flex-shrink-0 flex flex-col items-center justify-center w-12 py-3 rounded-2xl transition-all duration-300 snap-center ${X?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 transform scale-110":"bg-white dark:bg-[#1A1C26] text-gray-400 dark:text-gray-500 border border-gray-100 dark:border-white/5"}`,children:[m.jsx("span",{className:`text-[9px] font-bold uppercase mb-1 ${X?"text-white/70":"text-gray-400"}`,children:W.name}),m.jsx("span",{className:"text-sm font-extrabold",children:W.label}),H&&!X&&m.jsx("div",{className:"w-1 h-1 rounded-full bg-royal-400 mt-1"})]},W.id)})}),m.jsx("div",{className:"absolute top-0 left-0 bottom-2 w-8 bg-gradient-to-r from-[#F8F9FE] dark:from-[#0F111A] to-transparent pointer-events-none z-10"}),m.jsx("div",{className:"absolute top-0 right-0 bottom-2 w-8 bg-gradient-to-l from-[#F8F9FE] dark:from-[#0F111A] to-transparent pointer-events-none z-10"})]}),m.jsx("div",{className:"mb-8",children:m.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[28px] p-6 shadow-sm border border-gray-100 dark:border-white/5 flex flex-col items-center",children:[m.jsx("span",{className:"text-[9px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:a==="week"?"Daily Total":"Monthly Total"}),m.jsxs("div",{className:"flex flex-col items-center mb-6",children:[m.jsx("span",{className:"text-5xl font-black text-gray-900 dark:text-gray-50 tracking-tighter",children:Math.round(te.totalCalories)}),m.jsx("span",{className:"text-[10px] font-black text-royal-600 dark:text-royal-400 uppercase tracking-widest mt-0.5",children:"KCAL"})]}),m.jsxs("div",{className:"grid grid-cols-3 gap-2.5 w-full",children:[m.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-emerald-50/30 dark:bg-emerald-500/5 rounded-2xl border border-emerald-100/50 dark:border-emerald-500/10 transition-colors",children:[m.jsx("span",{className:"text-[8px] font-bold text-emerald-600/60 dark:text-emerald-400/60 uppercase mb-0.5",children:"Protein"}),m.jsxs("span",{className:"text-sm font-black text-emerald-600 dark:text-emerald-400",children:[Math.round(te.totalProtein),"g"]})]}),m.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-amber-50/30 dark:bg-amber-500/5 rounded-2xl border border-amber-100/50 dark:border-amber-500/10 transition-colors",children:[m.jsx("span",{className:"text-[8px] font-bold text-amber-600/60 dark:text-amber-400/60 uppercase mb-0.5",children:"Carbs"}),m.jsxs("span",{className:"text-sm font-black text-amber-600 dark:text-amber-400",children:[Math.round(te.totalCarbs),"g"]})]}),m.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-rose-50/30 dark:bg-rose-500/5 rounded-2xl border border-rose-100/50 dark:border-rose-500/10 transition-colors",children:[m.jsx("span",{className:"text-[8px] font-bold text-rose-600/60 dark:text-rose-400/60 uppercase mb-0.5",children:"Fat"}),m.jsxs("span",{className:"text-sm font-black text-rose-600 dark:text-rose-400",children:[Math.round(te.totalFat),"g"]})]})]})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[m.jsxs(Ot,{className:"p-5 flex flex-col justify-between h-36 bg-gradient-to-br from-royal-500 to-royal-700 text-white border-none shadow-royal-200/50",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase mb-1",children:a==="week"?"Coach Tips":"Monthly Report"}),m.jsx("h3",{className:"text-lg font-black leading-tight",children:a==="week"?"Weekly Review":m.jsxs(m.Fragment,{children:["Your Health",m.jsx("br",{}),"Summary"]})})]}),m.jsxs("div",{className:"mt-2 py-2 bg-white/20 rounded-xl text-[10px] font-bold backdrop-blur-sm flex items-center justify-center gap-2",children:[a==="week"?"COMING SOON":"VIEW DETAILS",m.jsx(Bi,{size:12})]})]}),m.jsxs("div",{className:"grid grid-rows-2 gap-4 h-36",children:[m.jsxs(Ot,{onClick:()=>S(!0),className:"p-4 flex flex-col justify-center bg-white dark:bg-[#1A1C26] border-gray-100 dark:border-white/5 active:scale-95 transition-transform cursor-pointer",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"History Log"}),m.jsx(Bi,{size:10,className:"text-gray-300"})]}),m.jsxs("p",{className:"text-xs font-black text-gray-900 dark:text-gray-50",children:[a==="week"?(A[v]||[]).length:de.length," Meals"]})]}),m.jsxs(Ot,{className:"p-4 flex flex-col justify-center bg-white dark:bg-[#1A1C26] border-gray-100 dark:border-white/5",children:[m.jsxs("div",{className:"flex justify-between items-center mb-1",children:[m.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Goal Status"}),m.jsx(yM,{size:10,className:"text-gray-300"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex-1 h-1 bg-gray-100 dark:bg-white/5 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-royal-500 rounded-full",style:{width:`${Math.min(te.totalCalories/(a==="week"?n:n*30)*100,100)}%`}})}),m.jsxs("span",{className:"text-[10px] font-black text-gray-900 dark:text-gray-50",children:[Math.round(te.totalCalories/(a==="week"?n:n*30)*100),"%"]})]})]})]})]}),m.jsx("div",{className:"h-24"})]}),l&&m.jsx(ig,{entry:l,onClose:()=>u(null),onDelete:$,onEdit:F}),c&&m.jsx(Sde,{summary:c,onClose:()=>d(null)}),h&&m.jsx(QC,{editEntry:y,onClose:()=>{g(!1),x(null)},onSuccess:()=>{g(!1),x(null),C({}),j({}),L()}})]})},Tde=()=>{const[t,e]=P.useState(!0),[n,r]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(null),[l,u]=P.useState(!1),[c,d]=P.useState(null),h=async g=>{g.preventDefault(),s(null),d(null),u(!0);try{t?await WA(n,i):(await dj(n,i),t||(d("Account created successfully!"),e(!0)))}catch(y){console.error(y),s(y.message||"Authentication failed")}finally{u(!1)}};return m.jsxs("div",{className:"min-h-screen bg-royal-50 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[m.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[500px] h-[500px] bg-royal-200/40 rounded-full blur-[100px]"}),m.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-pink-200/40 rounded-full blur-[80px]"})]}),m.jsxs("div",{className:"w-full max-w-sm z-10",children:[m.jsxs("div",{className:"text-center mb-10",children:[m.jsx("div",{className:"w-20 h-20 bg-white rounded-[24px] flex items-center justify-center mx-auto mb-6 shadow-xl shadow-royal-200 rotate-3 transition-transform hover:rotate-0 duration-500",children:m.jsx(kA,{size:36,className:"text-royal-600 fill-royal-600"})}),m.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight mb-2",children:"SnapCal AI"}),m.jsx("p",{className:"text-gray-500 font-medium",children:"Track your vibe, not just calories."})]}),m.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-white p-8 rounded-[40px] shadow-[0_20px_40px_-12px_rgba(0,0,0,0.05)]",children:[m.jsxs("div",{className:"flex p-1 bg-gray-100 rounded-[20px] mb-8",children:[m.jsx("button",{onClick:()=>{e(!0),s(null),d(null)},className:`flex-1 py-3 text-sm font-bold rounded-[16px] transition-all duration-300 ${t?"bg-white text-royal-700 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Sign In"}),m.jsx("button",{onClick:()=>{e(!1),s(null),d(null)},className:`flex-1 py-3 text-sm font-bold rounded-[16px] transition-all duration-300 ${t?"text-gray-400 hover:text-gray-600":"bg-white text-royal-700 shadow-sm"}`,children:"Sign Up"})]}),m.jsxs("form",{onSubmit:h,className:"space-y-5",children:[a&&m.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-2xl flex items-center gap-3 text-red-600 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:[m.jsx(xA,{size:18}),a]}),c&&m.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-2xl flex items-center gap-3 text-emerald-600 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:[m.jsx(Pm,{size:18}),c]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 ml-1",children:"Email"}),m.jsx("input",{type:"email",required:!0,value:n,onChange:g=>r(g.target.value),className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 text-gray-900 transition-all placeholder:text-gray-400 font-medium",placeholder:"hello@snapcal.ai"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 ml-1",children:"Password"}),m.jsx("input",{type:"password",required:!0,value:i,onChange:g=>o(g.target.value),className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 text-gray-900 transition-all placeholder:text-gray-400 font-medium",placeholder:"",minLength:6})]})]}),m.jsxs(Lt,{className:"w-full mt-4 flex justify-between items-center group py-5",isLoading:l,children:[m.jsx("span",{children:t?"Sign In":"Create Account"}),!l&&m.jsx(Fc,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),m.jsx("p",{className:"text-center text-gray-400 text-xs mt-8 font-medium",children:t?"New here? Create an account above.":"Welcome back. Sign in above."})]})]})},aT=`
-- Run this in your Supabase SQL Editor

-- 1. Create Food Entries Table
create table if not exists food_entries (
  id uuid primary key,
  user_id uuid not null references auth.users(id),
  timestamp text not null,
  date text not null,
  time text not null,
  food_item text not null,
  calories integer not null,
  protein integer default 0,
  carbs integer default 0,
  fat integer default 0,
  confidence float default 1.0,
  is_manual boolean default false,
  image_url text,
  ingredients jsonb default '[]'::jsonb,
  original_ai_response jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 2. Create User Profiles Table
create table if not exists user_profiles (
  user_id uuid primary key references auth.users(id),
  name text,
  height float,
  weight float,
  age integer,
  gender text check (gender in ('male', 'female')),
  activity_level text check (activity_level in ('sedentary', 'light', 'moderate', 'very', 'extra')),
  goal text check (goal in ('cut', 'bulk', 'maintain')),
  equipment_access text check (equipment_access in ('gym', 'home', 'bodyweight')),
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 3. Create Settings Table
create table if not exists user_settings (
  user_id uuid primary key references auth.users(id),
  daily_goal integer default 2000,
  has_completed_onboarding boolean default false
);

-- 4. Create Summaries Table (Optional optimization)
create table if not exists daily_summaries (
  id text primary key, -- Composite key user_id + date usually
  user_id uuid not null references auth.users(id),
  date text not null,
  total_calories integer default 0,
  total_protein integer default 0,
  total_carbs integer default 0,
  total_fat integer default 0
);

-- 5. Enable Row Level Security (RLS)
alter table food_entries enable row level security;
alter table user_profiles enable row level security;
alter table user_settings enable row level security;
alter table daily_summaries enable row level security;

-- 6. Create Policies (Allow users to see/edit ONLY their own data)

-- Food Entries
create policy "Users can all own entries" on food_entries
  for all using (auth.uid() = user_id);

-- Profiles
create policy "Users can all own profile" on user_profiles
  for all using (auth.uid() = user_id);

-- Settings
create policy "Users can all own settings" on user_settings
  for all using (auth.uid() = user_id);

-- Summaries
create policy "Users can all own summaries" on daily_summaries
  for all using (auth.uid() = user_id);
`,kde=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(""),[l,u]=P.useState(""),[c,d]=P.useState(""),[h,g]=P.useState(""),[y,x]=P.useState(""),[v,b]=P.useState(!1),[w,_]=P.useState(!1),[T,S]=P.useState(null),[E,k]=P.useState(document.documentElement.classList.contains("dark")),[A,C]=P.useState(!1),[R,I]=P.useState(!1),[O,j]=P.useState(!1),[M,U]=P.useState("checking"),[L,B]=P.useState(!1),[N,$]=P.useState(!1);P.useEffect(()=>{te(),ge?(I(Tj()),F()):U("ok")},[]);const F=async()=>{const J=await Aj();J.missingTables?U("missing_tables"):J.ok?U("ok"):U("error")},V=()=>{const J=!E;k(J),J?(document.documentElement.classList.add("dark"),localStorage.setItem("snapcal-theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("snapcal-theme","light"))},q=J=>{if(J===zm())return;confirm(J==="local"?"Switching to Local Mode means your data will stay on this device only. You will be logged out of Cloud to create a local profile.":"Switching to Cloud Mode allows you to sync data across devices. You will be redirected to log in or sign up.")&&uj(J)},te=async()=>{const J=await $v();J&&(e(J.name),r(J.height.toString()),o(J.weight.toString()),J.age&&s(J.age.toString()),J.gender&&u(J.gender),J.activityLevel&&d(J.activityLevel),J.goal&&g(J.goal),J.equipmentAccess&&x(J.equipmentAccess))},de=()=>{const J=parseFloat(n),Me=parseFloat(i);return!J||!Me?null:Me/(J/100*(J/100))},pe=J=>J<18.5?{label:"Underweight",color:"text-blue-300"}:J<25?{label:"Healthy",color:"text-emerald-300"}:J<30?{label:"Overweight",color:"text-orange-300"}:{label:"Obese",color:"text-red-300"},Ie=J=>{const Oe=(10*parseFloat(i)+6.25*parseFloat(n)-5*25+5)*1.2;return J<18.5?Math.round(Oe+400):J>25?Math.round(Oe-400):Math.round(Oe)},W=async()=>{if(!(!t||!n||!i)){b(!0);try{await Dv({name:t,height:parseFloat(n),weight:parseFloat(i),age:a?parseInt(a):void 0,gender:l||void 0,activityLevel:c||void 0,goal:h||void 0,equipmentAccess:y||void 0}),_(!0),setTimeout(()=>_(!1),2e3);const J=de();if(J){const Me=Ie(J);S(Me)}}catch(J){console.error(J)}finally{b(!1)}}},X=async()=>{T&&(await kf(T),alert(`Daily goal updated to ${T} kcal!`))},H=async()=>{if(confirm("Are you sure you want to sign out?")){C(!0);try{await fj()}catch(J){console.error(J)}finally{C(!1)}}},Z=async()=>{if(confirm("This will upload your local history to your Supabase account and clear local storage. Continue?")){j(!0);try{await kj(),I(!1),alert("Migration successful! Your local history is now in the cloud.")}catch(J){alert("Sync failed: "+J.message)}finally{j(!1)}}},ie=()=>{navigator.clipboard.writeText(aT),alert("SQL Copied to clipboard! Paste it into the Supabase SQL Editor.")},z=de(),Te=z?pe(z):null,fe=z?Ie(z):null,ke=zm();return m.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-32 px-6 pt-10 space-y-8 animate-in fade-in duration-500",children:[m.jsxs("header",{children:[m.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"My Profile"}),m.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight",children:"Personal Details"})]}),ge&&R&&m.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-950/30 border border-indigo-100 dark:border-indigo-900/40 p-5 rounded-[32px] animate-in slide-in-from-top-4",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/50 rounded-2xl text-indigo-600 dark:text-indigo-400",children:m.jsx(CM,{size:24})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-sm font-extrabold text-indigo-900 dark:text-indigo-200",children:"Local Data Found"}),m.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1 mb-3 leading-relaxed",children:"We found meal history on this device that isn't in the cloud yet. Sync now to secure your data."}),m.jsx(Lt,{onClick:Z,isLoading:O,className:"py-3 px-6 text-xs bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none",children:"Sync to Cloud"})]})]})}),ge&&M==="missing_tables"&&m.jsx("div",{className:"bg-rose-50 dark:bg-rose-950/30 border border-rose-100 dark:border-rose-900/40 p-5 rounded-[32px] animate-in slide-in-from-top-4",children:m.jsxs("div",{className:"flex items-start gap-4",children:[m.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900/50 rounded-2xl text-rose-600 dark:text-rose-400",children:m.jsx(cb,{size:24})}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-sm font-extrabold text-rose-900 dark:text-rose-200",children:"Database Setup Required"}),m.jsx("p",{className:"text-xs text-rose-700 dark:text-rose-300 mt-1 mb-3 leading-relaxed",children:"Your Supabase project is connected, but the required tables don't exist yet. Saving will fail until you run the setup script."}),m.jsxs("button",{onClick:()=>B(!L),className:"flex items-center gap-2 py-2 px-4 rounded-xl text-xs font-bold bg-white dark:bg-white/10 text-rose-600 dark:text-rose-200 shadow-sm",children:[m.jsx(fM,{size:14})," ",L?"Hide SQL":"View SQL Script"]}),L&&m.jsxs("div",{className:"mt-4 animate-in slide-in-from-top-2",children:[m.jsx("div",{className:"bg-gray-900 rounded-xl p-3 mb-2 overflow-x-auto border border-white/10",children:m.jsx("pre",{className:"text-[10px] text-emerald-400 font-mono leading-relaxed",children:aT})}),m.jsxs(Lt,{onClick:ie,className:"w-full py-3 text-xs bg-rose-600 hover:bg-rose-700 text-white",children:[m.jsx(hM,{size:14,className:"mr-2"})," Copy SQL to Clipboard"]}),m.jsx("p",{className:"text-[10px] text-rose-600/70 dark:text-rose-400/70 mt-2 italic text-center",children:"Paste this into the SQL Editor in your Supabase Dashboard."})]})]})]})}),m.jsx("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-royal-50 dark:bg-royal-950/30 rounded-2xl flex items-center justify-center text-royal-600 dark:text-royal-400",children:E?m.jsx(wM,{size:20}):m.jsx(AM,{size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Dark Mode"}),m.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Optimize for low light"})]})]}),m.jsx("button",{onClick:V,className:`w-14 h-8 rounded-full transition-all duration-300 relative ${E?"bg-royal-600":"bg-gray-200 dark:bg-gray-800"}`,children:m.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-sm transition-transform duration-300 ${E?"translate-x-6":""}`})})]})}),z&&Te&&fe&&m.jsxs("div",{className:"relative rounded-[32px] p-6 text-white overflow-hidden shadow-xl bg-royal-600 shadow-royal-200 dark:shadow-royal-900/40 animate-in slide-in-from-bottom-4 duration-500",children:[m.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),m.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-black/10 rounded-full blur-3xl"}),m.jsxs("div",{className:"relative z-10",children:[m.jsxs("div",{className:"flex justify-between items-start mb-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[m.jsx(_v,{size:16,className:"text-royal-200"}),m.jsx("span",{className:"text-royal-200 text-xs font-bold uppercase tracking-widest",children:"Body Insight"})]}),m.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight",children:["BMI: ",z.toFixed(1)]})]}),m.jsx("div",{className:`px-3 py-1 rounded-full bg-white/10 backdrop-blur-md border border-white/10 text-sm font-bold ${Te.color}`,children:Te.label})]}),m.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-[24px] p-5 border border-white/5",children:[m.jsx("p",{className:"text-white/70 text-xs font-medium mb-3",children:"Based on your profile, we recommend a daily calorie limit of:"}),m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-baseline gap-1",children:[m.jsx("span",{className:"text-4xl font-extrabold tracking-tighter",children:fe}),m.jsx("span",{className:"text-lg font-bold text-white/60",children:"kcal"})]}),m.jsx("button",{onClick:X,className:"w-10 h-10 bg-white text-royal-600 rounded-full flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-lg",children:m.jsx(Fc,{size:20,strokeWidth:3})})]})]})]})]}),m.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark space-y-5",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Display Name"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",value:t,onChange:J=>e(J.target.value),placeholder:"Enter your name",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(da,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Height (cm)"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:n,onChange:J=>r(J.target.value),placeholder:"175",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(EA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Weight (kg)"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:i,onChange:J=>o(J.target.value),placeholder:"70",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(TA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Age"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:a,onChange:J=>s(J.target.value),placeholder:"25",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(Yi,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Gender"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{value:l,onChange:J=>u(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[m.jsx("option",{value:"",children:"Select"}),m.jsx("option",{value:"male",children:"Male"}),m.jsx("option",{value:"female",children:"Female"})]}),m.jsx(PM,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]})]}),m.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/5",children:[m.jsxs("button",{type:"button",onClick:()=>$(!N),className:"w-full flex items-center justify-between mb-3 group",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Im,{size:16,className:"text-royal-600 dark:text-royal-400"}),m.jsx("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"Training Goal Setting"})]}),m.jsx(uM,{size:18,className:`text-royal-600 dark:text-royal-400 transition-transform duration-300 ${N?"rotate-180":""}`})]}),m.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 mb-3 ml-1",children:"Optional - Fill this for personalized AI Coach recommendations"}),N&&m.jsxs("div",{className:"space-y-5 animate-in slide-in-from-top-2 duration-300",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Activity Level"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{value:c,onChange:J=>d(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[m.jsx("option",{value:"",children:"Select"}),m.jsx("option",{value:"sedentary",children:"Sedentary (Little or no exercise)"}),m.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),m.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),m.jsx("option",{value:"very",children:"Very Active (6-7 days/week)"}),m.jsx("option",{value:"extra",children:"Extra Active (Intense daily)"})]}),m.jsx(Yo,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Goal"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{value:h,onChange:J=>g(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[m.jsx("option",{value:"",children:"Select"}),m.jsx("option",{value:"cut",children:"Cut (Lose Fat)"}),m.jsx("option",{value:"bulk",children:"Bulk (Gain Muscle)"}),m.jsx("option",{value:"maintain",children:"Maintain"})]}),m.jsx(Im,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Equipment"}),m.jsxs("div",{className:"relative",children:[m.jsxs("select",{value:y,onChange:J=>x(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[m.jsx("option",{value:"",children:"Select"}),m.jsx("option",{value:"gym",children:"Gym Access"}),m.jsx("option",{value:"home",children:"Home Equipment"}),m.jsx("option",{value:"bodyweight",children:"Bodyweight Only"})]}),m.jsx(Gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]})]})]})]}),m.jsx(Lt,{className:"w-full py-5 text-lg shadow-lg shadow-royal-200 dark:shadow-royal-900/40",onClick:W,isLoading:v,children:w?m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(bA,{size:20})," Saved"]}):"Save Profile"})]}),fa&&m.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center ${ke==="cloud"?"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-600":"bg-gray-100 dark:bg-white/10 text-gray-500"}`,children:ke==="cloud"?m.jsx(dM,{size:20}):m.jsx(_A,{size:20})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Storage Mode"}),m.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:ke==="cloud"?"Connected to Supabase":"Device Storage Only"})]})]}),ge&&m.jsx("button",{onClick:F,className:"p-2 text-gray-400 hover:text-royal-500 transition-colors",title:"Check Connection",children:m.jsx(Nm,{size:16,className:M==="checking"?"animate-spin":""})})]}),m.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-2xl",children:[m.jsx("button",{onClick:()=>q("local"),className:`flex-1 py-3 text-xs font-bold rounded-xl transition-all ${ke==="local"?"bg-white dark:bg-white/10 text-gray-900 dark:text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Device Only"}),m.jsx("button",{onClick:()=>q("cloud"),className:`flex-1 py-3 text-xs font-bold rounded-xl transition-all ${ke==="cloud"?"bg-emerald-500 text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Cloud Sync"})]})]}),m.jsx("div",{className:"pt-4",children:m.jsx("button",{onClick:H,disabled:A,className:"w-full flex items-center justify-center gap-3 py-5 rounded-[24px] border border-red-200 dark:border-red-900/30 text-red-500 dark:text-red-400 font-bold hover:bg-red-50 dark:hover:bg-red-950/20 active:scale-95 transition-all shadow-sm",children:A?m.jsx(Nm,{size:20,className:"animate-spin"}):m.jsxs(m.Fragment,{children:[m.jsx(xM,{size:20}),m.jsx("span",{children:"Sign Out"})]})})}),m.jsx("div",{className:"text-center pt-4 pb-2",children:m.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-[10px] font-bold border transition-colors ${ge?"bg-emerald-50 dark:bg-emerald-950/20 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/30":"bg-amber-50 dark:bg-amber-950/20 text-amber-700 dark:text-amber-400 border-amber-100 dark:border-amber-900/30"}`,children:[m.jsx(cb,{size:12}),m.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ge?"bg-emerald-500 animate-pulse":"bg-amber-500"}`}),ge?"Syncing to Supabase":"Local Storage Mode"]})})]})},Ade=({user:t,onComplete:e})=>{const[n,r]=P.useState(0),[i,o]=P.useState(""),[a,s]=P.useState(""),[l,u]=P.useState(""),[c,d]=P.useState(!1),h=5,g=()=>{const E=parseFloat(a),k=parseFloat(l);return!E||!k?null:k/(E/100*(E/100))},y=E=>{const C=(10*parseFloat(l)+6.25*parseFloat(a)-5*25+5)*1.2;return E<18.5?Math.round(C+400):E>25?Math.round(C-400):Math.round(C)},x=()=>{n<h-1&&r(n+1)},v=()=>{n>0&&r(n-1)},b=async()=>{await Pj(t),e()},w=async()=>{d(!0);try{if(i&&a&&l){await Dv({name:i,height:parseFloat(a),weight:parseFloat(l)});const E=g();if(E){const k=y(E);await kf(k)}}await ZA(t),e()}catch(E){console.error("Failed to save onboarding data:",E),alert("Failed to save your profile. Please try again.")}finally{d(!1)}},_=i&&a&&l,T=g(),S=T?y(T):null;return m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-surface via-royal-50/30 to-royal-100/40 dark:from-surface-dark dark:via-royal-950/20 dark:to-black flex items-center justify-center p-4 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-royal-200/20 dark:bg-royal-800/10 rounded-full blur-3xl animate-pulse"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-purple-200/20 dark:bg-purple-900/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),m.jsxs("button",{onClick:b,className:"absolute top-6 right-6 z-50 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-sm font-medium flex items-center gap-1",children:["Skip ",m.jsx(Tr,{size:16})]}),m.jsxs("div",{className:"relative z-10 w-full max-w-2xl",children:[m.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Array.from({length:h}).map((E,k)=>m.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${k===n?"w-12 bg-royal-600 dark:bg-royal-500":k<n?"w-8 bg-royal-400 dark:bg-royal-600":"w-8 bg-gray-200 dark:bg-gray-700"}`},k))}),m.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] rounded-[40px] shadow-diffused-lg dark:shadow-diffused-dark p-8 md:p-12 min-h-[500px] flex flex-col",children:[n===0&&m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:[m.jsxs("div",{className:"relative mb-8",children:[m.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-royal-500 to-purple-600 rounded-[32px] flex items-center justify-center shadow-xl shadow-royal-200 dark:shadow-royal-900/40 animate-in zoom-in duration-700",children:m.jsx(vr,{size:48,className:"text-white",strokeWidth:2})}),m.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-bounce"})]}),m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-gray-50 mb-4 tracking-tight",children:"Welcome to SnapCal AI"}),m.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Your AI-Powered Nutrition Companion"}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 max-w-md leading-relaxed",children:"Track calories effortlessly with the power of artificial intelligence. Just snap a photo of your meal and let AI do the rest."}),m.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6 w-full max-w-md",children:[m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-14 h-14 bg-royal-50 dark:bg-royal-950/30 rounded-2xl flex items-center justify-center",children:m.jsx(Ls,{size:28,className:"text-royal-600 dark:text-royal-400"})}),m.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Snap"})]}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-14 h-14 bg-purple-50 dark:bg-purple-950/30 rounded-2xl flex items-center justify-center",children:m.jsx(kA,{size:28,className:"text-purple-600 dark:text-purple-400"})}),m.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Analyze"})]}),m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[m.jsx("div",{className:"w-14 h-14 bg-emerald-50 dark:bg-emerald-950/30 rounded-2xl flex items-center justify-center",children:m.jsx(Yo,{size:28,className:"text-emerald-600 dark:text-emerald-400"})}),m.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Track"})]})]})]}),n===1&&m.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[m.jsxs("div",{className:"mb-8 text-center",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-royal-50 dark:bg-royal-950/30 rounded-full mb-4",children:[m.jsx(Ls,{size:16,className:"text-royal-600 dark:text-royal-400"}),m.jsx("span",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"How It Works"})]}),m.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Instant Nutrition Insights"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Our AI analyzes your food photos to provide accurate calorie counts and nutritional breakdowns in seconds."})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[m.jsx("div",{className:"w-12 h-12 bg-royal-100 dark:bg-royal-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:m.jsx(Ls,{size:24,className:"text-royal-600 dark:text-royal-400"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"1. Capture Your Meal"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Take a photo of any dish, snack, or beverage"})]})]}),m.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[m.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:m.jsx(vr,{size:24,className:"text-purple-600 dark:text-purple-400"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"2. AI Recognition"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Advanced AI identifies ingredients and portions instantly"})]})]}),m.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[m.jsx("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:m.jsx(Yo,{size:24,className:"text-emerald-600 dark:text-emerald-400"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"3. Get Detailed Breakdown"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calories, protein, carbs, and fatsall automatically calculated"})]})]})]})]}),n===2&&m.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[m.jsxs("div",{className:"mb-8 text-center",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 dark:bg-purple-950/30 rounded-full mb-4",children:[m.jsx(db,{size:16,className:"text-purple-600 dark:text-purple-400"}),m.jsx("span",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider",children:"Personalization"})]}),m.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Why Your Profile Matters"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Share a few details to unlock truly personalized nutrition recommendations tailored just for you."})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"p-6 bg-gradient-to-br from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[28px] border border-royal-100 dark:border-royal-900/30",children:[m.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:m.jsx(Im,{size:24,className:"text-royal-600 dark:text-royal-400"})}),m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Accurate Goals"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Get a science-backed daily calorie target based on your unique body metrics and health objectives."})]}),m.jsxs("div",{className:"p-6 bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 rounded-[28px] border border-emerald-100 dark:border-emerald-900/30",children:[m.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:m.jsx(Yo,{size:24,className:"text-emerald-600 dark:text-emerald-400"})}),m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Smart Insights"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Receive personalized BMI analysis and recommendations to help you reach your ideal weight."})]}),m.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 rounded-[28px] border border-orange-100 dark:border-orange-900/30",children:[m.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:m.jsx(vr,{size:24,className:"text-orange-600 dark:text-orange-400"})}),m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Better Tracking"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"See how your intake compares to your goals and adjust your habits for optimal results."})]}),m.jsxs("div",{className:"p-6 bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-950/20 dark:to-rose-950/20 rounded-[28px] border border-pink-100 dark:border-pink-900/30",children:[m.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:m.jsx(db,{size:24,className:"text-pink-600 dark:text-pink-400"})}),m.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Long-term Success"}),m.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Build sustainable habits with data-driven feedback tailored to your wellness journey."})]})]})]}),n===3&&m.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[m.jsxs("div",{className:"mb-6 text-center",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-royal-50 dark:bg-royal-950/30 rounded-full mb-4",children:[m.jsx(da,{size:16,className:"text-royal-600 dark:text-royal-400"}),m.jsx("span",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"Your Details"})]}),m.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Set Up Your Profile"}),m.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Just a few quick details to personalize your experience"})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Display Name"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),placeholder:"Enter your name",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(da,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Height (cm)"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:a,onChange:E=>s(E.target.value),placeholder:"175",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(EA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Weight (kg)"}),m.jsxs("div",{className:"relative",children:[m.jsx("input",{type:"number",value:l,onChange:E=>u(E.target.value),placeholder:"70",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),m.jsx(TA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]})]}),T&&m.jsxs("div",{className:"p-5 bg-gradient-to-r from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[24px] border border-royal-100 dark:border-royal-900/30 animate-in slide-in-from-bottom-2",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("span",{className:"text-xs font-bold text-royal-700 dark:text-royal-300 uppercase tracking-wider",children:"Your BMI"}),m.jsx("span",{className:"text-2xl font-extrabold text-royal-900 dark:text-royal-100",children:T.toFixed(1)})]}),S&&m.jsxs("p",{className:"text-xs text-royal-600 dark:text-royal-400",children:["Recommended daily goal: ",m.jsxs("span",{className:"font-bold",children:[S," kcal"]})]})]})]})]}),n===4&&m.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center animate-in fade-in zoom-in duration-500",children:[m.jsxs("div",{className:"relative mb-8",children:[m.jsx("div",{className:"w-28 h-28 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center shadow-2xl shadow-emerald-200 dark:shadow-emerald-900/40 animate-in zoom-in duration-700",children:m.jsx(bA,{size:56,className:"text-white",strokeWidth:3})}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full animate-ping opacity-20"})]}),m.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-gray-50 mb-4 tracking-tight",children:"You're All Set!"}),m.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Your personalized nutrition journey begins now"}),i&&S&&m.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[28px] border border-royal-100 dark:border-royal-900/30 max-w-md w-full",children:[m.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Welcome, ",m.jsx("span",{className:"font-bold text-royal-600 dark:text-royal-400",children:i}),"!"]}),m.jsxs("div",{className:"flex items-baseline gap-2 justify-center",children:[m.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500 font-medium",children:"Daily Goal:"}),m.jsx("span",{className:"text-3xl font-extrabold text-royal-900 dark:text-royal-100",children:S}),m.jsx("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-500",children:"kcal"})]})]}),m.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-6 max-w-md leading-relaxed",children:"Start snapping photos of your meals to track your nutrition effortlessly. We'll help you stay on track!"})]}),m.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-100 dark:border-white/5",children:[m.jsxs("button",{onClick:v,disabled:n===0,className:`flex items-center gap-2 px-5 py-3 rounded-[16px] font-bold text-sm transition-all ${n===0?"opacity-0 pointer-events-none":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[m.jsx(vf,{size:20}),"Back"]}),n===h-1?m.jsxs(Lt,{onClick:w,isLoading:c,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Start Tracking",m.jsx(Bi,{size:20,className:"ml-1"})]}):n===3?m.jsxs(Lt,{onClick:x,disabled:!_,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Continue",m.jsx(Bi,{size:20,className:"ml-1"})]}):m.jsxs(Lt,{onClick:x,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Next",m.jsx(Bi,{size:20,className:"ml-1"})]})]})]})]})]})};function Cde(){const[t,e]=P.useState(Ce.DASHBOARD),[n,r]=P.useState(null),[i,o]=P.useState(!0),[a,s]=P.useState(!1),[l,u]=P.useState(!0);P.useEffect(()=>{qe().then(h=>{r(h),o(!1),h&&jb().catch(g=>console.error("Cleanup failed:",g))});const d=hj(h=>{r(h),o(!1),h&&jb().catch(g=>console.error("Cleanup failed:",g))});return()=>d()},[]),P.useEffect(()=>{(async()=>{if(n){u(!0);const h=await Cj(n);s(!h),u(!1)}else s(!1),u(!1)})()},[n]);const c=()=>{s(!1),e(Ce.DASHBOARD)};return i||l?m.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:m.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-white rounded-full animate-spin"})}):n?a?m.jsx(Ade,{user:n,onComplete:c}):m.jsxs(NM,{currentView:t,onNavigate:e,children:[t===Ce.DASHBOARD&&m.jsx(dde,{}),t===Ce.CAL_COACH&&m.jsx(xde,{onNavigate:e}),t===Ce.WORKOUT_PLAN&&m.jsx(_de,{onNavigate:e}),t===Ce.HISTORY&&m.jsx(Ede,{}),t===Ce.PROFILE&&m.jsx(kde,{})]}):m.jsx(Tde,{})}const kO=document.getElementById("root");if(!kO)throw new Error("Could not find root element to mount to");const Pde=Dp.createRoot(kO);Pde.render(m.jsx(D.StrictMode,{children:m.jsx(Cde,{})}));
