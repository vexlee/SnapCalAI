var FO=Object.defineProperty;var BO=(t,e,n)=>e in t?FO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _h=(t,e,n)=>BO(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Le(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pT={exports:{}},nf={},mT={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eu=Symbol.for("react.element"),zO=Symbol.for("react.portal"),GO=Symbol.for("react.fragment"),HO=Symbol.for("react.strict_mode"),qO=Symbol.for("react.profiler"),VO=Symbol.for("react.provider"),WO=Symbol.for("react.context"),KO=Symbol.for("react.forward_ref"),JO=Symbol.for("react.suspense"),YO=Symbol.for("react.memo"),XO=Symbol.for("react.lazy"),sx=Symbol.iterator;function QO(t){return t===null||typeof t!="object"?null:(t=sx&&t[sx]||t["@@iterator"],typeof t=="function"?t:null)}var gT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yT=Object.assign,vT={};function Da(t,e,n){this.props=t,this.context=e,this.refs=vT,this.updater=n||gT}Da.prototype.isReactComponent={};Da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xT(){}xT.prototype=Da.prototype;function Iy(t,e,n){this.props=t,this.context=e,this.refs=vT,this.updater=n||gT}var Oy=Iy.prototype=new xT;Oy.constructor=Iy;yT(Oy,Da.prototype);Oy.isPureReactComponent=!0;var lx=Array.isArray,bT=Object.prototype.hasOwnProperty,Ry={current:null},wT={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)bT.call(e,r)&&!wT.hasOwnProperty(r)&&(i[r]=e[r]);var s=arguments.length-2;if(s===1)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in s=t.defaultProps,s)i[r]===void 0&&(i[r]=s[r]);return{$$typeof:eu,type:t,key:o,ref:a,props:i,_owner:Ry.current}}function ZO(t,e){return{$$typeof:eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function My(t){return typeof t=="object"&&t!==null&&t.$$typeof===eu}function e2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ux=/\/+/g;function Sh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?e2(""+t.key):e.toString(36)}function rc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case eu:case zO:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Sh(a,0):r,lx(i)?(n="",t!=null&&(n=t.replace(ux,"$&/")+"/"),rc(i,e,n,"",function(u){return u})):i!=null&&(My(i)&&(i=ZO(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(ux,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",lx(t))for(var s=0;s<t.length;s++){o=t[s];var l=r+Sh(o,s);a+=rc(o,e,n,l,i)}else if(l=QO(t),typeof l=="function")for(t=l.call(t),s=0;!(o=t.next()).done;)o=o.value,l=r+Sh(o,s++),a+=rc(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function gu(t,e,n){if(t==null)return t;var r=[],i=0;return rc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function t2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},ic={transition:null},n2={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:ic,ReactCurrentOwner:Ry};function ST(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:gu,forEach:function(t,e,n){gu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return gu(t,function(){e++}),e},toArray:function(t){return gu(t,function(e){return e})||[]},only:function(t){if(!My(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Da;ve.Fragment=GO;ve.Profiler=qO;ve.PureComponent=Iy;ve.StrictMode=HO;ve.Suspense=JO;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n2;ve.act=ST;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yT({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Ry.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(l in e)bT.call(e,l)&&!wT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&s!==void 0?s[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:eu,type:t.type,key:i,ref:o,props:r,_owner:a}};ve.createContext=function(t){return t={$$typeof:WO,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VO,_context:t},t.Consumer=t};ve.createElement=_T;ve.createFactory=function(t){var e=_T.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:KO,render:t}};ve.isValidElement=My;ve.lazy=function(t){return{$$typeof:XO,_payload:{_status:-1,_result:t},_init:t2}};ve.memo=function(t,e){return{$$typeof:YO,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=ic.transition;ic.transition={};try{t()}finally{ic.transition=e}};ve.unstable_act=ST;ve.useCallback=function(t,e){return Gt.current.useCallback(t,e)};ve.useContext=function(t){return Gt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Gt.current.useEffect(t,e)};ve.useId=function(){return Gt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Gt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};ve.useRef=function(t){return Gt.current.useRef(t)};ve.useState=function(t){return Gt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Gt.current.useTransition()};ve.version="18.3.1";mT.exports=ve;var P=mT.exports;const j=Le(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r2=P,i2=Symbol.for("react.element"),o2=Symbol.for("react.fragment"),a2=Object.prototype.hasOwnProperty,s2=r2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l2={key:!0,ref:!0,__self:!0,__source:!0};function ET(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)a2.call(e,r)&&!l2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:i2,type:t,key:o,ref:a,props:i,_owner:s2.current}}nf.Fragment=o2;nf.jsx=ET;nf.jsxs=ET;pT.exports=nf;var p=pT.exports,Lp={},TT={exports:{}},dn={},kT={exports:{}},AT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(I,$){var B=I.length;I.push($);e:for(;0<B;){var G=B-1>>>1,q=I[G];if(0<i(q,$))I[G]=$,I[B]=q,B=G;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var $=I[0],B=I.pop();if(B!==$){I[0]=B;e:for(var G=0,q=I.length,X=q>>>1;G<X;){var se=2*(G+1)-1,he=I[se],we=se+1,W=I[we];if(0>i(he,B))we<q&&0>i(W,he)?(I[G]=W,I[we]=B,G=we):(I[G]=he,I[se]=B,G=se);else if(we<q&&0>i(W,B))I[G]=W,I[we]=B,G=we;else break e}}return $}function i(I,$){var B=I.sortIndex-$.sortIndex;return B!==0?B:I.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,g=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(I){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=I)r(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(u)}}function T(I){if(x=!1,_(I),!y)if(n(l)!==null)y=!0,O(S);else{var $=n(u);$!==null&&F(T,$.startTime-I)}}function S(I,$){y=!1,x&&(x=!1,b(A),A=-1),g=!0;var B=h;try{for(_($),d=n(l);d!==null&&(!(d.expirationTime>$)||I&&!R());){var G=d.callback;if(typeof G=="function"){d.callback=null,h=d.priorityLevel;var q=G(d.expirationTime<=$);$=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(l)&&r(l),_($)}else r(l);d=n(l)}if(d!==null)var X=!0;else{var se=n(u);se!==null&&F(T,se.startTime-$),X=!1}return X}finally{d=null,h=B,g=!1}}var E=!1,k=null,A=-1,C=5,M=-1;function R(){return!(t.unstable_now()-M<C)}function L(){if(k!==null){var I=t.unstable_now();M=I;var $=!0;try{$=k(!0,I)}finally{$?U():(E=!1,k=null)}}else E=!1}var U;if(typeof w=="function")U=function(){w(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,D=N.port2;N.port1.onmessage=L,U=function(){D.postMessage(null)}}else U=function(){v(L,0)};function O(I){k=I,E||(E=!0,U())}function F(I,$){A=v(function(){I(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(I){I.callback=null},t.unstable_continueExecution=function(){y||g||(y=!0,O(S))},t.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<I?Math.floor(1e3/I):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(I){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var B=h;h=$;try{return I()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(I,$){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var B=h;h=I;try{return $()}finally{h=B}},t.unstable_scheduleCallback=function(I,$,B){var G=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,I){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=B+q,I={id:c++,callback:$,priorityLevel:I,startTime:B,expirationTime:q,sortIndex:-1},B>G?(I.sortIndex=B,e(u,I),n(l)===null&&I===n(u)&&(x?(b(A),A=-1):x=!0,F(T,B-G))):(I.sortIndex=q,e(l,I),y||g||(y=!0,O(S))),I},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(I){var $=h;return function(){var B=h;h=$;try{return I.apply(this,arguments)}finally{h=B}}}})(AT);kT.exports=AT;var u2=kT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2=P,un=u2;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CT=new Set,Ws={};function io(t,e){oa(t,e),oa(t+"Capture",e)}function oa(t,e){for(Ws[t]=e,t=0;t<e.length;t++)CT.add(e[t])}var _r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Up=Object.prototype.hasOwnProperty,d2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cx={},dx={};function f2(t){return Up.call(dx,t)?!0:Up.call(cx,t)?!1:d2.test(t)?dx[t]=!0:(cx[t]=!0,!1)}function h2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function p2(t,e,n,r){if(e===null||typeof e>"u"||h2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var $y=/[\-:]([a-z])/g;function Dy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($y,Dy);At[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($y,Dy);At[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($y,Dy);At[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function jy(t,e,n,r){var i=At.hasOwnProperty(e)?At[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(p2(e,n,i,r)&&(n=null),r||i===null?f2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=c2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),Co=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),Ly=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),PT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),Uy=Symbol.for("react.forward_ref"),Bp=Symbol.for("react.suspense"),zp=Symbol.for("react.suspense_list"),Fy=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),IT=Symbol.for("react.offscreen"),fx=Symbol.iterator;function is(t){return t===null||typeof t!="object"?null:(t=fx&&t[fx]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Eh;function Es(t){if(Eh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Eh=e&&e[1]||""}return`
`+Eh+t}var Th=!1;function kh(t,e){if(!t||Th)return"";Th=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var l=`
`+i[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=s);break}}}finally{Th=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Es(t):""}function m2(t){switch(t.tag){case 5:return Es(t.type);case 16:return Es("Lazy");case 13:return Es("Suspense");case 19:return Es("SuspenseList");case 0:case 2:case 15:return t=kh(t.type,!1),t;case 11:return t=kh(t.type.render,!1),t;case 1:return t=kh(t.type,!0),t;default:return""}}function Gp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Po:return"Fragment";case Co:return"Portal";case Fp:return"Profiler";case Ly:return"StrictMode";case Bp:return"Suspense";case zp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case NT:return(t.displayName||"Context")+".Consumer";case PT:return(t._context.displayName||"Context")+".Provider";case Uy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Fy:return e=t.displayName||null,e!==null?e:Gp(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return Gp(t(e))}catch{}}return null}function g2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gp(e);case 8:return e===Ly?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function OT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function y2(t){var e=OT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function vu(t){t._valueTracker||(t._valueTracker=y2(t))}function RT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=OT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function yc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hp(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function MT(t,e){e=e.checked,e!=null&&jy(t,"checked",e,!1)}function qp(t,e){MT(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vp(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function px(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vp(t,e,n){(e!=="number"||yc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ts=Array.isArray;function Vo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ts(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function $T(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function gx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xu,jT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xu=xu||document.createElement("div"),xu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ks(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Is={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v2=["Webkit","ms","Moz","O"];Object.keys(Is).forEach(function(t){v2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Is[e]=Is[t]})});function LT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Is.hasOwnProperty(t)&&Is[t]?(""+e).trim():e+"px"}function UT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=LT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var x2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jp(t,e){if(e){if(x2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Yp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xp=null;function By(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qp=null,Wo=null,Ko=null;function yx(t){if(t=ru(t)){if(typeof Qp!="function")throw Error(K(280));var e=t.stateNode;e&&(e=lf(e),Qp(t.stateNode,t.type,e))}}function FT(t){Wo?Ko?Ko.push(t):Ko=[t]:Wo=t}function BT(){if(Wo){var t=Wo,e=Ko;if(Ko=Wo=null,yx(t),e)for(t=0;t<e.length;t++)yx(e[t])}}function zT(t,e){return t(e)}function GT(){}var Ah=!1;function HT(t,e,n){if(Ah)return t(e,n);Ah=!0;try{return zT(t,e,n)}finally{Ah=!1,(Wo!==null||Ko!==null)&&(GT(),BT())}}function Js(t,e){var n=t.stateNode;if(n===null)return null;var r=lf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Zp=!1;if(_r)try{var os={};Object.defineProperty(os,"passive",{get:function(){Zp=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Zp=!1}function b2(t,e,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Os=!1,vc=null,xc=!1,em=null,w2={onError:function(t){Os=!0,vc=t}};function _2(t,e,n,r,i,o,a,s,l){Os=!1,vc=null,b2.apply(w2,arguments)}function S2(t,e,n,r,i,o,a,s,l){if(_2.apply(this,arguments),Os){if(Os){var u=vc;Os=!1,vc=null}else throw Error(K(198));xc||(xc=!0,em=u)}}function oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function qT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vx(t){if(oo(t)!==t)throw Error(K(188))}function E2(t){var e=t.alternate;if(!e){if(e=oo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return vx(i),t;if(o===r)return vx(i),e;o=o.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function VT(t){return t=E2(t),t!==null?WT(t):null}function WT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=WT(t);if(e!==null)return e;t=t.sibling}return null}var KT=un.unstable_scheduleCallback,xx=un.unstable_cancelCallback,T2=un.unstable_shouldYield,k2=un.unstable_requestPaint,nt=un.unstable_now,A2=un.unstable_getCurrentPriorityLevel,zy=un.unstable_ImmediatePriority,JT=un.unstable_UserBlockingPriority,bc=un.unstable_NormalPriority,C2=un.unstable_LowPriority,YT=un.unstable_IdlePriority,rf=null,rr=null;function P2(t){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(rf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:O2,N2=Math.log,I2=Math.LN2;function O2(t){return t>>>=0,t===0?32:31-(N2(t)/I2|0)|0}var bu=64,wu=4194304;function ks(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var s=a&~i;s!==0?r=ks(s):(o&=a,o!==0&&(r=ks(o)))}else a=n&~i,a!==0?r=ks(a):o!==0&&(r=ks(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function R2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Gn(o),s=1<<a,l=i[a];l===-1?(!(s&n)||s&r)&&(i[a]=R2(s,e)):l<=e&&(t.expiredLanes|=s),o&=~s}}function tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function XT(){var t=bu;return bu<<=1,!(bu&4194240)&&(bu=64),t}function Ch(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function $2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Gy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Pe=0;function QT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ZT,Hy,ek,tk,nk,nm=!1,_u=[],Qr=null,Zr=null,ei=null,Ys=new Map,Xs=new Map,qr=[],D2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bx(t,e){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":Ys.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(e.pointerId)}}function as(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ru(e),e!==null&&Hy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function j2(t,e,n,r,i){switch(e){case"focusin":return Qr=as(Qr,t,e,n,r,i),!0;case"dragenter":return Zr=as(Zr,t,e,n,r,i),!0;case"mouseover":return ei=as(ei,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ys.set(o,as(Ys.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Xs.set(o,as(Xs.get(o)||null,t,e,n,r,i)),!0}return!1}function rk(t){var e=Ii(t.target);if(e!==null){var n=oo(e);if(n!==null){if(e=n.tag,e===13){if(e=qT(n),e!==null){t.blockedOn=e,nk(t.priority,function(){ek(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xp=r,n.target.dispatchEvent(r),Xp=null}else return e=ru(n),e!==null&&Hy(e),t.blockedOn=n,!1;e.shift()}return!0}function wx(t,e,n){oc(t)&&n.delete(e)}function L2(){nm=!1,Qr!==null&&oc(Qr)&&(Qr=null),Zr!==null&&oc(Zr)&&(Zr=null),ei!==null&&oc(ei)&&(ei=null),Ys.forEach(wx),Xs.forEach(wx)}function ss(t,e){t.blockedOn===e&&(t.blockedOn=null,nm||(nm=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,L2)))}function Qs(t){function e(i){return ss(i,t)}if(0<_u.length){ss(_u[0],t);for(var n=1;n<_u.length;n++){var r=_u[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qr!==null&&ss(Qr,t),Zr!==null&&ss(Zr,t),ei!==null&&ss(ei,t),Ys.forEach(e),Xs.forEach(e),n=0;n<qr.length;n++)r=qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<qr.length&&(n=qr[0],n.blockedOn===null);)rk(n),n.blockedOn===null&&qr.shift()}var Jo=Ir.ReactCurrentBatchConfig,_c=!0;function U2(t,e,n,r){var i=Pe,o=Jo.transition;Jo.transition=null;try{Pe=1,qy(t,e,n,r)}finally{Pe=i,Jo.transition=o}}function F2(t,e,n,r){var i=Pe,o=Jo.transition;Jo.transition=null;try{Pe=4,qy(t,e,n,r)}finally{Pe=i,Jo.transition=o}}function qy(t,e,n,r){if(_c){var i=rm(t,e,n,r);if(i===null)Lh(t,e,r,Sc,n),bx(t,r);else if(j2(i,t,e,n,r))r.stopPropagation();else if(bx(t,r),e&4&&-1<D2.indexOf(t)){for(;i!==null;){var o=ru(i);if(o!==null&&ZT(o),o=rm(t,e,n,r),o===null&&Lh(t,e,r,Sc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Lh(t,e,r,null,n)}}var Sc=null;function rm(t,e,n,r){if(Sc=null,t=By(r),t=Ii(t),t!==null)if(e=oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=qT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function ik(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A2()){case zy:return 1;case JT:return 4;case bc:case C2:return 16;case YT:return 536870912;default:return 16}default:return 16}}var Kr=null,Vy=null,ac=null;function ok(){if(ac)return ac;var t,e=Vy,n=e.length,r,i="value"in Kr?Kr.value:Kr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return ac=i.slice(t,1<r?1-r:void 0)}function sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Su(){return!0}function _x(){return!1}function fn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(n=t[s],this[s]=n?n(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Su:_x,this.isPropagationStopped=_x,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Su)},persist:function(){},isPersistent:Su}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=fn(ja),nu=Ye({},ja,{view:0,detail:0}),B2=fn(nu),Ph,Nh,ls,of=Ye({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ky,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ls&&(ls&&t.type==="mousemove"?(Ph=t.screenX-ls.screenX,Nh=t.screenY-ls.screenY):Nh=Ph=0,ls=t),Ph)},movementY:function(t){return"movementY"in t?t.movementY:Nh}}),Sx=fn(of),z2=Ye({},of,{dataTransfer:0}),G2=fn(z2),H2=Ye({},nu,{relatedTarget:0}),Ih=fn(H2),q2=Ye({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),V2=fn(q2),W2=Ye({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K2=fn(W2),J2=Ye({},ja,{data:0}),Ex=fn(J2),Y2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Z2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q2[t])?!!e[t]:!1}function Ky(){return Z2}var eR=Ye({},nu,{key:function(t){if(t.key){var e=Y2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?X2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ky,charCode:function(t){return t.type==="keypress"?sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tR=fn(eR),nR=Ye({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tx=fn(nR),rR=Ye({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ky}),iR=fn(rR),oR=Ye({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),aR=fn(oR),sR=Ye({},of,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lR=fn(sR),uR=[9,13,27,32],Jy=_r&&"CompositionEvent"in window,Rs=null;_r&&"documentMode"in document&&(Rs=document.documentMode);var cR=_r&&"TextEvent"in window&&!Rs,ak=_r&&(!Jy||Rs&&8<Rs&&11>=Rs),kx=" ",Ax=!1;function sk(t,e){switch(t){case"keyup":return uR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var No=!1;function dR(t,e){switch(t){case"compositionend":return lk(e);case"keypress":return e.which!==32?null:(Ax=!0,kx);case"textInput":return t=e.data,t===kx&&Ax?null:t;default:return null}}function fR(t,e){if(No)return t==="compositionend"||!Jy&&sk(t,e)?(t=ok(),ac=Vy=Kr=null,No=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ak&&e.locale!=="ko"?null:e.data;default:return null}}var hR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hR[t.type]:e==="textarea"}function uk(t,e,n,r){FT(r),e=Ec(e,"onChange"),0<e.length&&(n=new Wy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ms=null,Zs=null;function pR(t){bk(t,0)}function af(t){var e=Ro(t);if(RT(e))return t}function mR(t,e){if(t==="change")return e}var ck=!1;if(_r){var Oh;if(_r){var Rh="oninput"in document;if(!Rh){var Px=document.createElement("div");Px.setAttribute("oninput","return;"),Rh=typeof Px.oninput=="function"}Oh=Rh}else Oh=!1;ck=Oh&&(!document.documentMode||9<document.documentMode)}function Nx(){Ms&&(Ms.detachEvent("onpropertychange",dk),Zs=Ms=null)}function dk(t){if(t.propertyName==="value"&&af(Zs)){var e=[];uk(e,Zs,t,By(t)),HT(pR,e)}}function gR(t,e,n){t==="focusin"?(Nx(),Ms=e,Zs=n,Ms.attachEvent("onpropertychange",dk)):t==="focusout"&&Nx()}function yR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return af(Zs)}function vR(t,e){if(t==="click")return af(e)}function xR(t,e){if(t==="input"||t==="change")return af(e)}function bR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kn=typeof Object.is=="function"?Object.is:bR;function el(t,e){if(Kn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Up.call(e,i)||!Kn(t[i],e[i]))return!1}return!0}function Ix(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ox(t,e){var n=Ix(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ix(n)}}function fk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hk(){for(var t=window,e=yc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=yc(t.document)}return e}function Yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wR(t){var e=hk(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fk(n.ownerDocument.documentElement,n)){if(r!==null&&Yy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ox(n,o);var a=Ox(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _R=_r&&"documentMode"in document&&11>=document.documentMode,Io=null,im=null,$s=null,om=!1;function Rx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;om||Io==null||Io!==yc(r)||(r=Io,"selectionStart"in r&&Yy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$s&&el($s,r)||($s=r,r=Ec(im,"onSelect"),0<r.length&&(e=new Wy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Io)))}function Eu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oo={animationend:Eu("Animation","AnimationEnd"),animationiteration:Eu("Animation","AnimationIteration"),animationstart:Eu("Animation","AnimationStart"),transitionend:Eu("Transition","TransitionEnd")},Mh={},pk={};_r&&(pk=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function sf(t){if(Mh[t])return Mh[t];if(!Oo[t])return t;var e=Oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pk)return Mh[t]=e[n];return t}var mk=sf("animationend"),gk=sf("animationiteration"),yk=sf("animationstart"),vk=sf("transitionend"),xk=new Map,Mx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ci(t,e){xk.set(t,e),io(e,[t])}for(var $h=0;$h<Mx.length;$h++){var Dh=Mx[$h],SR=Dh.toLowerCase(),ER=Dh[0].toUpperCase()+Dh.slice(1);ci(SR,"on"+ER)}ci(mk,"onAnimationEnd");ci(gk,"onAnimationIteration");ci(yk,"onAnimationStart");ci("dblclick","onDoubleClick");ci("focusin","onFocus");ci("focusout","onBlur");ci(vk,"onTransitionEnd");oa("onMouseEnter",["mouseout","mouseover"]);oa("onMouseLeave",["mouseout","mouseover"]);oa("onPointerEnter",["pointerout","pointerover"]);oa("onPointerLeave",["pointerout","pointerover"]);io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));io("onBeforeInput",["compositionend","keypress","textInput","paste"]);io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TR=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function $x(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S2(r,e,void 0,t),t.currentTarget=null}function bk(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;$x(i,s,u),o=l}else for(a=0;a<r.length;a++){if(s=r[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;$x(i,s,u),o=l}}}if(xc)throw t=em,xc=!1,em=null,t}function Ue(t,e){var n=e[cm];n===void 0&&(n=e[cm]=new Set);var r=t+"__bubble";n.has(r)||(wk(e,t,2,!1),n.add(r))}function jh(t,e,n){var r=0;e&&(r|=4),wk(n,t,r,e)}var Tu="_reactListening"+Math.random().toString(36).slice(2);function tl(t){if(!t[Tu]){t[Tu]=!0,CT.forEach(function(n){n!=="selectionchange"&&(TR.has(n)||jh(n,!1,t),jh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Tu]||(e[Tu]=!0,jh("selectionchange",!1,e))}}function wk(t,e,n,r){switch(ik(e)){case 1:var i=U2;break;case 4:i=F2;break;default:i=qy}n=i.bind(null,e,n,t),i=void 0,!Zp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var s=r.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ii(s),a===null)return;if(l=a.tag,l===5||l===6){r=o=a;continue e}s=s.parentNode}}r=r.return}HT(function(){var u=o,c=By(n),d=[];e:{var h=xk.get(t);if(h!==void 0){var g=Wy,y=t;switch(t){case"keypress":if(sc(n)===0)break e;case"keydown":case"keyup":g=tR;break;case"focusin":y="focus",g=Ih;break;case"focusout":y="blur",g=Ih;break;case"beforeblur":case"afterblur":g=Ih;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Sx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=G2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=iR;break;case mk:case gk:case yk:g=V2;break;case vk:g=aR;break;case"scroll":g=B2;break;case"wheel":g=lR;break;case"copy":case"cut":case"paste":g=K2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Tx}var x=(e&4)!==0,v=!x&&t==="scroll",b=x?h!==null?h+"Capture":null:h;x=[];for(var w=u,_;w!==null;){_=w;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,b!==null&&(T=Js(w,b),T!=null&&x.push(nl(w,T,_)))),v)break;w=w.return}0<x.length&&(h=new g(h,y,null,n,c),d.push({event:h,listeners:x}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&n!==Xp&&(y=n.relatedTarget||n.fromElement)&&(Ii(y)||y[Sr]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(y=n.relatedTarget||n.toElement,g=u,y=y?Ii(y):null,y!==null&&(v=oo(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(g=null,y=u),g!==y)){if(x=Sx,T="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=Tx,T="onPointerLeave",b="onPointerEnter",w="pointer"),v=g==null?h:Ro(g),_=y==null?h:Ro(y),h=new x(T,w+"leave",g,n,c),h.target=v,h.relatedTarget=_,T=null,Ii(c)===u&&(x=new x(b,w+"enter",y,n,c),x.target=_,x.relatedTarget=v,T=x),v=T,g&&y)t:{for(x=g,b=y,w=0,_=x;_;_=ho(_))w++;for(_=0,T=b;T;T=ho(T))_++;for(;0<w-_;)x=ho(x),w--;for(;0<_-w;)b=ho(b),_--;for(;w--;){if(x===b||b!==null&&x===b.alternate)break t;x=ho(x),b=ho(b)}x=null}else x=null;g!==null&&Dx(d,h,g,x,!1),y!==null&&v!==null&&Dx(d,v,y,x,!0)}}e:{if(h=u?Ro(u):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var S=mR;else if(Cx(h))if(ck)S=xR;else{S=yR;var E=gR}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=vR);if(S&&(S=S(t,u))){uk(d,S,n,c);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Vp(h,"number",h.value)}switch(E=u?Ro(u):window,t){case"focusin":(Cx(E)||E.contentEditable==="true")&&(Io=E,im=u,$s=null);break;case"focusout":$s=im=Io=null;break;case"mousedown":om=!0;break;case"contextmenu":case"mouseup":case"dragend":om=!1,Rx(d,n,c);break;case"selectionchange":if(_R)break;case"keydown":case"keyup":Rx(d,n,c)}var k;if(Jy)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else No?sk(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(ak&&n.locale!=="ko"&&(No||A!=="onCompositionStart"?A==="onCompositionEnd"&&No&&(k=ok()):(Kr=c,Vy="value"in Kr?Kr.value:Kr.textContent,No=!0)),E=Ec(u,A),0<E.length&&(A=new Ex(A,t,null,n,c),d.push({event:A,listeners:E}),k?A.data=k:(k=lk(n),k!==null&&(A.data=k)))),(k=cR?dR(t,n):fR(t,n))&&(u=Ec(u,"onBeforeInput"),0<u.length&&(c=new Ex("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}bk(d,e)})}function nl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ec(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Js(t,n),o!=null&&r.unshift(nl(t,o,i)),o=Js(t,e),o!=null&&r.push(nl(t,o,i))),t=t.return}return r}function ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Dx(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,i?(l=Js(n,o),l!=null&&a.unshift(nl(n,l,s))):i||(l=Js(n,o),l!=null&&a.push(nl(n,l,s)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var kR=/\r\n?/g,AR=/\u0000|\uFFFD/g;function jx(t){return(typeof t=="string"?t:""+t).replace(kR,`
`).replace(AR,"")}function ku(t,e,n){if(e=jx(e),jx(t)!==e&&n)throw Error(K(425))}function Tc(){}var am=null,sm=null;function lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var um=typeof setTimeout=="function"?setTimeout:void 0,CR=typeof clearTimeout=="function"?clearTimeout:void 0,Lx=typeof Promise=="function"?Promise:void 0,PR=typeof queueMicrotask=="function"?queueMicrotask:typeof Lx<"u"?function(t){return Lx.resolve(null).then(t).catch(NR)}:um;function NR(t){setTimeout(function(){throw t})}function Uh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Qs(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Qs(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ux(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var La=Math.random().toString(36).slice(2),er="__reactFiber$"+La,rl="__reactProps$"+La,Sr="__reactContainer$"+La,cm="__reactEvents$"+La,IR="__reactListeners$"+La,OR="__reactHandles$"+La;function Ii(t){var e=t[er];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sr]||n[er]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ux(t);t!==null;){if(n=t[er])return n;t=Ux(t)}return e}t=n,n=t.parentNode}return null}function ru(t){return t=t[er]||t[Sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function lf(t){return t[rl]||null}var dm=[],Mo=-1;function di(t){return{current:t}}function ze(t){0>Mo||(t.current=dm[Mo],dm[Mo]=null,Mo--)}function je(t,e){Mo++,dm[Mo]=t.current,t.current=e}var ui={},Dt=di(ui),Kt=di(!1),Ki=ui;function aa(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jt(t){return t=t.childContextTypes,t!=null}function kc(){ze(Kt),ze(Dt)}function Fx(t,e,n){if(Dt.current!==ui)throw Error(K(168));je(Dt,e),je(Kt,n)}function _k(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,g2(t)||"Unknown",i));return Ye({},n,r)}function Ac(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,Ki=Dt.current,je(Dt,t),je(Kt,Kt.current),!0}function Bx(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=_k(t,e,Ki),r.__reactInternalMemoizedMergedChildContext=t,ze(Kt),ze(Dt),je(Dt,t)):ze(Kt),je(Kt,n)}var pr=null,uf=!1,Fh=!1;function Sk(t){pr===null?pr=[t]:pr.push(t)}function RR(t){uf=!0,Sk(t)}function fi(){if(!Fh&&pr!==null){Fh=!0;var t=0,e=Pe;try{var n=pr;for(Pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pr=null,uf=!1}catch(i){throw pr!==null&&(pr=pr.slice(t+1)),KT(zy,fi),i}finally{Pe=e,Fh=!1}}return null}var $o=[],Do=0,Cc=null,Pc=0,gn=[],yn=0,Ji=null,mr=1,gr="";function _i(t,e){$o[Do++]=Pc,$o[Do++]=Cc,Cc=t,Pc=e}function Ek(t,e,n){gn[yn++]=mr,gn[yn++]=gr,gn[yn++]=Ji,Ji=t;var r=mr;t=gr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var o=32-Gn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,mr=1<<32-Gn(e)+i|n<<i|r,gr=o+t}else mr=1<<o|n<<i|r,gr=t}function Xy(t){t.return!==null&&(_i(t,1),Ek(t,1,0))}function Qy(t){for(;t===Cc;)Cc=$o[--Do],$o[Do]=null,Pc=$o[--Do],$o[Do]=null;for(;t===Ji;)Ji=gn[--yn],gn[yn]=null,gr=gn[--yn],gn[yn]=null,mr=gn[--yn],gn[yn]=null}var ln=null,sn=null,Ge=!1,Fn=null;function Tk(t,e){var n=xn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,sn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ji!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,sn=null,!0):!1;default:return!1}}function fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hm(t){if(Ge){var e=sn;if(e){var n=e;if(!zx(t,e)){if(fm(t))throw Error(K(418));e=ti(n.nextSibling);var r=ln;e&&zx(t,e)?Tk(r,n):(t.flags=t.flags&-4097|2,Ge=!1,ln=t)}}else{if(fm(t))throw Error(K(418));t.flags=t.flags&-4097|2,Ge=!1,ln=t}}}function Gx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function Au(t){if(t!==ln)return!1;if(!Ge)return Gx(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lm(t.type,t.memoizedProps)),e&&(e=sn)){if(fm(t))throw kk(),Error(K(418));for(;e;)Tk(t,e),e=ti(e.nextSibling)}if(Gx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=ln?ti(t.stateNode.nextSibling):null;return!0}function kk(){for(var t=sn;t;)t=ti(t.nextSibling)}function sa(){sn=ln=null,Ge=!1}function Zy(t){Fn===null?Fn=[t]:Fn.push(t)}var MR=Ir.ReactCurrentBatchConfig;function us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Cu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hx(t){var e=t._init;return e(t._payload)}function Ak(t){function e(b,w){if(t){var _=b.deletions;_===null?(b.deletions=[w],b.flags|=16):_.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=oi(b,w),b.index=0,b.sibling=null,b}function o(b,w,_){return b.index=_,t?(_=b.alternate,_!==null?(_=_.index,_<w?(b.flags|=2,w):_):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function s(b,w,_,T){return w===null||w.tag!==6?(w=Wh(_,b.mode,T),w.return=b,w):(w=i(w,_),w.return=b,w)}function l(b,w,_,T){var S=_.type;return S===Po?c(b,w,_.props.children,T,_.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Br&&Hx(S)===w.type)?(T=i(w,_.props),T.ref=us(b,w,_),T.return=b,T):(T=pc(_.type,_.key,_.props,null,b.mode,T),T.ref=us(b,w,_),T.return=b,T)}function u(b,w,_,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Kh(_,b.mode,T),w.return=b,w):(w=i(w,_.children||[]),w.return=b,w)}function c(b,w,_,T,S){return w===null||w.tag!==7?(w=Bi(_,b.mode,T,S),w.return=b,w):(w=i(w,_),w.return=b,w)}function d(b,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wh(""+w,b.mode,_),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case yu:return _=pc(w.type,w.key,w.props,null,b.mode,_),_.ref=us(b,null,w),_.return=b,_;case Co:return w=Kh(w,b.mode,_),w.return=b,w;case Br:var T=w._init;return d(b,T(w._payload),_)}if(Ts(w)||is(w))return w=Bi(w,b.mode,_,null),w.return=b,w;Cu(b,w)}return null}function h(b,w,_,T){var S=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return S!==null?null:s(b,w,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case yu:return _.key===S?l(b,w,_,T):null;case Co:return _.key===S?u(b,w,_,T):null;case Br:return S=_._init,h(b,w,S(_._payload),T)}if(Ts(_)||is(_))return S!==null?null:c(b,w,_,T,null);Cu(b,_)}return null}function g(b,w,_,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return b=b.get(_)||null,s(w,b,""+T,S);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case yu:return b=b.get(T.key===null?_:T.key)||null,l(w,b,T,S);case Co:return b=b.get(T.key===null?_:T.key)||null,u(w,b,T,S);case Br:var E=T._init;return g(b,w,_,E(T._payload),S)}if(Ts(T)||is(T))return b=b.get(_)||null,c(w,b,T,S,null);Cu(w,T)}return null}function y(b,w,_,T){for(var S=null,E=null,k=w,A=w=0,C=null;k!==null&&A<_.length;A++){k.index>A?(C=k,k=null):C=k.sibling;var M=h(b,k,_[A],T);if(M===null){k===null&&(k=C);break}t&&k&&M.alternate===null&&e(b,k),w=o(M,w,A),E===null?S=M:E.sibling=M,E=M,k=C}if(A===_.length)return n(b,k),Ge&&_i(b,A),S;if(k===null){for(;A<_.length;A++)k=d(b,_[A],T),k!==null&&(w=o(k,w,A),E===null?S=k:E.sibling=k,E=k);return Ge&&_i(b,A),S}for(k=r(b,k);A<_.length;A++)C=g(k,b,A,_[A],T),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?A:C.key),w=o(C,w,A),E===null?S=C:E.sibling=C,E=C);return t&&k.forEach(function(R){return e(b,R)}),Ge&&_i(b,A),S}function x(b,w,_,T){var S=is(_);if(typeof S!="function")throw Error(K(150));if(_=S.call(_),_==null)throw Error(K(151));for(var E=S=null,k=w,A=w=0,C=null,M=_.next();k!==null&&!M.done;A++,M=_.next()){k.index>A?(C=k,k=null):C=k.sibling;var R=h(b,k,M.value,T);if(R===null){k===null&&(k=C);break}t&&k&&R.alternate===null&&e(b,k),w=o(R,w,A),E===null?S=R:E.sibling=R,E=R,k=C}if(M.done)return n(b,k),Ge&&_i(b,A),S;if(k===null){for(;!M.done;A++,M=_.next())M=d(b,M.value,T),M!==null&&(w=o(M,w,A),E===null?S=M:E.sibling=M,E=M);return Ge&&_i(b,A),S}for(k=r(b,k);!M.done;A++,M=_.next())M=g(k,b,A,M.value,T),M!==null&&(t&&M.alternate!==null&&k.delete(M.key===null?A:M.key),w=o(M,w,A),E===null?S=M:E.sibling=M,E=M);return t&&k.forEach(function(L){return e(b,L)}),Ge&&_i(b,A),S}function v(b,w,_,T){if(typeof _=="object"&&_!==null&&_.type===Po&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case yu:e:{for(var S=_.key,E=w;E!==null;){if(E.key===S){if(S=_.type,S===Po){if(E.tag===7){n(b,E.sibling),w=i(E,_.props.children),w.return=b,b=w;break e}}else if(E.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Br&&Hx(S)===E.type){n(b,E.sibling),w=i(E,_.props),w.ref=us(b,E,_),w.return=b,b=w;break e}n(b,E);break}else e(b,E);E=E.sibling}_.type===Po?(w=Bi(_.props.children,b.mode,T,_.key),w.return=b,b=w):(T=pc(_.type,_.key,_.props,null,b.mode,T),T.ref=us(b,w,_),T.return=b,b=T)}return a(b);case Co:e:{for(E=_.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){n(b,w.sibling),w=i(w,_.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=Kh(_,b.mode,T),w.return=b,b=w}return a(b);case Br:return E=_._init,v(b,w,E(_._payload),T)}if(Ts(_))return y(b,w,_,T);if(is(_))return x(b,w,_,T);Cu(b,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,_),w.return=b,b=w):(n(b,w),w=Wh(_,b.mode,T),w.return=b,b=w),a(b)):n(b,w)}return v}var la=Ak(!0),Ck=Ak(!1),Nc=di(null),Ic=null,jo=null,ev=null;function tv(){ev=jo=Ic=null}function nv(t){var e=Nc.current;ze(Nc),t._currentValue=e}function pm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yo(t,e){Ic=t,ev=jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function Tn(t){var e=t._currentValue;if(ev!==t)if(t={context:t,memoizedValue:e,next:null},jo===null){if(Ic===null)throw Error(K(308));jo=t,Ic.dependencies={lanes:0,firstContext:t}}else jo=jo.next=t;return e}var Oi=null;function rv(t){Oi===null?Oi=[t]:Oi.push(t)}function Pk(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,rv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Er(t,r)}function Er(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zr=!1;function iv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function xr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Er(t,n)}return i=r.interleaved,i===null?(e.next=e,rv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Er(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}function qx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var i=t.updateQueue;zr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var l=s,u=l.next;l.next=null,a===null?o=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==a&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;a=0,c=u=l=null,s=o;do{var h=s.lane,g=s.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,x=s;switch(h=e,g=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){d=y.call(g,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,h=typeof y=="function"?y.call(g,d,h):y,h==null)break e;d=Ye({},d,h);break e;case 2:zr=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=g,l=d):c=c.next=g,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Xi|=a,t.lanes=a,t.memoizedState=d}}function Vx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var iu={},ir=di(iu),il=di(iu),ol=di(iu);function Ri(t){if(t===iu)throw Error(K(174));return t}function ov(t,e){switch(je(ol,e),je(il,t),je(ir,iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kp(e,t)}ze(ir),je(ir,e)}function ua(){ze(ir),ze(il),ze(ol)}function Ik(t){Ri(ol.current);var e=Ri(ir.current),n=Kp(e,t.type);e!==n&&(je(il,t),je(ir,n))}function av(t){il.current===t&&(ze(ir),ze(il))}var We=di(0);function Rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bh=[];function sv(){for(var t=0;t<Bh.length;t++)Bh[t]._workInProgressVersionPrimary=null;Bh.length=0}var uc=Ir.ReactCurrentDispatcher,zh=Ir.ReactCurrentBatchConfig,Yi=0,Je=null,dt=null,gt=null,Mc=!1,Ds=!1,al=0,$R=0;function Pt(){throw Error(K(321))}function lv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kn(t[n],e[n]))return!1;return!0}function uv(t,e,n,r,i,o){if(Yi=o,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uc.current=t===null||t.memoizedState===null?UR:FR,t=n(r,i),Ds){o=0;do{if(Ds=!1,al=0,25<=o)throw Error(K(301));o+=1,gt=dt=null,e.updateQueue=null,uc.current=BR,t=n(r,i)}while(Ds)}if(uc.current=$c,e=dt!==null&&dt.next!==null,Yi=0,gt=dt=Je=null,Mc=!1,e)throw Error(K(300));return t}function cv(){var t=al!==0;return al=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Je.memoizedState=gt=t:gt=gt.next=t,gt}function kn(){if(dt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=gt===null?Je.memoizedState:gt.next;if(e!==null)gt=e,dt=t;else{if(t===null)throw Error(K(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},gt===null?Je.memoizedState=gt=t:gt=gt.next=t}return gt}function sl(t,e){return typeof e=="function"?e(t):e}function Gh(t){var e=kn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=dt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((Yi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=d,a=r):l=l.next=d,Je.lanes|=c,Xi|=c}u=u.next}while(u!==null&&u!==o);l===null?a=r:l.next=s,Kn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Je.lanes|=o,Xi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hh(t){var e=kn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Kn(o,e.memoizedState)||(Vt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Ok(){}function Rk(t,e){var n=Je,r=kn(),i=e(),o=!Kn(r.memoizedState,i);if(o&&(r.memoizedState=i,Vt=!0),r=r.queue,dv(Dk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||gt!==null&&gt.memoizedState.tag&1){if(n.flags|=2048,ll(9,$k.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(K(349));Yi&30||Mk(n,e,i)}return i}function Mk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $k(t,e,n,r){e.value=n,e.getSnapshot=r,jk(e)&&Lk(t)}function Dk(t,e,n){return n(function(){jk(e)&&Lk(t)})}function jk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kn(t,n)}catch{return!0}}function Lk(t){var e=Er(t,1);e!==null&&Hn(e,t,1,-1)}function Wx(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},e.queue=t,t=t.dispatch=LR.bind(null,Je,t),[e.memoizedState,t]}function ll(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Uk(){return kn().memoizedState}function cc(t,e,n,r){var i=Zn();Je.flags|=t,i.memoizedState=ll(1|e,n,void 0,r===void 0?null:r)}function cf(t,e,n,r){var i=kn();r=r===void 0?null:r;var o=void 0;if(dt!==null){var a=dt.memoizedState;if(o=a.destroy,r!==null&&lv(r,a.deps)){i.memoizedState=ll(e,n,o,r);return}}Je.flags|=t,i.memoizedState=ll(1|e,n,o,r)}function Kx(t,e){return cc(8390656,8,t,e)}function dv(t,e){return cf(2048,8,t,e)}function Fk(t,e){return cf(4,2,t,e)}function Bk(t,e){return cf(4,4,t,e)}function zk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gk(t,e,n){return n=n!=null?n.concat([t]):null,cf(4,4,zk.bind(null,e,t),n)}function fv(){}function Hk(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qk(t,e){var n=kn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&lv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vk(t,e,n){return Yi&21?(Kn(n,e)||(n=XT(),Je.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function DR(t,e){var n=Pe;Pe=n!==0&&4>n?n:4,t(!0);var r=zh.transition;zh.transition={};try{t(!1),e()}finally{Pe=n,zh.transition=r}}function Wk(){return kn().memoizedState}function jR(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kk(t))Jk(e,n);else if(n=Pk(t,e,n,r),n!==null){var i=Bt();Hn(n,t,r,i),Yk(n,e,r)}}function LR(t,e,n){var r=ii(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kk(t))Jk(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Kn(s,a)){var l=e.interleaved;l===null?(i.next=i,rv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Pk(t,e,i,r),n!==null&&(i=Bt(),Hn(n,t,r,i),Yk(n,e,r))}}function Kk(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function Jk(t,e){Ds=Mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}var $c={readContext:Tn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},UR={readContext:Tn,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:Tn,useEffect:Kx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,zk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=Zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jR.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:Wx,useDebugValue:fv,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=Wx(!1),e=t[0];return t=DR.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,i=Zn();if(Ge){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),yt===null)throw Error(K(349));Yi&30||Mk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Kx(Dk.bind(null,r,o,t),[t]),r.flags|=2048,ll(9,$k.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Zn(),e=yt.identifierPrefix;if(Ge){var n=gr,r=mr;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=al++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$R++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FR={readContext:Tn,useCallback:Hk,useContext:Tn,useEffect:dv,useImperativeHandle:Gk,useInsertionEffect:Fk,useLayoutEffect:Bk,useMemo:qk,useReducer:Gh,useRef:Uk,useState:function(){return Gh(sl)},useDebugValue:fv,useDeferredValue:function(t){var e=kn();return Vk(e,dt.memoizedState,t)},useTransition:function(){var t=Gh(sl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Rk,useId:Wk,unstable_isNewReconciler:!1},BR={readContext:Tn,useCallback:Hk,useContext:Tn,useEffect:dv,useImperativeHandle:Gk,useInsertionEffect:Fk,useLayoutEffect:Bk,useMemo:qk,useReducer:Hh,useRef:Uk,useState:function(){return Hh(sl)},useDebugValue:fv,useDeferredValue:function(t){var e=kn();return dt===null?e.memoizedState=t:Vk(e,dt.memoizedState,t)},useTransition:function(){var t=Hh(sl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Ok,useSyncExternalStore:Rk,useId:Wk,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var df={isMounted:function(t){return(t=t._reactInternals)?oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ii(t),o=xr(r,i);o.payload=e,n!=null&&(o.callback=n),e=ni(t,o,i),e!==null&&(Hn(e,t,i,r),lc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=ii(t),o=xr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ni(t,o,i),e!==null&&(Hn(e,t,i,r),lc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=ii(t),i=xr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ni(t,i,r),e!==null&&(Hn(e,t,r,n),lc(e,t,r))}};function Jx(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!el(n,r)||!el(i,o):!0}function Xk(t,e,n){var r=!1,i=ui,o=e.contextType;return typeof o=="object"&&o!==null?o=Tn(o):(i=Jt(e)?Ki:Dt.current,r=e.contextTypes,o=(r=r!=null)?aa(t,i):ui),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=df,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Yx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&df.enqueueReplaceState(e,e.state,null)}function gm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},iv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Tn(o):(o=Jt(e)?Ki:Dt.current,i.context=aa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(mm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&df.enqueueReplaceState(i,i.state,null),Oc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ca(t,e){try{var n="",r=e;do n+=m2(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function qh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ym(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zR=typeof WeakMap=="function"?WeakMap:Map;function Qk(t,e,n){n=xr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jc||(jc=!0,Am=r),ym(t,e)},n}function Zk(t,e,n){n=xr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ym(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ym(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Xx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=nM.bind(null,t,e,n),e.then(t,t))}function Qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=xr(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var GR=Ir.ReactCurrentOwner,Vt=!1;function Ut(t,e,n,r){e.child=t===null?Ck(e,null,n,r):la(e,t.child,n,r)}function eb(t,e,n,r,i){n=n.render;var o=e.ref;return Yo(e,i),r=uv(t,e,n,r,o,i),n=cv(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tr(t,e,i)):(Ge&&n&&Xy(e),e.flags|=1,Ut(t,e,r,i),e.child)}function tb(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!bv(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,eA(t,e,o,r,i)):(t=pc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:el,n(a,r)&&t.ref===e.ref)return Tr(t,e,i)}return e.flags|=1,t=oi(o,r),t.ref=e.ref,t.return=e,e.child=t}function eA(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(el(o,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,Tr(t,e,i)}return vm(t,e,n,r,i)}function tA(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Uo,tn),tn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Uo,tn),tn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,je(Uo,tn),tn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,je(Uo,tn),tn|=r;return Ut(t,e,i,n),e.child}function nA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vm(t,e,n,r,i){var o=Jt(n)?Ki:Dt.current;return o=aa(e,o),Yo(e,i),n=uv(t,e,n,r,o,i),r=cv(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Tr(t,e,i)):(Ge&&r&&Xy(e),e.flags|=1,Ut(t,e,n,i),e.child)}function nb(t,e,n,r,i){if(Jt(n)){var o=!0;Ac(e)}else o=!1;if(Yo(e,i),e.stateNode===null)dc(t,e),Xk(e,n,r),gm(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var l=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Tn(u):(u=Jt(n)?Ki:Dt.current,u=aa(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==r||l!==u)&&Yx(e,a,r,u),zr=!1;var h=e.memoizedState;a.state=h,Oc(e,r,a,i),l=e.memoizedState,s!==r||h!==l||Kt.current||zr?(typeof c=="function"&&(mm(e,n,c,r),l=e.memoizedState),(s=zr||Jx(e,n,s,r,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Nk(t,e),s=e.memoizedProps,u=e.type===e.elementType?s:$n(e.type,s),a.props=u,d=e.pendingProps,h=a.context,l=n.contextType,typeof l=="object"&&l!==null?l=Tn(l):(l=Jt(n)?Ki:Dt.current,l=aa(e,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==l)&&Yx(e,a,r,l),zr=!1,h=e.memoizedState,a.state=h,Oc(e,r,a,i);var y=e.memoizedState;s!==d||h!==y||Kt.current||zr?(typeof g=="function"&&(mm(e,n,g,r),y=e.memoizedState),(u=zr||Jx(e,n,u,r,h,y,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=u):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return xm(t,e,n,r,o,i)}function xm(t,e,n,r,i,o){nA(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&Bx(e,n,!1),Tr(t,e,o);r=e.stateNode,GR.current=e;var s=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=la(e,t.child,null,o),e.child=la(e,null,s,o)):Ut(t,e,s,o),e.memoizedState=r.state,i&&Bx(e,n,!0),e.child}function rA(t){var e=t.stateNode;e.pendingContext?Fx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fx(t,e.context,!1),ov(t,e.containerInfo)}function rb(t,e,n,r,i){return sa(),Zy(i),e.flags|=256,Ut(t,e,n,r),e.child}var bm={dehydrated:null,treeContext:null,retryLane:0};function wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function iA(t,e,n){var r=e.pendingProps,i=We.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(We,i&1),t===null)return hm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=pf(a,r,0,null),t=Bi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=wm(n),e.memoizedState=bm,t):hv(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return HR(t,e,a,r,s,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,s=i.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=oi(i,l),r.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=oi(s,o):(o=Bi(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?wm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=bm,r}return o=t.child,t=o.sibling,r=oi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function hv(t,e){return e=pf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pu(t,e,n,r){return r!==null&&Zy(r),la(e,t.child,null,n),t=hv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HR(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=qh(Error(K(422))),Pu(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=pf({mode:"visible",children:r.children},i,0,null),o=Bi(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&la(e,t.child,null,a),e.child.memoizedState=wm(a),e.memoizedState=bm,o);if(!(e.mode&1))return Pu(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var s=r.dgst;return r=s,o=Error(K(419)),r=qh(o,r,void 0),Pu(t,e,a,r)}if(s=(a&t.childLanes)!==0,Vt||s){if(r=yt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Er(t,i),Hn(r,t,i,-1))}return xv(),r=qh(Error(K(421))),Pu(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=rM.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,sn=ti(i.nextSibling),ln=e,Ge=!0,Fn=null,t!==null&&(gn[yn++]=mr,gn[yn++]=gr,gn[yn++]=Ji,mr=t.id,gr=t.overflow,Ji=e),e=hv(e,r.children),e.flags|=4096,e)}function ib(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pm(t.return,e,n)}function Vh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function oA(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ut(t,e,r.children,n),r=We.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ib(t,n,e);else if(t.tag===19)ib(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(je(We,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Rc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Rc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vh(e,!0,n,null,o);break;case"together":Vh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Tr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qR(t,e,n){switch(e.tag){case 3:rA(e),sa();break;case 5:Ik(e);break;case 1:Jt(e.type)&&Ac(e);break;case 4:ov(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;je(Nc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(je(We,We.current&1),e.flags|=128,null):n&e.child.childLanes?iA(t,e,n):(je(We,We.current&1),t=Tr(t,e,n),t!==null?t.sibling:null);je(We,We.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return oA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(We,We.current),r)break;return null;case 22:case 23:return e.lanes=0,tA(t,e,n)}return Tr(t,e,n)}var aA,_m,sA,lA;aA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_m=function(){};sA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ri(ir.current);var o=null;switch(n){case"input":i=Hp(t,i),r=Hp(t,r),o=[];break;case"select":i=Ye({},i,{value:void 0}),r=Ye({},r,{value:void 0}),o=[];break;case"textarea":i=Wp(t,i),r=Wp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Tc)}Jp(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var s=i[u];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ws.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(s=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ws.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ue("scroll",t),o||s===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};lA=function(t,e,n,r){n!==r&&(e.flags|=4)};function cs(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VR(t,e,n){var r=e.pendingProps;switch(Qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Jt(e.type)&&kc(),Nt(e),null;case 3:return r=e.stateNode,ua(),ze(Kt),ze(Dt),sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(Nm(Fn),Fn=null))),_m(t,e),Nt(e),null;case 5:av(e);var i=Ri(ol.current);if(n=e.type,t!==null&&e.stateNode!=null)sA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Nt(e),null}if(t=Ri(ir.current),Au(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[er]=e,r[rl]=o,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<As.length;i++)Ue(As[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":hx(r,o),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ue("invalid",r);break;case"textarea":mx(r,o),Ue("invalid",r)}Jp(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?r.textContent!==s&&(o.suppressHydrationWarning!==!0&&ku(r.textContent,s,t),i=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&ku(r.textContent,s,t),i=["children",""+s]):Ws.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&Ue("scroll",r)}switch(n){case"input":vu(r),px(r,o,!0);break;case"textarea":vu(r),gx(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Tc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[er]=e,t[rl]=r,aA(t,e,!1,!1),e.stateNode=t;e:{switch(a=Yp(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<As.length;i++)Ue(As[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":hx(t,r),i=Hp(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ye({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":mx(t,r),i=Wp(t,r),Ue("invalid",t);break;default:i=r}Jp(n,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="style"?UT(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jT(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ks(t,l):typeof l=="number"&&Ks(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ws.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ue("scroll",t):l!=null&&jy(t,o,l,a))}switch(n){case"input":vu(t),px(t,r,!1);break;case"textarea":vu(t),gx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Tc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)lA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ri(ol.current),Ri(ir.current),Au(e)){if(r=e.stateNode,n=e.memoizedProps,r[er]=e,(o=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:ku(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ku(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[er]=e,e.stateNode=r}return Nt(e),null;case 13:if(ze(We),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&sn!==null&&e.mode&1&&!(e.flags&128))kk(),sa(),e.flags|=98560,o=!1;else if(o=Au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(K(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(K(317));o[er]=e}else sa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else Fn!==null&&(Nm(Fn),Fn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||We.current&1?ft===0&&(ft=3):xv())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return ua(),_m(t,e),t===null&&tl(e.stateNode.containerInfo),Nt(e),null;case 10:return nv(e.type._context),Nt(e),null;case 17:return Jt(e.type)&&kc(),Nt(e),null;case 19:if(ze(We),o=e.memoizedState,o===null)return Nt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)cs(o,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Rc(t),a!==null){for(e.flags|=128,cs(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return je(We,We.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>da&&(e.flags|=128,r=!0,cs(o,!1),e.lanes=4194304)}else{if(!r)if(t=Rc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),cs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ge)return Nt(e),null}else 2*nt()-o.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,r=!0,cs(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=We.current,je(We,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return vv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tn&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function WR(t,e){switch(Qy(e),e.tag){case 1:return Jt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ua(),ze(Kt),ze(Dt),sv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return av(e),null;case 13:if(ze(We),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));sa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze(We),null;case 4:return ua(),null;case 10:return nv(e.type._context),null;case 22:case 23:return vv(),null;case 24:return null;default:return null}}var Nu=!1,Ot=!1,KR=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Sm(t,e,n){try{n()}catch(r){et(t,e,r)}}var ob=!1;function JR(t,e){if(am=_c,t=hk(),Yy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(s=a+i),d!==o||r!==0&&d.nodeType!==3||(l=a+r),d.nodeType===3&&(a+=d.nodeValue.length),(g=d.firstChild)!==null;)h=d,d=g;for(;;){if(d===t)break t;if(h===n&&++u===i&&(s=a),h===o&&++c===r&&(l=a),(g=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=g}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(sm={focusedElem:t,selectionRange:n},_c=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,v=y.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?x:$n(e.type,x),v);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(T){et(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return y=ob,ob=!1,y}function js(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Sm(e,n,o)}i=i.next}while(i!==r)}}function ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Em(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uA(t){var e=t.alternate;e!==null&&(t.alternate=null,uA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[er],delete e[rl],delete e[cm],delete e[IR],delete e[OR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cA(t){return t.tag===5||t.tag===3||t.tag===4}function ab(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Tc));else if(r!==4&&(t=t.child,t!==null))for(Tm(t,e,n),t=t.sibling;t!==null;)Tm(t,e,n),t=t.sibling}function km(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(km(t,e,n),t=t.sibling;t!==null;)km(t,e,n),t=t.sibling}var Et=null,jn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)dA(t,e,n),n=n.sibling}function dA(t,e,n){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(rf,n)}catch{}switch(n.tag){case 5:Ot||Lo(n,e);case 6:var r=Et,i=jn;Et=null,Ur(t,e,n),Et=r,jn=i,Et!==null&&(jn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(jn?(t=Et,n=n.stateNode,t.nodeType===8?Uh(t.parentNode,n):t.nodeType===1&&Uh(t,n),Qs(t)):Uh(Et,n.stateNode));break;case 4:r=Et,i=jn,Et=n.stateNode.containerInfo,jn=!0,Ur(t,e,n),Et=r,jn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Sm(n,e,a),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!Ot&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){et(n,e,s)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Ur(t,e,n),Ot=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function sb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KR),e.forEach(function(r){var i=iM.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:Et=s.stateNode,jn=!1;break e;case 3:Et=s.stateNode.containerInfo,jn=!0;break e;case 4:Et=s.stateNode.containerInfo,jn=!0;break e}s=s.return}if(Et===null)throw Error(K(160));dA(o,a,i),Et=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){et(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fA(e,t),e=e.sibling}function fA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Qn(t),r&4){try{js(3,t,t.return),ff(3,t)}catch(x){et(t,t.return,x)}try{js(5,t,t.return)}catch(x){et(t,t.return,x)}}break;case 1:On(e,t),Qn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(On(e,t),Qn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{Ks(i,"")}catch(x){et(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,s=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&MT(i,o),Yp(s,a);var u=Yp(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?UT(i,d):c==="dangerouslySetInnerHTML"?jT(i,d):c==="children"?Ks(i,d):jy(i,c,d,u)}switch(s){case"input":qp(i,o);break;case"textarea":$T(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Vo(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Vo(i,!!o.multiple,o.defaultValue,!0):Vo(i,!!o.multiple,o.multiple?[]:"",!1))}i[rl]=o}catch(x){et(t,t.return,x)}}break;case 6:if(On(e,t),Qn(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(x){et(t,t.return,x)}}break;case 3:if(On(e,t),Qn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Qs(e.containerInfo)}catch(x){et(t,t.return,x)}break;case 4:On(e,t),Qn(t);break;case 13:On(e,t),Qn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(gv=nt())),r&4&&sb(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(u=Ot)||c,On(e,t),Ot=u):On(e,t),Qn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ne=t,c=t.child;c!==null;){for(d=ne=c;ne!==null;){switch(h=ne,g=h.child,h.tag){case 0:case 11:case 14:case 15:js(4,h,h.return);break;case 1:Lo(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){et(r,n,x)}}break;case 5:Lo(h,h.return);break;case 22:if(h.memoizedState!==null){ub(d);continue}}g!==null?(g.return=h,ne=g):ub(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=LT("display",a))}catch(x){et(t,t.return,x)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){et(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:On(e,t),Qn(t),r&4&&sb(t);break;case 21:break;default:On(e,t),Qn(t)}}function Qn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ks(i,""),r.flags&=-33);var o=ab(t);km(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,s=ab(t);Tm(t,s,a);break;default:throw Error(K(161))}}catch(l){et(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YR(t,e,n){ne=t,hA(t)}function hA(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Nu;if(!a){var s=i.alternate,l=s!==null&&s.memoizedState!==null||Ot;s=Nu;var u=Ot;if(Nu=a,(Ot=l)&&!u)for(ne=i;ne!==null;)a=ne,l=a.child,a.tag===22&&a.memoizedState!==null?cb(i):l!==null?(l.return=a,ne=l):cb(i);for(;o!==null;)ne=o,hA(o),o=o.sibling;ne=i,Nu=s,Ot=u}lb(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ne=o):lb(t)}}function lb(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||ff(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vx(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vx(e,a,n)}break;case 5:var s=e.stateNode;if(n===null&&e.flags&4){n=s;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Qs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Ot||e.flags&512&&Em(e)}catch(h){et(e,e.return,h)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function ub(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function cb(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ff(4,e)}catch(l){et(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){et(e,i,l)}}var o=e.return;try{Em(e)}catch(l){et(e,o,l)}break;case 5:var a=e.return;try{Em(e)}catch(l){et(e,a,l)}}}catch(l){et(e,e.return,l)}if(e===t){ne=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ne=s;break}ne=e.return}}var XR=Math.ceil,Dc=Ir.ReactCurrentDispatcher,pv=Ir.ReactCurrentOwner,wn=Ir.ReactCurrentBatchConfig,_e=0,yt=null,at=null,kt=0,tn=0,Uo=di(0),ft=0,ul=null,Xi=0,hf=0,mv=0,Ls=null,qt=null,gv=0,da=1/0,dr=null,jc=!1,Am=null,ri=null,Iu=!1,Jr=null,Lc=0,Us=0,Cm=null,fc=-1,hc=0;function Bt(){return _e&6?nt():fc!==-1?fc:fc=nt()}function ii(t){return t.mode&1?_e&2&&kt!==0?kt&-kt:MR.transition!==null?(hc===0&&(hc=XT()),hc):(t=Pe,t!==0||(t=window.event,t=t===void 0?16:ik(t.type)),t):1}function Hn(t,e,n,r){if(50<Us)throw Us=0,Cm=null,Error(K(185));tu(t,n,r),(!(_e&2)||t!==yt)&&(t===yt&&(!(_e&2)&&(hf|=n),ft===4&&Vr(t,kt)),Yt(t,r),n===1&&_e===0&&!(e.mode&1)&&(da=nt()+500,uf&&fi()))}function Yt(t,e){var n=t.callbackNode;M2(t,e);var r=wc(t,t===yt?kt:0);if(r===0)n!==null&&xx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xx(n),e===1)t.tag===0?RR(db.bind(null,t)):Sk(db.bind(null,t)),PR(function(){!(_e&6)&&fi()}),n=null;else{switch(QT(r)){case 1:n=zy;break;case 4:n=JT;break;case 16:n=bc;break;case 536870912:n=YT;break;default:n=bc}n=wA(n,pA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pA(t,e){if(fc=-1,hc=0,_e&6)throw Error(K(327));var n=t.callbackNode;if(Xo()&&t.callbackNode!==n)return null;var r=wc(t,t===yt?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uc(t,r);else{e=r;var i=_e;_e|=2;var o=gA();(yt!==t||kt!==e)&&(dr=null,da=nt()+500,Fi(t,e));do try{eM();break}catch(s){mA(t,s)}while(!0);tv(),Dc.current=o,_e=i,at!==null?e=0:(yt=null,kt=0,e=ft)}if(e!==0){if(e===2&&(i=tm(t),i!==0&&(r=i,e=Pm(t,i))),e===1)throw n=ul,Fi(t,0),Vr(t,r),Yt(t,nt()),n;if(e===6)Vr(t,r);else{if(i=t.current.alternate,!(r&30)&&!QR(i)&&(e=Uc(t,r),e===2&&(o=tm(t),o!==0&&(r=o,e=Pm(t,o))),e===1))throw n=ul,Fi(t,0),Vr(t,r),Yt(t,nt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:Si(t,qt,dr);break;case 3:if(Vr(t,r),(r&130023424)===r&&(e=gv+500-nt(),10<e)){if(wc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=um(Si.bind(null,t,qt,dr),e);break}Si(t,qt,dr);break;case 4:if(Vr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Gn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=nt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XR(r/1960))-r,10<r){t.timeoutHandle=um(Si.bind(null,t,qt,dr),r);break}Si(t,qt,dr);break;case 5:Si(t,qt,dr);break;default:throw Error(K(329))}}}return Yt(t,nt()),t.callbackNode===n?pA.bind(null,t):null}function Pm(t,e){var n=Ls;return t.current.memoizedState.isDehydrated&&(Fi(t,e).flags|=256),t=Uc(t,e),t!==2&&(e=qt,qt=n,e!==null&&Nm(e)),t}function Nm(t){qt===null?qt=t:qt.push.apply(qt,t)}function QR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Kn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vr(t,e){for(e&=~mv,e&=~hf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function db(t){if(_e&6)throw Error(K(327));Xo();var e=wc(t,0);if(!(e&1))return Yt(t,nt()),null;var n=Uc(t,e);if(t.tag!==0&&n===2){var r=tm(t);r!==0&&(e=r,n=Pm(t,r))}if(n===1)throw n=ul,Fi(t,0),Vr(t,e),Yt(t,nt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Si(t,qt,dr),Yt(t,nt()),null}function yv(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(da=nt()+500,uf&&fi())}}function Qi(t){Jr!==null&&Jr.tag===0&&!(_e&6)&&Xo();var e=_e;_e|=1;var n=wn.transition,r=Pe;try{if(wn.transition=null,Pe=1,t)return t()}finally{Pe=r,wn.transition=n,_e=e,!(_e&6)&&fi()}}function vv(){tn=Uo.current,ze(Uo)}function Fi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CR(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(Qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:ua(),ze(Kt),ze(Dt),sv();break;case 5:av(r);break;case 4:ua();break;case 13:ze(We);break;case 19:ze(We);break;case 10:nv(r.type._context);break;case 22:case 23:vv()}n=n.return}if(yt=t,at=t=oi(t.current,null),kt=tn=e,ft=0,ul=null,mv=hf=Xi=0,qt=Ls=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Oi=null}return t}function mA(t,e){do{var n=at;try{if(tv(),uc.current=$c,Mc){for(var r=Je.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Mc=!1}if(Yi=0,gt=dt=Je=null,Ds=!1,al=0,pv.current=null,n===null||n.return===null){ft=1,ul=e,at=null;break}e:{var o=t,a=n.return,s=n,l=e;if(e=kt,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Qx(a);if(g!==null){g.flags&=-257,Zx(g,a,s,o,e),g.mode&1&&Xx(o,u,e),e=g,l=u;var y=e.updateQueue;if(y===null){var x=new Set;x.add(l),e.updateQueue=x}else y.add(l);break e}else{if(!(e&1)){Xx(o,u,e),xv();break e}l=Error(K(426))}}else if(Ge&&s.mode&1){var v=Qx(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Zx(v,a,s,o,e),Zy(ca(l,s));break e}}o=l=ca(l,s),ft!==4&&(ft=2),Ls===null?Ls=[o]:Ls.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=Qk(o,l,e);qx(o,b);break e;case 1:s=l;var w=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ri===null||!ri.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var T=Zk(o,s,e);qx(o,T);break e}}o=o.return}while(o!==null)}vA(n)}catch(S){e=S,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function gA(){var t=Dc.current;return Dc.current=$c,t===null?$c:t}function xv(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(Xi&268435455)&&!(hf&268435455)||Vr(yt,kt)}function Uc(t,e){var n=_e;_e|=2;var r=gA();(yt!==t||kt!==e)&&(dr=null,Fi(t,e));do try{ZR();break}catch(i){mA(t,i)}while(!0);if(tv(),_e=n,Dc.current=r,at!==null)throw Error(K(261));return yt=null,kt=0,ft}function ZR(){for(;at!==null;)yA(at)}function eM(){for(;at!==null&&!T2();)yA(at)}function yA(t){var e=bA(t.alternate,t,tn);t.memoizedProps=t.pendingProps,e===null?vA(t):at=e,pv.current=null}function vA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WR(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,at=null;return}}else if(n=VR(n,e,tn),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ft===0&&(ft=5)}function Si(t,e,n){var r=Pe,i=wn.transition;try{wn.transition=null,Pe=1,tM(t,e,n,r)}finally{wn.transition=i,Pe=r}return null}function tM(t,e,n,r){do Xo();while(Jr!==null);if(_e&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($2(t,o),t===yt&&(at=yt=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Iu||(Iu=!0,wA(bc,function(){return Xo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=wn.transition,wn.transition=null;var a=Pe;Pe=1;var s=_e;_e|=4,pv.current=null,JR(t,n),fA(n,t),wR(sm),_c=!!am,sm=am=null,t.current=n,YR(n),k2(),_e=s,Pe=a,wn.transition=o}else t.current=n;if(Iu&&(Iu=!1,Jr=t,Lc=i),o=t.pendingLanes,o===0&&(ri=null),P2(n.stateNode),Yt(t,nt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jc)throw jc=!1,t=Am,Am=null,t;return Lc&1&&t.tag!==0&&Xo(),o=t.pendingLanes,o&1?t===Cm?Us++:(Us=0,Cm=t):Us=0,fi(),null}function Xo(){if(Jr!==null){var t=QT(Lc),e=wn.transition,n=Pe;try{if(wn.transition=null,Pe=16>t?16:t,Jr===null)var r=!1;else{if(t=Jr,Jr=null,Lc=0,_e&6)throw Error(K(331));var i=_e;for(_e|=4,ne=t.current;ne!==null;){var o=ne,a=o.child;if(ne.flags&16){var s=o.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(ne=u;ne!==null;){var c=ne;switch(c.tag){case 0:case 11:case 15:js(8,c,o)}var d=c.child;if(d!==null)d.return=c,ne=d;else for(;ne!==null;){c=ne;var h=c.sibling,g=c.return;if(uA(c),c===u){ne=null;break}if(h!==null){h.return=g,ne=h;break}ne=g}}}var y=o.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var v=x.sibling;x.sibling=null,x=v}while(x!==null)}}ne=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ne=a;else e:for(;ne!==null;){if(o=ne,o.flags&2048)switch(o.tag){case 0:case 11:case 15:js(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ne=b;break e}ne=o.return}}var w=t.current;for(ne=w;ne!==null;){a=ne;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ne=_;else e:for(a=w;ne!==null;){if(s=ne,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:ff(9,s)}}catch(S){et(s,s.return,S)}if(s===a){ne=null;break e}var T=s.sibling;if(T!==null){T.return=s.return,ne=T;break e}ne=s.return}}if(_e=i,fi(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(rf,t)}catch{}r=!0}return r}finally{Pe=n,wn.transition=e}}return!1}function fb(t,e,n){e=ca(n,e),e=Qk(t,e,1),t=ni(t,e,1),e=Bt(),t!==null&&(tu(t,1,e),Yt(t,e))}function et(t,e,n){if(t.tag===3)fb(t,t,n);else for(;e!==null;){if(e.tag===3){fb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=ca(n,t),t=Zk(e,t,1),e=ni(e,t,1),t=Bt(),e!==null&&(tu(e,1,t),Yt(e,t));break}}e=e.return}}function nM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(kt&n)===n&&(ft===4||ft===3&&(kt&130023424)===kt&&500>nt()-gv?Fi(t,0):mv|=n),Yt(t,e)}function xA(t,e){e===0&&(t.mode&1?(e=wu,wu<<=1,!(wu&130023424)&&(wu=4194304)):e=1);var n=Bt();t=Er(t,e),t!==null&&(tu(t,e,n),Yt(t,n))}function rM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xA(t,n)}function iM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),xA(t,n)}var bA;bA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,qR(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Ge&&e.flags&1048576&&Ek(e,Pc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dc(t,e),t=e.pendingProps;var i=aa(e,Dt.current);Yo(e,n),i=uv(null,e,r,t,i,n);var o=cv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(o=!0,Ac(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iv(e),i.updater=df,e.stateNode=i,i._reactInternals=e,gm(e,r,t,n),e=xm(null,e,r,!0,o,n)):(e.tag=0,Ge&&o&&Xy(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aM(r),t=$n(r,t),i){case 0:e=vm(null,e,r,t,n);break e;case 1:e=nb(null,e,r,t,n);break e;case 11:e=eb(null,e,r,t,n);break e;case 14:e=tb(null,e,r,$n(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),vm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),nb(t,e,r,i,n);case 3:e:{if(rA(e),t===null)throw Error(K(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Nk(t,e),Oc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ca(Error(K(423)),e),e=rb(t,e,r,n,i);break e}else if(r!==i){i=ca(Error(K(424)),e),e=rb(t,e,r,n,i);break e}else for(sn=ti(e.stateNode.containerInfo.firstChild),ln=e,Ge=!0,Fn=null,n=Ck(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sa(),r===i){e=Tr(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return Ik(e),t===null&&hm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,lm(r,i)?a=null:o!==null&&lm(r,o)&&(e.flags|=32),nA(t,e),Ut(t,e,a,n),e.child;case 6:return t===null&&hm(e),null;case 13:return iA(t,e,n);case 4:return ov(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=la(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),eb(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,je(Nc,r._currentValue),r._currentValue=a,o!==null)if(Kn(o.value,a)){if(o.children===i.children&&!Kt.current){e=Tr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=xr(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),pm(o.return,n,e),s.lanes|=n;break}l=l.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(K(341));a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),pm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Yo(e,n),i=Tn(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),tb(t,e,r,i,n);case 15:return eA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),dc(t,e),e.tag=1,Jt(r)?(t=!0,Ac(e)):t=!1,Yo(e,n),Xk(e,r,i),gm(e,r,i,n),xm(null,e,r,!0,t,n);case 19:return oA(t,e,n);case 22:return tA(t,e,n)}throw Error(K(156,e.tag))};function wA(t,e){return KT(t,e)}function oM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,e,n,r){return new oM(t,e,n,r)}function bv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aM(t){if(typeof t=="function")return bv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uy)return 11;if(t===Fy)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pc(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")bv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Po:return Bi(n.children,i,o,e);case Ly:a=8,i|=8;break;case Fp:return t=xn(12,n,e,i|2),t.elementType=Fp,t.lanes=o,t;case Bp:return t=xn(13,n,e,i),t.elementType=Bp,t.lanes=o,t;case zp:return t=xn(19,n,e,i),t.elementType=zp,t.lanes=o,t;case IT:return pf(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PT:a=10;break e;case NT:a=9;break e;case Uy:a=11;break e;case Fy:a=14;break e;case Br:a=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=xn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Bi(t,e,n,r){return t=xn(7,t,r,e),t.lanes=n,t}function pf(t,e,n,r){return t=xn(22,t,r,e),t.elementType=IT,t.lanes=n,t.stateNode={isHidden:!1},t}function Wh(t,e,n){return t=xn(6,t,null,e),t.lanes=n,t}function Kh(t,e,n){return e=xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ch(0),this.expirationTimes=Ch(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ch(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function wv(t,e,n,r,i,o,a,s,l){return t=new sM(t,e,n,s,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=xn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},iv(o),t}function lM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _A(t){if(!t)return ui;t=t._reactInternals;e:{if(oo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(Jt(n))return _k(t,n,e)}return e}function SA(t,e,n,r,i,o,a,s,l){return t=wv(n,r,!0,t,i,o,a,s,l),t.context=_A(null),n=t.current,r=Bt(),i=ii(n),o=xr(r,i),o.callback=e??null,ni(n,o,i),t.current.lanes=i,tu(t,i,r),Yt(t,r),t}function mf(t,e,n,r){var i=e.current,o=Bt(),a=ii(i);return n=_A(n),e.context===null?e.context=n:e.pendingContext=n,e=xr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(i,e,a),t!==null&&(Hn(t,i,a,o),lc(t,i,a)),a}function Fc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _v(t,e){hb(t,e),(t=t.alternate)&&hb(t,e)}function uM(){return null}var EA=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sv(t){this._internalRoot=t}gf.prototype.render=Sv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));mf(t,e,null,null)};gf.prototype.unmount=Sv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){mf(null,t,null,null)}),e[Sr]=null}};function gf(t){this._internalRoot=t}gf.prototype.unstable_scheduleHydration=function(t){if(t){var e=tk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<qr.length&&e!==0&&e<qr[n].priority;n++);qr.splice(n,0,t),n===0&&rk(t)}};function Ev(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pb(){}function cM(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Fc(a);o.call(u)}}var a=SA(e,r,t,0,null,!1,!1,"",pb);return t._reactRootContainer=a,t[Sr]=a.current,tl(t.nodeType===8?t.parentNode:t),Qi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var s=r;r=function(){var u=Fc(l);s.call(u)}}var l=wv(t,0,!1,null,null,!1,!1,"",pb);return t._reactRootContainer=l,t[Sr]=l.current,tl(t.nodeType===8?t.parentNode:t),Qi(function(){mf(e,l,n,r)}),l}function vf(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var l=Fc(a);s.call(l)}}mf(e,a,t,i)}else a=cM(n,e,t,i,r);return Fc(a)}ZT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ks(e.pendingLanes);n!==0&&(Gy(e,n|1),Yt(e,nt()),!(_e&6)&&(da=nt()+500,fi()))}break;case 13:Qi(function(){var r=Er(t,1);if(r!==null){var i=Bt();Hn(r,t,1,i)}}),_v(t,1)}};Hy=function(t){if(t.tag===13){var e=Er(t,134217728);if(e!==null){var n=Bt();Hn(e,t,134217728,n)}_v(t,134217728)}};ek=function(t){if(t.tag===13){var e=ii(t),n=Er(t,e);if(n!==null){var r=Bt();Hn(n,t,e,r)}_v(t,e)}};tk=function(){return Pe};nk=function(t,e){var n=Pe;try{return Pe=t,e()}finally{Pe=n}};Qp=function(t,e,n){switch(e){case"input":if(qp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=lf(r);if(!i)throw Error(K(90));RT(r),qp(r,i)}}}break;case"textarea":$T(t,n);break;case"select":e=n.value,e!=null&&Vo(t,!!n.multiple,e,!1)}};zT=yv;GT=Qi;var dM={usingClientEntryPoint:!1,Events:[ru,Ro,lf,FT,BT,yv]},ds={findFiberByHostInstance:Ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fM={bundleType:ds.bundleType,version:ds.version,rendererPackageName:ds.rendererPackageName,rendererConfig:ds.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=VT(t),t===null?null:t.stateNode},findFiberByHostInstance:ds.findFiberByHostInstance||uM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{rf=Ou.inject(fM),rr=Ou}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dM;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ev(e))throw Error(K(200));return lM(t,e,null,n)};dn.createRoot=function(t,e){if(!Ev(t))throw Error(K(299));var n=!1,r="",i=EA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=wv(t,1,!1,null,null,n,!1,r,i),t[Sr]=e.current,tl(t.nodeType===8?t.parentNode:t),new Sv(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=VT(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Qi(t)};dn.hydrate=function(t,e,n){if(!yf(e))throw Error(K(200));return vf(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!Ev(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=EA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=SA(e,null,t,1,n??null,i,!1,o,a),t[Sr]=e.current,tl(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new gf(e)};dn.render=function(t,e,n){if(!yf(e))throw Error(K(200));return vf(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!yf(t))throw Error(K(40));return t._reactRootContainer?(Qi(function(){vf(null,null,t,!1,function(){t._reactRootContainer=null,t[Sr]=null})}),!0):!1};dn.unstable_batchedUpdates=yv;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yf(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return vf(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function TA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TA)}catch(t){console.error(t)}}TA(),TT.exports=dn;var hM=TT.exports,mb=hM;Lp.createRoot=mb.createRoot,Lp.hydrateRoot=mb.hydrateRoot;var Ce=(t=>(t.DASHBOARD="DASHBOARD",t.CAL_COACH="CAL_COACH",t.WORKOUT_PLAN="WORKOUT_PLAN",t.HISTORY="HISTORY",t.PROFILE="PROFILE",t.ONBOARDING="ONBOARDING",t))(Ce||{});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ae=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:s="",children:l,...u},c)=>P.createElement("svg",{ref:c,...pM,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${mM(t)}`,s].join(" "),...u},[...e.map(([d,h])=>P.createElement(d,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ae("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ae("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=ae("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=ae("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=ae("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=ae("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=ae("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ae("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=ae("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=ae("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=ae("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=ae("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=ae("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=ae("Hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=ae("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=ae("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=ae("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=ae("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=ae("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=ae("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=ae("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=ae("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=ae("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ae("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=ae("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=ae("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bf=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=ae("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=ae("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=ae("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=ae("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function MA(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=MA(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function me(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=MA(t))&&(r&&(r+=" "),r+=e);return r}const UM=({children:t,currentView:e,onNavigate:n})=>p.jsxs("div",{className:"h-[100dvh] bg-surface dark:bg-surface-dark flex flex-col max-w-md mx-auto relative shadow-2xl shadow-gray-200 dark:shadow-black/50 overflow-hidden border-x border-gray-100/50 dark:border-white/5 transition-colors duration-300",children:[p.jsx("main",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:t}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-white/60 dark:bg-[#0f111a]/60 backdrop-blur-md pointer-events-auto z-40"}),p.jsx("div",{className:"absolute bottom-8 left-6 right-6 z-50",children:p.jsxs("nav",{className:"bg-white/80 dark:bg-[#1a1c26]/80 backdrop-blur-xl rounded-[32px] p-2 shadow-diffused-lg dark:shadow-diffused-dark border border-white dark:border-white/5 flex justify-between items-center",children:[p.jsxs("button",{onClick:()=>n(Ce.DASHBOARD),className:me("flex items-center justify-center gap-2 py-3 rounded-[24px] transition-all duration-500",e===Ce.DASHBOARD?"flex-[1.6] bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 px-4":"flex-1 text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[p.jsx(SM,{size:22,strokeWidth:e===Ce.DASHBOARD?2.5:2}),e===Ce.DASHBOARD&&p.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Today"})]}),p.jsxs("button",{onClick:()=>n(Ce.CAL_COACH),className:me("flex items-center justify-center gap-2 py-3 rounded-[24px] transition-all duration-500",e===Ce.CAL_COACH?"flex-[1.6] bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 px-4":"flex-1 text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[p.jsx(or,{size:22,strokeWidth:e===Ce.CAL_COACH?2.5:2}),e===Ce.CAL_COACH&&p.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Coach"})]}),p.jsxs("button",{onClick:()=>n(Ce.WORKOUT_PLAN),className:me("flex items-center justify-center gap-2 py-3 rounded-[24px] transition-all duration-500",e===Ce.WORKOUT_PLAN?"flex-[2] bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 px-4":"flex-1 text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[p.jsx(Gc,{size:22,strokeWidth:e===Ce.WORKOUT_PLAN?2.5:2}),e===Ce.WORKOUT_PLAN&&p.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-left-2 duration-300",children:"Workout"})]}),p.jsxs("button",{onClick:()=>n(Ce.HISTORY),className:me("flex items-center justify-center gap-2 py-3 rounded-[24px] transition-all duration-500",e===Ce.HISTORY?"flex-[1.6] bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 px-4":"flex-1 text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[p.jsx(yM,{size:22,strokeWidth:e===Ce.HISTORY?2.5:2}),e===Ce.HISTORY&&p.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-right-2 duration-300",children:"Report"})]}),p.jsxs("button",{onClick:()=>n(Ce.PROFILE),className:me("flex items-center justify-center gap-2 py-3 rounded-[24px] transition-all duration-500",e===Ce.PROFILE?"flex-[1.6] bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 px-4":"flex-1 text-gray-400 dark:text-gray-500 hover:text-royal-500 dark:hover:text-royal-400 hover:bg-royal-50/50 dark:hover:bg-white/5"),children:[p.jsx(fa,{size:22,strokeWidth:e===Ce.PROFILE?2.5:2}),e===Ce.PROFILE&&p.jsx("span",{className:"text-sm font-semibold animate-in fade-in slide-in-from-right-2 duration-300",children:"Profile"})]})]})})]}),Mt=({children:t,className:e,onClick:n})=>p.jsx("div",{onClick:n,className:me("bg-white dark:bg-[#1a1c26] rounded-[32px] p-5 shadow-diffused dark:shadow-diffused-dark border border-white/60 dark:border-white/5",n&&"cursor-pointer active:scale-[0.98] transition-all hover:shadow-diffused-lg dark:hover:shadow-diffused-dark hover:-translate-y-0.5",e),children:t});function wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FM(t,e,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(c){try{u(r.next(c))}catch(d){a(d)}}function l(c){try{u(r.throw(c))}catch(d){a(d)}}function u(c){c.done?o(c.value):i(c.value).then(s,l)}u((r=r.apply(t,e||[])).next())})}const BM=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Pv extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class zM extends Pv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bb extends Pv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wb extends Pv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var $m;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})($m||($m={}));class GM{constructor(e,{headers:n={},customFetch:r,region:i=$m.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=BM(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return FM(this,arguments,void 0,function*(n,r={}){var i;let o,a;try{const{headers:s,method:l,body:u,signal:c,timeout:d}=r;let h={},{region:g}=r;g||(g=this.region);const y=new URL(`${this.url}/${n}`);g&&g!=="any"&&(h["x-region"]=g,y.searchParams.set("forceFunctionRegion",g));let x;u&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(h["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(h["Content-Type"]="application/json",x=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?x=JSON.stringify(u):x=u;let v=c;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),c?(v=a.signal,c.addEventListener("abort",()=>a.abort())):v=a.signal);const b=yield this.fetch(y.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:x,signal:v}).catch(S=>{throw new zM(S)}),w=b.headers.get("x-relay-error");if(w&&w==="true")throw new bb(b);if(!b.ok)throw new wb(b);let _=((i=b.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return _==="application/json"?T=yield b.json():_==="application/octet-stream"||_==="application/pdf"?T=yield b.blob():_==="text/event-stream"?T=b:_==="multipart/form-data"?T=yield b.formData():T=yield b.text(),{data:T,error:null,response:b}}catch(s){return{data:null,error:s,response:s instanceof wb||s instanceof bb?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var HM=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},qM=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let a=null,s=null,l=null,u=o.status,c=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var g;const b=await o.text();b===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((g=n.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?s=b:s=JSON.parse(b))}const x=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");x&&v&&v.length>1&&(l=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(s)&&(s.length>1?(a={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,l=null,u=406,c="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var y;const x=await o.text();try{a=JSON.parse(x),Array.isArray(a)&&o.status===404&&(s=[],a=null,u=200,c="OK")}catch{o.status===404&&x===""?(u=204,c="No Content"):a={message:x}}if(a&&n.isMaybeSingle&&(!(a==null||(y=a.details)===null||y===void 0)&&y.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&n.shouldThrowOnError)throw new HM(a)}return{error:a,data:s,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(i=i.catch(o=>{var a;let s="";const l=o==null?void 0:o.cause;if(l){var u,c,d,h;const y=(u=l==null?void 0:l.message)!==null&&u!==void 0?u:"",x=(c=l==null?void 0:l.code)!==null&&c!==void 0?c:"";s=`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,s+=`

Caused by: ${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"Error"}: ${y}`,x&&(s+=` (${x})`),l!=null&&l.stack&&(s+=`
${l.stack}`)}else{var g;s=(g=o==null?void 0:o.stack)!==null&&g!==void 0?g:""}return{error:{message:`${(a=o==null?void 0:o.name)!==null&&a!==void 0?a:"FetchError"}: ${o==null?void 0:o.message}`,details:s,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},VM=class extends qM{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const s=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${l}"; options=${s};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const _b=new RegExp("[,()]");var So=class extends VM{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&_b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&_b.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},WM=class{constructor(t,{headers:e={},schema:n,fetch:r}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},i=n?"HEAD":"GET";let o=!1;const a=(t??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:s,headers:l}=this.cloneRequestState();return s.searchParams.set("select",a),r&&l.append("Prefer",`count=${r}`),new So({method:i,url:s,headers:l,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const i="POST",{url:o,headers:a}=this.cloneRequestState();if(e&&a.append("Prefer",`count=${e}`),n||a.append("Prefer","missing=default"),Array.isArray(t)){const s=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(s.length>0){const l=[...new Set(s)].map(u=>`"${u}"`);o.searchParams.set("columns",l.join(","))}}return new So({method:i,url:o,headers:a,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST",{url:s,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&s.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),i||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);s.searchParams.set("columns",c.join(","))}}return new So({method:a,url:s,headers:l,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var n;const r="PATCH",{url:i,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new So({method:r,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new So({method:n,url:r,headers:i,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},KM=class $A{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new WM(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $A(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:o}={}){var a;let s;const l=new URL(`${this.url}/rpc/${e}`);let u;const c=g=>g!==null&&typeof g=="object"&&(!Array.isArray(g)||g.some(c)),d=r&&Object.values(n).some(c);d?(s="POST",u=n):r||i?(s=r?"HEAD":"GET",Object.entries(n).filter(([g,y])=>y!==void 0).map(([g,y])=>[g,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([g,y])=>{l.searchParams.append(g,y)})):(s="POST",u=n);const h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new So({method:s,url:l,headers:h,schema:this.schemaName,body:u,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class JM{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const YM="2.90.1",XM=`realtime-js/${YM}`,DA="1.0.0",QM="2.0.0",Sb=DA,Dm=1e4,ZM=1e3,e$=100;var Gr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Gr||(Gr={}));var ct;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ct||(ct={}));var Ln;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ln||(Ln={}));var jm;(function(t){t.websocket="websocket"})(jm||(jm={}));var Pi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pi||(Pi={}));class t${constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,n,r){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",l=(o=e.join_ref)!==null&&o!==void 0?o:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+s.length+a.length+u.length+d.length,g=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(g),x=0;y.setUint8(x++,this.KINDS.userBroadcastPush),y.setUint8(x++,l.length),y.setUint8(x++,s.length),y.setUint8(x++,a.length),y.setUint8(x++,u.length),y.setUint8(x++,d.length),y.setUint8(x++,n),Array.from(l,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(s,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(a,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(u,b=>y.setUint8(x++,b.charCodeAt(0))),Array.from(d,b=>y.setUint8(x++,b.charCodeAt(0)));var v=new Uint8Array(g.byteLength+r.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(r),g.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,a,s,l]=r;return n({join_ref:i,ref:o,topic:a,event:s,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),a=n.getUint8(3),s=n.getUint8(4);let l=this.HEADER_LENGTH+4;const u=r.decode(e.slice(l,l+i));l=l+i;const c=r.decode(e.slice(l,l+o));l=l+o;const d=r.decode(e.slice(l,l+a));l=l+a;const h=e.slice(l,e.byteLength),g=s===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,y={type:this.BROADCAST_EVENT,event:c,payload:g};return a>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class jA{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var $e;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})($e||($e={}));const Eb=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=n$(a,t,e,i),o),{}):{}},n$=(t,e,n,r)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=n[t];return o&&!r.includes(o)?LA(o,a):Lm(a)},LA=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return a$(e,n)}switch(t){case $e.bool:return r$(e);case $e.float4:case $e.float8:case $e.int2:case $e.int4:case $e.int8:case $e.numeric:case $e.oid:return i$(e);case $e.json:case $e.jsonb:return o$(e);case $e.timestamp:return s$(e);case $e.abstime:case $e.date:case $e.daterange:case $e.int4range:case $e.int8range:case $e.money:case $e.reltime:case $e.text:case $e.time:case $e.timestamptz:case $e.timetz:case $e.tsrange:case $e.tstzrange:return Lm(e);default:return Lm(e)}},Lm=t=>t,r$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},a$=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>LA(e,s))}return t},s$=t=>typeof t=="string"?t.replace(" ","T"):t,UA=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Yh{constructor(e,n,r={},i=Dm){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tb;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Tb||(Tb={}));class Fs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fs.syncState(this.state,i,o,a),this.pendingDiffs.forEach(l=>{this.state=Fs.syncDiff(this.state,l,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Fs.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),a=this.transformState(n),s={},l={};return this.map(o,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const d=o[u];if(d){const h=c.map(v=>v.presence_ref),g=d.map(v=>v.presence_ref),y=c.filter(v=>g.indexOf(v.presence_ref)<0),x=d.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(s[u]=y),x.length>0&&(l[u]=x)}else s[u]=c}),this.syncDiff(o,{joins:s,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(s,l)=>{var u;const c=(u=e[s])!==null&&u!==void 0?u:[];if(e[s]=this.cloneDeep(l),c.length>0){const d=e[s].map(g=>g.presence_ref),h=c.filter(g=>d.indexOf(g.presence_ref)<0);e[s].unshift(...h)}r(s,c,l)}),this.map(a,(s,l)=>{let u=e[s];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[s]=u,i(s,u,l),u.length===0&&delete e[s]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var kb;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(kb||(kb={}));var Bs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Bs||(Bs={}));var fr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(fr||(fr={}));class Fo{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ct.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Yh(this,Ln.join,this.params,this.timeout),this.rejoinTimer=new jA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ct.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ct.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ct.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ln.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new Fs(this),this.broadcastEndpointURL=UA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==ct.closed){const{config:{broadcast:a,presence:s,private:l}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],c=!!this.bindings[Bs.PRESENCE]&&this.bindings[Bs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(fr.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(fr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),g===void 0){e==null||e(fr.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,v=(y=x==null?void 0:x.length)!==null&&y!==void 0?y:0,b=[];for(let w=0;w<v;w++){const _=x[w],{filter:{event:T,schema:S,table:E,filter:k}}=_,A=g&&g[w];if(A&&A.event===T&&Fo.isFilterValueEqual(A.schema,S)&&Fo.isFilterValueEqual(A.table,E)&&Fo.isFilterValueEqual(A.filter,k))b.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=ct.errored,e==null||e(fr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(fr.SUBSCRIBED);return}}).receive("error",g=>{this.state=ct.errored,e==null||e(fr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(fr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ct.joined&&e===Bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let l=s.statusText;try{const u=await s.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ct.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ln.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Yh(this,Ln.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ct.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Yh(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>e$){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:l,leave:u,join:c}=Ln;if(r&&[s,l,u,c].indexOf(a)>=0&&r!==this._joinRef())return;let h=this._onMessage(a,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var y,x,v;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(x=g.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===a}).map(g=>g.callback(h,r)):(o=this.bindings[a])===null||o===void 0||o.filter(g=>{var y,x,v,b,w,_,T,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const E=g.id,k=(y=g.filter)===null||y===void 0?void 0:y.event;return E&&((x=n.ids)===null||x===void 0?void 0:x.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))&&(!(!((b=g.filter)===null||b===void 0)&&b.table)||g.filter.table===((w=n.data)===null||w===void 0?void 0:w.table))}else{const E=(T=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:x,table:v,commit_timestamp:b,type:w,errors:_}=y;h=Object.assign(Object.assign({},{schema:x,table:v,commit_timestamp:b,eventType:w,new:{},old:{},errors:_}),this._getPayloadRecords(y))}g.callback(h,r)})}_isClosed(){return this.state===ct.closed}_isJoined(){return this.state===ct.joined}_isJoining(){return this.state===ct.joining}_isLeaving(){return this.state===ct.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Fo.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ln.close,{},e)}_onError(e){this._on(Ln.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ct.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Eb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Eb(e.columns,e.old_record)),n}}const Xh=()=>{},Ru={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l$=[1e3,2e3,5e3,1e4],u$=1e4,c$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d${constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dm,this.transport=null,this.heartbeatIntervalMs=Ru.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xh,this.ref=0,this.reconnectTimer=null,this.vsn=Sb,this.logger=Xh,this.conn=null,this.sendBuffer=[],this.serializer=new t$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${jm.websocket}`,this.httpEndpoint=UA(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JM.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Gr.connecting:return Pi.Connecting;case Gr.open:return Pi.Open;case Gr.closing:return Pi.Closing;default:return Pi.Closed}}isConnected(){return this.connectionState()===Pi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Fo(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var l;(l=this.conn)===null||l===void 0||l.send(s)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ZM,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Ru.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:i,payload:o,ref:a}=n,s=a?`(${a})`:"",l=o.status||"";this.log("receive",`${l} ${r} ${i} ${s}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Gr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Gr.open||this.conn.readyState===Gr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ln.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([c$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const o={access_token:n,version:XM};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Ln.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new jA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Ru.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,a,s,l,u,c,d,h,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Dm,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Ru.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:Xh,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Sb,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:y=>l$[y-1]||u$,this.vsn){case DA:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(y,x)=>x(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,x)=>x(JSON.parse(y));break;case QM:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var cl=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function f$(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function h$(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function p$(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:a}){const s=f$(t.baseUrl,r,i),l=await h$(t.auth),u=await e(s,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...l,...a},body:o?JSON.stringify(o):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const g=d?h:void 0,y=g==null?void 0:g.error;throw new cl((y==null?void 0:y.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:g})}return{status:u.status,headers:u.headers,data:h}}}}function Mu(t){return t.join("")}var m$=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Mu(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Mu(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Mu(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Mu(t.namespace)}`}),!0}catch(e){if(e instanceof cl&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof cl&&n.status===409)return;throw n}}};function po(t){return t.join("")}var g$=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${po(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof cl&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof cl&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},y$=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=p$({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new m$(this.client,e),this.tableOps=new g$(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},_f=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function Ve(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var v$=class extends _f{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Um=class extends _f{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Nv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),x$=()=>Response,Fm=t=>{if(Array.isArray(t))return t.map(n=>Fm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Fm(r)}),e},b$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w$=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function dl(t){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(t)}function _$(t,e){if(dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function S$(t){var e=_$(t,"string");return dl(e)=="symbol"?e:e+""}function E$(t,e,n){return(e=S$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ab(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ab(Object(n),!0).forEach(function(r){E$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ab(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Qh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},T$=async(t,e,n)=>{t instanceof await x$()&&!(n!=null&&n.noResolveJson)?t.json().then(r=>{const i=t.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new v$(Qh(r),i,o))}).catch(r=>{e(new Um(Qh(r),r))}):e(new Um(Qh(t),t))},k$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(b$(r)?(i.headers=ce({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),ce(ce({},i),n))};async function ou(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,k$(e,r,i,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>T$(l,s,r))})}async function fl(t,e,n,r){return ou(t,"GET",e,n,r)}async function Dn(t,e,n,r,i){return ou(t,"POST",e,r,i,n)}async function Bm(t,e,n,r,i){return ou(t,"PUT",e,r,i,n)}async function A$(t,e,n,r){return ou(t,"HEAD",e,ce(ce({},n),{},{noResolveJson:!0}),r)}async function Iv(t,e,n,r,i){return ou(t,"DELETE",e,r,i,n)}var C$=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}}};let FA;FA=Symbol.toStringTag;var P$=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[FA]="BlobDownloadBuilder",this.promise=null}asStream(){return new C$(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(Ve(e))return{data:null,error:e};throw e}}};const N$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var I$=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=Nv(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,r){var i=this;try{let o;const a=ce(ce({},Cb),r);let s=ce(ce({},i.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),l&&o.append("metadata",i.encodeMetadata(l)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),l&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(l))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,l&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(l))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),r!=null&&r.headers&&(s=ce(ce({},s),r.headers));const u=i._removeEmptyFolders(e),c=i._getFinalPath(u),d=await(t=="PUT"?Bm:Dn)(i.fetch,`${i.url}/object/${c}`,o,ce({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ve(o))return{data:null,error:o};throw o}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var i=this;const o=i._removeEmptyFolders(t),a=i._getFinalPath(o),s=new URL(i.url+`/object/upload/sign/${a}`);s.searchParams.set("token",e);try{let l;const u=ce({upsert:Cb.upsert},r),c=ce(ce({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{data:{path:o,fullPath:(await Bm(i.fetch,s.toString(),l,{headers:c})).Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(Ve(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var n=this;try{let r=n._getFinalPath(t);const i=ce({},n.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const o=await Dn(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),a=new URL(n.url+o.url),s=a.searchParams.get("token");if(!s)throw new _f("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:s},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;try{return{data:await Dn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}}async copy(t,e,n){var r=this;try{return{data:{path:(await Dn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key},error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,n){var r=this;try{let i=r._getFinalPath(t),o=await Dn(r.fetch,`${r.url}/object/sign/${i}`,ce({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${r.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,n){var r=this;try{const i=await Dn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>ce(ce({},a),{},{signedUrl:a.signedURL?encodeURI(`${r.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=r?`?${r}`:"",o=this._getFinalPath(t),a=()=>fl(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new P$(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:Fm(await fl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await A$(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(Ve(r)&&r instanceof Um){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&r.push(i);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&r.push(a);let s=r.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${s}`)}}}async remove(t){var e=this;try{return{data:await Iv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async list(t,e,n){var r=this;try{const i=ce(ce(ce({},N$),e),{},{prefix:t||""});return{data:await Dn(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n),error:null}}catch(i){if(r.shouldThrowOnError)throw i;if(Ve(i))return{data:null,error:i};throw i}}async listV2(t,e){var n=this;try{const r=ce({},t);return{data:await Dn(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const BA="2.90.1",zA={"X-Client-Info":`storage-js/${BA}`};var O$=class{constructor(t,e={},n,r){this.shouldThrowOnError=!1;const i=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=ce(ce({},zA),e),this.fetch=Nv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await fl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await fl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Dn(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}}async updateBucket(t,e){var n=this;try{return{data:await Bm(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(Ve(r))return{data:null,error:r};throw r}}async emptyBucket(t){var e=this;try{return{data:await Dn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Iv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},R$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ce(ce({},zA),e),this.fetch=Nv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Dn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),i=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return{data:await fl(e.fetch,i,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await Iv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Ve(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!w$(t))throw new _f("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new y$({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){const a=i[o];return typeof a!="function"?a:async(...s)=>{try{return{data:await a.apply(i,s),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}};const Ov={"X-Client-Info":`storage-js/${BA}`,"Content-Type":"application/json"};var GA=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function rn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Zh=class extends GA{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},M$=class extends GA{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Rv=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pb=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),D$=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const r=t.status||500,i=t;if(typeof i.json=="function")i.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||r+"";e(new Zh(Pb(o),r,a))}).catch(()=>{const o=r+"";e(new Zh(i.statusText||`HTTP ${r} error`,r,o))});else{const o=r+"";e(new Zh(i.statusText||`HTTP ${r} error`,r,o))}}else e(new M$(Pb(t),t))},j$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?($$(r)?(i.headers=ce({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,ce(ce({},i),n)):i};async function L$(t,e,n,r,i,o){return new Promise((a,s)=>{t(n,j$(e,r,i,o)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const u=l.headers.get("content-type");return!u||!u.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>D$(l,s,r))})}async function on(t,e,n,r,i){return L$(t,"POST",e,r,i,n)}var U$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ce(ce({},Ov),e),this.fetch=Rv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await on(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}}async listIndexes(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await on(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(rn(r))return{data:null,error:r};throw r}}},F$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ce(ce({},Ov),e),this.fetch=Rv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await on(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await on(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await on(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}},B$=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ce(ce({},Ov),e),this.fetch=Rv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await on(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await on(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rn(n))return{data:null,error:n};throw n}}},z$=class extends B${constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new G$(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},G$=class extends U${constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new H$(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},H$=class extends F${constructor(t,e,n,r,i){super(t,e,i),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ce(ce({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},q$=class extends O${constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new I$(this.url,this.headers,t,this.fetch)}get vectors(){return new z$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new R$(this.url+"/iceberg",this.headers,this.fetch)}};const HA="2.90.1",Eo=30*1e3,zm=3,ep=zm*Eo,V$="http://localhost:9999",W$="supabase.auth.token",K$={"X-Client-Info":`gotrue-js/${HA}`},Gm="X-Supabase-Api-Version",qA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},J$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Y$=10*60*1e3;class hl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function oe(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class X$ extends hl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Q$(t){return oe(t)&&t.name==="AuthApiError"}class Ni extends hl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Or extends hl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Zt extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z$(t){return oe(t)&&t.name==="AuthSessionMissingError"}class mo extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $u extends Or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Du extends Or{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eD(t){return oe(t)&&t.name==="AuthImplicitGrantRedirectError"}class Nb extends Or{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tD extends Or{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Hm extends Or{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function tp(t){return oe(t)&&t.name==="AuthRetryableFetchError"}class Ib extends Or{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class qm extends Or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ob=` 	
\r=`.split(""),nD=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ob.length;e+=1)t[Ob[e].charCodeAt(0)]=-2;for(let e=0;e<Hc.length;e+=1)t[Hc[e].charCodeAt(0)]=e;return t})();function Rb(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Hc[r]),e.queuedBits-=6}}function VA(t,e,n){const r=nD[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Mb(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{oD(a,r,n)};for(let a=0;a<t.length;a+=1)VA(t.charCodeAt(a),i,o);return e.join("")}function rD(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function iD(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}rD(r,e)}}function oD(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Qo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)VA(t.charCodeAt(i),n,r);return new Uint8Array(e)}function aD(t){const e=[];return iD(t,n=>e.push(n)),new Uint8Array(e)}function Mi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Rb(i,n,r)),Rb(null,n,r),e.join("")}function sD(t){return Math.round(Date.now()/1e3)+t}function lD(){return Symbol("auth-callback")}const _t=()=>typeof window<"u"&&typeof document<"u",xi={tested:!1,writable:!1},WA=()=>{if(!_t())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(xi.tested)return xi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),xi.tested=!0,xi.writable=!0}catch{xi.tested=!0,xi.writable=!1}return xi.writable};function uD(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const KA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),cD=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",To=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},bi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},bt=async(t,e)=>{await t.removeItem(e)};class Sf{constructor(){this.promise=new Sf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Sf.promiseConstructor=Promise;function np(t){const e=t.split(".");if(e.length!==3)throw new qm("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!J$.test(e[r]))throw new qm("JWT not in base64url format");return{header:JSON.parse(Mb(e[0])),payload:JSON.parse(Mb(e[1])),signature:Qo(e[2]),raw:{header:e[0],payload:e[1]}}}async function dD(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fD(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function hD(t){return("0"+t.toString(16)).substr(-2)}function pD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,hD).join("")}async function mD(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function gD(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await mD(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function go(t,e,n=!1){const r=pD();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await To(t,`${e}-code-verifier`,i);const o=await gD(r);return[o,r===o?"plain":"s256"]}const yD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vD(t){const e=t.headers.get(Gm);if(!e||!e.match(yD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function xD(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function bD(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yo(t){if(!wD.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function rp(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _D(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function $b(t){return JSON.parse(JSON.stringify(t))}const Ei=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),SD=[502,503,504];async function Db(t){var e;if(!cD(t))throw new Hm(Ei(t),0);if(SD.includes(t.status))throw new Hm(Ei(t),t.status);let n;try{n=await t.json()}catch(o){throw new Ni(Ei(o),o)}let r;const i=vD(t);if(i&&i.getTime()>=qA["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ib(Ei(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Zt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new Ib(Ei(n),t.status,n.weak_password.reasons);throw new X$(Ei(n),t.status||500,r)}const ED=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ue(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[Gm]||(o[Gm]=qA["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await TD(t,e,n+s,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function TD(t,e,n,r,i,o){const a=ED(e,r,i,o);let s;try{s=await t(n,Object.assign({},a))}catch(l){throw console.error(l),new Hm(Ei(l),0)}if(s.ok||await Db(s),r!=null&&r.noResolveJson)return s;try{return await s.json()}catch(l){await Db(l)}}function Mn(t){var e;let n=null;CD(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=sD(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function jb(t){const e=Mn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function kD(t){return{data:t,error:null}}function AD(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,a=wf(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},l=Object.assign({},a);return{data:{properties:s,user:l},error:null}}function Lb(t){return t}function CD(t){return t.access_token&&t.refresh_token&&t.expires_in}const ip=["global","local","others"];class PD{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=KA(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ip[0]){if(ip.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ip.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wf(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:AD,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(oe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Lb});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){yo(e);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wr})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yo(e);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Wr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yo(e);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wr})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yo(e.userId);try{const{data:n,error:r}=await ue(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yo(e.userId),yo(e.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,a,s,l;try{const u={nextPage:null,lastPage:0,total:0},c=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Lb});if(c.error)throw c.error;const d=await c.json(),h=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(s=c.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(oe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}}function Ub(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const vo={debug:!!(globalThis&&WA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JA extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ND extends JA{}async function ID(t,e,n){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),vo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw vo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ND(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(vo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function OD(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function YA(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function RD(t){return parseInt(t,16)}function MD(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function $D(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=YA(t.address),y=c?`${c}://${r}`:r,x=t.statement?`${t.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${g}

${x}`;let b=`URI: ${d}
Version: ${h}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(b+=`
Expiration Time: ${i.toISOString()}`),s&&(b+=`
Not Before: ${s.toISOString()}`),l&&(b+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const _ of u){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);w+=`
- ${_}`}b+=w}return`${v}
${b}`}class ot extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class qc extends ot{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function DD({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ot({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ot({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ot({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ot({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new ot({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ot({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(XA(a)){if(o.rp.id!==a)return new ot({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ot({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function jD({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ot({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ot({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(XA(r)){if(n.rpId!==r)return new ot({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ot({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ot({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ot({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class LD{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const UD=new LD;function FD(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=wf(t,["challenge","user","excludeCredentials"]),o=Qo(e).buffer,a=Object.assign(Object.assign({},n),{id:Qo(n.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(r&&r.length>0){s.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];s.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Qo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return s}function BD(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=wf(t,["challenge","allowCredentials"]),i=Qo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const s=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:Qo(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function zD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Mi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Mi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function GD(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Mi(new Uint8Array(i.authenticatorData)),clientDataJSON:Mi(new Uint8Array(i.clientDataJSON)),signature:Mi(new Uint8Array(i.signature)),userHandle:i.userHandle?Mi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function XA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Fb(){var t,e;return!!(_t()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function HD(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qc("Browser returned unexpected credential type",e)}:{data:null,error:new qc("Empty credential response",e)}}catch(e){return{data:null,error:DD({error:e,options:t})}}}async function qD(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new qc("Browser returned unexpected credential type",e)}:{data:null,error:new qc("Empty credential response",e)}}catch(e){return{data:null,error:jD({error:e,options:t})}}}const VD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WD={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Vc(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const s=r[o];e(s)?r[o]=Vc(s,a):r[o]=Vc(a)}else r[o]=a}return r}function KD(t,e){return Vc(VD,t,e||{})}function JD(t,e){return Vc(WD,t,e||{})}class YD{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:s};const l=i??UD.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=KD(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:c,error:d}=await HD({publicKey:u,signal:l});return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}case"request":{const u=JD(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:c,error:d}=await qD(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:l}));return c?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:c}},error:null}:{data:null,error:d}}}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ni("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new hl("rpId is required for WebAuthn authentication")};try{if(!Fb())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ni("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new hl("rpId is required for WebAuthn registration")};try{if(!Fb())return{data:null,error:new Ni("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:s};const{data:l,error:u}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(a){return oe(a)?{data:null,error:a}:{data:null,error:new Ni("Unexpected error in register",a)}}}}OD();const XD={url:V$,storageKey:W$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:K$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Bb(t,e,n){return await n()}const xo={};class pl{get jwks(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=xo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},XD),e);if(this.storageKey=o.storageKey,this.instanceID=(n=pl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,pl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&_t()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new PD({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=KA(o.fetch),this.lock=o.lock||Bb,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&_t()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ID:this.lock=Bb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new YD(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:WA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ub(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ub(this.memoryStorage)),_t()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${HA}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(_t()&&(n=uD(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),_t()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),eD(o)){const l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return oe(n)?this._returnResult({error:n}):this._returnResult({error:new Ni("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Mn}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:c,password:d,options:h}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await go(this.storage,this.storageKey)),o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:y},xform:Mn})}else if("phone"in e){const{phone:c,password:d,options:h}=e;o=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Mn})}else throw new $u("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return await bt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:s});const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(o){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:s}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:jb})}else if("phone"in e){const{phone:o,password:a,options:s}=e;n=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:jb})}else throw new $u("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new mo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,a,s,l,u,c,d,h;let g,y;if("message"in e)g=e.message,y=e.signature;else{const{chain:x,wallet:v,statement:b,options:w}=e;let _;if(_t())if(typeof v=="object")_=v;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")_=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const T=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),S=await _.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=YA(S[0]);let k=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!k){const C=await _.request({method:"eth_chainId"});k=RD(C)}const A={domain:T.host,address:E,statement:b,uri:T.href,version:"1",chainId:k,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=w==null?void 0:w.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.resources};g=$D(A),y=await _.request({method:"personal_sign",params:[MD(g),E]})}try{const{data:x,error:v}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Mn});if(v)throw v;if(!x||!x.session||!x.user){const b=new mo;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(oe(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,o,a,s,l,u,c,d,h,g;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:v,wallet:b,statement:w,options:_}=e;let T;if(_t())if(typeof b=="object")T=b;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))T=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=b}const S=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const E=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let k;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")k=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)k=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)y=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${S.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((u=_==null?void 0:_.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((d=(c=_==null?void 0:_.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",..._.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const E=await T.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=E}}try{const{data:v,error:b}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Mi(x)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Mn});if(b)throw b;if(!v||!v.session||!v.user){const w=new mo;return this._returnResult({data:{user:null,session:null},error:w})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:b})}catch(v){if(oe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await bi(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new tD;const{data:o,error:a}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Mn});if(await bt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new mo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:a}=e,s=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mn}),{data:l,error:u}=s;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new mo;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,a;try{if("email"in e){const{email:s,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await go(this.storage,this.storageKey));const{error:d}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:l}=e,{data:u,error:c}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new $u("You must provide either an email or phone number.")}catch(s){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:s}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Mn});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await go(this.storage,this.storageKey));const u=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:kD});return!((o=u.data)===null||o===void 0)&&o.url&&_t()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(s){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Zt;const{error:i}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(oe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:a}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:a,error:s}=await ue(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new $u("You must provide either an email or phone number and a type")}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await bi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<ep:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await bi(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=rp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=_D(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wr}):await this._useSession(async n=>{var r,i,o;const{data:a,error:s}=n;if(s)throw s;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zt}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Wr})})}catch(n){if(oe(n))return Z$(n)&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new Zt;const a=i.session;let s=null,l=null;this.flowType==="pkce"&&e.email!=null&&([s,l]=await go(this.storage,this.storageKey));const{data:u,error:c}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:l}),jwt:a.access_token,xform:Wr});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zt;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:a}=np(e.access_token);if(a.exp&&(r=a.exp,i=r<=n),i){const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:l}=await this._getUser(e.access_token);if(l)throw l;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:s}=n;if(s)throw s;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Zt;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!_t())throw new Du("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Du(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Nb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Du("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nb("No code detected.");const{data:w,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:l,token_type:u}=e;if(!o||!s||!a||!u)throw new Du("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(s);let h=c+d;l&&(h=parseInt(l));const g=h-c;g*1e3<=Eo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${d}s`);const y=h-d;c-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,c):c-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,c);const{data:x,error:v}=await this._getUser(o);if(v)throw v;const b={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:b,redirectType:e.type},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await bi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=i.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(Q$(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await bt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=lD(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await go(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var a,s,l,u,c;const{data:d,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",g,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return _t()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(oe(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:a,provider:s,token:l,access_token:u,nonce:c}=e,d=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:s,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mn}),{data:h,error:g}=d;return g?this._returnResult({data:{user:null,session:null},error:g}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new mo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:g}))}catch(i){if(await bt(this.storage,`${this.storageKey}-code-verifier`),oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)throw a;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await fD(async i=>(i>0&&await dD(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mn})),(i,o)=>{const a=200*Math.pow(2,i);return o&&tp(o)&&Date.now()+a-r<Eo})}catch(r){if(this._debug(n,"error",r),oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_t()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await bi(this.storage,this.storageKey);if(i&&this.userStorage){let a=await bi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await To(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:rp()}else if(i&&!i.user&&!i.user){const a=await bi(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await bt(this.storage,this.storageKey+"-user"),await To(this.storage,this.storageKey,i)):i.user=rp()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<ep;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${ep}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),tp(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Zt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Sf;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Zt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),oe(o)){const a={data:null,error:o};return tp(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,n)}catch(l){o.push(l)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await bt(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await To(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=$b(i);await To(this.storage,this.storageKey,o)}else{const i=$b(n);await To(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await bt(this.storage,this.storageKey),await bt(this.storage,this.storageKey+"-code-verifier"),await bt(this.storage,this.storageKey+"-user"),this.userStorage&&await bt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_t()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Eo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Eo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Eo}ms, refresh threshold is ${zm} ticks`),i<=zm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof JA)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_t()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await go(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await ue(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?zD(e.webauthn.credential_response):GD(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:l}=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:l}))})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ue(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:FD(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:BD(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=np(r.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(s="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Zt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Zt});const a=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&_t()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Zt});const a=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&_t()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Zt})})}catch(e){if(oe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Zt})})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(s=>s.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(s=>s.kid===e),r&&this.jwks_cached_at+Y$>i)return r;const{data:o,error:a}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(s=>s.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:y}=await this.getSession();if(y||!g.session)return this._returnResult({data:null,error:y});r=g.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:l}}=np(r);n!=null&&n.allowExpired||xD(o.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:o,header:i,signature:a},error:null}}const c=bD(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,aD(`${s}.${l}`)))throw new qm("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}}pl.nextInstanceID={};const QD=pl,ZD="2.90.1";let Cs="";typeof Deno<"u"?Cs="deno":typeof document<"u"?Cs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Cs="react-native":Cs="node";const ej={"X-Client-Info":`supabase-js-${Cs}/${ZD}`},tj={headers:ej},nj={schema:"public"},rj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ij={};function ml(t){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(t)}function oj(t,e){if(ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aj(t){var e=oj(t,"string");return ml(e)=="symbol"?e:e+""}function sj(t,e,n){return(e=aj(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ze(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zb(Object(n),!0).forEach(function(r){sj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const lj=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),uj=()=>Headers,cj=(t,e,n)=>{const r=lj(n),i=uj();return async(o,a)=>{var s;const l=(s=await e())!==null&&s!==void 0?s:t;let u=new i(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(o,Ze(Ze({},a),{},{headers:u}))}};function dj(t){return t.endsWith("/")?t:t+"/"}function fj(t,e){var n,r;const{db:i,auth:o,realtime:a,global:s}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:Ze(Ze({},l),i),auth:Ze(Ze({},u),o),realtime:Ze(Ze({},c),a),storage:{},global:Ze(Ze(Ze({},d),s),{},{headers:Ze(Ze({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=s==null?void 0:s.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function hj(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var pj=class extends QD{constructor(t){super(t)}},mj=class{constructor(t,e,n){var r,i;this.supabaseUrl=t,this.supabaseKey=e;const o=hj(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const a=`sb-${o.hostname.split(".")[0]}-auth-token`,s={db:nj,realtime:ij,auth:Ze(Ze({},rj),{},{storageKey:a}),global:tj},l=fj(n??{},s);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=l.global.headers)!==null&&i!==void 0?i:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=cj(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Ze({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new KM(new URL("rest/v1",o).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new q$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new GM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:a,lock:s,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pj({url:this.authUrl.href,headers:Ze(Ze({},h),c),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:i,flowType:a,lock:s,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new d$(this.realtimeUrl.href,Ze(Ze({},t),{},{params:Ze(Ze({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const gj=(t,e,n)=>new mj(t,e,n);function yj(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}yj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Mv="https://vsqytdzbxxhketbvcoif.supabase.co",QA=`sb_publishable_m-b7gwiZtZu4k0eaXHPoTg_mM_qFuvG
`;console.log("Supabase URL Detected:","Yes",`(Length: ${Mv.length})`);console.log("Supabase Key Detected:","Yes",`(Length: ${QA.length})`);const ha=Mv.startsWith("http"),ZA="snapcal_mode_preference",Vm=()=>ha?localStorage.getItem(ZA)==="local"?"local":"cloud":"local",vj=t=>{localStorage.setItem(ZA,t),window.location.reload()},ye=ha&&Vm()==="cloud";ha?ye||console.log("Supabase configured but user prefers Local Storage."):console.log("Supabase is not configured. Using Mock Auth & Local Storage.");const Se=gj(ha?Mv:"https://placeholder.supabase.co",ha?QA:"placeholder"),Ef="snapcal_mock_session",Wc="snapcal_auth_change",xj=t=>new Promise(e=>setTimeout(e,t)),eC=async(t,e)=>{var n,r;if(ye){const{data:i,error:o}=await Se.auth.signInWithPassword({email:t,password:e});if(o)throw new Error(o.message);return{user:{id:((n=i.user)==null?void 0:n.id)||"",email:(r=i.user)==null?void 0:r.email}}}else{await xj(600);const i={id:btoa(t.toLowerCase()),email:t};return localStorage.setItem(Ef,JSON.stringify(i)),window.dispatchEvent(new Event(Wc)),{user:i}}},bj=async(t,e)=>{var n,r;if(ye){const{data:i,error:o}=await Se.auth.signUp({email:t,password:e});if(o)throw new Error(o.message);return{user:{id:((n=i.user)==null?void 0:n.id)||"",email:(r=i.user)==null?void 0:r.email}}}else return eC(t,e)},wj=async()=>{if(ye){const{error:t}=await Se.auth.signOut();if(t)throw t}else localStorage.removeItem(Ef),window.dispatchEvent(new Event(Wc))},qe=async()=>{if(ye){const{data:t}=await Se.auth.getUser();return t.user?{id:t.user.id,email:t.user.email}:null}else{const t=localStorage.getItem(Ef);return t?JSON.parse(t):null}},_j=t=>{if(ye){const{data:e}=Se.auth.onAuthStateChange((n,r)=>{r!=null&&r.user?t({id:r.user.id,email:r.user.email}):t(null)});return()=>e.subscription.unsubscribe()}else{const e=()=>{const n=localStorage.getItem(Ef);t(n?JSON.parse(n):null)};return window.addEventListener(Wc,e),window.addEventListener("storage",e),()=>{window.removeEventListener(Wc,e),window.removeEventListener("storage",e)}}};class Sj{constructor(){_h(this,"cache",new Map);_h(this,"defaultTTL",5*60*1e3)}get(e){const n=this.cache.get(e);return n?Date.now()-n.timestamp>n.ttl?(this.cache.delete(e),null):n.data:null}set(e,n,r){this.cache.set(e,{data:n,timestamp:Date.now(),ttl:r||this.defaultTTL})}has(e){return this.get(e)!==null}invalidate(e){this.cache.delete(e)}invalidatePattern(e){const n=[];this.cache.forEach((r,i)=>{e.test(i)&&n.push(i)}),n.forEach(r=>this.cache.delete(r))}clear(){this.cache.clear()}clearDateSensitiveCaches(){console.log(" Clearing date-sensitive caches..."),this.invalidatePattern(/^food:/),console.log(" Date-sensitive caches cleared")}getStats(){return{size:this.cache.size,keys:Array.from(this.cache.keys())}}}const Xt=new Sj,Jn={ENTRIES:"food:entries",ENTRIES_LITE:"food:entries:lite",DAILY_SUMMARIES:"food:summaries",DAILY_SUMMARIES_LITE:"food:summaries:lite",DAILY_GOAL:"user:goal",USER_PROFILE:"user:profile",entriesForDate:t=>`food:entries:${t}`,entryImage:t=>`food:image:${t}`};async function ao(t,e,n){const r=Xt.get(t);if(r!==null)return r;const i=await e();return Xt.set(t,i,n),i}const $v="snapcal_data_v1",gl="snapcal_settings_v1",yl="snapcal_profile_v1",Dv="snapcal_summaries_v1",tC="snapcal_coach_messages_v1",nC="snapcal_workout_plans_v1",Ej="id, user_id, timestamp, date, time, food_item, calories, protein, carbs, fat, confidence, image_url, is_manual, ingredients, original_ai_response",rC="id, user_id, timestamp, date, time, food_item, calories, protein, carbs, fat, confidence, is_manual, ingredients",Tj="id, date, calories, protein, carbs, fat",An=()=>{try{const t=localStorage.getItem($v);return t?JSON.parse(t):[]}catch{return[]}},Tf=t=>{try{localStorage.setItem($v,JSON.stringify(t))}catch(e){throw e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED"||String(e).toLowerCase().includes("quota")?new Error("Browser Storage Full: Your local history (with photos) has reached the browser's 5MB limit. Please delete some old entries in the History tab or connect to Supabase for unlimited cloud storage."):e}},jv=()=>{try{const t=localStorage.getItem(Dv);return t?JSON.parse(t):[]}catch{return[]}},kj=t=>{try{localStorage.setItem(Dv,JSON.stringify(t))}catch{throw new Error("Browser Storage Full: Cannot even save simple summaries. Please clear your browser data.")}},kf=t=>({id:t.id,user_id:t.user_id,timestamp:t.timestamp,date:t.date,time:t.time,food_item:t.food_item,calories:t.calories,protein:t.protein||0,carbs:t.carbs||0,fat:t.fat||0,confidence:t.confidence,imageUrl:t.image_url,isManual:t.is_manual,ingredients:t.ingredients||[],originalAiResponse:t.original_ai_response}),au=(t,e)=>{console.error(`Supabase ${e} Error:`,t);const n=(t==null?void 0:t.message)||String(t)||"",r=n.toLowerCase();throw r.includes("quota")||r.includes("limit")||r.includes("tier")?new Error("Cloud Quota Reached: Your Supabase storage limit has been exceeded. Try deleting old entries."):r.includes("relation")||r.includes("column")||r.includes("does not exist")?new Error("Database Setup Required: It looks like the 'food_entries' table is missing in Supabase. Please check the Profile tab for the setup SQL script."):r.includes("policy")||r.includes("permission")||r.includes("row-level security")?new Error("Permission Denied: Supabase RLS policies are blocking this save. Ensure authenticated users have 'INSERT' and 'UPDATE' access."):new Error(`Cloud Save Failed: ${n}`)},iC=async t=>{const e=await qe();if(!e)throw new Error("User must be logged in to save.");if(!ye){const r=An(),i=r.findIndex(a=>a.id===t.id),o={...t,user_id:e.id};i>=0?r[i]=o:r.push(o),Tf(r),Xt.invalidatePattern(/^food:/);return}const{error:n}=await Se.from("food_entries").upsert({id:t.id,user_id:e.id,timestamp:t.timestamp,date:t.date,time:t.time,food_item:t.food_item,calories:t.calories,protein:t.protein,carbs:t.carbs,fat:t.fat,confidence:t.confidence,is_manual:t.isManual,image_url:t.imageUrl===void 0?null:t.imageUrl,ingredients:t.ingredients,original_ai_response:t.originalAiResponse});n&&au(n,"Save Entry"),Xt.invalidatePattern(/^food:/)},oC=async()=>ao(Jn.ENTRIES,async()=>{const t=await qe();if(!t)return[];if(!ye)return An().filter(r=>r.user_id===t.id).sort((r,i)=>i.timestamp.localeCompare(r.timestamp));const{data:e,error:n}=await Se.from("food_entries").select(Ej).eq("user_id",t.id).order("timestamp",{ascending:!1}).limit(200);return n?(console.error("Supabase Fetch Error:",n),n.message.includes("relation")?[]:[]):e?e.map(kf):[]},3*60*1e3),Aj=async()=>ao(Jn.ENTRIES_LITE,async()=>{const t=await qe();if(!t)return[];if(!ye)return An().filter(r=>r.user_id===t.id).map(r=>({...r,imageUrl:void 0,originalAiResponse:void 0})).sort((r,i)=>i.timestamp.localeCompare(r.timestamp));const{data:e,error:n}=await Se.from("food_entries").select(rC).eq("user_id",t.id).order("timestamp",{ascending:!1}).limit(200);return n?(console.error("Supabase Fetch Lite Error:",n),[]):e?e.map(kf):[]},3*60*1e3),Cj=async()=>ao(Jn.DAILY_SUMMARIES_LITE,async()=>{const t=await qe();if(!t)return[];if(!ye){const i=An().filter(l=>l.user_id===t.id),o={};i.forEach(l=>{o[l.date]||(o[l.date]=[]),o[l.date].push(l)});const a=jv().filter(l=>l.user_id===t.id),s={};return a.forEach(l=>{s[l.date]={date:l.date,totalCalories:l.total_calories||l.totalCalories,totalProtein:l.total_protein||l.totalProtein||0,totalCarbs:l.total_carbs||l.totalCarbs||0,totalFat:l.total_fat||l.totalFat||0}}),Object.keys(o).forEach(l=>{const u=o[l];s[l]={date:l,totalCalories:u.reduce((c,d)=>c+d.calories,0),totalProtein:u.reduce((c,d)=>c+(d.protein||0),0),totalCarbs:u.reduce((c,d)=>c+(d.carbs||0),0),totalFat:u.reduce((c,d)=>c+(d.fat||0),0)}}),Object.values(s).sort((l,u)=>new Date(u.date).getTime()-new Date(l.date).getTime())}const{data:e,error:n}=await Se.from("food_entries").select("date, calories, protein, carbs, fat").eq("user_id",t.id).order("date",{ascending:!1});if(n)return console.error("Supabase summary fetch error:",n),[];const r={};(e||[]).forEach(i=>{r[i.date]||(r[i.date]={calories:0,protein:0,carbs:0,fat:0}),r[i.date].calories+=i.calories||0,r[i.date].protein+=i.protein||0,r[i.date].carbs+=i.carbs||0,r[i.date].fat+=i.fat||0});try{const{data:i}=await Se.from("daily_summaries").select("date, total_calories, total_protein, total_carbs, total_fat").eq("user_id",t.id);(i||[]).forEach(o=>{r[o.date]||(r[o.date]={calories:o.total_calories,protein:o.total_protein,carbs:o.total_carbs,fat:o.total_fat})})}catch{}return Object.entries(r).map(([i,o])=>({date:i,totalCalories:o.calories,totalProtein:o.protein,totalCarbs:o.carbs,totalFat:o.fat})).sort((i,o)=>new Date(o.date).getTime()-new Date(i.date).getTime())},3*60*1e3),Pj=async t=>ao(Jn.entriesForDate(t),async()=>{const e=await qe();if(!e)return[];if(!ye)return An().filter(i=>i.user_id===e.id&&i.date===t).map(i=>({...i,imageUrl:void 0,originalAiResponse:void 0})).sort((i,o)=>o.timestamp.localeCompare(i.timestamp));const{data:n,error:r}=await Se.from("food_entries").select(rC).eq("user_id",e.id).eq("date",t).order("timestamp",{ascending:!1});return r?(console.error("Supabase date fetch error:",r),[]):n?n.map(kf):[]},5*60*1e3),Nj=async t=>ao(Jn.entryImage(t),async()=>{const e=await qe();if(!e)return null;if(!ye){const o=An().find(a=>a.id===t&&a.user_id===e.id);return(o==null?void 0:o.imageUrl)||null}const{data:n,error:r}=await Se.from("food_entries").select("image_url").eq("id",t).eq("user_id",e.id).single();return r||!n?null:n.image_url},30*60*1e3),Ij=async()=>{const t=await qe();if(!t)return[];const e=await oC(),n={};e.forEach(o=>{n[o.date]||(n[o.date]=[]),n[o.date].push(o)});let r=[];if(!ye)r=jv().filter(o=>o.user_id===t.id);else try{const{data:o,error:a}=await Se.from("daily_summaries").select("date, total_calories, total_protein, total_carbs, total_fat").eq("user_id",t.id);!a&&o&&(r=o)}catch{console.warn("Summary fetch failed, likely missing table")}const i={};return r.forEach(o=>{i[o.date]={date:o.date,totalCalories:o.total_calories,totalProtein:o.total_protein,totalCarbs:o.total_carbs,totalFat:o.total_fat,entries:[]}}),Object.keys(n).forEach(o=>{const a=n[o];i[o]={date:o,totalCalories:a.reduce((s,l)=>s+l.calories,0),totalProtein:a.reduce((s,l)=>s+(l.protein||0),0),totalCarbs:a.reduce((s,l)=>s+(l.carbs||0),0),totalFat:a.reduce((s,l)=>s+(l.fat||0),0),entries:a}}),Object.values(i).sort((o,a)=>new Date(a.date).getTime()-new Date(o.date).getTime())},Gb=async()=>{const t=await qe();if(!t)return;const e=new Date;e.setDate(e.getDate()-7);const n=e.toISOString().split("T")[0];let r=[];if(!ye)r=An().filter(o=>o.user_id===t.id&&o.date<n);else try{const{data:o}=await Se.from("food_entries").select(Tj).eq("user_id",t.id).lt("date",n);o&&(r=o.map(kf))}catch{return}if(r.length===0)return;const i={};r.forEach(o=>{i[o.date]||(i[o.date]=[]),i[o.date].push(o)});for(const o of Object.keys(i)){const a=i[o],s={id:`${t.id}_${o}`,user_id:t.id,date:o,total_calories:a.reduce((l,u)=>l+u.calories,0),total_protein:a.reduce((l,u)=>l+(u.protein||0),0),total_carbs:a.reduce((l,u)=>l+(u.carbs||0),0),total_fat:a.reduce((l,u)=>l+(u.fat||0),0)};if(ye)await Se.from("daily_summaries").upsert(s),await Se.from("food_entries").delete().eq("user_id",t.id).eq("date",o);else{const l=jv(),u=l.findIndex(d=>d.user_id===t.id&&d.date===o);u>=0?l[u]=s:l.push(s),kj(l);const c=An().filter(d=>!(d.user_id===t.id&&d.date===o));Tf(c)}}},aC=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ye){const r=An().filter(i=>!(i.id===t&&i.user_id===e.id));Tf(r),Xt.invalidatePattern(/^food:/);return}const{error:n}=await Se.from("food_entries").delete().eq("id",t).eq("user_id",e.id);n&&au(n,"Delete Entry"),Xt.invalidatePattern(/^food:/)},Oj=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ye){const r=An(),i=r.findIndex(o=>o.id===t&&o.user_id===e.id);i>=0&&(r[i].imageUrl=void 0,Tf(r)),Xt.invalidatePattern(/^food:/);return}const{error:n}=await Se.from("food_entries").update({image_url:null}).eq("id",t).eq("user_id",e.id);n&&au(n,"Clear Image"),Xt.invalidatePattern(/^food:/)},Lv=async()=>ao(Jn.DAILY_GOAL,async()=>{const t=await qe();if(!t)return 2e3;if(!ye){const r=localStorage.getItem(gl);return(r?JSON.parse(r):{})[t.id]||2e3}const{data:e,error:n}=await Se.from("user_settings").select("daily_goal").eq("user_id",t.id).single();return n||!e?2e3:e.daily_goal},10*60*1e3),Af=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ye){const r=localStorage.getItem(gl),i=r?JSON.parse(r):{};i[e.id]=t,localStorage.setItem(gl,JSON.stringify(i)),Xt.invalidate(Jn.DAILY_GOAL);return}const{error:n}=await Se.from("user_settings").upsert({user_id:e.id,daily_goal:t},{onConflict:"user_id"});n&&au(n,"Save Daily Goal"),Xt.invalidate(Jn.DAILY_GOAL)},Uv=async()=>ao(Jn.USER_PROFILE,async()=>{const t=await qe();if(!t)return null;if(!ye){const r=localStorage.getItem(yl);return(r?JSON.parse(r):{})[t.id]||null}const{data:e,error:n}=await Se.from("user_profiles").select("name, height, weight, age, gender, activity_level, goal, equipment_access").eq("user_id",t.id).single();return n||!e?null:{name:e.name,height:e.height,weight:e.weight,age:e.age,gender:e.gender,activityLevel:e.activity_level,goal:e.goal,equipmentAccess:e.equipment_access}},10*60*1e3),Fv=async t=>{const e=await qe();if(!e)throw new Error("Not logged in");if(!ye){const r=localStorage.getItem(yl),i=r?JSON.parse(r):{};i[e.id]=t,localStorage.setItem(yl,JSON.stringify(i)),Xt.invalidate(Jn.USER_PROFILE);return}const{error:n}=await Se.from("user_profiles").upsert({user_id:e.id,name:t.name,height:t.height,weight:t.weight,age:t.age,gender:t.gender,activity_level:t.activityLevel,goal:t.goal,equipment_access:t.equipmentAccess},{onConflict:"user_id"});n&&au(n,"Save Profile"),Xt.invalidate(Jn.USER_PROFILE)},Rj=()=>An().length>0,Mj=async()=>{if(!ye)throw new Error("Must be in Cloud Mode to sync");const t=await qe();if(!t)throw new Error("Must be logged in to sync");const e=An();if(e.length>0){const i=e.map(a=>({id:a.id,user_id:t.id,timestamp:a.timestamp,date:a.date,time:a.time,food_item:a.food_item,calories:a.calories,protein:a.protein,carbs:a.carbs,fat:a.fat,confidence:a.confidence,is_manual:a.isManual,image_url:a.imageUrl,ingredients:a.ingredients,original_ai_response:a.originalAiResponse})),o=5;for(let a=0;a<i.length;a+=o){const s=i.slice(a,a+o),{error:l}=await Se.from("food_entries").upsert(s);if(l)throw console.error("Chunk upload failed",l),new Error(`Sync failed at item ${a+1}: `+l.message)}}const n=localStorage.getItem(gl);if(n){const i=JSON.parse(n),o=Object.keys(i)[0];o&&i[o]&&await Af(i[o])}const r=localStorage.getItem(yl);if(r){const i=JSON.parse(r),o=Object.keys(i)[0];o&&i[o]&&await Fv(i[o])}localStorage.removeItem($v),localStorage.removeItem(Dv),localStorage.removeItem(gl),localStorage.removeItem(yl)},$j=async()=>{if(!ye)return{ok:!0};if(!await qe())return{ok:!0};const{error:e}=await Se.from("food_entries").select("id").limit(1);return e?e.message.includes("relation")||e.code==="42P01"?{ok:!1,missingTables:!0,error:"Tables missing"}:{ok:!1,error:e.message}:{ok:!0}},Kc="snapcal_onboarding_v1",Dj=async t=>{if(!t||!t.id)return!1;const e=localStorage.getItem(Kc),n=e?JSON.parse(e):{};if(n[t.id]===!0)return!0;if(!ye)return!1;try{const{data:r,error:i}=await Se.from("user_settings").select("has_completed_onboarding").eq("user_id",t.id).maybeSingle(),o=(r==null?void 0:r.has_completed_onboarding)||!1;return o&&(n[t.id]=!0,localStorage.setItem(Kc,JSON.stringify(n))),o}catch{return!1}},sC=async t=>{if(!t||!t.id)return;const e=localStorage.getItem(Kc),n=e?JSON.parse(e):{};if(n[t.id]=!0,localStorage.setItem(Kc,JSON.stringify(n)),ye)try{const{error:r}=await Se.from("user_settings").upsert({user_id:t.id,has_completed_onboarding:!0},{onConflict:"user_id"});r&&console.error("Cloud mark onboarding error:",r)}catch(r){console.error("Cloud mark onboarding exception:",r)}},jj=async t=>{await sC(t)},Bv=()=>{try{const t=localStorage.getItem(tC);return t?JSON.parse(t):[]}catch{return[]}},lC=t=>{try{localStorage.setItem(tC,JSON.stringify(t))}catch(e){console.error("Failed to save chat messages to local storage:",e)}},bo=async t=>{const e=await qe();if(!e){console.warn("User not logged in, cannot save chat message");return}const n=new Date(t.timestamp).toISOString().split("T")[0];if(!ye){const r=Bv(),i={...t,user_id:e.id,date:n};r.push(i),lC(r);return}try{const{error:r}=await Se.from("coach_messages").insert({id:t.id,user_id:e.id,role:t.role,content:t.content,timestamp:t.timestamp,date:n});r&&console.error("Failed to save chat message to Supabase:",r)}catch(r){console.error("Exception saving chat message:",r)}},uC=async t=>{const e=await qe();if(!e)return[];if(!ye)return Bv().filter(r=>r.user_id===e.id&&r.date===t).sort((r,i)=>r.timestamp-i.timestamp);try{const{data:n,error:r}=await Se.from("coach_messages").select("id, role, content, timestamp").eq("user_id",e.id).eq("date",t).order("timestamp",{ascending:!0});return r?(console.error("Failed to fetch chat messages:",r),[]):n||[]}catch(n){return console.error("Exception fetching chat messages:",n),[]}},Lj=async()=>{const t=new Date().toISOString().split("T")[0];return uC(t)},Uj=async()=>{const t=await qe();if(!t)return;const e=new Date;e.setDate(e.getDate()-7);const n=e.toISOString().split("T")[0];if(!ye){const i=Bv().filter(o=>o.user_id!==t.id||o.date>=n);lC(i);return}try{const{error:r}=await Se.from("coach_messages").delete().eq("user_id",t.id).lt("date",n);r&&console.error("Failed to cleanup old chat messages:",r)}catch(r){console.error("Exception during chat cleanup:",r)}},zv=()=>{try{const t=localStorage.getItem(nC);return t?JSON.parse(t):[]}catch{return[]}},Fj=t=>{try{localStorage.setItem(nC,JSON.stringify(t))}catch(e){console.error("Failed to save workout plans to local storage:",e)}},Jc=async(t,e,n)=>{const r=await qe();if(!r){console.warn("User not logged in, cannot save workout plan");return}const i={id:`${r.id}_${t}`,user_id:r.id,date:t,title:e,exercises:n},o=zv(),a=o.findIndex(s=>s.user_id===r.id&&s.date===t);if(a>=0?o[a]=i:o.push(i),Fj(o),ye)try{const{error:s}=await Se.from("workout_plans").upsert({id:`${r.id}_${t}`,user_id:r.id,date:t,title:e,exercises:n});s&&console.warn("Supabase save failed, using localStorage fallback:",s.message)}catch(s){console.warn("Exception saving workout plan to Supabase, using localStorage fallback:",s)}},Hb=async t=>{const e=await qe();if(!e)return null;const r=zv().find(i=>i.user_id===e.id&&i.date===t);if(r)return{date:r.date,title:r.title,exercises:r.exercises};if(ye)try{const{data:i,error:o}=await Se.from("workout_plans").select("date, title, exercises").eq("user_id",e.id).eq("date",t).maybeSingle();if(o)return console.warn("Supabase fetch failed, no local data available:",o.message),null;if(i)return{date:i.date,title:i.title,exercises:i.exercises}}catch(i){console.warn("Exception fetching workout plan from Supabase:",i)}return null},qb=async(t,e)=>{const n=await qe();if(!n)return[];const r=`${t}-${String(e).padStart(2,"0")}-01`,i=`${t}-${String(e).padStart(2,"0")}-31`,a=zv().filter(s=>s.user_id===n.id&&s.date>=r&&s.date<=i).map(s=>s.date);if(ye)try{const{data:s,error:l}=await Se.from("workout_plans").select("date").eq("user_id",n.id).gte("date",r).lte("date",i);if(!l&&s){const u=s.map(c=>c.date);return Array.from(new Set([...a,...u]))}}catch(s){console.warn("Exception fetching workout plans from Supabase, using localStorage only:",s)}return a},Bj=async(t,e)=>{if(!await qe()){console.warn("User not logged in, cannot save multi-day workout plan");return}const r=new Date(t);for(let i=0;i<e.length;i++){const o=e[i];if(o.isRestDay)continue;const a=new Date(r);a.setDate(a.getDate()+i);const s=a.toISOString().split("T")[0];await Jc(s,o.title,o.exercises)}},zj=()=>{const t=new Date,e=new Date(t);return e.setHours(24,0,0,0),e.getTime()-t.getTime()},Gj=t=>{let e;const n=()=>{const r=zj();console.log(` Scheduling midnight refresh in ${Math.round(r/1e3/60)} minutes`),e=setTimeout(()=>{console.log(" Midnight detected! Running callback..."),t(),n()},r)};return n(),()=>{e&&(clearTimeout(e),console.log(" Midnight timer canceled"))}},Ua=()=>{const t=new Date,e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${r}`},op="snapcal_last_active_date",Hj=()=>{const t=Ua(),e=localStorage.getItem(op);if(!e)return localStorage.setItem(op,t),!1;const n=e!==t;return n&&(console.log(` Day changed detected: ${e}  ${t}`),localStorage.setItem(op,t)),n},rt=({className:t,variant:e="primary",isLoading:n,children:r,...i})=>{const o="inline-flex items-center justify-center px-6 py-4 rounded-[24px] font-semibold transition-all duration-300 active:scale-95 disabled:opacity-50 disabled:pointer-events-none text-sm tracking-wide",a={primary:"bg-royal-600 text-white hover:bg-royal-700 shadow-[0_10px_20px_-10px_rgba(124,58,237,0.5)]",secondary:"bg-royal-50 text-royal-700 hover:bg-royal-100",ghost:"bg-transparent text-gray-500 hover:text-royal-600 hover:bg-royal-50"};return p.jsx("button",{className:me(o,a[e],t),disabled:n||i.disabled,...i,children:n?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):r})};var qj={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Vj,Wj;function Kj(){return{geminiUrl:Vj,vertexUrl:Wj}}function Jj(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const a=Kj();return e?(i=a.vertexUrl)!==null&&i!==void 0?i:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr{}function ee(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function m(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const s=a.slice(0,-2);if(!(s in t))if(Array.isArray(n))t[s]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[s])){const l=t[s];if(Array.isArray(n))for(let u=0;u<l.length;u++){const c=l[u];m(c,e.slice(o+1),n[u])}else for(const u of l)m(u,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const s=a.slice(0,-3);s in t||(t[s]=[{}]);const l=t[s];m(l[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(s=>f(s,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Yj(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),a=new Set;let s=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){s=l;break}if(s!==-1&&o.length>s)for(let l=s;l<o.length;l++){const u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&a.add(u)}Wm(t,i,o,0,a)}}function Wm(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2),s=t;if(a in s&&Array.isArray(s[a]))for(const l of s[a])Wm(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,s=Object.keys(a).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of s)l[u]=a[u];for(const[u,c]of Object.entries(l)){const d=[];for(const h of n.slice(r))h==="*"?d.push(u):d.push(h);m(a,d,c)}for(const u of s)delete a[u]}}else{const a=t;o in a&&Wm(a[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xj(t){const e={},n=f(t,["operationName"]);n!=null&&m(e,["operationName"],n);const r=f(t,["resourceName"]);return r!=null&&m(e,["_url","resourceName"],r),e}function Qj(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],eL(a)),e}function Zj(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response"]);return a!=null&&m(e,["response"],tL(a)),e}function eL(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>nL(a))),m(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function tL(t){const e={},n=f(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>rL(a))),m(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function nL(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],uL(n)),e}function rL(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],cL(n)),e}function iL(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function oL(t){const e={},n=f(t,["operationName"]);return n!=null&&m(e,["_url","operationName"],n),e}function aL(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response"]);return a!=null&&m(e,["response"],sL(a)),e}function sL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function cC(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response"]);return a!=null&&m(e,["response"],lL(a)),e}function lL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function uL(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],Gv(r));const i=f(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function cL(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],Gv(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vb;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Vb||(Vb={}));var Wb;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Wb||(Wb={}));var Kb;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Kb||(Kb={}));var pe;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(pe||(pe={}));var Jb;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Jb||(Jb={}));var Yb;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Yb||(Yb={}));var Xb;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Xb||(Xb={}));var Qb;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Qb||(Qb={}));var Zb;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Zb||(Zb={}));var ew;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ew||(ew={}));var tw;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(tw||(tw={}));var nw;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(nw||(nw={}));var rw;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(rw||(rw={}));var iw;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(iw||(iw={}));var ow;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(ow||(ow={}));var aw;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(aw||(aw={}));var sw;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(sw||(sw={}));var lw;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lw||(lw={}));var uw;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uw||(uw={}));var cw;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(cw||(cw={}));var dw;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(dw||(dw={}));var Yc;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Yc||(Yc={}));var fw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(fw||(fw={}));var hw;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(hw||(hw={}));var pw;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(pw||(pw={}));var Km;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Km||(Km={}));var mw;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(mw||(mw={}));var gw;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(gw||(gw={}));var yw;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(yw||(yw={}));var vw;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(vw||(vw={}));var xw;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(xw||(xw={}));var bw;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(bw||(bw={}));var ww;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ww||(ww={}));var _w;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(_w||(_w={}));var Sw;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Sw||(Sw={}));var Ew;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ew||(Ew={}));var Tw;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Tw||(Tw={}));var kw;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(kw||(kw={}));var Aw;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Aw||(Aw={}));var Cw;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Cw||(Cw={}));var Pw;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Pw||(Pw={}));var Nw;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Nw||(Nw={}));var Iw;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Iw||(Iw={}));var Ow;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Ow||(Ow={}));var Rw;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(Rw||(Rw={}));var Mw;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Mw||(Mw={}));var $w;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($w||($w={}));var Dw;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Dw||(Dw={}));var jw;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(jw||(jw={}));var Lw;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Lw||(Lw={}));var Uw;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Uw||(Uw={}));var Fw;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Fw||(Fw={}));var Bw;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Bw||(Bw={}));var zw;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(zw||(zw={}));var Bo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Bo||(Bo={}));class Jm{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class fs{get text(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",c=!1;const d=[];for(const h of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(y!==null||y!==void 0)&&d.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;c=!0,u+=h.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?u:void 0}get data(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const c=[];for(const d of(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)!==null&&l!==void 0?l:[]){for(const[h,g]of Object.entries(d))h!=="inlineData"&&(g!==null||g!==void 0)&&c.push(h);d.inlineData&&typeof d.inlineData.data=="string"&&(u+=atob(d.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,o,a,s,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,o,a,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.executableCode).map(d=>d.executableCode).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,o,a,s,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(l=(s=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||s===void 0?void 0:s.parts)===null||l===void 0?void 0:l.filter(d=>d.codeExecutionResult).map(d=>d.codeExecutionResult).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return(u=c==null?void 0:c[0])===null||u===void 0?void 0:u.output}}class Gw{}class Hw{}class dL{}class fL{}class hL{}class pL{}class qw{}class Vw{}class Ww{}class mL{}class Xc{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Xc;let i;const o=e;return n?i=Zj(o):i=Qj(o),Object.assign(r,i),r}}class Kw{}class Jw{}class Yw{}class Xw{}class gL{}class yL{}class vL{}class Hv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Hv,o=aL(e);return Object.assign(r,o),r}}class xL{}class bL{}class wL{}class Qw{}class _L{get text(){var e,n,r;let i="",o=!1;const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(s))l!=="text"&&l!=="thought"&&u!==null&&a.push(l);if(typeof s.text=="string"){if(typeof s.thought=="boolean"&&s.thought)continue;o=!0,i+=s.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[s,l]of Object.entries(a))s!=="inlineData"&&l!==null&&o.push(s);a.inlineData&&typeof a.inlineData.data=="string"&&(i+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class SL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class qv{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new qv,o=cC(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ee(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function dC(t,e){const n=Ee(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function fC(t){return Array.isArray(t)?t.map(e=>Qc(e)):[Qc(t)]}function Qc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function hC(t){const e=Qc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function pC(t){const e=Qc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Zw(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function mC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Zw(e)):[Zw(t)]}function Ym(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function e_(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function t_(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function $t(t){if(t==null)throw new Error("ContentUnion is required");return Ym(t)?t:{role:"user",parts:mC(t)}}function Vv(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=$t(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=$t(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>$t(n)):[$t(e)]}function Sn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(e_(t)||t_(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$t(t)]}const e=[],n=[],r=Ym(t[0]);for(const i of t){const o=Ym(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(e_(i)||t_(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:mC(n)}),e}function EL(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(pe).includes(n[0].toUpperCase())?n[0].toUpperCase():pe.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(pe).includes(r.toUpperCase())?r.toUpperCase():pe.TYPE_UNSPECIFIED})}}function Zo(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&EL(t.type,e);for(const[a,s]of Object.entries(t))if(s!=null)if(a=="type"){if(s==="null")throw new Error("type: null can not be the only possible type for the field.");if(s instanceof Array)continue;e.type=Object.values(pe).includes(s.toUpperCase())?s.toUpperCase():pe.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=Zo(s);else if(r.includes(a)){const l=[];for(const u of s){if(u.type=="null"){e.nullable=!0;continue}l.push(Zo(u))}e[a]=l}else if(i.includes(a)){const l={};for(const[u,c]of Object.entries(s))l[u]=Zo(c);e[a]=l}else{if(a==="additionalProperties")continue;e[a]=s}return e}function Wv(t){return Zo(t)}function Kv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Jv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Fa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zo(e.response));return t}function Ba(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function TL(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Mr(t,e){if(typeof e!="string")throw new Error("name must be a string");return TL(t,e,"cachedContents")}function gC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function hi(t){return Gv(t)}function kL(t){return t!=null&&typeof t=="object"&&"name"in t}function AL(t){return t!=null&&typeof t=="object"&&"video"in t}function CL(t){return t!=null&&typeof t=="object"&&"uri"in t}function yC(t){var e;let n;if(kL(t)&&(n=t.name),!(CL(t)&&(n=t.uri,n===void 0))&&!(AL(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function vC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function xC(t){for(const e of["models","tunedModels","publisherModels"])if(PL(t,e))return t[e];return[]}function PL(t,e){return t!==null&&typeof t=="object"&&e in t}function NL(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function IL(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=NL(i,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function bC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function OL(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function wC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const a of i){if(typeof a!="object"||a===null)continue;const l=a.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function za(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function _C(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RL(t){const e={},n=f(t,["responsesFile"]);n!=null&&m(e,["fileName"],n);const r=f(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>hU(a))),m(e,["inlinedResponses"],o)}const i=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["inlinedEmbedContentResponses"],o)}return e}function ML(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&m(e,["format"],n);const r=f(t,["gcsDestination","outputUriPrefix"]);r!=null&&m(e,["gcsUri"],r);const i=f(t,["bigqueryDestination","outputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function $L(t){const e={},n=f(t,["format"]);n!=null&&m(e,["predictionsFormat"],n);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsDestination","outputUriPrefix"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&m(e,["bigqueryDestination","outputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function mc(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata","displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["metadata","state"]);i!=null&&m(e,["state"],_C(i));const o=f(t,["metadata","createTime"]);o!=null&&m(e,["createTime"],o);const a=f(t,["metadata","endTime"]);a!=null&&m(e,["endTime"],a);const s=f(t,["metadata","updateTime"]);s!=null&&m(e,["updateTime"],s);const l=f(t,["metadata","model"]);l!=null&&m(e,["model"],l);const u=f(t,["metadata","output"]);return u!=null&&m(e,["dest"],RL(wC(u))),e}function Xm(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["state"]);i!=null&&m(e,["state"],_C(i));const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["createTime"]);a!=null&&m(e,["createTime"],a);const s=f(t,["startTime"]);s!=null&&m(e,["startTime"],s);const l=f(t,["endTime"]);l!=null&&m(e,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(e,["updateTime"],u);const c=f(t,["model"]);c!=null&&m(e,["model"],c);const d=f(t,["inputConfig"]);d!=null&&m(e,["src"],DL(d));const h=f(t,["outputConfig"]);h!=null&&m(e,["dest"],ML(wC(h)));const g=f(t,["completionStats"]);return g!=null&&m(e,["completionStats"],g),e}function DL(t){const e={},n=f(t,["instancesFormat"]);n!=null&&m(e,["format"],n);const r=f(t,["gcsSource","uris"]);r!=null&&m(e,["gcsUri"],r);const i=f(t,["bigquerySource","inputUri"]);return i!=null&&m(e,["bigqueryUri"],i),e}function jL(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=f(e,["fileName"]);r!=null&&m(n,["fileName"],r);const i=f(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>fU(t,a))),m(n,["requests","requests"],o)}return n}function LL(t){const e={},n=f(t,["format"]);n!=null&&m(e,["instancesFormat"],n);const r=f(t,["gcsUri"]);r!=null&&m(e,["gcsSource","uris"],r);const i=f(t,["bigqueryUri"]);if(i!=null&&m(e,["bigquerySource","inputUri"],i),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function UL(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function FL(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function BL(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function zL(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],GL(r));const i=f(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=f(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const a=f(t,["avgLogprobs"]);a!=null&&m(e,["avgLogprobs"],a);const s=f(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const l=f(t,["index"]);l!=null&&m(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function GL(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function SC(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>bU(o))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function HL(t,e){const n={},r=f(t,["displayName"]);if(e!==void 0&&r!=null&&m(e,["batch","displayName"],r),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function qL(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["dest"]);return e!==void 0&&i!=null&&m(e,["outputConfig"],$L(OL(i))),n}function n_(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["src"]);i!=null&&m(n,["batch","inputConfig"],jL(t,bC(t,i)));const o=f(e,["config"]);return o!=null&&HL(o,n),n}function VL(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],Ee(t,r));const i=f(e,["src"]);i!=null&&m(n,["inputConfig"],LL(bC(t,i)));const o=f(e,["config"]);return o!=null&&qL(o,n),n}function WL(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["batch","displayName"],r),n}function KL(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["src"]);i!=null&&m(n,["batch","inputConfig"],tU(t,i));const o=f(e,["config"]);return o!=null&&WL(o,n),n}function JL(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function YL(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function XL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);return o!=null&&m(e,["error"],o),e}function QL(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);return o!=null&&m(e,["error"],o),e}function ZL(t,e){const n={},r=f(e,["contents"]);if(r!=null){let o=Vv(t,r);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["requests[]","request","content"],o)}const i=f(e,["config"]);return i!=null&&(m(n,["_self"],eU(i,n)),Yj(n,{"requests[].*":"requests[].request.*"})),n}function eU(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=f(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tU(t,e){const n={},r=f(e,["fileName"]);r!=null&&m(n,["file_name"],r);const i=f(e,["inlinedRequests"]);return i!=null&&m(n,["requests"],ZL(t,i)),n}function nU(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function rU(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function iU(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&m(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function oU(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],SC($t(i)));const o=f(e,["temperature"]);o!=null&&m(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&m(r,["topP"],a);const s=f(e,["topK"]);s!=null&&m(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&m(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&m(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&m(r,["responseSchema"],Wv(b));const w=f(e,["responseJsonSchema"]);if(w!=null&&m(r,["responseJsonSchema"],w),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let U=_;Array.isArray(U)&&(U=U.map(N=>wU(N))),m(n,["safetySettings"],U)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let U=Ba(T);Array.isArray(U)&&(U=U.map(N=>SU(Fa(N)))),m(n,["tools"],U)}const S=f(e,["toolConfig"]);if(n!==void 0&&S!=null&&m(n,["toolConfig"],_U(S)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(e,["cachedContent"]);n!==void 0&&E!=null&&m(n,["cachedContent"],Mr(t,E));const k=f(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const A=f(e,["mediaResolution"]);A!=null&&m(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&m(r,["speechConfig"],Kv(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=f(e,["thinkingConfig"]);M!=null&&m(r,["thinkingConfig"],M);const R=f(e,["imageConfig"]);R!=null&&m(r,["imageConfig"],dU(R));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&m(r,["enableEnhancedCivicAnswers"],L),r}function aU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>zL(u))),m(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=f(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=f(t,["responseId"]);a!=null&&m(e,["responseId"],a);const s=f(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function sU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function lU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],za(t,r)),n}function uU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function cU(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function dU(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fU(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["request","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let s=Sn(i);Array.isArray(s)&&(s=s.map(l=>SC(l))),m(n,["request","contents"],s)}const o=f(e,["metadata"]);o!=null&&m(n,["metadata"],o);const a=f(e,["config"]);return a!=null&&m(n,["request","generationConfig"],oU(t,a,f(n,["request"],{}))),n}function hU(t){const e={},n=f(t,["response"]);n!=null&&m(e,["response"],aU(n));const r=f(t,["error"]);return r!=null&&m(e,["error"],r),e}function pU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);if(e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);e!==void 0&&i!=null&&m(e,["_query","pageToken"],i);const o=f(t,["filter"]);return e!==void 0&&o!=null&&m(e,["_query","filter"],o),n}function gU(t){const e={},n=f(t,["config"]);return n!=null&&pU(n,e),e}function yU(t){const e={},n=f(t,["config"]);return n!=null&&mU(n,e),e}function vU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>mc(a))),m(e,["batchJobs"],o)}return e}function xU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>Xm(a))),m(e,["batchJobs"],o)}return e}function bU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&m(e,["fileData"],nU(o));const a=f(t,["functionCall"]);a!=null&&m(e,["functionCall"],rU(a));const s=f(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],UL(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function wU(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function _U(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&m(e,["functionCallingConfig"],iU(r)),e}function SU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&m(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],uU(a));const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],cU(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(kr||(kr={}));class so{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(i=a.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EU extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(kr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=n_(this.apiClient,e),r=n._url,i=ee("{model}:batchGenerateContent",r),s=n.batch.inputConfig.requests,l=s.requests,u=[];for(const c of l){const d=Object.assign({},c);if(d.systemInstruction){const h=d.systemInstruction;delete d.systemInstruction;const g=d.request;g.systemInstruction=h,d.request=g}u.push(d)}return s.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(a)r.dest=`${a}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=VL(this.apiClient,e);return s=ee("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Xm(c))}else{const u=n_(this.apiClient,e);return s=ee("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>mc(c))}}async createEmbeddingsInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=KL(this.apiClient,e);return o=ee("{model}:asyncBatchEmbedContent",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>mc(l))}}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=lU(this.apiClient,e);return s=ee("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Xm(c))}else{const u=sU(this.apiClient,e);return s=ee("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>mc(c))}}async cancel(e){var n,r,i,o;let a="",s={};if(this.apiClient.isVertexAI()){const l=BL(this.apiClient,e);a=ee("batchPredictionJobs/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=FL(this.apiClient,e);a=ee("batches/{name}:cancel",l._url),s=l._query,delete l._url,delete l._query,await this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=yU(e);return s=ee("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=xU(c),h=new Qw;return Object.assign(h,d),h})}else{const u=gU(e);return s=ee("batches",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=vU(c),h=new Qw;return Object.assign(h,d),h})}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=YL(this.apiClient,e);return s=ee("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>QL(c))}else{const u=JL(this.apiClient,e);return s=ee("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>XL(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TU(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function r_(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KU(o))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function kU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let c=Sn(a);Array.isArray(c)&&(c=c.map(d=>r_(d))),m(e,["contents"],c)}const s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],r_($t(s)));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(d=>YU(d))),m(e,["tools"],c)}const u=f(t,["toolConfig"]);if(e!==void 0&&u!=null&&m(e,["toolConfig"],JU(u)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function AU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);e!==void 0&&i!=null&&m(e,["expireTime"],i);const o=f(t,["displayName"]);e!==void 0&&o!=null&&m(e,["displayName"],o);const a=f(t,["contents"]);if(e!==void 0&&a!=null){let d=Sn(a);Array.isArray(d)&&(d=d.map(h=>h)),m(e,["contents"],d)}const s=f(t,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],$t(s));const l=f(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>XU(h))),m(e,["tools"],d)}const u=f(t,["toolConfig"]);e!==void 0&&u!=null&&m(e,["toolConfig"],u);const c=f(t,["kmsKeyName"]);return e!==void 0&&c!=null&&m(e,["encryption_spec","kmsKeyName"],c),n}function CU(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],dC(t,r));const i=f(e,["config"]);return i!=null&&kU(i,n),n}function PU(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["model"],dC(t,r));const i=f(e,["config"]);return i!=null&&AU(i,n),n}function NU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Mr(t,r)),n}function IU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Mr(t,r)),n}function OU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function RU(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function MU(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function $U(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DU(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&m(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jU(t){const e={},n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&m(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function LU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Mr(t,r)),n}function UU(t,e){const n={},r=f(e,["name"]);return r!=null&&m(n,["_url","name"],Mr(t,r)),n}function FU(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function BU(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function zU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function GU(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function HU(t){const e={},n=f(t,["config"]);return n!=null&&zU(n,e),e}function qU(t){const e={},n=f(t,["config"]);return n!=null&&GU(n,e),e}function VU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["cachedContents"],o)}return e}function WU(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["cachedContents"],o)}return e}function KU(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&m(e,["fileData"],MU(o));const a=f(t,["functionCall"]);a!=null&&m(e,["functionCall"],$U(a));const s=f(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],TU(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function JU(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&m(e,["functionCallingConfig"],DU(r)),e}function YU(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&m(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],FU(a));const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],BU(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function XU(t){const e={},n=f(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&m(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&m(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&m(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>jU(h))),m(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function QU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function ZU(t,e){const n={},r=f(t,["ttl"]);e!==void 0&&r!=null&&m(e,["ttl"],r);const i=f(t,["expireTime"]);return e!==void 0&&i!=null&&m(e,["expireTime"],i),n}function e5(t,e){const n={},r=f(e,["name"]);r!=null&&m(n,["_url","name"],Mr(t,r));const i=f(e,["config"]);return i!=null&&QU(i,n),n}function t5(t,e){const n={},r=f(e,["name"]);r!=null&&m(n,["_url","name"],Mr(t,r));const i=f(e,["config"]);return i!=null&&ZU(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(kr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=PU(this.apiClient,e);return s=ee("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=CU(this.apiClient,e);return s=ee("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=UU(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=LU(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=IU(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=RU(c),h=new Yw;return Object.assign(h,d),h})}else{const u=NU(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=OU(c),h=new Yw;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=t5(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>c)}else{const u=e5(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>c)}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=qU(e);return s=ee("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=WU(c),h=new Xw;return Object.assign(h,d),h})}else{const u=HU(e);return s=ee("cachedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=VU(c),h=new Xw;return Object.assign(h,d),h})}}}function Zc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function i_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(t){return this instanceof de?(this.v=t,this):new de(t)}function qn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(g){return function(y){return Promise.resolve(y).then(g,d)}}function s(g,y){r[g]&&(i[g]=function(x){return new Promise(function(v,b){o.push([g,x,v,b])>1||l(g,x)})},y&&(i[g]=y(i[g])))}function l(g,y){try{u(r[g](y))}catch(x){h(o[0][3],x)}}function u(g){g.value instanceof de?Promise.resolve(g.value.v).then(c,d):h(o[0][2],g)}function c(g){l("next",g)}function d(g){l("throw",g)}function h(g,y){g(y),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Vn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof i_=="function"?i_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(s,l){a=t[o](a),i(s,l,a.done,a.value)})}}function i(o,a,s,l){Promise.resolve(l).then(function(u){o({value:u,done:s})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r5(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:EC(n)}function EC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function i5(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function o_(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!EC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class o5{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new a5(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class a5{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),i5(o)}async sendMessage(e){var n;await this.sendPromise;const r=$t(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,s;const l=await i,u=(a=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,c=l.automaticFunctionCallingHistory,d=this.getHistory(!0).length;let h=[];c!=null&&(h=(s=c.slice(d))!==null&&s!==void 0?s:[]);const g=u?[u]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=$t(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?o_(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return qn(this,arguments,function*(){var i,o,a,s,l,u;const c=[];try{for(var d=!0,h=Vn(e),g;g=yield de(h.next()),i=g.done,!i;d=!0){s=g.value,d=!1;const y=s;if(r5(y)){const x=(u=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;x!==void 0&&c.push(x)}yield yield de(y)}}catch(y){o={error:y}}finally{try{!d&&!i&&(a=h.return)&&(yield de(a.call(h)))}finally{if(o)throw o.error}}this.recordHistory(n,c)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...o_(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s5(t){const e={},n=f(t,["file"]);return n!=null&&m(e,["file"],n),e}function l5(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function u5(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],yC(n)),e}function c5(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function d5(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","file"],yC(n)),e}function f5(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function h5(t){const e={},n=f(t,["config"]);return n!=null&&f5(n,e),e}function p5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m5 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(kr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=h5(e);return o=ee("files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=p5(l),c=new xL;return Object.assign(c,u),c})}}async createInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=s5(e);return o=ee("upload/v1beta/files",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=l5(l),c=new bL;return Object.assign(c,u),c})}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=d5(e);return o=ee("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=u5(e);return o=ee("files/{file}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=c5(l),c=new wL;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gc(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function g5(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>O5(o))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function y5(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function v5(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function x5(t){const e={},n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&m(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function b5(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=f(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=f(t,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const s=f(t,["frequencyPenalty"]);s!=null&&m(e,["frequencyPenalty"],s);const l=f(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const y=f(t,["responseModalities"]);y!=null&&m(e,["responseModalities"],y);const x=f(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const v=f(t,["routingConfig"]);v!=null&&m(e,["routingConfig"],v);const b=f(t,["seed"]);b!=null&&m(e,["seed"],b);const w=f(t,["speechConfig"]);w!=null&&m(e,["speechConfig"],w);const _=f(t,["stopSequences"]);_!=null&&m(e,["stopSequences"],_);const T=f(t,["temperature"]);T!=null&&m(e,["temperature"],T);const S=f(t,["thinkingConfig"]);S!=null&&m(e,["thinkingConfig"],S);const E=f(t,["topK"]);E!=null&&m(e,["topK"],E);const k=f(t,["topP"]);if(k!=null&&m(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function w5(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function _5(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function S5(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Jv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],g5($t(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let E=Ba(x);Array.isArray(E)&&(E=E.map(k=>M5(Fa(k)))),m(e,["setup","tools"],E)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&m(e,["setup","sessionResumption"],R5(v));const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&m(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&m(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&m(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);if(e!==void 0&&S!=null&&m(e,["setup","proactivity"],S),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function E5(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],b5(r));const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Jv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],$t(y));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let k=Ba(x);Array.isArray(k)&&(k=k.map(A=>$5(Fa(A)))),m(e,["setup","tools"],k)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&m(e,["setup","sessionResumption"],v);const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&m(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&m(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&m(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);e!==void 0&&S!=null&&m(e,["setup","proactivity"],S);const E=f(t,["explicitVadSignal"]);return e!==void 0&&E!=null&&m(e,["setup","explicitVadSignal"],E),n}function T5(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],Ee(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],S5(i,n)),n}function k5(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],Ee(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],E5(i,n)),n}function A5(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&m(e,["musicGenerationConfig"],n),e}function C5(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["weightedPrompts"],r)}return e}function P5(t){const e={},n=f(t,["media"]);if(n!=null){let u=fC(n);Array.isArray(u)&&(u=u.map(c=>gc(c))),m(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],gc(pC(r)));const i=f(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=f(t,["video"]);o!=null&&m(e,["video"],gc(hC(o)));const a=f(t,["text"]);a!=null&&m(e,["text"],a);const s=f(t,["activityStart"]);s!=null&&m(e,["activityStart"],s);const l=f(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function N5(t){const e={},n=f(t,["media"]);if(n!=null){let u=fC(n);Array.isArray(u)&&(u=u.map(c=>c)),m(e,["mediaChunks"],u)}const r=f(t,["audio"]);r!=null&&m(e,["audio"],pC(r));const i=f(t,["audioStreamEnd"]);i!=null&&m(e,["audioStreamEnd"],i);const o=f(t,["video"]);o!=null&&m(e,["video"],hC(o));const a=f(t,["text"]);a!=null&&m(e,["text"],a);const s=f(t,["activityStart"]);s!=null&&m(e,["activityStart"],s);const l=f(t,["activityEnd"]);return l!=null&&m(e,["activityEnd"],l),e}function I5(t){const e={},n=f(t,["setupComplete"]);n!=null&&m(e,["setupComplete"],n);const r=f(t,["serverContent"]);r!=null&&m(e,["serverContent"],r);const i=f(t,["toolCall"]);i!=null&&m(e,["toolCall"],i);const o=f(t,["toolCallCancellation"]);o!=null&&m(e,["toolCallCancellation"],o);const a=f(t,["usageMetadata"]);a!=null&&m(e,["usageMetadata"],D5(a));const s=f(t,["goAway"]);s!=null&&m(e,["goAway"],s);const l=f(t,["sessionResumptionUpdate"]);l!=null&&m(e,["sessionResumptionUpdate"],l);const u=f(t,["voiceActivityDetectionSignal"]);return u!=null&&m(e,["voiceActivityDetectionSignal"],u),e}function O5(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&m(e,["fileData"],y5(o));const a=f(t,["functionCall"]);a!=null&&m(e,["functionCall"],v5(a));const s=f(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],gc(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function R5(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function M5(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&m(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],w5(a));const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],_5(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function $5(t){const e={},n=f(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&m(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&m(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&m(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>x5(h))),m(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function D5(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&m(e,["promptTokenCount"],n);const r=f(t,["cachedContentTokenCount"]);r!=null&&m(e,["cachedContentTokenCount"],r);const i=f(t,["candidatesTokenCount"]);i!=null&&m(e,["responseTokenCount"],i);const o=f(t,["toolUsePromptTokenCount"]);o!=null&&m(e,["toolUsePromptTokenCount"],o);const a=f(t,["thoughtsTokenCount"]);a!=null&&m(e,["thoughtsTokenCount"],a);const s=f(t,["totalTokenCount"]);s!=null&&m(e,["totalTokenCount"],s);const l=f(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["promptTokensDetails"],g)}const u=f(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["cacheTokensDetails"],g)}const c=f(t,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["responseTokensDetails"],g)}const d=f(t,["toolUsePromptTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(y=>y)),m(e,["toolUsePromptTokensDetails"],g)}const h=f(t,["trafficType"]);return h!=null&&m(e,["trafficType"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j5(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function L5(t){const e={},n=f(t,["content"]);n!=null&&m(e,["content"],n);const r=f(t,["citationMetadata"]);r!=null&&m(e,["citationMetadata"],U5(r));const i=f(t,["tokenCount"]);i!=null&&m(e,["tokenCount"],i);const o=f(t,["finishReason"]);o!=null&&m(e,["finishReason"],o);const a=f(t,["avgLogprobs"]);a!=null&&m(e,["avgLogprobs"],a);const s=f(t,["groundingMetadata"]);s!=null&&m(e,["groundingMetadata"],s);const l=f(t,["index"]);l!=null&&m(e,["index"],l);const u=f(t,["logprobsResult"]);u!=null&&m(e,["logprobsResult"],u);const c=f(t,["safetyRatings"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(g=>g)),m(e,["safetyRatings"],h)}const d=f(t,["urlContextMetadata"]);return d!=null&&m(e,["urlContextMetadata"],d),e}function U5(t){const e={},n=f(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),m(e,["citations"],r)}return e}function F5(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let o=Sn(i);Array.isArray(o)&&(o=o.map(a=>a)),m(n,["contents"],o)}return n}function B5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["tokensInfo"],i)}return e}function z5(t){const e={},n=f(t,["values"]);n!=null&&m(e,["values"],n);const r=f(t,["statistics"]);return r!=null&&m(e,["statistics"],G5(r)),e}function G5(t){const e={},n=f(t,["truncated"]);n!=null&&m(e,["truncated"],n);const r=f(t,["token_count"]);return r!=null&&m(e,["tokenCount"],r),e}function Pf(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>Q4(o))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function H5(t){const e={},n=f(t,["controlType"]);n!=null&&m(e,["controlType"],n);const r=f(t,["enableControlImageComputation"]);return r!=null&&m(e,["computeControl"],r),e}function q5(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function V5(t,e){const n={},r=f(t,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],$t(r));const i=f(t,["tools"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>CC(s))),m(e,["tools"],a)}const o=f(t,["generationConfig"]);return e!==void 0&&o!=null&&m(e,["generationConfig"],j4(o)),n}function W5(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let a=Sn(i);Array.isArray(a)&&(a=a.map(s=>Pf(s))),m(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&q5(o),n}function K5(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let a=Sn(i);Array.isArray(a)&&(a=a.map(s=>s)),m(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&V5(o,n),n}function J5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);r!=null&&m(e,["totalTokens"],r);const i=f(t,["cachedContentTokenCount"]);return i!=null&&m(e,["cachedContentTokenCount"],i),e}function Y5(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["totalTokens"]);return r!=null&&m(e,["totalTokens"],r),e}function X5(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],Ee(t,r)),n}function Q5(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],Ee(t,r)),n}function Z5(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function e4(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}function t4(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const s=f(t,["guidanceScale"]);e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s);const l=f(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&m(e,["parameters","addWatermark"],v);const b=f(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const w=f(t,["editMode"]);e!==void 0&&w!=null&&m(e,["parameters","editMode"],w);const _=f(t,["baseSteps"]);return e!==void 0&&_!=null&&m(e,["parameters","editConfig","baseSteps"],_),n}function n4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=f(e,["referenceImages"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>iF(l))),m(n,["instances[0]","referenceImages"],s)}const a=f(e,["config"]);return a!=null&&t4(a,n),n}function r4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Nf(o))),m(e,["generatedImages"],i)}return e}function i4(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["requests[]","title"],i);const o=f(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&m(e,["requests[]","outputDimensionality"],o),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function o4(t,e){const n={},r=f(t,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const i=f(t,["title"]);e!==void 0&&i!=null&&m(e,["instances[]","title"],i);const o=f(t,["outputDimensionality"]);e!==void 0&&o!=null&&m(e,["parameters","outputDimensionality"],o);const a=f(t,["mimeType"]);e!==void 0&&a!=null&&m(e,["instances[]","mimeType"],a);const s=f(t,["autoTruncate"]);return e!==void 0&&s!=null&&m(e,["parameters","autoTruncate"],s),n}function a4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let s=Vv(t,i);Array.isArray(s)&&(s=s.map(l=>l)),m(n,["requests[]","content"],s)}const o=f(e,["config"]);o!=null&&i4(o,n);const a=f(e,["model"]);return a!==void 0&&m(n,["requests[]","model"],Ee(t,a)),n}function s4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let a=Vv(t,i);Array.isArray(a)&&(a=a.map(s=>s)),m(n,["instances[]","content"],a)}const o=f(e,["config"]);return o!=null&&o4(o,n),n}function l4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["embeddings"],o)}const i=f(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function u4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>z5(a))),m(e,["embeddings"],o)}const i=f(t,["metadata"]);return i!=null&&m(e,["metadata"],i),e}function c4(t){const e={},n=f(t,["endpoint"]);n!=null&&m(e,["name"],n);const r=f(t,["deployedModelId"]);return r!=null&&m(e,["deployedModelId"],r),e}function d4(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function f4(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function h4(t){const e={},n=f(t,["allowedFunctionNames"]);n!=null&&m(e,["allowedFunctionNames"],n);const r=f(t,["mode"]);if(r!=null&&m(e,["mode"],r),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function p4(t){const e={},n=f(t,["description"]);n!=null&&m(e,["description"],n);const r=f(t,["name"]);r!=null&&m(e,["name"],r);const i=f(t,["parameters"]);i!=null&&m(e,["parameters"],i);const o=f(t,["parametersJsonSchema"]);o!=null&&m(e,["parametersJsonSchema"],o);const a=f(t,["response"]);a!=null&&m(e,["response"],a);const s=f(t,["responseJsonSchema"]);if(s!=null&&m(e,["responseJsonSchema"],s),f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function m4(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],Pf($t(i)));const o=f(e,["temperature"]);o!=null&&m(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&m(r,["topP"],a);const s=f(e,["topK"]);s!=null&&m(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&m(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&m(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&m(r,["responseSchema"],Wv(b));const w=f(e,["responseJsonSchema"]);if(w!=null&&m(r,["responseJsonSchema"],w),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const _=f(e,["safetySettings"]);if(n!==void 0&&_!=null){let U=_;Array.isArray(U)&&(U=U.map(N=>oF(N))),m(n,["safetySettings"],U)}const T=f(e,["tools"]);if(n!==void 0&&T!=null){let U=Ba(T);Array.isArray(U)&&(U=U.map(N=>fF(Fa(N)))),m(n,["tools"],U)}const S=f(e,["toolConfig"]);if(n!==void 0&&S!=null&&m(n,["toolConfig"],dF(S)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const E=f(e,["cachedContent"]);n!==void 0&&E!=null&&m(n,["cachedContent"],Mr(t,E));const k=f(e,["responseModalities"]);k!=null&&m(r,["responseModalities"],k);const A=f(e,["mediaResolution"]);A!=null&&m(r,["mediaResolution"],A);const C=f(e,["speechConfig"]);if(C!=null&&m(r,["speechConfig"],Kv(C)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const M=f(e,["thinkingConfig"]);M!=null&&m(r,["thinkingConfig"],M);const R=f(e,["imageConfig"]);R!=null&&m(r,["imageConfig"],z4(R));const L=f(e,["enableEnhancedCivicAnswers"]);return L!=null&&m(r,["enableEnhancedCivicAnswers"],L),r}function g4(t,e,n){const r={},i=f(e,["systemInstruction"]);n!==void 0&&i!=null&&m(n,["systemInstruction"],$t(i));const o=f(e,["temperature"]);o!=null&&m(r,["temperature"],o);const a=f(e,["topP"]);a!=null&&m(r,["topP"],a);const s=f(e,["topK"]);s!=null&&m(r,["topK"],s);const l=f(e,["candidateCount"]);l!=null&&m(r,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&m(r,["maxOutputTokens"],u);const c=f(e,["stopSequences"]);c!=null&&m(r,["stopSequences"],c);const d=f(e,["responseLogprobs"]);d!=null&&m(r,["responseLogprobs"],d);const h=f(e,["logprobs"]);h!=null&&m(r,["logprobs"],h);const g=f(e,["presencePenalty"]);g!=null&&m(r,["presencePenalty"],g);const y=f(e,["frequencyPenalty"]);y!=null&&m(r,["frequencyPenalty"],y);const x=f(e,["seed"]);x!=null&&m(r,["seed"],x);const v=f(e,["responseMimeType"]);v!=null&&m(r,["responseMimeType"],v);const b=f(e,["responseSchema"]);b!=null&&m(r,["responseSchema"],Wv(b));const w=f(e,["responseJsonSchema"]);w!=null&&m(r,["responseJsonSchema"],w);const _=f(e,["routingConfig"]);_!=null&&m(r,["routingConfig"],_);const T=f(e,["modelSelectionConfig"]);T!=null&&m(r,["modelConfig"],T);const S=f(e,["safetySettings"]);if(n!==void 0&&S!=null){let O=S;Array.isArray(O)&&(O=O.map(F=>F)),m(n,["safetySettings"],O)}const E=f(e,["tools"]);if(n!==void 0&&E!=null){let O=Ba(E);Array.isArray(O)&&(O=O.map(F=>CC(Fa(F)))),m(n,["tools"],O)}const k=f(e,["toolConfig"]);n!==void 0&&k!=null&&m(n,["toolConfig"],k);const A=f(e,["labels"]);n!==void 0&&A!=null&&m(n,["labels"],A);const C=f(e,["cachedContent"]);n!==void 0&&C!=null&&m(n,["cachedContent"],Mr(t,C));const M=f(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const R=f(e,["mediaResolution"]);R!=null&&m(r,["mediaResolution"],R);const L=f(e,["speechConfig"]);L!=null&&m(r,["speechConfig"],Kv(L));const U=f(e,["audioTimestamp"]);U!=null&&m(r,["audioTimestamp"],U);const N=f(e,["thinkingConfig"]);N!=null&&m(r,["thinkingConfig"],N);const D=f(e,["imageConfig"]);if(D!=null&&m(r,["imageConfig"],G4(D)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function a_(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let a=Sn(i);Array.isArray(a)&&(a=a.map(s=>Pf(s))),m(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&m(n,["generationConfig"],m4(t,o,n)),n}function s_(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["contents"]);if(i!=null){let a=Sn(i);Array.isArray(a)&&(a=a.map(s=>s)),m(n,["contents"],a)}const o=f(e,["config"]);return o!=null&&m(n,["generationConfig"],g4(t,o,n)),n}function l_(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>L5(u))),m(e,["candidates"],l)}const i=f(t,["modelVersion"]);i!=null&&m(e,["modelVersion"],i);const o=f(t,["promptFeedback"]);o!=null&&m(e,["promptFeedback"],o);const a=f(t,["responseId"]);a!=null&&m(e,["responseId"],a);const s=f(t,["usageMetadata"]);return s!=null&&m(e,["usageMetadata"],s),e}function u_(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(c=>c)),m(e,["candidates"],u)}const i=f(t,["createTime"]);i!=null&&m(e,["createTime"],i);const o=f(t,["modelVersion"]);o!=null&&m(e,["modelVersion"],o);const a=f(t,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const s=f(t,["responseId"]);s!=null&&m(e,["responseId"],s);const l=f(t,["usageMetadata"]);return l!=null&&m(e,["usageMetadata"],l),e}function y4(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["aspectRatio"]);e!==void 0&&i!=null&&m(e,["parameters","aspectRatio"],i);const o=f(t,["guidanceScale"]);if(e!==void 0&&o!=null&&m(e,["parameters","guidanceScale"],o),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const s=f(t,["personGeneration"]);e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s);const l=f(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&m(e,["parameters","includeSafetyAttributes"],l);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&m(e,["parameters","includeRaiReason"],u);const c=f(t,["language"]);e!==void 0&&c!=null&&m(e,["parameters","language"],c);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","mimeType"],d);const h=f(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&m(e,["parameters","outputOptions","compressionQuality"],h),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const g=f(t,["imageSize"]);if(e!==void 0&&g!=null&&m(e,["parameters","sampleImageSize"],g),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function v4(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["negativePrompt"]);e!==void 0&&i!=null&&m(e,["parameters","negativePrompt"],i);const o=f(t,["numberOfImages"]);e!==void 0&&o!=null&&m(e,["parameters","sampleCount"],o);const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const s=f(t,["guidanceScale"]);e!==void 0&&s!=null&&m(e,["parameters","guidanceScale"],s);const l=f(t,["seed"]);e!==void 0&&l!=null&&m(e,["parameters","seed"],l);const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&m(e,["parameters","safetySetting"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&m(e,["parameters","includeSafetyAttributes"],d);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&m(e,["parameters","includeRaiReason"],h);const g=f(t,["language"]);e!==void 0&&g!=null&&m(e,["parameters","language"],g);const y=f(t,["outputMimeType"]);e!==void 0&&y!=null&&m(e,["parameters","outputOptions","mimeType"],y);const x=f(t,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const v=f(t,["addWatermark"]);e!==void 0&&v!=null&&m(e,["parameters","addWatermark"],v);const b=f(t,["labels"]);e!==void 0&&b!=null&&m(e,["labels"],b);const w=f(t,["imageSize"]);e!==void 0&&w!=null&&m(e,["parameters","sampleImageSize"],w);const _=f(t,["enhancePrompt"]);return e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),n}function x4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=f(e,["config"]);return o!=null&&y4(o,n),n}function b4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=f(e,["config"]);return o!=null&&v4(o,n),n}function w4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>R4(a))),m(e,["generatedImages"],o)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],kC(i)),e}function _4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>Nf(a))),m(e,["generatedImages"],o)}const i=f(t,["positivePromptSafetyAttributes"]);return i!=null&&m(e,["positivePromptSafetyAttributes"],AC(i)),e}function S4(t,e){const n={},r=f(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=f(t,["durationSeconds"]);if(e!==void 0&&i!=null&&m(e,["parameters","durationSeconds"],i),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(t,["aspectRatio"]);e!==void 0&&o!=null&&m(e,["parameters","aspectRatio"],o);const a=f(t,["resolution"]);e!==void 0&&a!=null&&m(e,["parameters","resolution"],a);const s=f(t,["personGeneration"]);if(e!==void 0&&s!=null&&m(e,["parameters","personGeneration"],s),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=f(t,["negativePrompt"]);e!==void 0&&l!=null&&m(e,["parameters","negativePrompt"],l);const u=f(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&m(e,["parameters","enhancePrompt"],u),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const c=f(t,["lastFrame"]);e!==void 0&&c!=null&&m(e,["instances[0]","lastFrame"],If(c));const d=f(t,["referenceImages"]);if(e!==void 0&&d!=null){let h=d;Array.isArray(h)&&(h=h.map(g=>TF(g))),m(e,["instances[0]","referenceImages"],h)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function E4(t,e){const n={},r=f(t,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&m(e,["parameters","storageUri"],i);const o=f(t,["fps"]);e!==void 0&&o!=null&&m(e,["parameters","fps"],o);const a=f(t,["durationSeconds"]);e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a);const s=f(t,["seed"]);e!==void 0&&s!=null&&m(e,["parameters","seed"],s);const l=f(t,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const u=f(t,["resolution"]);e!==void 0&&u!=null&&m(e,["parameters","resolution"],u);const c=f(t,["personGeneration"]);e!==void 0&&c!=null&&m(e,["parameters","personGeneration"],c);const d=f(t,["pubsubTopic"]);e!==void 0&&d!=null&&m(e,["parameters","pubsubTopic"],d);const h=f(t,["negativePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","negativePrompt"],h);const g=f(t,["enhancePrompt"]);e!==void 0&&g!=null&&m(e,["parameters","enhancePrompt"],g);const y=f(t,["generateAudio"]);e!==void 0&&y!=null&&m(e,["parameters","generateAudio"],y);const x=f(t,["lastFrame"]);e!==void 0&&x!=null&&m(e,["instances[0]","lastFrame"],Yn(x));const v=f(t,["referenceImages"]);if(e!==void 0&&v!=null){let _=v;Array.isArray(_)&&(_=_.map(T=>kF(T))),m(e,["instances[0]","referenceImages"],_)}const b=f(t,["mask"]);e!==void 0&&b!=null&&m(e,["instances[0]","mask"],EF(b));const w=f(t,["compressionQuality"]);return e!==void 0&&w!=null&&m(e,["parameters","compressionQuality"],w),n}function T4(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response","generateVideoResponse"]);return a!=null&&m(e,["response"],P4(a)),e}function k4(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response"]);return a!=null&&m(e,["response"],N4(a)),e}function A4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=f(e,["image"]);o!=null&&m(n,["instances[0]","image"],If(o));const a=f(e,["video"]);a!=null&&m(n,["instances[0]","video"],PC(a));const s=f(e,["source"]);s!=null&&I4(s,n);const l=f(e,["config"]);return l!=null&&S4(l,n),n}function C4(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["prompt"]);i!=null&&m(n,["instances[0]","prompt"],i);const o=f(e,["image"]);o!=null&&m(n,["instances[0]","image"],Yn(o));const a=f(e,["video"]);a!=null&&m(n,["instances[0]","video"],NC(a));const s=f(e,["source"]);s!=null&&O4(s,n);const l=f(e,["config"]);return l!=null&&E4(l,n),n}function P4(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>$4(a))),m(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function N4(t){const e={},n=f(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>D4(a))),m(e,["generatedVideos"],o)}const r=f(t,["raiMediaFilteredCount"]);r!=null&&m(e,["raiMediaFilteredCount"],r);const i=f(t,["raiMediaFilteredReasons"]);return i!=null&&m(e,["raiMediaFilteredReasons"],i),e}function I4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],If(i));const o=f(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],PC(o)),n}function O4(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Yn(i));const o=f(t,["video"]);return e!==void 0&&o!=null&&m(e,["instances[0]","video"],NC(o)),n}function R4(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],H4(n));const r=f(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=f(t,["_self"]);return i!=null&&m(e,["safetyAttributes"],kC(i)),e}function Nf(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["image"],TC(n));const r=f(t,["raiFilteredReason"]);r!=null&&m(e,["raiFilteredReason"],r);const i=f(t,["_self"]);i!=null&&m(e,["safetyAttributes"],AC(i));const o=f(t,["prompt"]);return o!=null&&m(e,["enhancedPrompt"],o),e}function M4(t){const e={},n=f(t,["_self"]);n!=null&&m(e,["mask"],TC(n));const r=f(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(e,["labels"],i)}return e}function $4(t){const e={},n=f(t,["video"]);return n!=null&&m(e,["video"],_F(n)),e}function D4(t){const e={},n=f(t,["_self"]);return n!=null&&m(e,["video"],SF(n)),e}function j4(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&m(e,["modelConfig"],n);const r=f(t,["responseJsonSchema"]);r!=null&&m(e,["responseJsonSchema"],r);const i=f(t,["audioTimestamp"]);i!=null&&m(e,["audioTimestamp"],i);const o=f(t,["candidateCount"]);o!=null&&m(e,["candidateCount"],o);const a=f(t,["enableAffectiveDialog"]);a!=null&&m(e,["enableAffectiveDialog"],a);const s=f(t,["frequencyPenalty"]);s!=null&&m(e,["frequencyPenalty"],s);const l=f(t,["logprobs"]);l!=null&&m(e,["logprobs"],l);const u=f(t,["maxOutputTokens"]);u!=null&&m(e,["maxOutputTokens"],u);const c=f(t,["mediaResolution"]);c!=null&&m(e,["mediaResolution"],c);const d=f(t,["presencePenalty"]);d!=null&&m(e,["presencePenalty"],d);const h=f(t,["responseLogprobs"]);h!=null&&m(e,["responseLogprobs"],h);const g=f(t,["responseMimeType"]);g!=null&&m(e,["responseMimeType"],g);const y=f(t,["responseModalities"]);y!=null&&m(e,["responseModalities"],y);const x=f(t,["responseSchema"]);x!=null&&m(e,["responseSchema"],x);const v=f(t,["routingConfig"]);v!=null&&m(e,["routingConfig"],v);const b=f(t,["seed"]);b!=null&&m(e,["seed"],b);const w=f(t,["speechConfig"]);w!=null&&m(e,["speechConfig"],w);const _=f(t,["stopSequences"]);_!=null&&m(e,["stopSequences"],_);const T=f(t,["temperature"]);T!=null&&m(e,["temperature"],T);const S=f(t,["thinkingConfig"]);S!=null&&m(e,["thinkingConfig"],S);const E=f(t,["topK"]);E!=null&&m(e,["topK"],E);const k=f(t,["topP"]);if(k!=null&&m(e,["topP"],k),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function L4(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],Ee(t,r)),n}function U4(t,e){const n={},r=f(e,["model"]);return r!=null&&m(n,["_url","name"],Ee(t,r)),n}function F4(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function B4(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function z4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);if(r!=null&&m(e,["imageSize"],r),f(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function G4(t){const e={},n=f(t,["aspectRatio"]);n!=null&&m(e,["aspectRatio"],n);const r=f(t,["imageSize"]);r!=null&&m(e,["imageSize"],r);const i=f(t,["personGeneration"]);i!=null&&m(e,["personGeneration"],i);const o=f(t,["outputMimeType"]);o!=null&&m(e,["imageOutputOptions","mimeType"],o);const a=f(t,["outputCompressionQuality"]);return a!=null&&m(e,["imageOutputOptions","compressionQuality"],a),e}function H4(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&m(e,["imageBytes"],hi(n));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function TC(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["imageBytes"],hi(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function If(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&m(e,["bytesBase64Encoded"],hi(n));const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function Yn(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["imageBytes"]);r!=null&&m(e,["bytesBase64Encoded"],hi(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function q4(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=f(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const a=f(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const s=f(e,["queryBase"]);return n!==void 0&&s!=null&&m(n,["_url","models_url"],vC(t,s)),r}function V4(t,e,n){const r={},i=f(e,["pageSize"]);n!==void 0&&i!=null&&m(n,["_query","pageSize"],i);const o=f(e,["pageToken"]);n!==void 0&&o!=null&&m(n,["_query","pageToken"],o);const a=f(e,["filter"]);n!==void 0&&a!=null&&m(n,["_query","filter"],a);const s=f(e,["queryBase"]);return n!==void 0&&s!=null&&m(n,["_url","models_url"],vC(t,s)),r}function W4(t,e){const n={},r=f(e,["config"]);return r!=null&&q4(t,r,n),n}function K4(t,e){const n={},r=f(e,["config"]);return r!=null&&V4(t,r,n),n}function J4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let o=xC(i);Array.isArray(o)&&(o=o.map(a=>Qm(a))),m(e,["models"],o)}return e}function Y4(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["_self"]);if(i!=null){let o=xC(i);Array.isArray(o)&&(o=o.map(a=>Zm(a))),m(e,["models"],o)}return e}function X4(t){const e={},n=f(t,["maskMode"]);n!=null&&m(e,["maskMode"],n);const r=f(t,["segmentationClasses"]);r!=null&&m(e,["maskClasses"],r);const i=f(t,["maskDilation"]);return i!=null&&m(e,["dilation"],i),e}function Qm(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["version"]);o!=null&&m(e,["version"],o);const a=f(t,["_self"]);a!=null&&m(e,["tunedModelInfo"],hF(a));const s=f(t,["inputTokenLimit"]);s!=null&&m(e,["inputTokenLimit"],s);const l=f(t,["outputTokenLimit"]);l!=null&&m(e,["outputTokenLimit"],l);const u=f(t,["supportedGenerationMethods"]);u!=null&&m(e,["supportedActions"],u);const c=f(t,["temperature"]);c!=null&&m(e,["temperature"],c);const d=f(t,["maxTemperature"]);d!=null&&m(e,["maxTemperature"],d);const h=f(t,["topP"]);h!=null&&m(e,["topP"],h);const g=f(t,["topK"]);g!=null&&m(e,["topK"],g);const y=f(t,["thinking"]);return y!=null&&m(e,["thinking"],y),e}function Zm(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["displayName"]);r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);i!=null&&m(e,["description"],i);const o=f(t,["versionId"]);o!=null&&m(e,["version"],o);const a=f(t,["deployedModels"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>c4(h))),m(e,["endpoints"],d)}const s=f(t,["labels"]);s!=null&&m(e,["labels"],s);const l=f(t,["_self"]);l!=null&&m(e,["tunedModelInfo"],pF(l));const u=f(t,["defaultCheckpointId"]);u!=null&&m(e,["defaultCheckpointId"],u);const c=f(t,["checkpoints"]);if(c!=null){let d=c;Array.isArray(d)&&(d=d.map(h=>h)),m(e,["checkpoints"],d)}return e}function Q4(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&m(e,["fileData"],d4(o));const a=f(t,["functionCall"]);a!=null&&m(e,["functionCall"],f4(a));const s=f(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],j5(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function Z4(t){const e={},n=f(t,["productImage"]);return n!=null&&m(e,["image"],Yn(n)),e}function eF(t,e){const n={},r=f(t,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const i=f(t,["baseSteps"]);e!==void 0&&i!=null&&m(e,["parameters","baseSteps"],i);const o=f(t,["outputGcsUri"]);e!==void 0&&o!=null&&m(e,["parameters","storageUri"],o);const a=f(t,["seed"]);e!==void 0&&a!=null&&m(e,["parameters","seed"],a);const s=f(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&m(e,["parameters","safetySetting"],s);const l=f(t,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const u=f(t,["addWatermark"]);e!==void 0&&u!=null&&m(e,["parameters","addWatermark"],u);const c=f(t,["outputMimeType"]);e!==void 0&&c!=null&&m(e,["parameters","outputOptions","mimeType"],c);const d=f(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&m(e,["parameters","outputOptions","compressionQuality"],d);const h=f(t,["enhancePrompt"]);e!==void 0&&h!=null&&m(e,["parameters","enhancePrompt"],h);const g=f(t,["labels"]);return e!==void 0&&g!=null&&m(e,["labels"],g),n}function tF(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["source"]);i!=null&&rF(i,n);const o=f(e,["config"]);return o!=null&&eF(o,n),n}function nF(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Nf(i))),m(e,["generatedImages"],r)}return e}function rF(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["personImage"]);e!==void 0&&i!=null&&m(e,["instances[0]","personImage","image"],Yn(i));const o=f(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>Z4(s))),m(e,["instances[0]","productImages"],a)}return n}function iF(t){const e={},n=f(t,["referenceImage"]);n!=null&&m(e,["referenceImage"],Yn(n));const r=f(t,["referenceId"]);r!=null&&m(e,["referenceId"],r);const i=f(t,["referenceType"]);i!=null&&m(e,["referenceType"],i);const o=f(t,["maskImageConfig"]);o!=null&&m(e,["maskImageConfig"],X4(o));const a=f(t,["controlImageConfig"]);a!=null&&m(e,["controlImageConfig"],H5(a));const s=f(t,["styleImageConfig"]);s!=null&&m(e,["styleImageConfig"],s);const l=f(t,["subjectImageConfig"]);return l!=null&&m(e,["subjectImageConfig"],l),e}function kC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function AC(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&m(e,["categories"],n);const r=f(t,["safetyAttributes","scores"]);r!=null&&m(e,["scores"],r);const i=f(t,["contentType"]);return i!=null&&m(e,["contentType"],i),e}function oF(t){const e={},n=f(t,["category"]);if(n!=null&&m(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=f(t,["threshold"]);return r!=null&&m(e,["threshold"],r),e}function aF(t){const e={},n=f(t,["image"]);return n!=null&&m(e,["image"],Yn(n)),e}function sF(t,e){const n={},r=f(t,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const i=f(t,["maxPredictions"]);e!==void 0&&i!=null&&m(e,["parameters","maxPredictions"],i);const o=f(t,["confidenceThreshold"]);e!==void 0&&o!=null&&m(e,["parameters","confidenceThreshold"],o);const a=f(t,["maskDilation"]);e!==void 0&&a!=null&&m(e,["parameters","maskDilation"],a);const s=f(t,["binaryColorThreshold"]);e!==void 0&&s!=null&&m(e,["parameters","binaryColorThreshold"],s);const l=f(t,["labels"]);return e!==void 0&&l!=null&&m(e,["labels"],l),n}function lF(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["source"]);i!=null&&cF(i,n);const o=f(e,["config"]);return o!=null&&sF(o,n),n}function uF(t){const e={},n=f(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>M4(i))),m(e,["generatedMasks"],r)}return e}function cF(t,e){const n={},r=f(t,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const i=f(t,["image"]);e!==void 0&&i!=null&&m(e,["instances[0]","image"],Yn(i));const o=f(t,["scribbleImage"]);return e!==void 0&&o!=null&&m(e,["instances[0]","scribble"],aF(o)),n}function dF(t){const e={},n=f(t,["retrievalConfig"]);n!=null&&m(e,["retrievalConfig"],n);const r=f(t,["functionCallingConfig"]);return r!=null&&m(e,["functionCallingConfig"],h4(r)),e}function fF(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&m(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],F4(a));const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],B4(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}function CC(t){const e={},n=f(t,["retrieval"]);n!=null&&m(e,["retrieval"],n);const r=f(t,["computerUse"]);if(r!=null&&m(e,["computerUse"],r),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=f(t,["codeExecution"]);i!=null&&m(e,["codeExecution"],i);const o=f(t,["enterpriseWebSearch"]);o!=null&&m(e,["enterpriseWebSearch"],o);const a=f(t,["functionDeclarations"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(h=>p4(h))),m(e,["functionDeclarations"],d)}const s=f(t,["googleMaps"]);s!=null&&m(e,["googleMaps"],s);const l=f(t,["googleSearch"]);l!=null&&m(e,["googleSearch"],l);const u=f(t,["googleSearchRetrieval"]);u!=null&&m(e,["googleSearchRetrieval"],u);const c=f(t,["urlContext"]);return c!=null&&m(e,["urlContext"],c),e}function hF(t){const e={},n=f(t,["baseModel"]);n!=null&&m(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function pF(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&m(e,["baseModel"],n);const r=f(t,["createTime"]);r!=null&&m(e,["createTime"],r);const i=f(t,["updateTime"]);return i!=null&&m(e,["updateTime"],i),e}function mF(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=f(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function gF(t,e){const n={},r=f(t,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const i=f(t,["description"]);e!==void 0&&i!=null&&m(e,["description"],i);const o=f(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&m(e,["defaultCheckpointId"],o),n}function yF(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","name"],Ee(t,r));const i=f(e,["config"]);return i!=null&&mF(i,n),n}function vF(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["config"]);return i!=null&&gF(i,n),n}function xF(t,e){const n={},r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const i=f(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&m(e,["parameters","safetySetting"],i);const o=f(t,["personGeneration"]);e!==void 0&&o!=null&&m(e,["parameters","personGeneration"],o);const a=f(t,["includeRaiReason"]);e!==void 0&&a!=null&&m(e,["parameters","includeRaiReason"],a);const s=f(t,["outputMimeType"]);e!==void 0&&s!=null&&m(e,["parameters","outputOptions","mimeType"],s);const l=f(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&m(e,["parameters","outputOptions","compressionQuality"],l);const u=f(t,["enhanceInputImage"]);e!==void 0&&u!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=f(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=f(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const h=f(t,["numberOfImages"]);e!==void 0&&h!=null&&m(e,["parameters","sampleCount"],h);const g=f(t,["mode"]);return e!==void 0&&g!=null&&m(e,["parameters","mode"],g),n}function bF(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["_url","model"],Ee(t,r));const i=f(e,["image"]);i!=null&&m(n,["instances[0]","image"],Yn(i));const o=f(e,["upscaleFactor"]);o!=null&&m(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=f(e,["config"]);return a!=null&&xF(a,n),n}function wF(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Nf(o))),m(e,["generatedImages"],i)}return e}function _F(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["encodedVideo"]);r!=null&&m(e,["videoBytes"],hi(r));const i=f(t,["encoding"]);return i!=null&&m(e,["mimeType"],i),e}function SF(t){const e={},n=f(t,["gcsUri"]);n!=null&&m(e,["uri"],n);const r=f(t,["bytesBase64Encoded"]);r!=null&&m(e,["videoBytes"],hi(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function EF(t){const e={},n=f(t,["image"]);n!=null&&m(e,["_self"],Yn(n));const r=f(t,["maskMode"]);return r!=null&&m(e,["maskMode"],r),e}function TF(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],If(n));const r=f(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function kF(t){const e={},n=f(t,["image"]);n!=null&&m(e,["image"],Yn(n));const r=f(t,["referenceType"]);return r!=null&&m(e,["referenceType"],r),e}function PC(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["uri"],n);const r=f(t,["videoBytes"]);r!=null&&m(e,["encodedVideo"],hi(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["encoding"],i),e}function NC(t){const e={},n=f(t,["uri"]);n!=null&&m(e,["gcsUri"],n);const r=f(t,["videoBytes"]);r!=null&&m(e,["bytesBase64Encoded"],hi(r));const i=f(t,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AF(t,e){const n={},r=f(t,["displayName"]);return e!==void 0&&r!=null&&m(e,["displayName"],r),n}function CF(t){const e={},n=f(t,["config"]);return n!=null&&AF(n,e),e}function PF(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function NF(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&PF(r,e),e}function IF(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function OF(t,e){const n={},r=f(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["customMetadata"],o)}const i=f(t,["chunkingConfig"]);return e!==void 0&&i!=null&&m(e,["chunkingConfig"],i),n}function RF(t){const e={},n=f(t,["name"]);n!=null&&m(e,["name"],n);const r=f(t,["metadata"]);r!=null&&m(e,["metadata"],r);const i=f(t,["done"]);i!=null&&m(e,["done"],i);const o=f(t,["error"]);o!=null&&m(e,["error"],o);const a=f(t,["response"]);return a!=null&&m(e,["response"],$F(a)),e}function MF(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=f(t,["fileName"]);r!=null&&m(e,["fileName"],r);const i=f(t,["config"]);return i!=null&&OF(i,e),e}function $F(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["parent"]);r!=null&&m(e,["parent"],r);const i=f(t,["documentName"]);return i!=null&&m(e,["documentName"],i),e}function DF(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function jF(t){const e={},n=f(t,["config"]);return n!=null&&DF(n,e),e}function LF(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["fileSearchStores"],o)}return e}function IC(t,e){const n={},r=f(t,["mimeType"]);e!==void 0&&r!=null&&m(e,["mimeType"],r);const i=f(t,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const o=f(t,["customMetadata"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(l=>l)),m(e,["customMetadata"],s)}const a=f(t,["chunkingConfig"]);return e!==void 0&&a!=null&&m(e,["chunkingConfig"],a),n}function UF(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&m(e,["_url","file_search_store_name"],n);const r=f(t,["config"]);return r!=null&&IC(r,e),e}function FF(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&m(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const BF="Content-Type",zF="X-Server-Timeout",GF="User-Agent",eg="x-goog-api-client",HF="1.35.0",qF=`google-genai-sdk/${HF}`,VF="v1beta1",WF="v1beta";class KF{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:VF,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:WF,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[a,s]of Object.entries(e.queryParams))i.searchParams.append(a,String(s));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>o.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&JF(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await c_(i),new Jm(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await c_(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return qn(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let a="";const s="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:c}=yield de(i.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=o.decode(c,{stream:!0});try{const y=JSON.parse(d);if("error"in y){const x=JSON.parse(JSON.stringify(y.error)),v=x.status,b=x.code,w=`got status: ${v}. ${JSON.stringify(y)}`;if(b>=400&&b<600)throw new Cf({message:w,status:b})}}catch(y){if(y.name==="ApiError")throw y}a+=d;let h=-1,g=0;for(;;){h=-1,g=0;for(const v of l){const b=a.indexOf(v);b!==-1&&(h===-1||b<h)&&(h=b,g=v.length)}if(h===-1)break;const y=a.substring(0,h);a=a.substring(h+g);const x=y.trim();if(x.startsWith(s)){const v=x.substring(s.length).trim();try{const b=new Response(v,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield de(new Jm(b))}catch(b){throw new Error(`exception parsing stream chunk ${v}. ${b}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=qF+" "+this.clientOptions.userAgentExtra;return e[GF]=n,e[eg]=n,e[BF]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(zF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);i.sizeBytes=String(a.size);const s=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:a.type;if(s===void 0||s==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=s;const l={file:i},u=this.getFileName(e),c=ee("upload/v1beta/files",l._url),d=await this.fetchUploadUrl(c,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return o.upload(e,d,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,a=await o.stat(n),s=String(a.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:a.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,c=this.getFileName(n),d={};r!=null&&IC(r,d);const h=await this.fetchUploadUrl(u,s,l,c,d,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,a){var s;let l={};a?l=a:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const c=(s=u==null?void 0:u.headers)===null||s===void 0?void 0:s["x-goog-upload-url"];if(c===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return c}}async function c_(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new Cf({message:i,status:n}):new Error(i)}}function JF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const s=Object.assign({},o);for(const l in a)if(Object.prototype.hasOwnProperty.call(a,l)){const u=a[l],c=s[l];u&&typeof u=="object"&&!Array.isArray(u)&&c&&typeof c=="object"&&!Array.isArray(c)?s[l]=r(c,u):(c&&u&&typeof c!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof c}, New type: ${typeof u}. Overwriting.`),s[l]=u)}return s}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YF="mcp_used/unknown";let XF=!1;function OC(t){for(const e of t)if(QF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return XF}function RC(t){var e;const n=(e=t[eg])!==null&&e!==void 0?e:"";t[eg]=(n+` ${YF}`).trimStart()}function QF(t){return t!==null&&typeof t=="object"&&t instanceof Yv}function ZF(t){return qn(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const a=yield de(n.listTools({cursor:i}));for(const s of a.tools)yield yield de(s),o++;if(!a.nextCursor)break;i=a.nextCursor}})}class Yv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Yv(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},a=[];for(const c of this.mcpClients)try{for(var s=!0,l=(n=void 0,Vn(ZF(c))),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const d=i;a.push(d);const h=d.name;if(o[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);o[h]=c}}catch(d){n={error:d}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),IL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e3(t,e,n){const r=new SL;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class t3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=i3(this.apiClient.getDefaultHeaders()),s=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${s}`;let u=()=>{};const c=new Promise(_=>{u=_}),d=e.callbacks,h=function(){u({})},g=this.apiClient,y={onopen:h,onmessage:_=>{e3(g,d.onmessage,_)},onerror:(n=d==null?void 0:d.onerror)!==null&&n!==void 0?n:function(_){},onclose:(r=d==null?void 0:d.onclose)!==null&&r!==void 0?r:function(_){}},x=this.webSocketFactory.create(l,r3(a),y);x.connect(),await c;const w={setup:{model:Ee(this.apiClient,e.model)}};return x.send(JSON.stringify(w)),new n3(x,this.apiClient)}}class n3{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=C5(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=A5(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Bo.PLAY)}pause(){this.sendPlaybackControl(Bo.PAUSE)}stop(){this.sendPlaybackControl(Bo.STOP)}resetContext(){this.sendPlaybackControl(Bo.RESET_CONTEXT)}close(){this.conn.close()}}function r3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function i3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const o3="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a3(t,e,n){const r=new _L;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const a=I5(o);Object.assign(r,a)}else Object.assign(r,o);e(r)}class s3{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new t3(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,a,s;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let c;const d=this.apiClient.getHeaders();e.config&&e.config.tools&&OC(e.config.tools)&&RC(d);const h=d3(d);if(this.apiClient.isVertexAI())c=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,c);else{const C=this.apiClient.getApiKey();let M="BidiGenerateContent",R="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),M="BidiGenerateContentConstrained",R="access_token"),c=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${M}?${R}=${C}`}let g=()=>{};const y=new Promise(C=>{g=C}),x=e.callbacks,v=function(){var C;(C=x==null?void 0:x.onopen)===null||C===void 0||C.call(x),g({})},b=this.apiClient,w={onopen:v,onmessage:C=>{a3(b,x.onmessage,C)},onerror:(n=x==null?void 0:x.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=x==null?void 0:x.onclose)!==null&&r!==void 0?r:function(C){}},_=this.webSocketFactory.create(c,c3(h),w);_.connect(),await y;let T=Ee(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&T.startsWith("publishers/")){const C=this.apiClient.getProject(),M=this.apiClient.getLocation();T=`projects/${C}/locations/${M}/`+T}let S={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Yc.AUDIO]}:e.config.responseModalities=[Yc.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const E=(s=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[],k=[];for(const C of E)if(this.isCallableTool(C)){const M=C;k.push(await M.tool())}else k.push(C);k.length>0&&(e.config.tools=k);const A={model:T,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?S=k5(this.apiClient,A):S=T5(this.apiClient,A),delete S.config,_.send(JSON.stringify(S)),new u3(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const l3={turnComplete:!0};class u3{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Sn(n.turns),e.isVertexAI()||(r=r.map(i=>Pf(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(o3)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},l3),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:N5(e)}:n={realtimeInput:P5(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function c3(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function d3(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d_=10;function f_(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ea(a)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function ea(t){return"callTool"in t&&typeof t.callTool=="function"}function f3(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>ea(i)))!==null&&r!==void 0?r:!1}function h_(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(ea(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function p_(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h3 extends Rr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,a,s;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!f3(n)||f_(n.config))return await this.generateContentInternal(l);const u=h_(n);if(u.length>0){const x=u.map(v=>`tools[${v}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${x}.`)}let c,d;const h=Sn(l.contents),g=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:d_;let y=0;for(;y<g&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const x=c.candidates[0].content,v=[];for(const b of(s=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&s!==void 0?s:[])if(ea(b)){const _=await b.callTool(c.functionCalls);v.push(..._)}y++,d={role:"user",parts:v},l.contents=Sn(l.contents),l.contents.push(x),l.contents.push(d),p_(l.config)&&(h.push(x),h.push(d))}return p_(l.config)&&(c.automaticFunctionCallingHistory=h),c},this.generateContentStream=async n=>{var r,i,o,a,s;if(this.maybeMoveToResponseJsonSchem(n),f_(n.config)){const d=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(d)}const l=h_(n);if(l.length>0){const d=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${d}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,c=(s=(a=n==null?void 0:n.config)===null||a===void 0?void 0:a.automaticFunctionCalling)===null||s===void 0?void 0:s.disable;if(u&&!c)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const a=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:a.push(l);let s;return o?s={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:s={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},s}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new so(kr.PAGED_ITEM_MODELS,s=>this.listInternal(s),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,a,s,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((l=(s=n.source)===null||s===void 0?void 0:s.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async l=>ea(l)?await l.tool():l)),s={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(s.config.tools=a,e.config&&e.config.tools&&OC(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),RC(u),s.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return s}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const a of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(ea(a)){const s=a,l=await s.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,s)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:d_;let a=!1,s=0;const l=await this.initAfcToolsMap(e);return function(u,c,d){return qn(this,arguments,function*(){for(var h,g,y,x,v,b;s<o;){a&&(s++,a=!1);const S=yield de(u.processParamsMaybeAddMcpUsage(d)),E=yield de(u.generateContentStreamInternal(S)),k=[],A=[];try{for(var w=!0,_=(g=void 0,Vn(E)),T;T=yield de(_.next()),h=T.done,!h;w=!0){x=T.value,w=!1;const C=x;if(yield yield de(C),C.candidates&&(!((v=C.candidates[0])===null||v===void 0)&&v.content)){A.push(C.candidates[0].content);for(const M of(b=C.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(s<o&&M.functionCall){if(!M.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(M.functionCall.name)){const R=yield de(c.get(M.functionCall.name).callTool([M.functionCall]));k.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${M.functionCall.name}`)}}}}catch(C){g={error:C}}finally{try{!w&&!h&&(y=_.return)&&(yield de(y.call(_)))}finally{if(g)throw g.error}}if(k.length>0){a=!0;const C=new fs;C.candidates=[{content:{role:"user",parts:k}}],yield yield de(C);const M=[];M.push(...A),M.push({role:"user",parts:k});const R=Sn(d.contents).concat(M);d.contents=R}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=s_(this.apiClient,e);return s=ee("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=u_(c),h=new fs;return Object.assign(h,d),h})}else{const u=a_(this.apiClient,e);return s=ee("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=l_(c),h=new fs;return Object.assign(h,d),h})}}async generateContentStreamInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=s_(this.apiClient,e);return s=ee("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(d){return qn(this,arguments,function*(){var h,g,y,x;try{for(var v=!0,b=Vn(d),w;w=yield de(b.next()),h=w.done,!h;v=!0){x=w.value,v=!1;const _=x,T=u_(yield de(_.json()));T.sdkHttpResponse={headers:_.headers};const S=new fs;Object.assign(S,T),yield yield de(S)}}catch(_){g={error:_}}finally{try{!v&&!h&&(y=b.return)&&(yield de(y.call(b)))}finally{if(g)throw g.error}}})})}else{const u=a_(this.apiClient,e);return s=ee("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.requestStream({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(d){return qn(this,arguments,function*(){var h,g,y,x;try{for(var v=!0,b=Vn(d),w;w=yield de(b.next()),h=w.done,!h;v=!0){x=w.value,v=!1;const _=x,T=l_(yield de(_.json()));T.sdkHttpResponse={headers:_.headers};const S=new fs;Object.assign(S,T),yield yield de(S)}}catch(_){g={error:_}}finally{try{!v&&!h&&(y=b.return)&&(yield de(y.call(b)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=s4(this.apiClient,e);return s=ee("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=u4(c),h=new Gw;return Object.assign(h,d),h})}else{const u=a4(this.apiClient,e);return s=ee("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=l4(c),h=new Gw;return Object.assign(h,d),h})}}async generateImagesInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=b4(this.apiClient,e);return s=ee("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=_4(c),h=new Hw;return Object.assign(h,d),h})}else{const u=x4(this.apiClient,e);return s=ee("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=w4(c),h=new Hw;return Object.assign(h,d),h})}}async editImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=n4(this.apiClient,e);return o=ee("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=r4(l),c=new dL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=bF(this.apiClient,e);return o=ee("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=wF(l),c=new fL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=tF(this.apiClient,e);return o=ee("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=nF(l),c=new hL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=lF(this.apiClient,e);return o=ee("{model}:predict",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=uF(l),c=new pL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=U4(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Zm(c))}else{const u=L4(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Qm(c))}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=K4(this.apiClient,e);return s=ee("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=Y4(c),h=new qw;return Object.assign(h,d),h})}else{const u=W4(this.apiClient,e);return s=ee("{models_url}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=J4(c),h=new qw;return Object.assign(h,d),h})}}async update(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=vF(this.apiClient,e);return s=ee("{model}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>Zm(c))}else{const u=yF(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Qm(c))}}async delete(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=Q5(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=e4(c),h=new Vw;return Object.assign(h,d),h})}else{const u=X5(this.apiClient,e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=Z5(c),h=new Vw;return Object.assign(h,d),h})}}async countTokens(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=K5(this.apiClient,e);return s=ee("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=Y5(c),h=new Ww;return Object.assign(h,d),h})}else{const u=W5(this.apiClient,e);return s=ee("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=J5(c),h=new Ww;return Object.assign(h,d),h})}}async computeTokens(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=F5(this.apiClient,e);return o=ee("{model}:computeTokens",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>{const u=B5(l),c=new mL;return Object.assign(c,u),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=C4(this.apiClient,e);return s=ee("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a.then(c=>{const d=k4(c),h=new Xc;return Object.assign(h,d),h})}else{const u=A4(this.apiClient,e);return s=ee("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>{const d=T4(c),h=new Xc;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p3 extends Rr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=oL(e);return s=ee("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),a}else{const u=iL(e);return s=ee("{operationName}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=Xj(e);return o=ee("{resourceName}:fetchPredictOperation",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m3(t){const e={},n=f(t,["data"]);if(n!=null&&m(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function g3(t){const e={},n=f(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>T3(o))),m(e,["parts"],i)}const r=f(t,["role"]);return r!=null&&m(e,["role"],r),e}function y3(t,e,n){const r={},i=f(e,["expireTime"]);n!==void 0&&i!=null&&m(n,["expireTime"],i);const o=f(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&m(n,["newSessionExpireTime"],o);const a=f(e,["uses"]);n!==void 0&&a!=null&&m(n,["uses"],a);const s=f(e,["liveConnectConstraints"]);n!==void 0&&s!=null&&m(n,["bidiGenerateContentSetup"],E3(t,s));const l=f(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&m(n,["fieldMask"],l),r}function v3(t,e){const n={},r=f(e,["config"]);return r!=null&&m(n,["config"],y3(t,r,n)),n}function x3(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&m(e,["fileUri"],n);const r=f(t,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}function b3(t){const e={},n=f(t,["id"]);n!=null&&m(e,["id"],n);const r=f(t,["args"]);r!=null&&m(e,["args"],r);const i=f(t,["name"]);if(i!=null&&m(e,["name"],i),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function w3(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&m(e,["enableWidget"],n),e}function _3(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&m(e,["timeRangeFilter"],n),e}function S3(t,e){const n={},r=f(t,["generationConfig"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig"],r);const i=f(t,["responseModalities"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig","responseModalities"],i);const o=f(t,["temperature"]);e!==void 0&&o!=null&&m(e,["setup","generationConfig","temperature"],o);const a=f(t,["topP"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","topP"],a);const s=f(t,["topK"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","topK"],s);const l=f(t,["maxOutputTokens"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","maxOutputTokens"],l);const u=f(t,["mediaResolution"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","mediaResolution"],u);const c=f(t,["seed"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","seed"],c);const d=f(t,["speechConfig"]);e!==void 0&&d!=null&&m(e,["setup","generationConfig","speechConfig"],Jv(d));const h=f(t,["thinkingConfig"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","thinkingConfig"],h);const g=f(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],g);const y=f(t,["systemInstruction"]);e!==void 0&&y!=null&&m(e,["setup","systemInstruction"],g3($t(y)));const x=f(t,["tools"]);if(e!==void 0&&x!=null){let E=Ba(x);Array.isArray(E)&&(E=E.map(k=>A3(Fa(k)))),m(e,["setup","tools"],E)}const v=f(t,["sessionResumption"]);e!==void 0&&v!=null&&m(e,["setup","sessionResumption"],k3(v));const b=f(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&m(e,["setup","inputAudioTranscription"],b);const w=f(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&m(e,["setup","outputAudioTranscription"],w);const _=f(t,["realtimeInputConfig"]);e!==void 0&&_!=null&&m(e,["setup","realtimeInputConfig"],_);const T=f(t,["contextWindowCompression"]);e!==void 0&&T!=null&&m(e,["setup","contextWindowCompression"],T);const S=f(t,["proactivity"]);if(e!==void 0&&S!=null&&m(e,["setup","proactivity"],S),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function E3(t,e){const n={},r=f(e,["model"]);r!=null&&m(n,["setup","model"],Ee(t,r));const i=f(e,["config"]);return i!=null&&m(n,["config"],S3(i,n)),n}function T3(t){const e={},n=f(t,["mediaResolution"]);n!=null&&m(e,["mediaResolution"],n);const r=f(t,["codeExecutionResult"]);r!=null&&m(e,["codeExecutionResult"],r);const i=f(t,["executableCode"]);i!=null&&m(e,["executableCode"],i);const o=f(t,["fileData"]);o!=null&&m(e,["fileData"],x3(o));const a=f(t,["functionCall"]);a!=null&&m(e,["functionCall"],b3(a));const s=f(t,["functionResponse"]);s!=null&&m(e,["functionResponse"],s);const l=f(t,["inlineData"]);l!=null&&m(e,["inlineData"],m3(l));const u=f(t,["text"]);u!=null&&m(e,["text"],u);const c=f(t,["thought"]);c!=null&&m(e,["thought"],c);const d=f(t,["thoughtSignature"]);d!=null&&m(e,["thoughtSignature"],d);const h=f(t,["videoMetadata"]);return h!=null&&m(e,["videoMetadata"],h),e}function k3(t){const e={},n=f(t,["handle"]);if(n!=null&&m(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function A3(t){const e={};if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=f(t,["computerUse"]);n!=null&&m(e,["computerUse"],n);const r=f(t,["fileSearch"]);r!=null&&m(e,["fileSearch"],r);const i=f(t,["codeExecution"]);if(i!=null&&m(e,["codeExecution"],i),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=f(t,["functionDeclarations"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>d)),m(e,["functionDeclarations"],c)}const a=f(t,["googleMaps"]);a!=null&&m(e,["googleMaps"],w3(a));const s=f(t,["googleSearch"]);s!=null&&m(e,["googleSearch"],_3(s));const l=f(t,["googleSearchRetrieval"]);l!=null&&m(e,["googleSearchRetrieval"],l);const u=f(t,["urlContext"]);return u!=null&&m(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C3(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function P3(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=C3(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let s=[];i.length>0&&(s=i.map(u=>a.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),s.length>0&&l.push(...s),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class N3 extends Rr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const s=v3(this.apiClient,e);o=ee("auth_tokens",s._url),a=s._query,delete s.config,delete s._url,delete s._query;const l=P3(s,e.config);return i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(t,e){const n={},r=f(t,["force"]);return e!==void 0&&r!=null&&m(e,["_query","force"],r),n}function O3(t){const e={},n=f(t,["name"]);n!=null&&m(e,["_url","name"],n);const r=f(t,["config"]);return r!=null&&I3(r,e),e}function R3(t){const e={},n=f(t,["name"]);return n!=null&&m(e,["_url","name"],n),e}function M3(t,e){const n={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const i=f(t,["pageToken"]);return e!==void 0&&i!=null&&m(e,["_query","pageToken"],i),n}function $3(t){const e={},n=f(t,["parent"]);n!=null&&m(e,["_url","parent"],n);const r=f(t,["config"]);return r!=null&&M3(r,e),e}function D3(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&m(e,["sdkHttpResponse"],n);const r=f(t,["nextPageToken"]);r!=null&&m(e,["nextPageToken"],r);const i=f(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(a=>a)),m(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j3 extends Rr{constructor(e){super(),this.apiClient=e,this.list=async n=>new so(kr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=R3(e);return o=ee("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=O3(e);i=ee("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=$3(e);return o=ee("{parent}/documents",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=D3(l),c=new gL;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L3 extends Rr{constructor(e,n=new j3(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new so(kr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=CF(e);return o=ee("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=IF(e);return o=ee("{name}",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=NF(e);i=ee("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=jF(e);return o=ee("fileSearchStores",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=LF(l),c=new yL;return Object.assign(c,u),c})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=UF(e);return o=ee("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=FF(l),c=new vL;return Object.assign(c,u),c})}}async importFile(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=MF(e);return o=ee("{file_search_store_name}:importFile",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=RF(l),c=new Hv;return Object.assign(c,u),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return MC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const U3=()=>MC();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tg(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const ng=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cn extends Error{}class zt extends Cn{constructor(e,n,r,i){super(`${zt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Of({message:r,cause:ng(n)});const o=n;return e===400?new DC(e,o,r,i):e===401?new jC(e,o,r,i):e===403?new LC(e,o,r,i):e===404?new UC(e,o,r,i):e===409?new FC(e,o,r,i):e===422?new BC(e,o,r,i):e===429?new zC(e,o,r,i):e>=500?new GC(e,o,r,i):new zt(e,o,r,i)}}class rg extends zt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Of extends zt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class $C extends Of{constructor({message:e}={}){super({message:e??"Request timed out."})}}class DC extends zt{}class jC extends zt{}class LC extends zt{}class UC extends zt{}class FC extends zt{}class BC extends zt{}class zC extends zt{}class GC extends zt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const F3=/^[a-z][a-z0-9+.-]*:/i,B3=t=>F3.test(t);let ig=t=>(ig=Array.isArray,ig(t));const z3=ig;let G3=z3;const m_=G3;function H3(t){if(!t)return!0;for(const e in t)return!1;return!0}function q3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const V3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Cn(`${t} must be an integer`);if(e<0)throw new Cn(`${t} must be a positive integer`);return e},W3=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const K3=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ko="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Y3=()=>{var t,e,n,r,i;const o=J3();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":y_(Deno.build.os),"X-Stainless-Arch":g_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":y_((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":g_((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const a=X3();return a?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${a.browser}`,"X-Stainless-Runtime-Version":a.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function X3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,a=r[3]||0;return{browser:e,version:`${i}.${o}.${a}`}}}return null}const g_=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",y_=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let ju;const Q3=()=>ju??(ju=Y3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function HC(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function eB(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return HC({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function qC(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function tB(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nB=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VC=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ap(t,e,n){return VC(),new File(t,e??"unknown_file",n)}function rB(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const iB=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WC=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",oB=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&WC(t),aB=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function sB(t,e,n){if(VC(),t=await t,oB(t))return t instanceof File?t:ap([await t.arrayBuffer()],t.name);if(aB(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),ap(await og(i),e,n)}const r=await og(t);if(e||(e=rB(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return ap(r,e,n)}async function og(t){var e,n,r,i,o;let a=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)a.push(t);else if(WC(t))a.push(t instanceof Blob?t:await t.arrayBuffer());else if(iB(t))try{for(var s=!0,l=Vn(t),u;u=await l.next(),e=u.done,!e;s=!0){i=u.value,s=!1;const c=i;a.push(...await og(c))}}catch(c){n={error:c}}finally{try{!s&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const c=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${c?`; constructor: ${c}`:""}${lB(t)}`)}return a}function lB(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KC{constructor(e){this._client=e}}KC._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JC(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const v_=Object.freeze(Object.create(null)),uB=(t=JC)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],a=n.reduce((c,d,h)=>{var g,y,x;/[?#]/.test(d)&&(i=!0);const v=r[h];let b=(i?encodeURIComponent:t)(""+v);return h!==r.length&&(v==null||typeof v=="object"&&v.toString===((x=Object.getPrototypeOf((y=Object.getPrototypeOf((g=v.hasOwnProperty)!==null&&g!==void 0?g:v_))!==null&&y!==void 0?y:v_))===null||x===void 0?void 0:x.toString))&&(b=v+"",o.push({start:c.length+d.length,length:b.length,error:`Value of type ${Object.prototype.toString.call(v).slice(8,-1)} is not a valid path parameter`})),c+d+(h===r.length?"":b)},""),s=a.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(s))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((c,d)=>c.start-d.start),o.length>0){let c=0;const d=o.reduce((h,g)=>{const y=" ".repeat(g.start-c),x="^".repeat(g.length);return c=g.start+g.length,h+y+x},"");throw new Cn(`Path parameters result in path with invalid segments:
${o.map(h=>h.error).join(`
`)}
${a}
${d}`)}return a},Lu=uB(JC);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YC extends KC{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=Zc(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Cn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Cn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Lu`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Lu`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Lu`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:a=this._client.apiVersion}=o,s=Zc(o,["api_version"]);return this._client.get(Lu`/${a}/interactions/${e}`,Object.assign(Object.assign({query:s},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}YC._key=Object.freeze(["interactions"]);class XC extends YC{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cB(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Uu;function Xv(t){let e;return(Uu??(e=new globalThis.TextEncoder,Uu=e.encode.bind(e)))(t)}let Fu;function x_(t){let e;return(Fu??(e=new globalThis.TextDecoder,Fu=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Xv(e):e;this.buffer=cB([this.buffer,n]);const r=[];let i;for(;(i=dB(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(x_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,a=x_(this.buffer.subarray(0,o));r.push(a),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Rf.NEWLINE_CHARS=new Set([`
`,"\r"]);Rf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function dB(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function fB(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ed={off:0,error:200,warn:300,info:400,debug:500},b_=(t,e,n)=>{if(t){if(q3(ed,t))return t;Lt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(ed))}`)}};function Ps(){}function Bu(t,e,n){return!e||ed[t]>ed[n]?Ps:e[t].bind(e)}const hB={error:Ps,warn:Ps,info:Ps,debug:Ps};let w_=new WeakMap;function Lt(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return hB;const i=w_.get(n);if(i&&i[0]===r)return i[1];const o={error:Bu("error",n,r),warn:Bu("warn",n,r),info:Bu("info",n,r),debug:Bu("debug",n,r)};return w_.set(n,[r,o]),o}const Ti=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zo{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Lt(r):console;function a(){return qn(this,arguments,function*(){var l,u,c,d;if(i)throw new Cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,y=Vn(pB(e,n)),x;x=yield de(y.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const v=d;if(!h)if(v.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield de(JSON.parse(v.data))}catch(b){throw o.error("Could not parse message into JSON:",v.data),o.error("From chunk:",v.raw),b}}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield de(c.call(y)))}finally{if(u)throw u.error}}h=!0}catch(v){if(tg(v))return yield de(void 0);throw v}finally{h||n.abort()}})}return new zo(a,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return qn(this,arguments,function*(){var l,u,c,d;const h=new Rf,g=qC(e);try{for(var y=!0,x=Vn(g),v;v=yield de(x.next()),l=v.done,!l;y=!0){d=v.value,y=!1;const b=d;for(const w of h.decode(b))yield yield de(w)}}catch(b){u={error:b}}finally{try{!y&&!l&&(c=x.return)&&(yield de(c.call(x)))}finally{if(u)throw u.error}}for(const b of h.flush())yield yield de(b)})}function a(){return qn(this,arguments,function*(){var l,u,c,d;if(i)throw new Cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let h=!1;try{try{for(var g=!0,y=Vn(o()),x;x=yield de(y.next()),l=x.done,!l;g=!0){d=x.value,g=!1;const v=d;h||v&&(yield yield de(JSON.parse(v)))}}catch(v){u={error:v}}finally{try{!g&&!l&&(c=y.return)&&(yield de(c.call(y)))}finally{if(u)throw u.error}}h=!0}catch(v){if(tg(v))return yield de(void 0);throw v}finally{h||n.abort()}})}return new zo(a,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const a=r.next();e.push(a),n.push(a)}return o.shift()}});return[new zo(()=>i(e),this.controller,this.client),new zo(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return HC({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const a=Xv(JSON.stringify(i)+`
`);r.enqueue(a)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function pB(t,e){return qn(this,arguments,function*(){var r,i,o,a;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Cn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Cn("Attempted to iterate over a response with no body");const s=new gB,l=new Rf,u=qC(t.body);try{for(var c=!0,d=Vn(mB(u)),h;h=yield de(d.next()),r=h.done,!r;c=!0){a=h.value,c=!1;const g=a;for(const y of l.decode(g)){const x=s.decode(y);x&&(yield yield de(x))}}}catch(g){i={error:g}}finally{try{!c&&!r&&(o=d.return)&&(yield de(o.call(d)))}finally{if(i)throw i.error}}for(const g of l.flush()){const y=s.decode(g);y&&(yield yield de(y))}})}function mB(t){return qn(this,arguments,function*(){var n,r,i,o;let a=new Uint8Array;try{for(var s=!0,l=Vn(t),u;u=yield de(l.next()),n=u.done,!n;s=!0){o=u.value,s=!1;const c=o;if(c==null)continue;const d=c instanceof ArrayBuffer?new Uint8Array(c):typeof c=="string"?Xv(c):c;let h=new Uint8Array(a.length+d.length);h.set(a),h.set(d,a.length),a=h;let g;for(;(g=fB(a))!==-1;)yield yield de(a.slice(0,g)),a=a.slice(g)}}catch(c){r={error:c}}finally{try{!s&&!n&&(i=l.return)&&(yield de(i.call(l)))}finally{if(r)throw r.error}}a.length>0&&(yield yield de(a))})}class gB{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=yB(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function yB(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vB(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,a=await(async()=>{var s;if(e.options.stream)return Lt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):zo.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(s=l==null?void 0:l.split(";")[0])===null||s===void 0?void 0:s.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Lt(t).debug(`[${r}] response parsed`,Ti({retryOfRequestLogID:i,url:n.url,status:n.status,body:a,durationMs:Date.now()-o})),a}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Qv extends Promise{constructor(e,n,r=vB){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Qv(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QC=Symbol("brand.privateNullableHeaders");function*xB(t){if(!t)return;if(QC in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():m_(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=m_(r[1])?r[1]:[r[1]];let a=!1;for(const s of o)s!==void 0&&(e&&!a&&(a=!0,yield[i,null]),yield[i,s])}}const hs=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,a]of xB(r)){const s=o.toLowerCase();i.has(s)||(e.delete(o),i.add(s)),a===null?(e.delete(o),n.add(s)):(e.append(o,a),n.delete(s))}}return{[QC]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sp=t=>{var e,n,r,i,o,a;if(typeof globalThis.process<"u")return(r=(n=(e=qj)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(a=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||a===void 0?void 0:a.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ZC;class Mf{constructor(e){var n,r,i,o,a,s,l,{baseURL:u=sp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:c=(n=sp("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:d="v1beta"}=e,h=Zc(e,["baseURL","apiKey","apiVersion"]);const g=Object.assign(Object.assign({apiKey:c,apiVersion:d},h),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=g.baseURL,this.timeout=(r=g.timeout)!==null&&r!==void 0?r:Mf.DEFAULT_TIMEOUT,this.logger=(i=g.logger)!==null&&i!==void 0?i:console;const y="warn";this.logLevel=y,this.logLevel=(a=(o=b_(g.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:b_(sp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=g.fetchOptions,this.maxRetries=(s=g.maxRetries)!==null&&s!==void 0?s:2,this.fetch=(l=g.fetch)!==null&&l!==void 0?l:Z3(),this.encoder=nB,this._options=g,this.apiKey=c,this.apiVersion=d,this.clientAdapter=g.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=hs([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return hs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new Cn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${ko}`}defaultIdempotencyKey(){return`stainless-node-retry-${U3()}`}makeStatusError(e,n,r,i){return zt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=B3(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return H3(a)||(n=Object.assign(Object.assign({},a),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new Qv(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,a;const s=await e,l=(i=s.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(s);const{req:u,url:c,timeout:d}=await this.buildRequest(s,{retryCount:l-n});await this.prepareRequest(u,{url:c,options:s});const h="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),g=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(Lt(this).debug(`[${h}] sending request`,Ti({retryOfRequestLogID:r,method:s.method,url:c,options:s,headers:u.headers})),!((o=s.signal)===null||o===void 0)&&o.aborted)throw new rg;const x=new AbortController,v=await this.fetchWithTimeout(c,u,d,x).catch(ng),b=Date.now();if(v instanceof globalThis.Error){const _=`retrying, ${n} attempts remaining`;if(!((a=s.signal)===null||a===void 0)&&a.aborted)throw new rg;const T=tg(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(n)return Lt(this).info(`[${h}] connection ${T?"timed out":"failed"} - ${_}`),Lt(this).debug(`[${h}] connection ${T?"timed out":"failed"} (${_})`,Ti({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),this.retryRequest(s,n,r??h);throw Lt(this).info(`[${h}] connection ${T?"timed out":"failed"} - error; no more retries left`),Lt(this).debug(`[${h}] connection ${T?"timed out":"failed"} (error; no more retries left)`,Ti({retryOfRequestLogID:r,url:c,durationMs:b-y,message:v.message})),T?new $C:new Of({cause:v})}const w=`[${h}${g}] ${u.method} ${c} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${b-y}ms`;if(!v.ok){const _=await this.shouldRetry(v);if(n&&_){const C=`retrying, ${n} attempts remaining`;return await tB(v.body),Lt(this).info(`${w} - ${C}`),Lt(this).debug(`[${h}] response error (${C})`,Ti({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),this.retryRequest(s,n,r??h,v.headers)}const T=_?"error; no more retries left":"error; not retryable";Lt(this).info(`${w} - ${T}`);const S=await v.text().catch(C=>ng(C).message),E=W3(S),k=E?void 0:S;throw Lt(this).debug(`[${h}] response error (${T})`,Ti({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:k,durationMs:Date.now()-y})),this.makeStatusError(v.status,E,k,v.headers)}return Lt(this).info(w),Lt(this).debug(`[${h}] response start`,Ti({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:b-y})),{response:v,options:s,controller:x,requestLogID:h,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:a,method:s}=o,l=Zc(o,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),c=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,d=Object.assign(Object.assign(Object.assign({signal:i.signal},c?{duplex:"half"}:{}),{method:"GET"}),l);s&&(d.method=s.toUpperCase());try{return await this.fetch.call(void 0,e,d)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let a;const s=i==null?void 0:i.get("retry-after-ms");if(s){const u=parseFloat(s);Number.isNaN(u)||(a=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!a){const u=parseFloat(l);Number.isNaN(u)?a=Date.parse(l)-Date.now():a=u*1e3}if(!(a&&0<=a&&a<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(n,u)}return await K3(a),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,a=Math.min(.5*Math.pow(2,o),8),s=1-Math.random()*.25;return a*s*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const a=Object.assign({},e),{method:s,path:l,query:u,defaultBaseURL:c}=a,d=this.buildURL(l,u,c);"timeout"in a&&V3("timeout",a.timeout),a.timeout=(r=a.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:h,body:g}=this.buildBody({options:a}),y=await this.buildHeaders({options:e,method:s,bodyHeaders:h,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:s,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&g instanceof globalThis.ReadableStream&&{duplex:"half"}),g&&{body:g}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=a.fetchOptions)!==null&&o!==void 0?o:{}),url:d,timeout:a.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const a=await this.authHeaders(e);let s=hs([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),Q3()),this._options.defaultHeaders,r,e.headers,a]);return this.validateHeaders(s),s.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=hs([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:eB(e)}:this.encoder({body:e,headers:r})}}Mf.DEFAULT_TIMEOUT=6e4;class vt extends Mf{constructor(){super(...arguments),this.interactions=new XC(this)}}ZC=vt;vt.GeminiNextGenAPIClient=ZC;vt.GeminiNextGenAPIClientError=Cn;vt.APIError=zt;vt.APIConnectionError=Of;vt.APIConnectionTimeoutError=$C;vt.APIUserAbortError=rg;vt.NotFoundError=UC;vt.ConflictError=FC;vt.RateLimitError=zC;vt.BadRequestError=DC;vt.AuthenticationError=jC;vt.InternalServerError=GC;vt.PermissionDeniedError=LC;vt.UnprocessableEntityError=BC;vt.toFile=sB;vt.Interactions=XC;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bB(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function wB(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function _B(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function SB(t,e){const n={},r=f(t,["sdkHttpResponse"]);return r!=null&&m(n,["sdkHttpResponse"],r),n}function EB(t,e,n){const r={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=f(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&m(e,["displayName"],i),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=f(t,["epochCount"]);e!==void 0&&o!=null&&m(e,["tuningTask","hyperparameters","epochCount"],o);const a=f(t,["learningRateMultiplier"]);if(a!=null&&m(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=f(t,["batchSize"]);e!==void 0&&s!=null&&m(e,["tuningTask","hyperparameters","batchSize"],s);const l=f(t,["learningRate"]);if(e!==void 0&&l!=null&&m(e,["tuningTask","hyperparameters","learningRate"],l),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function TB(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec"],__(g))}else if(i==="PREFERENCE_TUNING"){const g=f(t,["validationDataset"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec"],__(g))}const o=f(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&m(e,["tunedModelDisplayName"],o);const a=f(t,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);let s=f(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(s==="PREFERENCE_TUNING"){const g=f(t,["epochCount"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let l=f(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(l==="PREFERENCE_TUNING"){const g=f(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let u=f(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(u==="PREFERENCE_TUNING"){const g=f(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let c=f(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(c==="PREFERENCE_TUNING"){const g=f(t,["adapterSize"]);e!==void 0&&g!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const d=f(t,["labels"]);e!==void 0&&d!=null&&m(e,["labels"],d);const h=f(t,["beta"]);return e!==void 0&&h!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),r}function kB(t,e){const n={},r=f(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&m(n,["preTunedModel"],i);const o=f(t,["trainingDataset"]);o!=null&&jB(o);const a=f(t,["config"]);return a!=null&&EB(a,n),n}function AB(t,e){const n={},r=f(t,["baseModel"]);r!=null&&m(n,["baseModel"],r);const i=f(t,["preTunedModel"]);i!=null&&m(n,["preTunedModel"],i);const o=f(t,["trainingDataset"]);o!=null&&LB(o,n,e);const a=f(t,["config"]);return a!=null&&TB(a,n,e),n}function CB(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function PB(t,e){const n={},r=f(t,["name"]);return r!=null&&m(n,["_url","name"],r),n}function NB(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),r}function IB(t,e,n){const r={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const o=f(t,["pageToken"]);e!==void 0&&o!=null&&m(e,["_query","pageToken"],o);const a=f(t,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),r}function OB(t,e){const n={},r=f(t,["config"]);return r!=null&&NB(r,n),n}function RB(t,e){const n={},r=f(t,["config"]);return r!=null&&IB(r,n),n}function MB(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const o=f(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>eP(s))),m(n,["tuningJobs"],a)}return n}function $B(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["nextPageToken"]);i!=null&&m(n,["nextPageToken"],i);const o=f(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(s=>ag(s))),m(n,["tuningJobs"],a)}return n}function DB(t,e){const n={},r=f(t,["name"]);r!=null&&m(n,["model"],r);const i=f(t,["name"]);return i!=null&&m(n,["endpoint"],i),n}function jB(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=f(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),m(n,["examples","examples"],i)}return n}function LB(t,e,n){const r={};let i=f(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const a=f(t,["gcsUri"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(i==="PREFERENCE_TUNING"){const a=f(t,["gcsUri"]);e!==void 0&&a!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=f(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=f(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=f(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function eP(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const o=f(t,["state"]);o!=null&&m(n,["state"],gC(o));const a=f(t,["createTime"]);a!=null&&m(n,["createTime"],a);const s=f(t,["tuningTask","startTime"]);s!=null&&m(n,["startTime"],s);const l=f(t,["tuningTask","completeTime"]);l!=null&&m(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=f(t,["description"]);c!=null&&m(n,["description"],c);const d=f(t,["baseModel"]);d!=null&&m(n,["baseModel"],d);const h=f(t,["_self"]);return h!=null&&m(n,["tunedModel"],DB(h)),n}function ag(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const o=f(t,["state"]);o!=null&&m(n,["state"],gC(o));const a=f(t,["createTime"]);a!=null&&m(n,["createTime"],a);const s=f(t,["startTime"]);s!=null&&m(n,["startTime"],s);const l=f(t,["endTime"]);l!=null&&m(n,["endTime"],l);const u=f(t,["updateTime"]);u!=null&&m(n,["updateTime"],u);const c=f(t,["error"]);c!=null&&m(n,["error"],c);const d=f(t,["description"]);d!=null&&m(n,["description"],d);const h=f(t,["baseModel"]);h!=null&&m(n,["baseModel"],h);const g=f(t,["tunedModel"]);g!=null&&m(n,["tunedModel"],g);const y=f(t,["preTunedModel"]);y!=null&&m(n,["preTunedModel"],y);const x=f(t,["supervisedTuningSpec"]);x!=null&&m(n,["supervisedTuningSpec"],x);const v=f(t,["preferenceOptimizationSpec"]);v!=null&&m(n,["preferenceOptimizationSpec"],v);const b=f(t,["tuningDataStats"]);b!=null&&m(n,["tuningDataStats"],b);const w=f(t,["encryptionSpec"]);w!=null&&m(n,["encryptionSpec"],w);const _=f(t,["partnerModelTuningSpec"]);_!=null&&m(n,["partnerModelTuningSpec"],_);const T=f(t,["customBaseModel"]);T!=null&&m(n,["customBaseModel"],T);const S=f(t,["experiment"]);S!=null&&m(n,["experiment"],S);const E=f(t,["labels"]);E!=null&&m(n,["labels"],E);const k=f(t,["outputUri"]);k!=null&&m(n,["outputUri"],k);const A=f(t,["pipelineJob"]);A!=null&&m(n,["pipelineJob"],A);const C=f(t,["serviceAccount"]);C!=null&&m(n,["serviceAccount"],C);const M=f(t,["tunedModelDisplayName"]);M!=null&&m(n,["tunedModelDisplayName"],M);const R=f(t,["veoTuningSpec"]);return R!=null&&m(n,["veoTuningSpec"],R),n}function UB(t,e){const n={},r=f(t,["sdkHttpResponse"]);r!=null&&m(n,["sdkHttpResponse"],r);const i=f(t,["name"]);i!=null&&m(n,["name"],i);const o=f(t,["metadata"]);o!=null&&m(n,["metadata"],o);const a=f(t,["done"]);a!=null&&m(n,["done"],a);const s=f(t,["error"]);return s!=null&&m(n,["error"],s),n}function __(t,e){const n={},r=f(t,["gcsUri"]);r!=null&&m(n,["validationDatasetUri"],r);const i=f(t,["vertexDatasetResource"]);return i!=null&&m(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FB extends Rr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new so(kr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:Km.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=PB(e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>ag(c))}else{const u=CB(e);return s=ee("{name}",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>eP(c))}}async listInternal(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=RB(e);return s=ee("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=$B(c),h=new Kw;return Object.assign(h,d),h})}else{const u=OB(e);return s=ee("tunedModels",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=MB(c),h=new Kw;return Object.assign(h,d),h})}}async cancel(e){var n,r,i,o;let a,s="",l={};if(this.apiClient.isVertexAI()){const u=wB(e);return s=ee("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=SB(c),h=new Jw;return Object.assign(h,d),h})}else{const u=bB(e);return s=ee("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,a=this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),a.then(c=>{const d=_B(c),h=new Jw;return Object.assign(h,d),h})}}async tuneInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI()){const s=AB(e,e);return o=ee("tuningJobs",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>ag(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=kB(e);return o=ee("tunedModels",s._url),a=s._query,delete s._url,delete s._query,i=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(s),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const c=u;return c.sdkHttpResponse={headers:l.headers},c})),i.then(l=>UB(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class BB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const zB=1024*1024*8,GB=3,HB=1e3,qB=2,td="x-goog-upload-status";async function VB(t,e,n){var r;const i=await tP(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function WB(t,e,n){var r;const i=await tP(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[td])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=cC(o),s=new qv;return Object.assign(s,a),s}async function tP(t,e,n){var r,i;let o=0,a=0,s=new Jm(new Response),l="upload";for(o=t.size;a<o;){const u=Math.min(zB,o-a),c=t.slice(a,a+u);a+u>=o&&(l+=", finalize");let d=0,h=HB;for(;d<GB&&(s=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(a),"Content-Length":String(u)}}}),!(!((r=s==null?void 0:s.headers)===null||r===void 0)&&r[td]));)d++,await JB(h),h=h*qB;if(a+=u,((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[td])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return s}async function KB(t){return{size:t.size,type:t.type}}function JB(t){return new Promise(e=>setTimeout(e,t))}class YB{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await VB(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WB(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await KB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XB{create(e,n,r){return new QB(e,n,r)}}class QB{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const S_="x-goog-api-key";class ZB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(S_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(S_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e6="gl-node/";class Zv{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new vt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Jj(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new ZB(this.apiKey);this.apiClient=new KF({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:e6+"web",uploader:new YB,downloader:new BB}),this.models=new h3(this.apiClient),this.live=new s3(this.apiClient,i,new XB),this.batches=new EU(this.apiClient),this.chats=new o5(this.models,this.apiClient),this.caches=new n5(this.apiClient),this.files=new m5(this.apiClient),this.operations=new p3(this.apiClient),this.authTokens=new N3(this.apiClient),this.tunings=new FB(this.apiClient),this.fileSearchStores=new L3(this.apiClient)}}const t6=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",nP=()=>{const t=t6();return console.log("Gemini Key Detected:","Yes",`(Length: ${t.length})`),new Zv({apiKey:t})},rP=`
You are an expert AI nutritionist and mathematical calculator. 

SCENARIO 1: IMAGE/TEXT ESTIMATION
- Analyze food descriptions or images.
- Provide a detailed "receipt" breakdown of every ingredient.
- Estimate weights in grams (g) and calculate nutrition.

SCENARIO 2: STRICT RECALCULATION (User provided weights)
- If a list of ingredients with specific weights (grams) is provided, you MUST act as a precise calculator.
- IGNORE your previous estimations.
- Use the provided weights as the ABSOLUTE GROUND TRUTH.
- Calculate calories and macros strictly based on these weights.
- Return the recalculated totals.
`,iP=t=>{const e=(t==null?void 0:t.message)||String(t)||"",n=e.toLowerCase();return e.includes("429")||n.includes("quota")||n.includes("limit")||n.includes("exhausted")?"AI Limit Reached: You've sent too many requests. Please wait about 60 seconds for the quota to reset.":n.includes("api key")?"Configuration Error: Invalid API key. Please check your settings.":n.includes("network")||n.includes("fetch")?"Connection Error: Please check your internet connection and try again.":e||"An unexpected AI error occurred."};async function e0(t,e=2,n=2e3){try{return await t()}catch(r){const i=(r==null?void 0:r.message)||"";if((i.includes("429")||i.toLowerCase().includes("quota"))&&e>0)return console.warn(`Gemini Quota hit. Retrying in ${n}ms... (${e} retries left)`),await new Promise(a=>setTimeout(a,n)),e0(t,e-1,n*2);throw r}}const n6=async t=>{try{return await e0(async()=>{const n=await nP().models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:"Analyze this image. Breakdown into ingredients, weights in grams, calories, and total nutrition."}]},config:{systemInstruction:rP,responseMimeType:"application/json",responseSchema:{type:pe.OBJECT,properties:{item:{type:pe.STRING},calories:{type:pe.INTEGER},protein:{type:pe.INTEGER},carbs:{type:pe.INTEGER},fat:{type:pe.INTEGER},confidence:{type:pe.NUMBER},ingredients:{type:pe.ARRAY,items:{type:pe.OBJECT,properties:{name:{type:pe.STRING},grams:{type:pe.INTEGER},calories:{type:pe.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(n.text||"{}")})}catch(e){throw console.error("Gemini Analysis Error:",e),new Error(iP(e))}},E_=async(t,e)=>{try{return await e0(async()=>{let n="";e&&e.length>0?n=`USER MANUAL WEIGHT CORRECTION:
        The following ingredients have been updated with exact weights. 
        Perform a mathematical calculation for the nutrition of each item based strictly on these grams:
        
        ${e.map(a=>`- ${a.name}: ${a.grams}g`).join(`
`)}
        
        CRITICAL: 
        1. Calculate calories/macros from scratch for each item.
        2. Sum the totals.
        3. Do not adjust the weights provided.
        4. Return the new AnalysisResult.`:n=`Estimate nutrition for: "${t}".`;const i=await nP().models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{text:n}]}],config:{systemInstruction:rP,responseMimeType:"application/json",responseSchema:{type:pe.OBJECT,properties:{item:{type:pe.STRING},calories:{type:pe.INTEGER},protein:{type:pe.INTEGER},carbs:{type:pe.INTEGER},fat:{type:pe.INTEGER},confidence:{type:pe.NUMBER},ingredients:{type:pe.ARRAY,items:{type:pe.OBJECT,properties:{name:{type:pe.STRING},grams:{type:pe.INTEGER},calories:{type:pe.INTEGER}},required:["name","grams","calories"]}}},required:["item","calories","protein","carbs","fat","confidence","ingredients"]}}});return JSON.parse(i.text||"{}")})}catch(n){throw console.error("Gemini Text Analysis Error:",n),new Error(iP(n))}};let zu;const r6=new Uint8Array(16);function i6(){if(!zu&&(zu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!zu))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return zu(r6)}const wt=[];for(let t=0;t<256;++t)wt.push((t+256).toString(16).slice(1));function o6(t,e=0){return wt[t[e+0]]+wt[t[e+1]]+wt[t[e+2]]+wt[t[e+3]]+"-"+wt[t[e+4]]+wt[t[e+5]]+"-"+wt[t[e+6]]+wt[t[e+7]]+"-"+wt[t[e+8]]+wt[t[e+9]]+"-"+wt[t[e+10]]+wt[t[e+11]]+wt[t[e+12]]+wt[t[e+13]]+wt[t[e+14]]+wt[t[e+15]]}const a6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T_={randomUUID:a6};function oP(t,e,n){if(T_.randomUUID&&!t)return T_.randomUUID();t=t||{};const r=t.random||(t.rng||i6)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,o6(r)}const s6=(t,e=600,n=150,r=!1)=>new Promise((i,o)=>{const a=t.size/1048576,s=new FileReader;s.readAsDataURL(t),s.onload=l=>{var c;const u=new Image;u.src=(c=l.target)==null?void 0:c.result,u.onload=()=>{const d=document.createElement("canvas");let h=u.width,g=u.height;h>e&&(g=e/h*g,h=e),d.width=h,d.height=g;const y=d.getContext("2d");y==null||y.drawImage(u,0,0,h,g);let x=.5,v=d.toDataURL("image/jpeg",x);const b=n*1024;if(v.split(",")[1].length*3/4>b&&(x=.35,v=d.toDataURL("image/jpeg",x),v.split(",")[1].length*3/4>b&&(x=.25,v=d.toDataURL("image/jpeg",x))),r){const T=v.split(",")[1].length*3/4/1024,S=(a*1024-T)/(a*1024)*100;console.log(` Image Optimization:
Original: ${a.toFixed(2)} MB(${u.width}${u.height}px)
Optimized: ${T.toFixed(0)} KB(${Math.round(h)}${Math.round(g)}px)
Quality: ${(x*100).toFixed(0)}%
  Saved: ${S.toFixed(0)}% `)}i(v)},u.onerror=d=>o(d)},s.onerror=l=>o(l)}),aP=({onClose:t,onSuccess:e,onOpenSharedMeal:n,editEntry:r})=>{const[i,o]=P.useState("scan"),[a,s]=P.useState(r?"details":"upload"),[l,u]=P.useState((r==null?void 0:r.imageUrl)||null),[c,d]=P.useState(!1),[h,g]=P.useState(!1),[y,x]=P.useState(!1),[v,b]=P.useState(null),w=P.useRef(null),[_,T]=P.useState(""),S=new Date,E=`${S.getHours().toString().padStart(2,"0")}:${S.getMinutes().toString().padStart(2,"0")} `,[k,A]=P.useState((r==null?void 0:r.date)||Ua()),[C,M]=P.useState((r==null?void 0:r.time)||E),[R,L]=P.useState((r==null?void 0:r.food_item)||""),[U,N]=P.useState((r==null?void 0:r.calories.toString())||""),[D,O]=P.useState((r==null?void 0:r.protein.toString())||""),[F,I]=P.useState((r==null?void 0:r.carbs.toString())||""),[$,B]=P.useState((r==null?void 0:r.fat.toString())||""),[G,q]=P.useState((r==null?void 0:r.ingredients)||[]),[X,se]=P.useState((r==null?void 0:r.confidence)||null),[he,we]=P.useState((r==null?void 0:r.originalAiResponse)||null),W=async Z=>{if(Z.target.files&&Z.target.files[0]){const Xe=Z.target.files[0];try{const Qe=await s6(Xe,600,150,!0);u(Qe),b(null)}catch{b("Failed to process image.")}}},Q=async()=>{if(l){d(!0),b(null);try{const Z=l.split(",")[1],Xe=await n6(Z);te(Xe),we(Xe),s("details")}catch(Z){b(Z.message)}finally{d(!1)}}},V=async()=>{if(_.trim()){d(!0),b(null);try{const Z=await E_(_);te(Z),we(Z),s("details")}catch(Z){b(Z.message)}finally{d(!1)}}},te=Z=>{L(Z.item),N(Z.calories.toString()),O(Z.protein.toString()),I(Z.carbs.toString()),B(Z.fat.toString()),q(Z.ingredients||[]),se(Z.confidence)},ie=async()=>{g(!0),b(null);try{const Z=await E_(R,G);te(Z)}catch(Z){b(Z.message)}finally{g(!1)}},H=(Z,Xe,Qe)=>{const jt=[...G];if(Xe==="grams"||Xe==="calories"){const Lr=Qe===""?0:parseInt(Qe);jt[Z]={...jt[Z],[Xe]:isNaN(Lr)?0:Lr}}else jt[Z]={...jt[Z],[Xe]:Qe};q(jt)},ke=Z=>{q(G.filter((Xe,Qe)=>Qe!==Z))},fe=()=>{q([...G,{name:"",grams:100,calories:0}])},Oe=async()=>{if(!R.trim()||!U){b("Please fill required fields.");return}try{const[Z,Xe,Qe]=k.split("-").map(Number),[jt,Lr]=C.split(":").map(Number),rs=new Date(Z,Xe-1,Qe,jt,Lr);if(isNaN(rs.getTime()))throw new Error("Invalid date or time selected.");const pu=rs.toISOString(),ax=Number(U),DO=Number(D)||0,jO=Number(F)||0,LO=Number($)||0;if(isNaN(ax))throw new Error("Calories must be a valid number.");const UO={id:(r==null?void 0:r.id)||oP(),timestamp:pu,date:k,time:C,food_item:R,calories:ax,protein:DO,carbs:jO,fat:LO,confidence:X||1,imageUrl:l||void 0,ingredients:G,originalAiResponse:he};x(!0),b(null),await iC(UO),e()}catch(Z){console.error("Save failed:",Z),b(Z.message||"Failed to save record.")}finally{x(!1)}},J=v==null?void 0:v.includes("Limit Reached"),Me=v==null?void 0:v.includes("Database Quota"),Ct=v==null?void 0:v.includes("Browser Storage Full");return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] p-6 shadow-2xl border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[a==="details"&&!r&&p.jsx("button",{onClick:()=>s("upload"),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/5 transition-colors",children:p.jsx(xf,{size:24,className:"text-gray-900 dark:text-gray-50"})}),p.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:r?"Edit Record":a==="upload"?"Track Meal":"Meal Receipt"})]}),p.jsx("button",{onClick:t,className:"p-2 bg-gray-100 dark:bg-white/5 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:p.jsx(_n,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),v&&p.jsxs("div",{className:`mb - 4 p - 4 rounded - 3xl flex flex - col gap - 3 animate -in shake - 1 duration - 300 ${J?"bg-amber-50 dark:bg-amber-950/30 border border-amber-100 dark:border-amber-900/30 text-amber-700 dark:text-amber-400":Me||Ct?"bg-orange-50 dark:bg-orange-950/30 border border-orange-100 dark:border-orange-900/30 text-orange-700 dark:text-orange-400":"bg-red-50 dark:bg-red-950/20 border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400"} `,children:[p.jsxs("div",{className:"flex items-start gap-3",children:[J?p.jsx(EM,{className:"shrink-0 mt-0.5",size:18}):Me||Ct?p.jsx(PA,{className:"shrink-0 mt-0.5",size:18}):p.jsx(kv,{className:"shrink-0 mt-0.5",size:18}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:J?"AI limit reached":Ct?"Phone Storage Full":Me?"Cloud Storage Full":"Action Failed"}),p.jsx("p",{className:"text-xs font-semibold leading-relaxed",children:v})]})]}),!Ct&&(J||!Me)&&p.jsxs("button",{onClick:()=>{b(null),a==="upload"?Q():ie()},className:"w-full py-2 bg-white/50 dark:bg-white/10 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-white/80 dark:hover:bg-white/20 transition-all",children:[p.jsx($M,{size:14})," Try Again"]}),Ct&&p.jsx("div",{className:"pt-2 border-t border-orange-200 dark:border-orange-900/40",children:p.jsx("p",{className:"text-[10px] font-medium text-orange-600/70 dark:text-orange-400/70 italic",children:"Tip: Photos take up the most space. Delete old entries in the History tab to free up browser storage."})})]}),a==="upload"?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-[20px]",children:[p.jsxs("button",{onClick:()=>o("scan"),className:`flex - 1 py - 3 flex items - center justify - center gap - 2 rounded - [16px] text - xs font - bold transition - all ${i==="scan"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"} `,children:[p.jsx(zi,{size:16}),"Scan"]}),p.jsxs("button",{onClick:()=>o("chat"),className:`flex - 1 py - 3 flex items - center justify - center gap - 2 rounded - [16px] text - xs font - bold transition - all ${i==="chat"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"} `,children:[p.jsx(PM,{size:16}),"Chat"]}),p.jsxs("button",{onClick:()=>o("shared"),className:`flex - 1 py - 3 flex items - center justify - center gap - 2 rounded - [16px] text - xs font - bold transition - all ${i==="shared"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"} `,children:[p.jsx(Mm,{size:16}),"Shared"]}),p.jsxs("button",{onClick:()=>o("recipe"),className:`flex - 1 py - 3 flex items - center justify - center gap - 2 rounded - [16px] text - xs font - bold transition - all ${i==="recipe"?"bg-white dark:bg-royal-600 text-royal-700 dark:text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-gray-600"} `,children:[p.jsx(zc,{size:16}),"Recipe"]})]}),i==="scan"&&p.jsxs(p.Fragment,{children:[l?p.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10",children:[p.jsx("img",{src:l,className:"w-full h-full object-cover"}),p.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md",children:p.jsx(_n,{size:20})})]}):p.jsxs("div",{onClick:()=>{var Z;return(Z=w.current)==null?void 0:Z.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[p.jsx(zi,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),p.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),p.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Let AI do the calorie math"})]}),p.jsx("input",{type:"file",ref:w,accept:"image/*",onChange:W,className:"hidden"}),p.jsx(rt,{className:"w-full py-5 text-lg font-black",disabled:!l||c,isLoading:c,onClick:Q,children:"Analyze Plate"})]}),i==="chat"&&p.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[p.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-5 rounded-[32px] border border-royal-100 dark:border-royal-900/30 transition-colors",children:[p.jsxs("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[p.jsx(or,{size:14})," Describe your meal"]}),p.jsx("textarea",{value:_,onChange:Z=>T(Z.target.value),placeholder:"e.g. I had two slices of pepperoni pizza and a small Caesar salad with Italian dressing.",rows:4,className:"w-full bg-transparent border-none outline-none text-gray-900 dark:text-white font-medium text-sm resize-none placeholder-gray-400 dark:placeholder-gray-600"})]}),p.jsx(rt,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",disabled:!_.trim()||c,isLoading:c,onClick:V,children:"Ask AI"})]}),i==="recipe"&&p.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300 text-center py-6",children:[p.jsx(zc,{size:40,className:"mx-auto text-royal-400 mb-2"}),p.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white",children:"Recipe Mode Coming Soon"}),p.jsx("p",{className:"text-xs font-medium text-gray-400 px-8",children:"For now, use Chat mode to describe your recipe ingredients for estimation."}),p.jsx(rt,{className:"w-full py-3 mt-4 text-xs font-bold text-gray-400 hover:text-royal-500 bg-gray-50 dark:bg-white/5",onClick:()=>s("details"),children:"Enter Details Manually"})]}),i==="shared"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-4 rounded-[24px] mb-6 border border-royal-100 dark:border-royal-900/30 flex gap-3 items-start",children:[p.jsx("div",{className:"p-2 bg-royal-100 dark:bg-royal-900/50 rounded-full shrink-0",children:p.jsx(Mm,{size:16,className:"text-royal-600 dark:text-royal-400"})}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white mb-1",children:"Shared Meal Mode"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed",children:"Upload a photo of the entire table. Connect directly to our multi-dish analysis engine."})]})]}),l?p.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10 shadow-royal-200/20",children:[p.jsx("img",{src:l,className:"w-full h-full object-cover",alt:"preview"}),p.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md hover:bg-black/60 transition-colors",children:p.jsx(_n,{size:20})}),p.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black/60 backdrop-blur-md p-3 rounded-2xl border border-white/10",children:p.jsxs("p",{className:"text-white text-xs font-semibold text-center flex items-center justify-center gap-2",children:[p.jsx(or,{size:14,className:"text-yellow-400"}),"Ready to analyze dishes"]})})]}):p.jsxs("div",{onClick:()=>{var Z;return(Z=w.current)==null?void 0:Z.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[p.jsx(zi,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),p.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),p.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Capture the whole table"})]}),p.jsx("input",{type:"file",ref:w,accept:"image/*",onChange:W,className:"hidden"}),p.jsx("div",{className:"flex gap-3",children:p.jsx(rt,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200 dark:shadow-none bg-emerald-500 hover:bg-emerald-600 text-white",disabled:!l,onClick:()=>n(l||void 0),children:"Start Shared Meal"})})]}),i!=="recipe"&&i!=="shared"&&p.jsx("button",{onClick:()=>s("details"),className:"w-full py-3 text-sm font-bold text-gray-400 dark:text-gray-600 hover:text-royal-500",children:"Enter Details Manually"})]}):p.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-300",children:[p.jsxs("div",{className:"bg-royal-600 rounded-[32px] p-6 text-white shadow-xl shadow-royal-200 dark:shadow-none",children:[p.jsxs("div",{className:"flex justify-between items-start mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-royal-100 text-[10px] font-black uppercase tracking-widest mb-1",children:"Estimated Calories"}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("input",{type:"number",value:U,onChange:Z=>N(Z.target.value),className:"bg-transparent text-4xl font-black w-24 outline-none border-b-2 border-white/20 focus:border-white transition-colors"}),p.jsx("span",{className:"text-xl font-bold opacity-70",children:"kcal"})]})]}),p.jsx("div",{className:"bg-white/20 p-3 rounded-2xl backdrop-blur-md",children:p.jsx(Tv,{size:24})})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[p.jsxs("div",{className:"relative w-full",children:[p.jsx("input",{type:"number",value:D,onChange:Z=>O(Z.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),p.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),p.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Protein"})]}),p.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[p.jsxs("div",{className:"relative w-full",children:[p.jsx("input",{type:"number",value:F,onChange:Z=>I(Z.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),p.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),p.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Carbs"})]}),p.jsxs("div",{className:"bg-white/10 rounded-xl p-3 flex flex-col items-center",children:[p.jsxs("div",{className:"relative w-full",children:[p.jsx("input",{type:"number",value:$,onChange:Z=>B(Z.target.value),className:"bg-transparent text-xs font-black w-full outline-none border-b border-white/20 focus:border-white transition-colors text-center pb-1"}),p.jsx("span",{className:"absolute -bottom-0 right-0 text-[10px] font-bold opacity-50",children:"g"})]}),p.jsx("span",{className:"text-[8px] uppercase tracking-tighter opacity-70 mt-1",children:"Fat"})]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[p.jsx(Zi,{size:18,className:"text-royal-400"}),p.jsx("input",{type:"date",value:k,onChange:Z=>A(Z.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-3 flex items-center gap-3 border border-gray-100 dark:border-white/5",children:[p.jsx(CA,{size:18,className:"text-royal-400"}),p.jsx("input",{type:"time",value:C,onChange:Z=>M(Z.target.value),className:"bg-transparent text-sm font-bold w-full outline-none dark:text-white"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"text-[10px] font-black text-gray-400 uppercase ml-1",children:"Meal Title"}),p.jsx("input",{type:"text",value:R,onChange:Z=>L(Z.target.value),className:"w-full p-4 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-2xl font-bold dark:text-white mt-1"})]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-[32px] p-5 border border-gray-100 dark:border-white/5",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[p.jsx(or,{size:14,className:"text-royal-500"})," Ingredient Receipt"]}),p.jsx("button",{onClick:fe,className:"text-royal-500 hover:text-royal-600",children:p.jsx(MM,{size:18})})]}),p.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto no-scrollbar pr-1",children:G.map((Z,Xe)=>p.jsxs("div",{className:"flex items-center gap-2 group animate-in slide-in-from-left duration-200",children:[p.jsx("input",{type:"text",value:Z.name,onChange:Qe=>H(Xe,"name",Qe.target.value),className:"flex-1 bg-white dark:bg-white/10 p-2.5 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none focus:border-royal-300 dark:text-white",placeholder:"Ingredient"}),p.jsxs("div",{className:"relative w-20",children:[p.jsx("input",{type:"number",value:Z.grams===0?"":Z.grams,onChange:Qe=>H(Xe,"grams",Qe.target.value),className:"w-full bg-white dark:bg-white/10 p-2.5 pr-6 rounded-xl text-xs font-bold border border-gray-100 dark:border-white/10 outline-none text-right dark:text-white"}),p.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[8px] font-black text-gray-400",children:"g"})]}),p.jsx("button",{onClick:()=>ke(Xe),className:"text-red-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx(bf,{size:16})})]},Xe))}),p.jsxs(rt,{variant:"ghost",className:"w-full mt-4 py-3 text-[10px] font-black uppercase tracking-widest text-royal-600 bg-royal-100/50 hover:bg-royal-100",onClick:ie,isLoading:h,children:[p.jsx(Om,{size:14,className:`mr - 2 ${h?"animate-spin":""} `}),"Recalculate Totals"]})]}),p.jsx(rt,{className:"w-full py-5 text-lg font-black shadow-xl shadow-royal-200",onClick:Oe,isLoading:y,disabled:y,children:r?"Update Record":"Save & Track"})]})]})})},l6=({currentGoal:t,onClose:e,onSave:n})=>{const[r,i]=P.useState(t.toString()),o=()=>{const a=parseInt(r,10);!isNaN(a)&&a>0&&n(a)};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white w-full max-w-xs rounded-[32px] p-6 shadow-2xl border border-white/50 animate-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h2",{className:"text-lg font-extrabold text-gray-900",children:"Daily Calorie Goal"}),p.jsx("button",{onClick:e,className:"p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors",children:p.jsx(_n,{size:18,className:"text-gray-600"})})]}),p.jsxs("div",{className:"mb-8",children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 ml-1",children:"Target Calories"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:r,onChange:a=>i(a.target.value),className:"w-full p-5 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 transition-all font-extrabold text-3xl text-center text-gray-900",autoFocus:!0}),p.jsx("span",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-gray-400 text-sm font-bold",children:"kcal"})]})]}),p.jsx(rt,{className:"w-full py-4 shadow-lg shadow-royal-200",onClick:o,children:"Update Goal"})]})})},sg=({entry:t,onClose:e,onDelete:n,onEdit:r})=>{const[i,o]=P.useState(!1),[a,s]=P.useState(!1),l=async()=>{confirm("Permanently remove this record?")&&(o(!0),await n(t.id),e())},u=async()=>{if(confirm("Remove the photo to save storage space? Nutritional data will be kept.")){s(!0);try{await Oj(t.id),e(),window.dispatchEvent(new CustomEvent("food-entry-updated"))}catch(c){console.error("Failed to clear image",c),alert("Failed to clear image. Please try again.")}finally{s(!1)}}};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 dark:bg-black/60 backdrop-blur-md p-4 animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl dark:shadow-black border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[p.jsxs("div",{className:"relative h-64 bg-gray-100 dark:bg-white/5",children:[t.imageUrl?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:t.imageUrl,className:"w-full h-full object-cover"}),p.jsxs("button",{onClick:u,disabled:a,className:"absolute bottom-4 right-4 p-2.5 bg-white/20 hover:bg-white/40 text-white rounded-full backdrop-blur-md border border-white/20 transition-all flex items-center gap-2",title:"Remove photo to save space",children:[a?p.jsx("div",{className:"w-4 h-4 border-2 border-white/20 border-t-white rounded-full animate-spin"}):p.jsx(TM,{size:18}),p.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Clear Image"})]})]}):p.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-300 dark:text-gray-700",children:[p.jsx(zc,{size:48,className:"mb-2 opacity-50"}),p.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-40",children:"No Photo Attached"})]}),p.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 bg-white/80 dark:bg-black/40 text-gray-900 dark:text-white rounded-full backdrop-blur-md hover:bg-white dark:hover:bg-black/60 shadow-lg transition-colors z-10",children:p.jsx(_n,{size:20})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent pointer-events-none"}),p.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-white pointer-events-none",children:[p.jsx("h2",{className:"text-3xl font-black leading-tight tracking-tight",children:t.food_item}),p.jsxs("div",{className:"flex items-center gap-4 text-xs text-white/70 font-bold mt-2",children:[p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(Zi,{size:14})," ",t.date]}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(CA,{size:14})," ",t.time]})]})]})]}),p.jsxs("div",{className:"p-8 space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[p.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/20 p-3 rounded-2xl flex flex-col items-center border border-royal-100/50",children:[p.jsx("span",{className:"text-lg font-black text-royal-600",children:t.calories}),p.jsx("span",{className:"text-[8px] font-black uppercase text-royal-400",children:"kcal"})]}),p.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-950/20 p-3 rounded-2xl flex flex-col items-center border border-emerald-100/50",children:[p.jsxs("span",{className:"text-lg font-black text-emerald-600",children:[t.protein,"g"]}),p.jsx("span",{className:"text-[8px] font-black uppercase text-emerald-400",children:"Prot"})]}),p.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-3 rounded-2xl flex flex-col items-center border border-blue-100/50",children:[p.jsxs("span",{className:"text-lg font-black text-blue-600",children:[t.carbs,"g"]}),p.jsx("span",{className:"text-[8px] font-black uppercase text-blue-400",children:"Carb"})]}),p.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 p-3 rounded-2xl flex flex-col items-center border border-orange-100/50",children:[p.jsxs("span",{className:"text-lg font-black text-orange-600",children:[t.fat,"g"]}),p.jsx("span",{className:"text-[8px] font-black uppercase text-orange-400",children:"Fat"})]})]}),t.ingredients&&t.ingredients.length>0&&p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-3xl p-6 border border-gray-100 dark:border-white/5",children:[p.jsxs("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest flex items-center gap-2 mb-4",children:[p.jsx(AM,{size:14})," Ingredient Receipt"]}),p.jsx("div",{className:"space-y-3",children:t.ingredients.map((c,d)=>p.jsxs("div",{className:"flex justify-between items-center text-sm font-bold border-b border-gray-100 dark:border-white/5 pb-2 last:border-0 last:pb-0",children:[p.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:c.name}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"text-gray-400",children:[c.grams,"g"]}),p.jsxs("span",{className:"text-royal-500 text-xs w-12 text-right",children:[c.calories,"cal"]})]})]},d))})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs(rt,{variant:"ghost",className:"flex-1 text-red-500 py-4 font-black",onClick:l,isLoading:i,children:[p.jsx(bf,{size:18,className:"mr-2"})," Delete"]}),p.jsxs(rt,{className:"flex-[2] py-4 font-black shadow-lg shadow-royal-200",onClick:()=>r(t),children:[p.jsx(NA,{size:18,className:"mr-2"})," Edit Meal"]})]})]})]})})};var u6=Array.isArray,Qt=u6,c6=typeof mu=="object"&&mu&&mu.Object===Object&&mu,sP=c6,d6=sP,f6=typeof self=="object"&&self&&self.Object===Object&&self,h6=d6||f6||Function("return this")(),ur=h6,p6=ur,m6=p6.Symbol,su=m6,k_=su,lP=Object.prototype,g6=lP.hasOwnProperty,y6=lP.toString,ps=k_?k_.toStringTag:void 0;function v6(t){var e=g6.call(t,ps),n=t[ps];try{t[ps]=void 0;var r=!0}catch{}var i=y6.call(t);return r&&(e?t[ps]=n:delete t[ps]),i}var x6=v6,b6=Object.prototype,w6=b6.toString;function _6(t){return w6.call(t)}var S6=_6,A_=su,E6=x6,T6=S6,k6="[object Null]",A6="[object Undefined]",C_=A_?A_.toStringTag:void 0;function C6(t){return t==null?t===void 0?A6:k6:C_&&C_ in Object(t)?E6(t):T6(t)}var $r=C6;function P6(t){return t!=null&&typeof t=="object"}var Dr=P6,N6=$r,I6=Dr,O6="[object Symbol]";function R6(t){return typeof t=="symbol"||I6(t)&&N6(t)==O6}var Ga=R6,M6=Qt,$6=Ga,D6=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j6=/^\w*$/;function L6(t,e){if(M6(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||$6(t)?!0:j6.test(t)||!D6.test(t)||e!=null&&t in Object(e)}var t0=L6;function U6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pi=U6;const Ha=Le(pi);var F6=$r,B6=pi,z6="[object AsyncFunction]",G6="[object Function]",H6="[object GeneratorFunction]",q6="[object Proxy]";function V6(t){if(!B6(t))return!1;var e=F6(t);return e==G6||e==H6||e==z6||e==q6}var n0=V6;const ge=Le(n0);var W6=ur,K6=W6["__core-js_shared__"],J6=K6,lp=J6,P_=function(){var t=/[^.]+$/.exec(lp&&lp.keys&&lp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Y6(t){return!!P_&&P_ in t}var X6=Y6,Q6=Function.prototype,Z6=Q6.toString;function ez(t){if(t!=null){try{return Z6.call(t)}catch{}try{return t+""}catch{}}return""}var uP=ez,tz=n0,nz=X6,rz=pi,iz=uP,oz=/[\\^$.*+?()[\]{}|]/g,az=/^\[object .+?Constructor\]$/,sz=Function.prototype,lz=Object.prototype,uz=sz.toString,cz=lz.hasOwnProperty,dz=RegExp("^"+uz.call(cz).replace(oz,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fz(t){if(!rz(t)||nz(t))return!1;var e=tz(t)?dz:az;return e.test(iz(t))}var hz=fz;function pz(t,e){return t==null?void 0:t[e]}var mz=pz,gz=hz,yz=mz;function vz(t,e){var n=yz(t,e);return gz(n)?n:void 0}var lo=vz,xz=lo,bz=xz(Object,"create"),$f=bz,N_=$f;function wz(){this.__data__=N_?N_(null):{},this.size=0}var _z=wz;function Sz(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ez=Sz,Tz=$f,kz="__lodash_hash_undefined__",Az=Object.prototype,Cz=Az.hasOwnProperty;function Pz(t){var e=this.__data__;if(Tz){var n=e[t];return n===kz?void 0:n}return Cz.call(e,t)?e[t]:void 0}var Nz=Pz,Iz=$f,Oz=Object.prototype,Rz=Oz.hasOwnProperty;function Mz(t){var e=this.__data__;return Iz?e[t]!==void 0:Rz.call(e,t)}var $z=Mz,Dz=$f,jz="__lodash_hash_undefined__";function Lz(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Dz&&e===void 0?jz:e,this}var Uz=Lz,Fz=_z,Bz=Ez,zz=Nz,Gz=$z,Hz=Uz;function qa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qa.prototype.clear=Fz;qa.prototype.delete=Bz;qa.prototype.get=zz;qa.prototype.has=Gz;qa.prototype.set=Hz;var qz=qa;function Vz(){this.__data__=[],this.size=0}var Wz=Vz;function Kz(t,e){return t===e||t!==t&&e!==e}var r0=Kz,Jz=r0;function Yz(t,e){for(var n=t.length;n--;)if(Jz(t[n][0],e))return n;return-1}var Df=Yz,Xz=Df,Qz=Array.prototype,Zz=Qz.splice;function eG(t){var e=this.__data__,n=Xz(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Zz.call(e,n,1),--this.size,!0}var tG=eG,nG=Df;function rG(t){var e=this.__data__,n=nG(e,t);return n<0?void 0:e[n][1]}var iG=rG,oG=Df;function aG(t){return oG(this.__data__,t)>-1}var sG=aG,lG=Df;function uG(t,e){var n=this.__data__,r=lG(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var cG=uG,dG=Wz,fG=tG,hG=iG,pG=sG,mG=cG;function Va(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Va.prototype.clear=dG;Va.prototype.delete=fG;Va.prototype.get=hG;Va.prototype.has=pG;Va.prototype.set=mG;var jf=Va,gG=lo,yG=ur,vG=gG(yG,"Map"),i0=vG,I_=qz,xG=jf,bG=i0;function wG(){this.size=0,this.__data__={hash:new I_,map:new(bG||xG),string:new I_}}var _G=wG;function SG(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var EG=SG,TG=EG;function kG(t,e){var n=t.__data__;return TG(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Lf=kG,AG=Lf;function CG(t){var e=AG(this,t).delete(t);return this.size-=e?1:0,e}var PG=CG,NG=Lf;function IG(t){return NG(this,t).get(t)}var OG=IG,RG=Lf;function MG(t){return RG(this,t).has(t)}var $G=MG,DG=Lf;function jG(t,e){var n=DG(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var LG=jG,UG=_G,FG=PG,BG=OG,zG=$G,GG=LG;function Wa(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Wa.prototype.clear=UG;Wa.prototype.delete=FG;Wa.prototype.get=BG;Wa.prototype.has=zG;Wa.prototype.set=GG;var o0=Wa,cP=o0,HG="Expected a function";function a0(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(HG);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(a0.Cache||cP),n}a0.Cache=cP;var dP=a0;const qG=Le(dP);var VG=dP,WG=500;function KG(t){var e=VG(t,function(r){return n.size===WG&&n.clear(),r}),n=e.cache;return e}var JG=KG,YG=JG,XG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QG=/\\(\\)?/g,ZG=YG(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(XG,function(n,r,i,o){e.push(i?o.replace(QG,"$1"):r||n)}),e}),eH=ZG;function tH(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var s0=tH,O_=su,nH=s0,rH=Qt,iH=Ga,R_=O_?O_.prototype:void 0,M_=R_?R_.toString:void 0;function fP(t){if(typeof t=="string")return t;if(rH(t))return nH(t,fP)+"";if(iH(t))return M_?M_.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var oH=fP,aH=oH;function sH(t){return t==null?"":aH(t)}var hP=sH,lH=Qt,uH=t0,cH=eH,dH=hP;function fH(t,e){return lH(t)?t:uH(t,e)?[t]:cH(dH(t))}var pP=fH,hH=Ga;function pH(t){if(typeof t=="string"||hH(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Uf=pH,mH=pP,gH=Uf;function yH(t,e){e=mH(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[gH(e[n++])];return n&&n==r?t:void 0}var l0=yH,vH=l0;function xH(t,e,n){var r=t==null?void 0:vH(t,e);return r===void 0?n:r}var mP=xH;const En=Le(mP);function bH(t){return t==null}var wH=bH;const be=Le(wH);var _H=$r,SH=Qt,EH=Dr,TH="[object String]";function kH(t){return typeof t=="string"||!SH(t)&&EH(t)&&_H(t)==TH}var AH=kH;const eo=Le(AH);var gP={exports:{}},Ne={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u0=Symbol.for("react.element"),c0=Symbol.for("react.portal"),Ff=Symbol.for("react.fragment"),Bf=Symbol.for("react.strict_mode"),zf=Symbol.for("react.profiler"),Gf=Symbol.for("react.provider"),Hf=Symbol.for("react.context"),CH=Symbol.for("react.server_context"),qf=Symbol.for("react.forward_ref"),Vf=Symbol.for("react.suspense"),Wf=Symbol.for("react.suspense_list"),Kf=Symbol.for("react.memo"),Jf=Symbol.for("react.lazy"),PH=Symbol.for("react.offscreen"),yP;yP=Symbol.for("react.module.reference");function Nn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case u0:switch(t=t.type,t){case Ff:case zf:case Bf:case Vf:case Wf:return t;default:switch(t=t&&t.$$typeof,t){case CH:case Hf:case qf:case Jf:case Kf:case Gf:return t;default:return e}}case c0:return e}}}Ne.ContextConsumer=Hf;Ne.ContextProvider=Gf;Ne.Element=u0;Ne.ForwardRef=qf;Ne.Fragment=Ff;Ne.Lazy=Jf;Ne.Memo=Kf;Ne.Portal=c0;Ne.Profiler=zf;Ne.StrictMode=Bf;Ne.Suspense=Vf;Ne.SuspenseList=Wf;Ne.isAsyncMode=function(){return!1};Ne.isConcurrentMode=function(){return!1};Ne.isContextConsumer=function(t){return Nn(t)===Hf};Ne.isContextProvider=function(t){return Nn(t)===Gf};Ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===u0};Ne.isForwardRef=function(t){return Nn(t)===qf};Ne.isFragment=function(t){return Nn(t)===Ff};Ne.isLazy=function(t){return Nn(t)===Jf};Ne.isMemo=function(t){return Nn(t)===Kf};Ne.isPortal=function(t){return Nn(t)===c0};Ne.isProfiler=function(t){return Nn(t)===zf};Ne.isStrictMode=function(t){return Nn(t)===Bf};Ne.isSuspense=function(t){return Nn(t)===Vf};Ne.isSuspenseList=function(t){return Nn(t)===Wf};Ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ff||t===zf||t===Bf||t===Vf||t===Wf||t===PH||typeof t=="object"&&t!==null&&(t.$$typeof===Jf||t.$$typeof===Kf||t.$$typeof===Gf||t.$$typeof===Hf||t.$$typeof===qf||t.$$typeof===yP||t.getModuleId!==void 0)};Ne.typeOf=Nn;gP.exports=Ne;var NH=gP.exports,IH=$r,OH=Dr,RH="[object Number]";function MH(t){return typeof t=="number"||OH(t)&&IH(t)==RH}var vP=MH;const $H=Le(vP);var DH=vP;function jH(t){return DH(t)&&t!=+t}var LH=jH;const Ka=Le(LH);var zn=function(e){return e===0?0:e>0?1:-1},$i=function(e){return eo(e)&&e.indexOf("%")===e.length-1},Y=function(e){return $H(e)&&!Ka(e)},UH=function(e){return be(e)},ht=function(e){return Y(e)||eo(e)},FH=0,lu=function(e){var n=++FH;return"".concat(e||"").concat(n)},to=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Y(e)&&!eo(e))return r;var o;if($i(e)){var a=e.indexOf("%");o=n*parseFloat(e.slice(0,a))/100}else o=+e;return Ka(o)&&(o=r),i&&o>n&&(o=n),o},Ao=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},BH=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},vn=function(e,n){return Y(e)&&Y(n)?function(r){return e+r*(n-e)}:function(){return n}};function nd(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):En(r,e))===n})}var zH=function(e,n){return Y(e)&&Y(n)?e-n:eo(e)&&eo(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function ta(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function lg(t){"@babel/helpers - typeof";return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(t)}var GH=["viewBox","children"],HH=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$_=["points","pathLength"],up={svg:GH,polygon:$_,polyline:$_},d0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],rd=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(P.isValidElement(e)&&(r=e.props),!Ha(r))return null;var i={};return Object.keys(r).forEach(function(o){d0.includes(o)&&(i[o]=n||function(a){return r[o](r,a)})}),i},qH=function(e,n,r){return function(i){return e(n,r,i),null}},id=function(e,n,r){if(!Ha(e)||lg(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(o){var a=e[o];d0.includes(o)&&typeof a=="function"&&(i||(i={}),i[o]=qH(a,n,r))}),i},VH=["children"],WH=["children"];function D_(t,e){if(t==null)return{};var n=KH(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function KH(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ug(t){"@babel/helpers - typeof";return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(t)}var j_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},br=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},L_=null,cp=null,f0=function t(e){if(e===L_&&Array.isArray(cp))return cp;var n=[];return P.Children.forEach(e,function(r){be(r)||(NH.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),cp=n,L_=e,n};function Wn(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return br(i)}):r=[br(e)],f0(t).forEach(function(i){var o=En(i,"type.displayName")||En(i,"type.name");r.indexOf(o)!==-1&&n.push(i)}),n}function nn(t,e){var n=Wn(t,e);return n&&n[0]}var U_=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!Y(r)||r<=0||!Y(i)||i<=0)},JH=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],YH=function(e){return e&&e.type&&eo(e.type)&&JH.indexOf(e.type)>=0},XH=function(e){return e&&ug(e)==="object"&&"clipDot"in e},QH=function(e,n,r,i){var o,a=(o=up==null?void 0:up[i])!==null&&o!==void 0?o:[];return n.startsWith("data-")||!ge(e)&&(i&&a.includes(n)||HH.includes(n))||r&&d0.includes(n)},xe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(P.isValidElement(e)&&(i=e.props),!Ha(i))return null;var o={};return Object.keys(i).forEach(function(a){var s;QH((s=i)===null||s===void 0?void 0:s[a],a,n,r)&&(o[a]=i[a])}),o},cg=function t(e,n){if(e===n)return!0;var r=P.Children.count(e);if(r!==P.Children.count(n))return!1;if(r===0)return!0;if(r===1)return F_(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=e[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!t(o,a))return!1}else if(!F_(o,a))return!1}return!0},F_=function(e,n){if(be(e)&&be(n))return!0;if(!be(e)&&!be(n)){var r=e.props||{},i=r.children,o=D_(r,VH),a=n.props||{},s=a.children,l=D_(a,WH);return i&&s?ta(o,l)&&cg(i,s):!i&&!s?ta(o,l):!1}return!1},B_=function(e,n){var r=[],i={};return f0(e).forEach(function(o,a){if(YH(o))r.push(o);else if(o){var s=br(o.type),l=n[s]||{},u=l.handler,c=l.once;if(u&&(!c||!i[s])){var d=u(o,s,a);r.push(d),i[s]=!0}}}),r},ZH=function(e){var n=e&&e.type;return n&&j_[n]?j_[n]:null},eq=function(e,n){return f0(n).indexOf(e)},tq=["children","width","height","viewBox","className","style","title","desc"];function dg(){return dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dg.apply(this,arguments)}function nq(t,e){if(t==null)return{};var n=rq(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rq(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function fg(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,o=t.className,a=t.style,s=t.title,l=t.desc,u=nq(t,tq),c=i||{width:n,height:r,x:0,y:0},d=me("recharts-surface",o);return j.createElement("svg",dg({},xe(u,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),j.createElement("title",null,s),j.createElement("desc",null,l),e)}var iq=["children","className"];function hg(){return hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hg.apply(this,arguments)}function oq(t,e){if(t==null)return{};var n=aq(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function aq(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ke=j.forwardRef(function(t,e){var n=t.children,r=t.className,i=oq(t,iq),o=me("recharts-layer",r);return j.createElement("g",hg({className:o},xe(i,!0),{ref:e}),n)}),qi=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o]};function sq(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}var lq=sq,uq=lq;function cq(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:uq(t,e,n)}var dq=cq,fq="\\ud800-\\udfff",hq="\\u0300-\\u036f",pq="\\ufe20-\\ufe2f",mq="\\u20d0-\\u20ff",gq=hq+pq+mq,yq="\\ufe0e\\ufe0f",vq="\\u200d",xq=RegExp("["+vq+fq+gq+yq+"]");function bq(t){return xq.test(t)}var xP=bq;function wq(t){return t.split("")}var _q=wq,bP="\\ud800-\\udfff",Sq="\\u0300-\\u036f",Eq="\\ufe20-\\ufe2f",Tq="\\u20d0-\\u20ff",kq=Sq+Eq+Tq,Aq="\\ufe0e\\ufe0f",Cq="["+bP+"]",pg="["+kq+"]",mg="\\ud83c[\\udffb-\\udfff]",Pq="(?:"+pg+"|"+mg+")",wP="[^"+bP+"]",_P="(?:\\ud83c[\\udde6-\\uddff]){2}",SP="[\\ud800-\\udbff][\\udc00-\\udfff]",Nq="\\u200d",EP=Pq+"?",TP="["+Aq+"]?",Iq="(?:"+Nq+"(?:"+[wP,_P,SP].join("|")+")"+TP+EP+")*",Oq=TP+EP+Iq,Rq="(?:"+[wP+pg+"?",pg,_P,SP,Cq].join("|")+")",Mq=RegExp(mg+"(?="+mg+")|"+Rq+Oq,"g");function $q(t){return t.match(Mq)||[]}var Dq=$q,jq=_q,Lq=xP,Uq=Dq;function Fq(t){return Lq(t)?Uq(t):jq(t)}var Bq=Fq,zq=dq,Gq=xP,Hq=Bq,qq=hP;function Vq(t){return function(e){e=qq(e);var n=Gq(e)?Hq(e):void 0,r=n?n[0]:e.charAt(0),i=n?zq(n,1).join(""):e.slice(1);return r[t]()+i}}var Wq=Vq,Kq=Wq,Jq=Kq("toUpperCase"),Yq=Jq;const Yf=Le(Yq);function De(t){return function(){return t}}const kP=Math.cos,od=Math.sin,Xn=Math.sqrt,ad=Math.PI,Xf=2*ad,gg=Math.PI,yg=2*gg,ki=1e-6,Xq=yg-ki;function AP(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Qq(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return AP;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Zq{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?AP:Qq(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-e,u=i-n,c=a-e,d=s-n,h=c*c+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>ki)if(!(Math.abs(d*l-u*c)>ki)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-a,y=i-s,x=l*l+u*u,v=g*g+y*y,b=Math.sqrt(x),w=Math.sqrt(h),_=o*Math.tan((gg-Math.acos((x+h-v)/(2*b*w)))/2),T=_/w,S=_/b;Math.abs(T-1)>ki&&this._append`L${e+T*c},${n+T*d}`,this._append`A${o},${o},0,0,${+(d*g>c*y)},${this._x1=e+S*l},${this._y1=n+S*u}`}}arc(e,n,r,i,o,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=e+s,c=n+l,d=1^a,h=a?i-o:o-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>ki||Math.abs(this._y1-c)>ki)&&this._append`L${u},${c}`,r&&(h<0&&(h=h%yg+yg),h>Xq?this._append`A${r},${r},0,1,${d},${e-s},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:h>ki&&this._append`A${r},${r},0,${+(h>=gg)},${d},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function h0(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Zq(e)}function p0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function CP(t){this._context=t}CP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Qf(t){return new CP(t)}function PP(t){return t[0]}function NP(t){return t[1]}function IP(t,e){var n=De(!0),r=null,i=Qf,o=null,a=h0(s);t=typeof t=="function"?t:t===void 0?PP:De(t),e=typeof e=="function"?e:e===void 0?NP:De(e);function s(l){var u,c=(l=p0(l)).length,d,h=!1,g;for(r==null&&(o=i(g=a())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(d,u,l),+e(d,u,l));if(g)return o=null,g+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:De(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:De(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:De(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function Gu(t,e,n){var r=null,i=De(!0),o=null,a=Qf,s=null,l=h0(u);t=typeof t=="function"?t:t===void 0?PP:De(+t),e=typeof e=="function"?e:De(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?NP:De(+n);function u(d){var h,g,y,x=(d=p0(d)).length,v,b=!1,w,_=new Array(x),T=new Array(x);for(o==null&&(s=a(w=l())),h=0;h<=x;++h){if(!(h<x&&i(v=d[h],h,d))===b)if(b=!b)g=h,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=h-1;y>=g;--y)s.point(_[y],T[y]);s.lineEnd(),s.areaEnd()}b&&(_[h]=+t(v,h,d),T[h]=+e(v,h,d),s.point(r?+r(v,h,d):_[h],n?+n(v,h,d):T[h]))}if(w)return s=null,w+""||null}function c(){return IP().defined(i).curve(a).context(o)}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:De(+d),r=null,u):t},u.x0=function(d){return arguments.length?(t=typeof d=="function"?d:De(+d),u):t},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:De(+d),u):r},u.y=function(d){return arguments.length?(e=typeof d=="function"?d:De(+d),n=null,u):e},u.y0=function(d){return arguments.length?(e=typeof d=="function"?d:De(+d),u):e},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:De(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(t).y(e)},u.lineY1=function(){return c().x(t).y(n)},u.lineX1=function(){return c().x(r).y(e)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:De(!!d),u):i},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}class OP{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function eV(t){return new OP(t,!0)}function tV(t){return new OP(t,!1)}const m0={draw(t,e){const n=Xn(e/ad);t.moveTo(n,0),t.arc(0,0,n,0,Xf)}},nV={draw(t,e){const n=Xn(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},RP=Xn(1/3),rV=RP*2,iV={draw(t,e){const n=Xn(e/rV),r=n*RP;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},oV={draw(t,e){const n=Xn(e),r=-n/2;t.rect(r,r,n,n)}},aV=.8908130915292852,MP=od(ad/10)/od(7*ad/10),sV=od(Xf/10)*MP,lV=-kP(Xf/10)*MP,uV={draw(t,e){const n=Xn(e*aV),r=sV*n,i=lV*n;t.moveTo(0,-n),t.lineTo(r,i);for(let o=1;o<5;++o){const a=Xf*o/5,s=kP(a),l=od(a);t.lineTo(l*n,-s*n),t.lineTo(s*r-l*i,l*r+s*i)}t.closePath()}},dp=Xn(3),cV={draw(t,e){const n=-Xn(e/(dp*3));t.moveTo(0,n*2),t.lineTo(-dp*n,-n),t.lineTo(dp*n,-n),t.closePath()}},hn=-.5,pn=Xn(3)/2,vg=1/Xn(12),dV=(vg/2+1)*3,fV={draw(t,e){const n=Xn(e/dV),r=n/2,i=n*vg,o=r,a=n*vg+n,s=-o,l=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,l),t.lineTo(hn*r-pn*i,pn*r+hn*i),t.lineTo(hn*o-pn*a,pn*o+hn*a),t.lineTo(hn*s-pn*l,pn*s+hn*l),t.lineTo(hn*r+pn*i,hn*i-pn*r),t.lineTo(hn*o+pn*a,hn*a-pn*o),t.lineTo(hn*s+pn*l,hn*l-pn*s),t.closePath()}};function hV(t,e){let n=null,r=h0(i);t=typeof t=="function"?t:De(t||m0),e=typeof e=="function"?e:De(e===void 0?64:+e);function i(){let o;if(n||(n=o=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(t=typeof o=="function"?o:De(o),i):t},i.size=function(o){return arguments.length?(e=typeof o=="function"?o:De(+o),i):e},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function sd(){}function ld(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $P(t){this._context=t}$P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ld(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ld(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function pV(t){return new $P(t)}function DP(t){this._context=t}DP.prototype={areaStart:sd,areaEnd:sd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ld(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function mV(t){return new DP(t)}function jP(t){this._context=t}jP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ld(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function gV(t){return new jP(t)}function LP(t){this._context=t}LP.prototype={areaStart:sd,areaEnd:sd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function yV(t){return new LP(t)}function z_(t){return t<0?-1:1}function G_(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(z_(o)+z_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function H_(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function fp(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function ud(t){this._context=t}ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:fp(this,this._t0,H_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,fp(this,H_(this,n=G_(this,t,e)),n);break;default:fp(this,this._t0,n=G_(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function UP(t){this._context=new FP(t)}(UP.prototype=Object.create(ud.prototype)).point=function(t,e){ud.prototype.point.call(this,e,t)};function FP(t){this._context=t}FP.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}};function vV(t){return new ud(t)}function xV(t){return new UP(t)}function BP(t){this._context=t}BP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=q_(t),i=q_(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function q_(t){var e,n=t.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/o[e-1],o[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/o[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function bV(t){return new BP(t)}function Zf(t,e){this._context=t,this._t=e}Zf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function wV(t){return new Zf(t,.5)}function _V(t){return new Zf(t,0)}function SV(t){return new Zf(t,1)}function pa(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function xg(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function EV(t,e){return t[e]}function TV(t){const e=[];return e.key=t,e}function kV(){var t=De([]),e=xg,n=pa,r=EV;function i(o){var a=Array.from(t.apply(this,arguments),TV),s,l=a.length,u=-1,c;for(const d of o)for(s=0,++u;s<l;++s)(a[s][u]=[0,+r(d,a[s].key,u,o)]).data=d;for(s=0,c=p0(e(a));s<l;++s)a[c[s]].index=s;return n(a,c),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:De(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:De(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?xg:typeof o=="function"?o:De(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??pa,i):n},i}function AV(t,e){if((r=t.length)>0){for(var n,r,i=0,o=t[0].length,a;i<o;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}pa(t,e)}}function CV(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,o=r.length;n<o;++n){for(var a=0,s=0;a<i;++a)s+=t[a][n][1]||0;r[n][1]+=r[n][0]=-s/2}pa(t,e)}}function PV(t,e){if(!(!((a=t.length)>0)||!((o=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,o,a;r<o;++r){for(var s=0,l=0,u=0;s<a;++s){for(var c=t[e[s]],d=c[r][1]||0,h=c[r-1][1]||0,g=(d-h)/2,y=0;y<s;++y){var x=t[e[y]],v=x[r][1]||0,b=x[r-1][1]||0;g+=v-b}l+=d,u+=g*d}i[r-1][1]+=i[r-1][0]=n,l&&(n-=u/l)}i[r-1][1]+=i[r-1][0]=n,pa(t,e)}}function vl(t){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(t)}var NV=["type","size","sizeType"];function bg(){return bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bg.apply(this,arguments)}function V_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function W_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V_(Object(n),!0).forEach(function(r){IV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function IV(t,e,n){return e=OV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OV(t){var e=RV(t,"string");return vl(e)=="symbol"?e:e+""}function RV(t,e){if(vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MV(t,e){if(t==null)return{};var n=$V(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function $V(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zP={symbolCircle:m0,symbolCross:nV,symbolDiamond:iV,symbolSquare:oV,symbolStar:uV,symbolTriangle:cV,symbolWye:fV},DV=Math.PI/180,jV=function(e){var n="symbol".concat(Yf(e));return zP[n]||m0},LV=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*DV;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},UV=function(e,n){zP["symbol".concat(Yf(e))]=n},g0=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,o=i===void 0?64:i,a=e.sizeType,s=a===void 0?"area":a,l=MV(e,NV),u=W_(W_({},l),{},{type:r,size:o,sizeType:s}),c=function(){var v=jV(r),b=hV().type(v).size(LV(o,s,r));return b()},d=u.className,h=u.cx,g=u.cy,y=xe(u,!0);return h===+h&&g===+g&&o===+o?j.createElement("path",bg({},y,{className:me("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(g,")"),d:c()})):null};g0.registerSymbol=UV;function ma(t){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ma(t)}function wg(){return wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wg.apply(this,arguments)}function K_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?K_(Object(n),!0).forEach(function(r){xl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zV(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,HP(r.key),r)}}function GV(t,e,n){return e&&zV(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function HV(t,e,n){return e=cd(e),qV(t,GP()?Reflect.construct(e,n||[],cd(t).constructor):e.apply(t,n))}function qV(t,e){if(e&&(ma(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VV(t)}function VV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GP=function(){return!!t})()}function cd(t){return cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cd(t)}function WV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_g(t,e)}function _g(t,e){return _g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_g(t,e)}function xl(t,e,n){return e=HP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HP(t){var e=KV(t,"string");return ma(e)=="symbol"?e:e+""}function KV(t,e){if(ma(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ma(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mn=32,y0=function(t){function e(){return BV(this,e),HV(this,e,arguments)}return WV(e,t),GV(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,o=mn/2,a=mn/6,s=mn/3,l=r.inactive?i:r.color;if(r.type==="plainline")return j.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:o,x2:mn,y2:o,className:"recharts-legend-icon"});if(r.type==="line")return j.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(o,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(o,`
            H`).concat(mn,"M").concat(2*s,",").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(o),className:"recharts-legend-icon"});if(r.type==="rect")return j.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(mn/8,"h").concat(mn,"v").concat(mn*3/4,"h").concat(-mn,"z"),className:"recharts-legend-icon"});if(j.isValidElement(r.legendIcon)){var u=FV({},r);return delete u.legendIcon,j.cloneElement(r.legendIcon,u)}return j.createElement(g0,{fill:l,cx:o,cy:o,size:mn,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,o=i.payload,a=i.iconSize,s=i.layout,l=i.formatter,u=i.inactiveColor,c={x:0,y:0,width:mn,height:mn},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return o.map(function(g,y){var x=g.formatter||l,v=me(xl(xl({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",g.inactive));if(g.type==="none")return null;var b=ge(g.value)?null:g.value;qi(!ge(g.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=g.inactive?u:g.color;return j.createElement("li",wg({className:v,style:d,key:"legend-item-".concat(y)},id(r.props,g,y)),j.createElement(fg,{width:a,height:a,viewBox:c,style:h},r.renderIcon(g)),j.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},x?x(b,g,y):b))})}},{key:"render",value:function(){var r=this.props,i=r.payload,o=r.layout,a=r.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:o==="horizontal"?a:"left"};return j.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])}(P.PureComponent);xl(y0,"displayName","Legend");xl(y0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var JV=jf;function YV(){this.__data__=new JV,this.size=0}var XV=YV;function QV(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var ZV=QV;function e8(t){return this.__data__.get(t)}var t8=e8;function n8(t){return this.__data__.has(t)}var r8=n8,i8=jf,o8=i0,a8=o0,s8=200;function l8(t,e){var n=this.__data__;if(n instanceof i8){var r=n.__data__;if(!o8||r.length<s8-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a8(r)}return n.set(t,e),this.size=n.size,this}var u8=l8,c8=jf,d8=XV,f8=ZV,h8=t8,p8=r8,m8=u8;function Ja(t){var e=this.__data__=new c8(t);this.size=e.size}Ja.prototype.clear=d8;Ja.prototype.delete=f8;Ja.prototype.get=h8;Ja.prototype.has=p8;Ja.prototype.set=m8;var qP=Ja,g8="__lodash_hash_undefined__";function y8(t){return this.__data__.set(t,g8),this}var v8=y8;function x8(t){return this.__data__.has(t)}var b8=x8,w8=o0,_8=v8,S8=b8;function dd(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new w8;++e<n;)this.add(t[e])}dd.prototype.add=dd.prototype.push=_8;dd.prototype.has=S8;var VP=dd;function E8(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var WP=E8;function T8(t,e){return t.has(e)}var KP=T8,k8=VP,A8=WP,C8=KP,P8=1,N8=2;function I8(t,e,n,r,i,o){var a=n&P8,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var d=-1,h=!0,g=n&N8?new k8:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var y=t[d],x=e[d];if(r)var v=a?r(x,y,d,e,t,o):r(y,x,d,t,e,o);if(v!==void 0){if(v)continue;h=!1;break}if(g){if(!A8(e,function(b,w){if(!C8(g,w)&&(y===b||i(y,b,n,r,o)))return g.push(w)})){h=!1;break}}else if(!(y===x||i(y,x,n,r,o))){h=!1;break}}return o.delete(t),o.delete(e),h}var JP=I8,O8=ur,R8=O8.Uint8Array,M8=R8;function $8(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var D8=$8;function j8(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var v0=j8,J_=su,Y_=M8,L8=r0,U8=JP,F8=D8,B8=v0,z8=1,G8=2,H8="[object Boolean]",q8="[object Date]",V8="[object Error]",W8="[object Map]",K8="[object Number]",J8="[object RegExp]",Y8="[object Set]",X8="[object String]",Q8="[object Symbol]",Z8="[object ArrayBuffer]",eW="[object DataView]",X_=J_?J_.prototype:void 0,hp=X_?X_.valueOf:void 0;function tW(t,e,n,r,i,o,a){switch(n){case eW:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Z8:return!(t.byteLength!=e.byteLength||!o(new Y_(t),new Y_(e)));case H8:case q8:case K8:return L8(+t,+e);case V8:return t.name==e.name&&t.message==e.message;case J8:case X8:return t==e+"";case W8:var s=F8;case Y8:var l=r&z8;if(s||(s=B8),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=G8,a.set(t,e);var c=U8(s(t),s(e),r,i,o,a);return a.delete(t),c;case Q8:if(hp)return hp.call(t)==hp.call(e)}return!1}var nW=tW;function rW(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var YP=rW,iW=YP,oW=Qt;function aW(t,e,n){var r=e(t);return oW(t)?r:iW(r,n(t))}var sW=aW;function lW(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}var uW=lW;function cW(){return[]}var dW=cW,fW=uW,hW=dW,pW=Object.prototype,mW=pW.propertyIsEnumerable,Q_=Object.getOwnPropertySymbols,gW=Q_?function(t){return t==null?[]:(t=Object(t),fW(Q_(t),function(e){return mW.call(t,e)}))}:hW,yW=gW;function vW(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var xW=vW,bW=$r,wW=Dr,_W="[object Arguments]";function SW(t){return wW(t)&&bW(t)==_W}var EW=SW,Z_=EW,TW=Dr,XP=Object.prototype,kW=XP.hasOwnProperty,AW=XP.propertyIsEnumerable,CW=Z_(function(){return arguments}())?Z_:function(t){return TW(t)&&kW.call(t,"callee")&&!AW.call(t,"callee")},x0=CW,fd={exports:{}};function PW(){return!1}var NW=PW;fd.exports;(function(t,e){var n=ur,r=NW,i=e&&!e.nodeType&&e,o=i&&!0&&t&&!t.nodeType&&t,a=o&&o.exports===i,s=a?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;t.exports=u})(fd,fd.exports);var QP=fd.exports,IW=9007199254740991,OW=/^(?:0|[1-9]\d*)$/;function RW(t,e){var n=typeof t;return e=e??IW,!!e&&(n=="number"||n!="symbol"&&OW.test(t))&&t>-1&&t%1==0&&t<e}var b0=RW,MW=9007199254740991;function $W(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=MW}var w0=$W,DW=$r,jW=w0,LW=Dr,UW="[object Arguments]",FW="[object Array]",BW="[object Boolean]",zW="[object Date]",GW="[object Error]",HW="[object Function]",qW="[object Map]",VW="[object Number]",WW="[object Object]",KW="[object RegExp]",JW="[object Set]",YW="[object String]",XW="[object WeakMap]",QW="[object ArrayBuffer]",ZW="[object DataView]",e9="[object Float32Array]",t9="[object Float64Array]",n9="[object Int8Array]",r9="[object Int16Array]",i9="[object Int32Array]",o9="[object Uint8Array]",a9="[object Uint8ClampedArray]",s9="[object Uint16Array]",l9="[object Uint32Array]",Fe={};Fe[e9]=Fe[t9]=Fe[n9]=Fe[r9]=Fe[i9]=Fe[o9]=Fe[a9]=Fe[s9]=Fe[l9]=!0;Fe[UW]=Fe[FW]=Fe[QW]=Fe[BW]=Fe[ZW]=Fe[zW]=Fe[GW]=Fe[HW]=Fe[qW]=Fe[VW]=Fe[WW]=Fe[KW]=Fe[JW]=Fe[YW]=Fe[XW]=!1;function u9(t){return LW(t)&&jW(t.length)&&!!Fe[DW(t)]}var c9=u9;function d9(t){return function(e){return t(e)}}var ZP=d9,hd={exports:{}};hd.exports;(function(t,e){var n=sP,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===r,a=o&&n.process,s=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();t.exports=s})(hd,hd.exports);var f9=hd.exports,h9=c9,p9=ZP,eS=f9,tS=eS&&eS.isTypedArray,m9=tS?p9(tS):h9,eN=m9,g9=xW,y9=x0,v9=Qt,x9=QP,b9=b0,w9=eN,_9=Object.prototype,S9=_9.hasOwnProperty;function E9(t,e){var n=v9(t),r=!n&&y9(t),i=!n&&!r&&x9(t),o=!n&&!r&&!i&&w9(t),a=n||r||i||o,s=a?g9(t.length,String):[],l=s.length;for(var u in t)(e||S9.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||b9(u,l)))&&s.push(u);return s}var T9=E9,k9=Object.prototype;function A9(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||k9;return t===n}var C9=A9;function P9(t,e){return function(n){return t(e(n))}}var tN=P9,N9=tN,I9=N9(Object.keys,Object),O9=I9,R9=C9,M9=O9,$9=Object.prototype,D9=$9.hasOwnProperty;function j9(t){if(!R9(t))return M9(t);var e=[];for(var n in Object(t))D9.call(t,n)&&n!="constructor"&&e.push(n);return e}var L9=j9,U9=n0,F9=w0;function B9(t){return t!=null&&F9(t.length)&&!U9(t)}var eh=B9,z9=T9,G9=L9,H9=eh;function q9(t){return H9(t)?z9(t):G9(t)}var _0=q9,V9=sW,W9=yW,K9=_0;function J9(t){return V9(t,K9,W9)}var Y9=J9,nS=Y9,X9=1,Q9=Object.prototype,Z9=Q9.hasOwnProperty;function e7(t,e,n,r,i,o){var a=n&X9,s=nS(t),l=s.length,u=nS(e),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var h=s[d];if(!(a?h in e:Z9.call(e,h)))return!1}var g=o.get(t),y=o.get(e);if(g&&y)return g==e&&y==t;var x=!0;o.set(t,e),o.set(e,t);for(var v=a;++d<l;){h=s[d];var b=t[h],w=e[h];if(r)var _=a?r(w,b,h,e,t,o):r(b,w,h,t,e,o);if(!(_===void 0?b===w||i(b,w,n,r,o):_)){x=!1;break}v||(v=h=="constructor")}if(x&&!v){var T=t.constructor,S=e.constructor;T!=S&&"constructor"in t&&"constructor"in e&&!(typeof T=="function"&&T instanceof T&&typeof S=="function"&&S instanceof S)&&(x=!1)}return o.delete(t),o.delete(e),x}var t7=e7,n7=lo,r7=ur,i7=n7(r7,"DataView"),o7=i7,a7=lo,s7=ur,l7=a7(s7,"Promise"),u7=l7,c7=lo,d7=ur,f7=c7(d7,"Set"),nN=f7,h7=lo,p7=ur,m7=h7(p7,"WeakMap"),g7=m7,Sg=o7,Eg=i0,Tg=u7,kg=nN,Ag=g7,rN=$r,Ya=uP,rS="[object Map]",y7="[object Object]",iS="[object Promise]",oS="[object Set]",aS="[object WeakMap]",sS="[object DataView]",v7=Ya(Sg),x7=Ya(Eg),b7=Ya(Tg),w7=Ya(kg),_7=Ya(Ag),Ai=rN;(Sg&&Ai(new Sg(new ArrayBuffer(1)))!=sS||Eg&&Ai(new Eg)!=rS||Tg&&Ai(Tg.resolve())!=iS||kg&&Ai(new kg)!=oS||Ag&&Ai(new Ag)!=aS)&&(Ai=function(t){var e=rN(t),n=e==y7?t.constructor:void 0,r=n?Ya(n):"";if(r)switch(r){case v7:return sS;case x7:return rS;case b7:return iS;case w7:return oS;case _7:return aS}return e});var S7=Ai,pp=qP,E7=JP,T7=nW,k7=t7,lS=S7,uS=Qt,cS=QP,A7=eN,C7=1,dS="[object Arguments]",fS="[object Array]",Hu="[object Object]",P7=Object.prototype,hS=P7.hasOwnProperty;function N7(t,e,n,r,i,o){var a=uS(t),s=uS(e),l=a?fS:lS(t),u=s?fS:lS(e);l=l==dS?Hu:l,u=u==dS?Hu:u;var c=l==Hu,d=u==Hu,h=l==u;if(h&&cS(t)){if(!cS(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new pp),a||A7(t)?E7(t,e,n,r,i,o):T7(t,e,l,n,r,i,o);if(!(n&C7)){var g=c&&hS.call(t,"__wrapped__"),y=d&&hS.call(e,"__wrapped__");if(g||y){var x=g?t.value():t,v=y?e.value():e;return o||(o=new pp),i(x,v,n,r,o)}}return h?(o||(o=new pp),k7(t,e,n,r,i,o)):!1}var I7=N7,O7=I7,pS=Dr;function iN(t,e,n,r,i){return t===e?!0:t==null||e==null||!pS(t)&&!pS(e)?t!==t&&e!==e:O7(t,e,n,r,iN,i)}var S0=iN,R7=qP,M7=S0,$7=1,D7=2;function j7(t,e,n,r){var i=n.length,o=i,a=!r;if(t==null)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===void 0&&!(l in t))return!1}else{var d=new R7;if(r)var h=r(u,c,l,t,e,d);if(!(h===void 0?M7(c,u,$7|D7,r,d):h))return!1}}return!0}var L7=j7,U7=pi;function F7(t){return t===t&&!U7(t)}var oN=F7,B7=oN,z7=_0;function G7(t){for(var e=z7(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,B7(i)]}return e}var H7=G7;function q7(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var aN=q7,V7=L7,W7=H7,K7=aN;function J7(t){var e=W7(t);return e.length==1&&e[0][2]?K7(e[0][0],e[0][1]):function(n){return n===t||V7(n,t,e)}}var Y7=J7;function X7(t,e){return t!=null&&e in Object(t)}var Q7=X7,Z7=pP,eK=x0,tK=Qt,nK=b0,rK=w0,iK=Uf;function oK(t,e,n){e=Z7(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=iK(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&rK(i)&&nK(a,i)&&(tK(t)||eK(t)))}var aK=oK,sK=Q7,lK=aK;function uK(t,e){return t!=null&&lK(t,e,sK)}var cK=uK,dK=S0,fK=mP,hK=cK,pK=t0,mK=oN,gK=aN,yK=Uf,vK=1,xK=2;function bK(t,e){return pK(t)&&mK(e)?gK(yK(t),e):function(n){var r=fK(n,t);return r===void 0&&r===e?hK(n,t):dK(e,r,vK|xK)}}var wK=bK;function _K(t){return t}var Xa=_K;function SK(t){return function(e){return e==null?void 0:e[t]}}var EK=SK,TK=l0;function kK(t){return function(e){return TK(e,t)}}var AK=kK,CK=EK,PK=AK,NK=t0,IK=Uf;function OK(t){return NK(t)?CK(IK(t)):PK(t)}var RK=OK,MK=Y7,$K=wK,DK=Xa,jK=Qt,LK=RK;function UK(t){return typeof t=="function"?t:t==null?DK:typeof t=="object"?jK(t)?$K(t[0],t[1]):MK(t):LK(t)}var Qa=UK;function FK(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var BK=FK;function zK(t){return t!==t}var GK=zK;function HK(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var qK=HK,VK=BK,WK=GK,KK=qK;function JK(t,e,n){return e===e?KK(t,e,n):VK(t,WK,n)}var YK=JK,XK=YK;function QK(t,e){var n=t==null?0:t.length;return!!n&&XK(t,e,0)>-1}var ZK=QK;function eJ(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var tJ=eJ;function nJ(){}var rJ=nJ,mp=nN,iJ=rJ,oJ=v0,aJ=1/0,sJ=mp&&1/oJ(new mp([,-0]))[1]==aJ?function(t){return new mp(t)}:iJ,lJ=sJ,uJ=VP,cJ=ZK,dJ=tJ,fJ=KP,hJ=lJ,pJ=v0,mJ=200;function gJ(t,e,n){var r=-1,i=cJ,o=t.length,a=!0,s=[],l=s;if(n)a=!1,i=dJ;else if(o>=mJ){var u=e?null:hJ(t);if(u)return pJ(u);a=!1,i=fJ,l=new uJ}else l=e?[]:s;e:for(;++r<o;){var c=t[r],d=e?e(c):c;if(c=n||c!==0?c:0,a&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}var yJ=gJ,vJ=Qa,xJ=yJ;function bJ(t,e){return t&&t.length?xJ(t,vJ(e)):[]}var wJ=bJ;const mS=Le(wJ);function sN(t,e,n){return e===!0?mS(t,n):ge(e)?mS(t,e):t}function ga(t){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ga(t)}var _J=["ref"];function gS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function cr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gS(Object(n),!0).forEach(function(r){th(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uN(r.key),r)}}function EJ(t,e,n){return e&&yS(t.prototype,e),n&&yS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function TJ(t,e,n){return e=pd(e),kJ(t,lN()?Reflect.construct(e,n||[],pd(t).constructor):e.apply(t,n))}function kJ(t,e){if(e&&(ga(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AJ(t)}function AJ(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lN=function(){return!!t})()}function pd(t){return pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pd(t)}function CJ(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cg(t,e)}function Cg(t,e){return Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cg(t,e)}function th(t,e,n){return e=uN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uN(t){var e=PJ(t,"string");return ga(e)=="symbol"?e:e+""}function PJ(t,e){if(ga(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ga(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NJ(t,e){if(t==null)return{};var n=IJ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function IJ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function OJ(t){return t.value}function RJ(t,e){if(j.isValidElement(t))return j.cloneElement(t,e);if(typeof t=="function")return j.createElement(t,e);e.ref;var n=NJ(e,_J);return j.createElement(y0,n)}var vS=1,na=function(t){function e(){var n;SJ(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=TJ(this,e,[].concat(i)),th(n,"lastBoundingBox",{width:-1,height:-1}),n}return CJ(e,t),EJ(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>vS||Math.abs(i.height-this.lastBoundingBox.height)>vS)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,o=i.layout,a=i.align,s=i.verticalAlign,l=i.margin,u=i.chartWidth,c=i.chartHeight,d,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&o==="vertical"){var g=this.getBBoxSnapshot();d={left:((u||0)-g.width)/2}}else d=a==="right"?{right:l&&l.right||0}:{left:l&&l.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(s==="middle"){var y=this.getBBoxSnapshot();h={top:((c||0)-y.height)/2}}else h=s==="bottom"?{bottom:l&&l.bottom||0}:{top:l&&l.top||0};return cr(cr({},d),h)}},{key:"render",value:function(){var r=this,i=this.props,o=i.content,a=i.width,s=i.height,l=i.wrapperStyle,u=i.payloadUniqBy,c=i.payload,d=cr(cr({position:"absolute",width:a||"auto",height:s||"auto"},this.getDefaultPosition(l)),l);return j.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(g){r.wrapperNode=g}},RJ(o,cr(cr({},this.props),{},{payload:sN(c,u,OJ)})))}}],[{key:"getWithHeight",value:function(r,i){var o=cr(cr({},this.defaultProps),r.props),a=o.layout;return a==="vertical"&&Y(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(P.PureComponent);th(na,"displayName","Legend");th(na,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var xS=su,MJ=x0,$J=Qt,bS=xS?xS.isConcatSpreadable:void 0;function DJ(t){return $J(t)||MJ(t)||!!(bS&&t&&t[bS])}var jJ=DJ,LJ=YP,UJ=jJ;function cN(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=UJ),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?cN(s,e-1,n,r,i):LJ(i,s):r||(i[i.length]=s)}return i}var dN=cN;function FJ(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(n(o[l],l,o)===!1)break}return e}}var BJ=FJ,zJ=BJ,GJ=zJ(),HJ=GJ,qJ=HJ,VJ=_0;function WJ(t,e){return t&&qJ(t,e,VJ)}var fN=WJ,KJ=eh;function JJ(t,e){return function(n,r){if(n==null)return n;if(!KJ(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}var YJ=JJ,XJ=fN,QJ=YJ,ZJ=QJ(XJ),E0=ZJ,eY=E0,tY=eh;function nY(t,e){var n=-1,r=tY(t)?Array(t.length):[];return eY(t,function(i,o,a){r[++n]=e(i,o,a)}),r}var hN=nY;function rY(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var iY=rY,wS=Ga;function oY(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,o=wS(t),a=e!==void 0,s=e===null,l=e===e,u=wS(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}var aY=oY,sY=aY;function lY(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var l=sY(i[r],o[r]);if(l){if(r>=s)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return t.index-e.index}var uY=lY,gp=s0,cY=l0,dY=Qa,fY=hN,hY=iY,pY=ZP,mY=uY,gY=Xa,yY=Qt;function vY(t,e,n){e.length?e=gp(e,function(o){return yY(o)?function(a){return cY(a,o.length===1?o[0]:o)}:o}):e=[gY];var r=-1;e=gp(e,pY(dY));var i=fY(t,function(o,a,s){var l=gp(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return hY(i,function(o,a){return mY(o,a,n)})}var xY=vY;function bY(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var wY=bY,_Y=wY,_S=Math.max;function SY(t,e,n){return e=_S(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=_S(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),_Y(t,this,s)}}var EY=SY;function TY(t){return function(){return t}}var kY=TY,AY=lo,CY=function(){try{var t=AY(Object,"defineProperty");return t({},"",{}),t}catch{}}(),pN=CY,PY=kY,SS=pN,NY=Xa,IY=SS?function(t,e){return SS(t,"toString",{configurable:!0,enumerable:!1,value:PY(e),writable:!0})}:NY,OY=IY,RY=800,MY=16,$Y=Date.now;function DY(t){var e=0,n=0;return function(){var r=$Y(),i=MY-(r-n);if(n=r,i>0){if(++e>=RY)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var jY=DY,LY=OY,UY=jY,FY=UY(LY),BY=FY,zY=Xa,GY=EY,HY=BY;function qY(t,e){return HY(GY(t,e,zY),t+"")}var VY=qY,WY=r0,KY=eh,JY=b0,YY=pi;function XY(t,e,n){if(!YY(n))return!1;var r=typeof e;return(r=="number"?KY(n)&&JY(e,n.length):r=="string"&&e in n)?WY(n[e],t):!1}var nh=XY,QY=dN,ZY=xY,eX=VY,ES=nh,tX=eX(function(t,e){if(t==null)return[];var n=e.length;return n>1&&ES(t,e[0],e[1])?e=[]:n>2&&ES(e[0],e[1],e[2])&&(e=[e[0]]),ZY(t,QY(e,1),[])}),nX=tX;const T0=Le(nX);function bl(t){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bl(t)}function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pg.apply(this,arguments)}function rX(t,e){return sX(t)||aX(t,e)||oX(t,e)||iX()}function iX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oX(t,e){if(t){if(typeof t=="string")return TS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TS(t,e)}}function TS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function aX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function sX(t){if(Array.isArray(t))return t}function kS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kS(Object(n),!0).forEach(function(r){lX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lX(t,e,n){return e=uX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uX(t){var e=cX(t,"string");return bl(e)=="symbol"?e:e+""}function cX(t,e){if(bl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dX(t){return Array.isArray(t)&&ht(t[0])&&ht(t[1])?t.join(" ~ "):t}var fX=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,o=i===void 0?{}:i,a=e.itemStyle,s=a===void 0?{}:a,l=e.labelStyle,u=l===void 0?{}:l,c=e.payload,d=e.formatter,h=e.itemSorter,g=e.wrapperClassName,y=e.labelClassName,x=e.label,v=e.labelFormatter,b=e.accessibilityLayer,w=b===void 0?!1:b,_=function(){if(c&&c.length){var L={padding:0,margin:0},U=(h?T0(c,h):c).map(function(N,D){if(N.type==="none")return null;var O=yp({display:"block",paddingTop:4,paddingBottom:4,color:N.color||"#000"},s),F=N.formatter||d||dX,I=N.value,$=N.name,B=I,G=$;if(F&&B!=null&&G!=null){var q=F(I,$,N,D,c);if(Array.isArray(q)){var X=rX(q,2);B=X[0],G=X[1]}else B=q}return j.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:O},ht(G)?j.createElement("span",{className:"recharts-tooltip-item-name"},G):null,ht(G)?j.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,j.createElement("span",{className:"recharts-tooltip-item-value"},B),j.createElement("span",{className:"recharts-tooltip-item-unit"},N.unit||""))});return j.createElement("ul",{className:"recharts-tooltip-item-list",style:L},U)}return null},T=yp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},o),S=yp({margin:0},u),E=!be(x),k=E?x:"",A=me("recharts-default-tooltip",g),C=me("recharts-tooltip-label",y);E&&v&&c!==void 0&&c!==null&&(k=v(x,c));var M=w?{role:"status","aria-live":"assertive"}:{};return j.createElement("div",Pg({className:A,style:T},M),j.createElement("p",{className:C,style:S},j.isValidElement(k)?k:"".concat(k)),_())};function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}function qu(t,e,n){return e=hX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hX(t){var e=pX(t,"string");return wl(e)=="symbol"?e:e+""}function pX(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ms="recharts-tooltip-wrapper",mX={visibility:"hidden"};function gX(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return me(ms,qu(qu(qu(qu({},"".concat(ms,"-right"),Y(n)&&e&&Y(e.x)&&n>=e.x),"".concat(ms,"-left"),Y(n)&&e&&Y(e.x)&&n<e.x),"".concat(ms,"-bottom"),Y(r)&&e&&Y(e.y)&&r>=e.y),"".concat(ms,"-top"),Y(r)&&e&&Y(e.y)&&r<e.y))}function AS(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,o=t.position,a=t.reverseDirection,s=t.tooltipDimension,l=t.viewBox,u=t.viewBoxDimension;if(o&&Y(o[r]))return o[r];var c=n[r]-s-i,d=n[r]+i;if(e[r])return a[r]?c:d;if(a[r]){var h=c,g=l[r];return h<g?Math.max(d,l[r]):Math.max(c,l[r])}var y=d+s,x=l[r]+u;return y>x?Math.max(c,l[r]):Math.max(d,l[r])}function yX(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function vX(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,o=t.reverseDirection,a=t.tooltipBox,s=t.useTranslate3d,l=t.viewBox,u,c,d;return a.height>0&&a.width>0&&n?(c=AS({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),d=AS({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:o,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=yX({translateX:c,translateY:d,useTranslate3d:s})):u=mX,{cssProperties:u,cssClasses:gX({translateX:c,translateY:d,coordinate:n})}}function ya(t){"@babel/helpers - typeof";return ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ya(t)}function CS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CS(Object(n),!0).forEach(function(r){Ig(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gN(r.key),r)}}function wX(t,e,n){return e&&bX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _X(t,e,n){return e=md(e),SX(t,mN()?Reflect.construct(e,n||[],md(t).constructor):e.apply(t,n))}function SX(t,e){if(e&&(ya(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return EX(t)}function EX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mN=function(){return!!t})()}function md(t){return md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},md(t)}function TX(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ng(t,e)}function Ng(t,e){return Ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ng(t,e)}function Ig(t,e,n){return e=gN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gN(t){var e=kX(t,"string");return ya(e)=="symbol"?e:e+""}function kX(t,e){if(ya(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ya(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var NS=1,AX=function(t){function e(){var n;xX(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=_X(this,e,[].concat(i)),Ig(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Ig(n,"handleKeyDown",function(a){if(a.key==="Escape"){var s,l,u,c;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(l=n.props.coordinate)===null||l===void 0?void 0:l.x)!==null&&s!==void 0?s:0,y:(u=(c=n.props.coordinate)===null||c===void 0?void 0:c.y)!==null&&u!==void 0?u:0}})}}),n}return TX(e,t),wX(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>NS||Math.abs(r.height-this.state.lastBoundingBox.height)>NS)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.children,c=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,g=i.offset,y=i.position,x=i.reverseDirection,v=i.useTranslate3d,b=i.viewBox,w=i.wrapperStyle,_=vX({allowEscapeViewBox:a,coordinate:c,offsetTopLeft:g,position:y,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:b}),T=_.cssClasses,S=_.cssProperties,E=PS(PS({transition:h&&o?"transform ".concat(s,"ms ").concat(l):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&o&&d?"visible":"hidden",position:"absolute",top:0,left:0},w);return j.createElement("div",{tabIndex:-1,className:T,style:E,ref:function(A){r.wrapperNode=A}},u)}}])}(P.PureComponent),CX=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Za={isSsr:CX()};function va(t){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},va(t)}function IS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IS(Object(n),!0).forEach(function(r){k0(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NX(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vN(r.key),r)}}function IX(t,e,n){return e&&NX(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function OX(t,e,n){return e=gd(e),RX(t,yN()?Reflect.construct(e,n||[],gd(t).constructor):e.apply(t,n))}function RX(t,e){if(e&&(va(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MX(t)}function MX(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yN=function(){return!!t})()}function gd(t){return gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},gd(t)}function $X(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Og(t,e)}function Og(t,e){return Og=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Og(t,e)}function k0(t,e,n){return e=vN(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vN(t){var e=DX(t,"string");return va(e)=="symbol"?e:e+""}function DX(t,e){if(va(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(va(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function jX(t){return t.dataKey}function LX(t,e){return j.isValidElement(t)?j.cloneElement(t,e):typeof t=="function"?j.createElement(t,e):j.createElement(fX,e)}var hr=function(t){function e(){return PX(this,e),OX(this,e,arguments)}return $X(e,t),IX(e,[{key:"render",value:function(){var r=this,i=this.props,o=i.active,a=i.allowEscapeViewBox,s=i.animationDuration,l=i.animationEasing,u=i.content,c=i.coordinate,d=i.filterNull,h=i.isAnimationActive,g=i.offset,y=i.payload,x=i.payloadUniqBy,v=i.position,b=i.reverseDirection,w=i.useTranslate3d,_=i.viewBox,T=i.wrapperStyle,S=y??[];d&&S.length&&(S=sN(y.filter(function(k){return k.value!=null&&(k.hide!==!0||r.props.includeHidden)}),x,jX));var E=S.length>0;return j.createElement(AX,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:o,coordinate:c,hasPayload:E,offset:g,position:v,reverseDirection:b,useTranslate3d:w,viewBox:_,wrapperStyle:T},LX(u,OS(OS({},this.props),{},{payload:S})))}}])}(P.PureComponent);k0(hr,"displayName","Tooltip");k0(hr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Za.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var UX=ur,FX=function(){return UX.Date.now()},BX=FX,zX=/\s/;function GX(t){for(var e=t.length;e--&&zX.test(t.charAt(e)););return e}var HX=GX,qX=HX,VX=/^\s+/;function WX(t){return t&&t.slice(0,qX(t)+1).replace(VX,"")}var KX=WX,JX=KX,RS=pi,YX=Ga,MS=NaN,XX=/^[-+]0x[0-9a-f]+$/i,QX=/^0b[01]+$/i,ZX=/^0o[0-7]+$/i,eQ=parseInt;function tQ(t){if(typeof t=="number")return t;if(YX(t))return MS;if(RS(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=RS(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=JX(t);var n=QX.test(t);return n||ZX.test(t)?eQ(t.slice(2),n?2:8):XX.test(t)?MS:+t}var xN=tQ,nQ=pi,vp=BX,$S=xN,rQ="Expected a function",iQ=Math.max,oQ=Math.min;function aQ(t,e,n){var r,i,o,a,s,l,u=0,c=!1,d=!1,h=!0;if(typeof t!="function")throw new TypeError(rQ);e=$S(e)||0,nQ(n)&&(c=!!n.leading,d="maxWait"in n,o=d?iQ($S(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h);function g(E){var k=r,A=i;return r=i=void 0,u=E,a=t.apply(A,k),a}function y(E){return u=E,s=setTimeout(b,e),c?g(E):a}function x(E){var k=E-l,A=E-u,C=e-k;return d?oQ(C,o-A):C}function v(E){var k=E-l,A=E-u;return l===void 0||k>=e||k<0||d&&A>=o}function b(){var E=vp();if(v(E))return w(E);s=setTimeout(b,x(E))}function w(E){return s=void 0,h&&r?g(E):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0}function T(){return s===void 0?a:w(vp())}function S(){var E=vp(),k=v(E);if(r=arguments,i=this,l=E,k){if(s===void 0)return y(l);if(d)return clearTimeout(s),s=setTimeout(b,e),g(l)}return s===void 0&&(s=setTimeout(b,e)),a}return S.cancel=_,S.flush=T,S}var sQ=aQ,lQ=sQ,uQ=pi,cQ="Expected a function";function dQ(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(cQ);return uQ(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),lQ(t,e,{leading:r,maxWait:e,trailing:i})}var fQ=dQ;const bN=Le(fQ);function _l(t){"@babel/helpers - typeof";return _l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_l(t)}function DS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DS(Object(n),!0).forEach(function(r){hQ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hQ(t,e,n){return e=pQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pQ(t){var e=mQ(t,"string");return _l(e)=="symbol"?e:e+""}function mQ(t,e){if(_l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gQ(t,e){return bQ(t)||xQ(t,e)||vQ(t,e)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vQ(t,e){if(t){if(typeof t=="string")return jS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jS(t,e)}}function jS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function bQ(t){if(Array.isArray(t))return t}var wQ=P.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,o=t.width,a=o===void 0?"100%":o,s=t.height,l=s===void 0?"100%":s,u=t.minWidth,c=u===void 0?0:u,d=t.minHeight,h=t.maxHeight,g=t.children,y=t.debounce,x=y===void 0?0:y,v=t.id,b=t.className,w=t.onResize,_=t.style,T=_===void 0?{}:_,S=P.useRef(null),E=P.useRef();E.current=w,P.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var k=P.useState({containerWidth:i.width,containerHeight:i.height}),A=gQ(k,2),C=A[0],M=A[1],R=P.useCallback(function(U,N){M(function(D){var O=Math.round(U),F=Math.round(N);return D.containerWidth===O&&D.containerHeight===F?D:{containerWidth:O,containerHeight:F}})},[]);P.useEffect(function(){var U=function($){var B,G=$[0].contentRect,q=G.width,X=G.height;R(q,X),(B=E.current)===null||B===void 0||B.call(E,q,X)};x>0&&(U=bN(U,x,{trailing:!0,leading:!1}));var N=new ResizeObserver(U),D=S.current.getBoundingClientRect(),O=D.width,F=D.height;return R(O,F),N.observe(S.current),function(){N.disconnect()}},[R,x]);var L=P.useMemo(function(){var U=C.containerWidth,N=C.containerHeight;if(U<0||N<0)return null;qi($i(a)||$i(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),qi(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=$i(a)?U:a,O=$i(l)?N:l;n&&n>0&&(D?O=D/n:O&&(D=O*n),h&&O>h&&(O=h)),qi(D>0||O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,O,a,l,c,d,n);var F=!Array.isArray(g)&&br(g.type).endsWith("Chart");return j.Children.map(g,function(I){return j.isValidElement(I)?P.cloneElement(I,Vu({width:D,height:O},F?{style:Vu({height:"100%",width:"100%",maxHeight:O,maxWidth:D},I.props.style)}:{})):I})},[n,g,l,h,d,c,C,a]);return j.createElement("div",{id:v?"".concat(v):void 0,className:me("recharts-responsive-container",b),style:Vu(Vu({},T),{},{width:a,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:S},L)}),wN=function(e){return null};wN.displayName="Cell";function Sl(t){"@babel/helpers - typeof";return Sl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sl(t)}function LS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LS(Object(n),!0).forEach(function(r){_Q(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Q(t,e,n){return e=SQ(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SQ(t){var e=EQ(t,"string");return Sl(e)=="symbol"?e:e+""}function EQ(t,e){if(Sl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wo={widthCache:{},cacheCount:0},TQ=2e3,kQ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},US="recharts_measurement_span";function AQ(t){var e=Rg({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var zs=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Za.isSsr)return{width:0,height:0};var r=AQ(n),i=JSON.stringify({text:e,copyStyle:r});if(wo.widthCache[i])return wo.widthCache[i];try{var o=document.getElementById(US);o||(o=document.createElement("span"),o.setAttribute("id",US),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var a=Rg(Rg({},kQ),r);Object.assign(o.style,a),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return wo.widthCache[i]=l,++wo.cacheCount>TQ&&(wo.cacheCount=0,wo.widthCache={}),l}catch{return{width:0,height:0}}},CQ=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function yd(t,e){return OQ(t)||IQ(t,e)||NQ(t,e)||PQ()}function PQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NQ(t,e){if(t){if(typeof t=="string")return FS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FS(t,e)}}function FS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function IQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function OQ(t){if(Array.isArray(t))return t}function RQ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$Q(r.key),r)}}function MQ(t,e,n){return e&&BS(t.prototype,e),n&&BS(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function $Q(t){var e=DQ(t,"string");return El(e)=="symbol"?e:e+""}function DQ(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(El(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,GS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jQ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_N={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},UQ=Object.keys(_N),Go="NaN";function FQ(t,e){return t*_N[e]}var Wu=function(){function t(e,n){RQ(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!jQ.test(n)&&(this.num=NaN,this.unit=""),UQ.includes(n)&&(this.num=FQ(e,n),this.unit="px")}return MQ(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=LQ.exec(n))!==null&&r!==void 0?r:[],o=yd(i,3),a=o[1],s=o[2];return new t(parseFloat(a),s??"")}}])}();function SN(t){if(t.includes(Go))return Go;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=zS.exec(e))!==null&&n!==void 0?n:[],i=yd(r,4),o=i[1],a=i[2],s=i[3],l=Wu.parse(o??""),u=Wu.parse(s??""),c=a==="*"?l.multiply(u):l.divide(u);if(c.isNaN())return Go;e=e.replace(zS,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,h=(d=GS.exec(e))!==null&&d!==void 0?d:[],g=yd(h,4),y=g[1],x=g[2],v=g[3],b=Wu.parse(y??""),w=Wu.parse(v??""),_=x==="+"?b.add(w):b.subtract(w);if(_.isNaN())return Go;e=e.replace(GS,_.toString())}return e}var HS=/\(([^()]*)\)/;function BQ(t){for(var e=t;e.includes("(");){var n=HS.exec(e),r=yd(n,2),i=r[1];e=e.replace(HS,SN(i))}return e}function zQ(t){var e=t.replace(/\s+/g,"");return e=BQ(e),e=SN(e),e}function GQ(t){try{return zQ(t)}catch{return Go}}function xp(t){var e=GQ(t.slice(5,-1));return e===Go?"":e}var HQ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qQ=["dx","dy","angle","className","breakAll"];function Mg(){return Mg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mg.apply(this,arguments)}function qS(t,e){if(t==null)return{};var n=VQ(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function VQ(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function VS(t,e){return YQ(t)||JQ(t,e)||KQ(t,e)||WQ()}function WQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KQ(t,e){if(t){if(typeof t=="string")return WS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WS(t,e)}}function WS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function YQ(t){if(Array.isArray(t))return t}var EN=/[ \f\n\r\t\v\u2028\u2029]+/,TN=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var o=[];be(n)||(r?o=n.toString().split(""):o=n.toString().split(EN));var a=o.map(function(l){return{word:l,width:zs(l,i).width}}),s=r?0:zs("",i).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}},XQ=function(e,n,r,i,o){var a=e.maxLines,s=e.children,l=e.style,u=e.breakAll,c=Y(a),d=s,h=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(O,F){var I=F.word,$=F.width,B=O[O.length-1];if(B&&(i==null||o||B.width+$+r<Number(i)))B.words.push(I),B.width+=$+r;else{var G={words:[I],width:$};O.push(G)}return O},[])},g=h(n),y=function(D){return D.reduce(function(O,F){return O.width>F.width?O:F})};if(!c)return g;for(var x="",v=function(D){var O=d.slice(0,D),F=TN({breakAll:u,style:l,children:O+x}).wordsWithComputedWidth,I=h(F),$=I.length>a||y(I).width>Number(i);return[$,I]},b=0,w=d.length-1,_=0,T;b<=w&&_<=d.length-1;){var S=Math.floor((b+w)/2),E=S-1,k=v(E),A=VS(k,2),C=A[0],M=A[1],R=v(S),L=VS(R,1),U=L[0];if(!C&&!U&&(b=S+1),C&&U&&(w=S-1),!C&&U){T=M;break}_++}return T||g},KS=function(e){var n=be(e)?[]:e.toString().split(EN);return[{words:n}]},QQ=function(e){var n=e.width,r=e.scaleToFit,i=e.children,o=e.style,a=e.breakAll,s=e.maxLines;if((n||r)&&!Za.isSsr){var l,u,c=TN({breakAll:a,children:i,style:o});if(c){var d=c.wordsWithComputedWidth,h=c.spaceWidth;l=d,u=h}else return KS(i);return XQ({breakAll:a,children:i,maxLines:s,style:o},l,u,n,r)}return KS(i)},JS="#808080",vd=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.lineHeight,s=a===void 0?"1em":a,l=e.capHeight,u=l===void 0?"0.71em":l,c=e.scaleToFit,d=c===void 0?!1:c,h=e.textAnchor,g=h===void 0?"start":h,y=e.verticalAnchor,x=y===void 0?"end":y,v=e.fill,b=v===void 0?JS:v,w=qS(e,HQ),_=P.useMemo(function(){return QQ({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:d,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,d,w.style,w.width]),T=w.dx,S=w.dy,E=w.angle,k=w.className,A=w.breakAll,C=qS(w,qQ);if(!ht(r)||!ht(o))return null;var M=r+(Y(T)?T:0),R=o+(Y(S)?S:0),L;switch(x){case"start":L=xp("calc(".concat(u,")"));break;case"middle":L=xp("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(u," / 2))"));break;default:L=xp("calc(".concat(_.length-1," * -").concat(s,")"));break}var U=[];if(d){var N=_[0].width,D=w.width;U.push("scale(".concat((Y(D)?D/N:1)/N,")"))}return E&&U.push("rotate(".concat(E,", ").concat(M,", ").concat(R,")")),U.length&&(C.transform=U.join(" ")),j.createElement("text",Mg({},xe(C,!0),{x:M,y:R,className:me("recharts-text",k),textAnchor:g,fill:b.includes("url")?JS:b}),_.map(function(O,F){var I=O.words.join(A?"":" ");return j.createElement("tspan",{x:M,dy:F===0?L:s,key:"".concat(I,"-").concat(F)},I)}))};function ai(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ZQ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function A0(t){let e,n,r;t.length!==2?(e=ai,n=(s,l)=>ai(t(s),l),r=(s,l)=>t(s)-l):(e=t===ai||t===ZQ?t:eZ,n=t,r=t);function i(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){if(u<c){if(e(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:a,right:o}}function eZ(){return 0}function kN(t){return t===null?NaN:+t}function*tZ(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const nZ=A0(ai),uu=nZ.right;A0(kN).center;class YS extends Map{constructor(e,n=oZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(XS(this,e))}has(e){return super.has(XS(this,e))}set(e,n){return super.set(rZ(this,e),n)}delete(e){return super.delete(iZ(this,e))}}function XS({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function rZ({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function iZ({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function oZ(t){return t!==null&&typeof t=="object"?t.valueOf():t}function aZ(t=ai){if(t===ai)return AN;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function AN(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const sZ=Math.sqrt(50),lZ=Math.sqrt(10),uZ=Math.sqrt(2);function xd(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=sZ?10:o>=lZ?5:o>=uZ?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),l=Math.round(e*u),s/u<t&&++s,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),l=Math.round(e/u),s*u<t&&++s,l*u>e&&--l),l<s&&.5<=n&&n<2?xd(t,e,n*2):[s,l,u]}function $g(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?xd(e,t,n):xd(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function Dg(t,e,n){return e=+e,t=+t,n=+n,xd(t,e,n)[2]}function jg(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Dg(e,t,n):Dg(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function QS(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function ZS(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function CN(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?AN:aZ(i);r>n;){if(r-n>600){const l=r-n+1,u=e-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(e-u*d/l+h)),y=Math.min(r,Math.floor(e+(l-u)*d/l+h));CN(t,e,g,y,i)}const o=t[e];let a=n,s=r;for(gs(t,n,e),i(t[r],o)>0&&gs(t,n,r);a<s;){for(gs(t,a,s),++a,--s;i(t[a],o)<0;)++a;for(;i(t[s],o)>0;)--s}i(t[n],o)===0?gs(t,n,s):(++s,gs(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function gs(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function cZ(t,e,n){if(t=Float64Array.from(tZ(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return ZS(t);if(e>=1)return QS(t);var r,i=(r-1)*e,o=Math.floor(i),a=QS(CN(t,o).subarray(0,o+1)),s=ZS(t.subarray(o+1));return a+(s-a)*(i-o)}}function dZ(t,e,n=kN){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),s=+n(t[o+1],o+1,t);return a+(s-a)*(i-o)}}function fZ(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function In(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function jr(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Lg=Symbol("implicit");function C0(){var t=new YS,e=[],n=[],r=Lg;function i(o){let a=t.get(o);if(a===void 0){if(r!==Lg)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new YS;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return C0(e,n).unknown(r)},In.apply(i,arguments),i}function Tl(){var t=C0().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,u=0,c=.5;delete t.unknown;function d(){var h=e().length,g=i<r,y=g?i:r,x=g?r:i;o=(x-y)/Math.max(1,h-l+u*2),s&&(o=Math.floor(o)),y+=(x-y-o*(h-l))*c,a=o*(1-l),s&&(y=Math.round(y),a=Math.round(a));var v=fZ(h).map(function(b){return y+o*b});return n(g?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),d()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,d()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,s=!0,d()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(h){return arguments.length?(s=!!h,d()):s},t.padding=function(h){return arguments.length?(l=Math.min(1,u=+h),d()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),d()):l},t.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},t.copy=function(){return Tl(e(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},In.apply(d(),arguments)}function PN(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return PN(e())},t}function Gs(){return PN(Tl.apply(null,arguments).paddingInner(1))}function P0(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function NN(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cu(){}var kl=.7,bd=1/kl,ra="\\s*([+-]?\\d+)\\s*",Al="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hZ=/^#([0-9a-f]{3,8})$/,pZ=new RegExp(`^rgb\\(${ra},${ra},${ra}\\)$`),mZ=new RegExp(`^rgb\\(${ar},${ar},${ar}\\)$`),gZ=new RegExp(`^rgba\\(${ra},${ra},${ra},${Al}\\)$`),yZ=new RegExp(`^rgba\\(${ar},${ar},${ar},${Al}\\)$`),vZ=new RegExp(`^hsl\\(${Al},${ar},${ar}\\)$`),xZ=new RegExp(`^hsla\\(${Al},${ar},${ar},${Al}\\)$`),e1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};P0(cu,Cl,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:t1,formatHex:t1,formatHex8:bZ,formatHsl:wZ,formatRgb:n1,toString:n1});function t1(){return this.rgb().formatHex()}function bZ(){return this.rgb().formatHex8()}function wZ(){return IN(this).formatHsl()}function n1(){return this.rgb().formatRgb()}function Cl(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=hZ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?r1(e):n===3?new Wt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ku(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ku(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=pZ.exec(t))?new Wt(e[1],e[2],e[3],1):(e=mZ.exec(t))?new Wt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=gZ.exec(t))?Ku(e[1],e[2],e[3],e[4]):(e=yZ.exec(t))?Ku(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=vZ.exec(t))?a1(e[1],e[2]/100,e[3]/100,1):(e=xZ.exec(t))?a1(e[1],e[2]/100,e[3]/100,e[4]):e1.hasOwnProperty(t)?r1(e1[t]):t==="transparent"?new Wt(NaN,NaN,NaN,0):null}function r1(t){return new Wt(t>>16&255,t>>8&255,t&255,1)}function Ku(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wt(t,e,n,r)}function _Z(t){return t instanceof cu||(t=Cl(t)),t?(t=t.rgb(),new Wt(t.r,t.g,t.b,t.opacity)):new Wt}function Ug(t,e,n,r){return arguments.length===1?_Z(t):new Wt(t,e,n,r??1)}function Wt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}P0(Wt,Ug,NN(cu,{brighter(t){return t=t==null?bd:Math.pow(bd,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?kl:Math.pow(kl,t),new Wt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wt(Vi(this.r),Vi(this.g),Vi(this.b),wd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i1,formatHex:i1,formatHex8:SZ,formatRgb:o1,toString:o1}));function i1(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}`}function SZ(){return`#${Di(this.r)}${Di(this.g)}${Di(this.b)}${Di((isNaN(this.opacity)?1:this.opacity)*255)}`}function o1(){const t=wd(this.opacity);return`${t===1?"rgb(":"rgba("}${Vi(this.r)}, ${Vi(this.g)}, ${Vi(this.b)}${t===1?")":`, ${t})`}`}function wd(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Di(t){return t=Vi(t),(t<16?"0":"")+t.toString(16)}function a1(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Bn(t,e,n,r)}function IN(t){if(t instanceof Bn)return new Bn(t.h,t.s,t.l,t.opacity);if(t instanceof cu||(t=Cl(t)),!t)return new Bn;if(t instanceof Bn)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Bn(a,s,l,t.opacity)}function EZ(t,e,n,r){return arguments.length===1?IN(t):new Bn(t,e,n,r??1)}function Bn(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}P0(Bn,EZ,NN(cu,{brighter(t){return t=t==null?bd:Math.pow(bd,t),new Bn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?kl:Math.pow(kl,t),new Bn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wt(bp(t>=240?t-240:t+120,i,r),bp(t,i,r),bp(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Bn(s1(this.h),Ju(this.s),Ju(this.l),wd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=wd(this.opacity);return`${t===1?"hsl(":"hsla("}${s1(this.h)}, ${Ju(this.s)*100}%, ${Ju(this.l)*100}%${t===1?")":`, ${t})`}`}}));function s1(t){return t=(t||0)%360,t<0?t+360:t}function Ju(t){return Math.max(0,Math.min(1,t||0))}function bp(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const N0=t=>()=>t;function TZ(t,e){return function(n){return t+n*e}}function kZ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function AZ(t){return(t=+t)==1?ON:function(e,n){return n-e?kZ(e,n,t):N0(isNaN(e)?n:e)}}function ON(t,e){var n=e-t;return n?TZ(t,n):N0(isNaN(t)?e:t)}const l1=function t(e){var n=AZ(e);function r(i,o){var a=n((i=Ug(i)).r,(o=Ug(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=ON(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function CZ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function PZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function NZ(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=es(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function IZ(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function _d(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function OZ(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=es(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Fg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wp=new RegExp(Fg.source,"g");function RZ(t){return function(){return t}}function MZ(t){return function(e){return t(e)+""}}function $Z(t,e){var n=Fg.lastIndex=wp.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=Fg.exec(t))&&(i=wp.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:_d(r,i)})),n=wp.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?MZ(l[0].x):RZ(e):(e=l.length,function(u){for(var c=0,d;c<e;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function es(t,e){var n=typeof e,r;return e==null||n==="boolean"?N0(e):(n==="number"?_d:n==="string"?(r=Cl(e))?(e=r,l1):$Z:e instanceof Cl?l1:e instanceof Date?IZ:PZ(e)?CZ:Array.isArray(e)?NZ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?OZ:_d)(t,e)}function I0(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function DZ(t,e){e===void 0&&(e=t,t=es);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function jZ(t){return function(){return t}}function Sd(t){return+t}var u1=[0,1];function Ft(t){return t}function Bg(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:jZ(isNaN(e)?NaN:.5)}function LZ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function UZ(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Bg(i,r),o=n(a,o)):(r=Bg(r,i),o=n(o,a)),function(s){return o(r(s))}}function FZ(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Bg(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=uu(t,s,1,r)-1;return o[l](i[l](s))}}function du(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rh(){var t=u1,e=u1,n=es,r,i,o,a=Ft,s,l,u;function c(){var h=Math.min(t.length,e.length);return a!==Ft&&(a=LZ(t[0],t[h-1])),s=h>2?FZ:UZ,l=u=null,d}function d(h){return h==null||isNaN(h=+h)?o:(l||(l=s(t.map(r),e,n)))(r(a(h)))}return d.invert=function(h){return a(i((u||(u=s(e,t.map(r),_d)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,Sd),c()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=I0,c()},d.clamp=function(h){return arguments.length?(a=h?!0:Ft,c()):a!==Ft},d.interpolate=function(h){return arguments.length?(n=h,c()):n},d.unknown=function(h){return arguments.length?(o=h,d):o},function(h,g){return r=h,i=g,c()}}function O0(){return rh()(Ft,Ft)}function BZ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ed(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function xa(t){return t=Ed(Math.abs(t)),t?t[1]:NaN}function zZ(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function GZ(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var HZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pl(t){if(!(e=HZ.exec(t)))throw new Error("invalid format: "+t);var e;return new R0({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Pl.prototype=R0.prototype;function R0(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}R0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qZ(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var RN;function VZ(t,e){var n=Ed(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(RN=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ed(t,Math.max(0,e+o-1))[0]}function c1(t,e){var n=Ed(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const d1={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:BZ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>c1(t*100,e),r:c1,s:VZ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function f1(t){return t}var h1=Array.prototype.map,p1=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function WZ(t){var e=t.grouping===void 0||t.thousands===void 0?f1:zZ(h1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?f1:GZ(h1.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(d){d=Pl(d);var h=d.fill,g=d.align,y=d.sign,x=d.symbol,v=d.zero,b=d.width,w=d.comma,_=d.precision,T=d.trim,S=d.type;S==="n"?(w=!0,S="g"):d1[S]||(_===void 0&&(_=12),T=!0,S="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var E=x==="$"?n:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",k=x==="$"?r:/[%p]/.test(S)?a:"",A=d1[S],C=/[defgprs%]/.test(S);_=_===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function M(R){var L=E,U=k,N,D,O;if(S==="c")U=A(R)+U,R="";else{R=+R;var F=R<0||1/R<0;if(R=isNaN(R)?l:A(Math.abs(R),_),T&&(R=qZ(R)),F&&+R==0&&y!=="+"&&(F=!1),L=(F?y==="("?y:s:y==="-"||y==="("?"":y)+L,U=(S==="s"?p1[8+RN/3]:"")+U+(F&&y==="("?")":""),C){for(N=-1,D=R.length;++N<D;)if(O=R.charCodeAt(N),48>O||O>57){U=(O===46?i+R.slice(N+1):R.slice(N))+U,R=R.slice(0,N);break}}}w&&!v&&(R=e(R,1/0));var I=L.length+R.length+U.length,$=I<b?new Array(b-I+1).join(h):"";switch(w&&v&&(R=e($+R,$.length?b-U.length:1/0),$=""),g){case"<":R=L+R+U+$;break;case"=":R=L+$+R+U;break;case"^":R=$.slice(0,I=$.length>>1)+L+R+U+$.slice(I);break;default:R=$+L+R+U;break}return o(R)}return M.toString=function(){return d+""},M}function c(d,h){var g=u((d=Pl(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(xa(h)/3)))*3,x=Math.pow(10,-y),v=p1[8+y/3];return function(b){return g(x*b)+v}}return{format:u,formatPrefix:c}}var Yu,M0,MN;KZ({thousands:",",grouping:[3],currency:["$",""]});function KZ(t){return Yu=WZ(t),M0=Yu.format,MN=Yu.formatPrefix,Yu}function JZ(t){return Math.max(0,-xa(Math.abs(t)))}function YZ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xa(e)/3)))*3-xa(Math.abs(t)))}function XZ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,xa(e)-xa(t))+1}function $N(t,e,n,r){var i=jg(t,e,n),o;switch(r=Pl(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=YZ(i,a))&&(r.precision=o),MN(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=XZ(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=JZ(i))&&(r.precision=o-(r.type==="%")*2);break}}return M0(r)}function mi(t){var e=t.domain;return t.ticks=function(n){var r=e();return $g(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return $N(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=Dg(a,s,n),u===l)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return t},t}function Td(){var t=O0();return t.copy=function(){return du(t,Td())},In.apply(t,arguments),mi(t)}function DN(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Sd),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return DN(t).unknown(e)},t=arguments.length?Array.from(t,Sd):[0,1],mi(n)}function jN(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function m1(t){return Math.log(t)}function g1(t){return Math.exp(t)}function QZ(t){return-Math.log(-t)}function ZZ(t){return-Math.exp(-t)}function eee(t){return isFinite(t)?+("1e"+t):t<0?0:t}function tee(t){return t===10?eee:t===Math.E?Math.exp:e=>Math.pow(t,e)}function nee(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function y1(t){return(e,n)=>-t(-e,n)}function $0(t){const e=t(m1,g1),n=e.domain;let r=10,i,o;function a(){return i=nee(r),o=tee(r),n()[0]<0?(i=y1(i),o=y1(o),t(QZ,ZZ)):t(m1,g1),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let h=i(u),g=i(c),y,x;const v=s==null?10:+s;let b=[];if(!(r%1)&&g-h<v){if(h=Math.floor(h),g=Math.ceil(g),u>0){for(;h<=g;++h)for(y=1;y<r;++y)if(x=h<0?y/o(-h):y*o(h),!(x<u)){if(x>c)break;b.push(x)}}else for(;h<=g;++h)for(y=r-1;y>=1;--y)if(x=h>0?y/o(-h):y*o(h),!(x<u)){if(x>c)break;b.push(x)}b.length*2<v&&(b=$g(u,c,v))}else b=$g(h,g,Math.min(g-h,v)).map(o);return d?b.reverse():b},e.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Pl(l)).precision==null&&(l.trim=!0),l=M0(l)),s===1/0)return l;const u=Math.max(1,r*s/e.ticks().length);return c=>{let d=c/o(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},e.nice=()=>n(jN(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function LN(){const t=$0(rh()).domain([1,10]);return t.copy=()=>du(t,LN()).base(t.base()),In.apply(t,arguments),t}function v1(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function x1(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function D0(t){var e=1,n=t(v1(e),x1(e));return n.constant=function(r){return arguments.length?t(v1(e=+r),x1(e)):e},mi(n)}function UN(){var t=D0(rh());return t.copy=function(){return du(t,UN()).constant(t.constant())},In.apply(t,arguments)}function b1(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ree(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function iee(t){return t<0?-t*t:t*t}function j0(t){var e=t(Ft,Ft),n=1;function r(){return n===1?t(Ft,Ft):n===.5?t(ree,iee):t(b1(n),b1(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},mi(e)}function L0(){var t=j0(rh());return t.copy=function(){return du(t,L0()).exponent(t.exponent())},In.apply(t,arguments),t}function oee(){return L0.apply(null,arguments).exponent(.5)}function w1(t){return Math.sign(t)*t*t}function aee(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function FN(){var t=O0(),e=[0,1],n=!1,r;function i(o){var a=aee(t(o));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(o){return t.invert(w1(o))},i.domain=function(o){return arguments.length?(t.domain(o),i):t.domain()},i.range=function(o){return arguments.length?(t.range((e=Array.from(o,Sd)).map(w1)),i):e.slice()},i.rangeRound=function(o){return i.range(o).round(!0)},i.round=function(o){return arguments.length?(n=!!o,i):n},i.clamp=function(o){return arguments.length?(t.clamp(o),i):t.clamp()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return FN(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},In.apply(i,arguments),mi(i)}function BN(){var t=[],e=[],n=[],r;function i(){var a=0,s=Math.max(1,e.length);for(n=new Array(s-1);++a<s;)n[a-1]=dZ(t,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:e[uu(n,a)]}return o.invertExtent=function(a){var s=e.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let s of a)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(ai),i()},o.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return BN().domain(t).range(e).unknown(r)},In.apply(o,arguments)}function zN(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[uu(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,s()):[t,e]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return zN().domain([t,e]).range(i).unknown(o)},In.apply(mi(a),arguments)}function GN(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[uu(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return GN().domain(t).range(e).unknown(n)},In.apply(i,arguments)}const _p=new Date,Sp=new Date;function pt(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),e(o,s),t(o);while(u<o&&o<a);return l},i.filter=o=>pt(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(_p.setTime(+o),Sp.setTime(+a),t(_p),t(Sp),Math.floor(n(_p,Sp))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const kd=pt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);kd.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?pt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):kd);kd.range;const yr=1e3,bn=yr*60,vr=bn*60,Ar=vr*24,U0=Ar*7,_1=Ar*30,Ep=Ar*365,ji=pt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*yr)},(t,e)=>(e-t)/yr,t=>t.getUTCSeconds());ji.range;const F0=pt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yr)},(t,e)=>{t.setTime(+t+e*bn)},(t,e)=>(e-t)/bn,t=>t.getMinutes());F0.range;const B0=pt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*bn)},(t,e)=>(e-t)/bn,t=>t.getUTCMinutes());B0.range;const z0=pt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*yr-t.getMinutes()*bn)},(t,e)=>{t.setTime(+t+e*vr)},(t,e)=>(e-t)/vr,t=>t.getHours());z0.range;const G0=pt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*vr)},(t,e)=>(e-t)/vr,t=>t.getUTCHours());G0.range;const fu=pt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bn)/Ar,t=>t.getDate()-1);fu.range;const ih=pt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ar,t=>t.getUTCDate()-1);ih.range;const HN=pt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ar,t=>Math.floor(t/Ar));HN.range;function uo(t){return pt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*bn)/U0)}const oh=uo(0),Ad=uo(1),see=uo(2),lee=uo(3),ba=uo(4),uee=uo(5),cee=uo(6);oh.range;Ad.range;see.range;lee.range;ba.range;uee.range;cee.range;function co(t){return pt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/U0)}const ah=co(0),Cd=co(1),dee=co(2),fee=co(3),wa=co(4),hee=co(5),pee=co(6);ah.range;Cd.range;dee.range;fee.range;wa.range;hee.range;pee.range;const H0=pt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());H0.range;const q0=pt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());q0.range;const Cr=pt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Cr.range;const Pr=pt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Pr.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:pt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Pr.range;function qN(t,e,n,r,i,o){const a=[[ji,1,yr],[ji,5,5*yr],[ji,15,15*yr],[ji,30,30*yr],[o,1,bn],[o,5,5*bn],[o,15,15*bn],[o,30,30*bn],[i,1,vr],[i,3,3*vr],[i,6,6*vr],[i,12,12*vr],[r,1,Ar],[r,2,2*Ar],[n,1,U0],[e,1,_1],[e,3,3*_1],[t,1,Ep]];function s(u,c,d){const h=c<u;h&&([u,c]=[c,u]);const g=d&&typeof d.range=="function"?d:l(u,c,d),y=g?g.range(u,+c+1):[];return h?y.reverse():y}function l(u,c,d){const h=Math.abs(c-u)/d,g=A0(([,,v])=>v).right(a,h);if(g===a.length)return t.every(jg(u/Ep,c/Ep,d));if(g===0)return kd.every(Math.max(jg(u,c,d),1));const[y,x]=a[h/a[g-1][2]<a[g][2]/h?g-1:g];return y.every(x)}return[s,l]}const[mee,gee]=qN(Pr,q0,ah,HN,G0,B0),[yee,vee]=qN(Cr,H0,oh,fu,z0,F0);function Tp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function kp(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ys(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function xee(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,u=vs(i),c=xs(i),d=vs(o),h=xs(o),g=vs(a),y=xs(a),x=vs(s),v=xs(s),b=vs(l),w=xs(l),_={a:F,A:I,b:$,B,c:null,d:C1,e:C1,f:zee,g:Qee,G:ete,H:Uee,I:Fee,j:Bee,L:VN,m:Gee,M:Hee,p:G,q,Q:I1,s:O1,S:qee,u:Vee,U:Wee,V:Kee,w:Jee,W:Yee,x:null,X:null,y:Xee,Y:Zee,Z:tte,"%":N1},T={a:X,A:se,b:he,B:we,c:null,d:P1,e:P1,f:ote,g:mte,G:yte,H:nte,I:rte,j:ite,L:KN,m:ate,M:ste,p:W,q:Q,Q:I1,s:O1,S:lte,u:ute,U:cte,V:dte,w:fte,W:hte,x:null,X:null,y:pte,Y:gte,Z:vte,"%":N1},S={a:M,A:R,b:L,B:U,c:N,d:k1,e:k1,f:$ee,g:T1,G:E1,H:A1,I:A1,j:Iee,L:Mee,m:Nee,M:Oee,p:C,q:Pee,Q:jee,s:Lee,S:Ree,u:Eee,U:Tee,V:kee,w:See,W:Aee,x:D,X:O,y:T1,Y:E1,Z:Cee,"%":Dee};_.x=E(n,_),_.X=E(r,_),_.c=E(e,_),T.x=E(n,T),T.X=E(r,T),T.c=E(e,T);function E(V,te){return function(ie){var H=[],ke=-1,fe=0,Oe=V.length,J,Me,Ct;for(ie instanceof Date||(ie=new Date(+ie));++ke<Oe;)V.charCodeAt(ke)===37&&(H.push(V.slice(fe,ke)),(Me=S1[J=V.charAt(++ke)])!=null?J=V.charAt(++ke):Me=J==="e"?" ":"0",(Ct=te[J])&&(J=Ct(ie,Me)),H.push(J),fe=ke+1);return H.push(V.slice(fe,ke)),H.join("")}}function k(V,te){return function(ie){var H=ys(1900,void 0,1),ke=A(H,V,ie+="",0),fe,Oe;if(ke!=ie.length)return null;if("Q"in H)return new Date(H.Q);if("s"in H)return new Date(H.s*1e3+("L"in H?H.L:0));if(te&&!("Z"in H)&&(H.Z=0),"p"in H&&(H.H=H.H%12+H.p*12),H.m===void 0&&(H.m="q"in H?H.q:0),"V"in H){if(H.V<1||H.V>53)return null;"w"in H||(H.w=1),"Z"in H?(fe=kp(ys(H.y,0,1)),Oe=fe.getUTCDay(),fe=Oe>4||Oe===0?Cd.ceil(fe):Cd(fe),fe=ih.offset(fe,(H.V-1)*7),H.y=fe.getUTCFullYear(),H.m=fe.getUTCMonth(),H.d=fe.getUTCDate()+(H.w+6)%7):(fe=Tp(ys(H.y,0,1)),Oe=fe.getDay(),fe=Oe>4||Oe===0?Ad.ceil(fe):Ad(fe),fe=fu.offset(fe,(H.V-1)*7),H.y=fe.getFullYear(),H.m=fe.getMonth(),H.d=fe.getDate()+(H.w+6)%7)}else("W"in H||"U"in H)&&("w"in H||(H.w="u"in H?H.u%7:"W"in H?1:0),Oe="Z"in H?kp(ys(H.y,0,1)).getUTCDay():Tp(ys(H.y,0,1)).getDay(),H.m=0,H.d="W"in H?(H.w+6)%7+H.W*7-(Oe+5)%7:H.w+H.U*7-(Oe+6)%7);return"Z"in H?(H.H+=H.Z/100|0,H.M+=H.Z%100,kp(H)):Tp(H)}}function A(V,te,ie,H){for(var ke=0,fe=te.length,Oe=ie.length,J,Me;ke<fe;){if(H>=Oe)return-1;if(J=te.charCodeAt(ke++),J===37){if(J=te.charAt(ke++),Me=S[J in S1?te.charAt(ke++):J],!Me||(H=Me(V,ie,H))<0)return-1}else if(J!=ie.charCodeAt(H++))return-1}return H}function C(V,te,ie){var H=u.exec(te.slice(ie));return H?(V.p=c.get(H[0].toLowerCase()),ie+H[0].length):-1}function M(V,te,ie){var H=g.exec(te.slice(ie));return H?(V.w=y.get(H[0].toLowerCase()),ie+H[0].length):-1}function R(V,te,ie){var H=d.exec(te.slice(ie));return H?(V.w=h.get(H[0].toLowerCase()),ie+H[0].length):-1}function L(V,te,ie){var H=b.exec(te.slice(ie));return H?(V.m=w.get(H[0].toLowerCase()),ie+H[0].length):-1}function U(V,te,ie){var H=x.exec(te.slice(ie));return H?(V.m=v.get(H[0].toLowerCase()),ie+H[0].length):-1}function N(V,te,ie){return A(V,e,te,ie)}function D(V,te,ie){return A(V,n,te,ie)}function O(V,te,ie){return A(V,r,te,ie)}function F(V){return a[V.getDay()]}function I(V){return o[V.getDay()]}function $(V){return l[V.getMonth()]}function B(V){return s[V.getMonth()]}function G(V){return i[+(V.getHours()>=12)]}function q(V){return 1+~~(V.getMonth()/3)}function X(V){return a[V.getUTCDay()]}function se(V){return o[V.getUTCDay()]}function he(V){return l[V.getUTCMonth()]}function we(V){return s[V.getUTCMonth()]}function W(V){return i[+(V.getUTCHours()>=12)]}function Q(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var te=E(V+="",_);return te.toString=function(){return V},te},parse:function(V){var te=k(V+="",!1);return te.toString=function(){return V},te},utcFormat:function(V){var te=E(V+="",T);return te.toString=function(){return V},te},utcParse:function(V){var te=k(V+="",!0);return te.toString=function(){return V},te}}}var S1={"-":"",_:" ",0:"0"},xt=/^\s*\d+/,bee=/^%/,wee=/[\\^$*+?|[\]().{}]/g;function Te(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function _ee(t){return t.replace(wee,"\\$&")}function vs(t){return new RegExp("^(?:"+t.map(_ee).join("|")+")","i")}function xs(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function See(t,e,n){var r=xt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Eee(t,e,n){var r=xt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Tee(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function kee(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Aee(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function E1(t,e,n){var r=xt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function T1(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Cee(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Pee(t,e,n){var r=xt.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Nee(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function k1(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Iee(t,e,n){var r=xt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function A1(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Oee(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ree(t,e,n){var r=xt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Mee(t,e,n){var r=xt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function $ee(t,e,n){var r=xt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Dee(t,e,n){var r=bee.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function jee(t,e,n){var r=xt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Lee(t,e,n){var r=xt.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function C1(t,e){return Te(t.getDate(),e,2)}function Uee(t,e){return Te(t.getHours(),e,2)}function Fee(t,e){return Te(t.getHours()%12||12,e,2)}function Bee(t,e){return Te(1+fu.count(Cr(t),t),e,3)}function VN(t,e){return Te(t.getMilliseconds(),e,3)}function zee(t,e){return VN(t,e)+"000"}function Gee(t,e){return Te(t.getMonth()+1,e,2)}function Hee(t,e){return Te(t.getMinutes(),e,2)}function qee(t,e){return Te(t.getSeconds(),e,2)}function Vee(t){var e=t.getDay();return e===0?7:e}function Wee(t,e){return Te(oh.count(Cr(t)-1,t),e,2)}function WN(t){var e=t.getDay();return e>=4||e===0?ba(t):ba.ceil(t)}function Kee(t,e){return t=WN(t),Te(ba.count(Cr(t),t)+(Cr(t).getDay()===4),e,2)}function Jee(t){return t.getDay()}function Yee(t,e){return Te(Ad.count(Cr(t)-1,t),e,2)}function Xee(t,e){return Te(t.getFullYear()%100,e,2)}function Qee(t,e){return t=WN(t),Te(t.getFullYear()%100,e,2)}function Zee(t,e){return Te(t.getFullYear()%1e4,e,4)}function ete(t,e){var n=t.getDay();return t=n>=4||n===0?ba(t):ba.ceil(t),Te(t.getFullYear()%1e4,e,4)}function tte(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Te(e/60|0,"0",2)+Te(e%60,"0",2)}function P1(t,e){return Te(t.getUTCDate(),e,2)}function nte(t,e){return Te(t.getUTCHours(),e,2)}function rte(t,e){return Te(t.getUTCHours()%12||12,e,2)}function ite(t,e){return Te(1+ih.count(Pr(t),t),e,3)}function KN(t,e){return Te(t.getUTCMilliseconds(),e,3)}function ote(t,e){return KN(t,e)+"000"}function ate(t,e){return Te(t.getUTCMonth()+1,e,2)}function ste(t,e){return Te(t.getUTCMinutes(),e,2)}function lte(t,e){return Te(t.getUTCSeconds(),e,2)}function ute(t){var e=t.getUTCDay();return e===0?7:e}function cte(t,e){return Te(ah.count(Pr(t)-1,t),e,2)}function JN(t){var e=t.getUTCDay();return e>=4||e===0?wa(t):wa.ceil(t)}function dte(t,e){return t=JN(t),Te(wa.count(Pr(t),t)+(Pr(t).getUTCDay()===4),e,2)}function fte(t){return t.getUTCDay()}function hte(t,e){return Te(Cd.count(Pr(t)-1,t),e,2)}function pte(t,e){return Te(t.getUTCFullYear()%100,e,2)}function mte(t,e){return t=JN(t),Te(t.getUTCFullYear()%100,e,2)}function gte(t,e){return Te(t.getUTCFullYear()%1e4,e,4)}function yte(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wa(t):wa.ceil(t),Te(t.getUTCFullYear()%1e4,e,4)}function vte(){return"+0000"}function N1(){return"%"}function I1(t){return+t}function O1(t){return Math.floor(+t/1e3)}var _o,YN,XN;xte({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xte(t){return _o=xee(t),YN=_o.format,_o.parse,XN=_o.utcFormat,_o.utcParse,_o}function bte(t){return new Date(t)}function wte(t){return t instanceof Date?+t:+new Date(+t)}function V0(t,e,n,r,i,o,a,s,l,u){var c=O0(),d=c.invert,h=c.domain,g=u(".%L"),y=u(":%S"),x=u("%I:%M"),v=u("%I %p"),b=u("%a %d"),w=u("%b %d"),_=u("%B"),T=u("%Y");function S(E){return(l(E)<E?g:s(E)<E?y:a(E)<E?x:o(E)<E?v:r(E)<E?i(E)<E?b:w:n(E)<E?_:T)(E)}return c.invert=function(E){return new Date(d(E))},c.domain=function(E){return arguments.length?h(Array.from(E,wte)):h().map(bte)},c.ticks=function(E){var k=h();return t(k[0],k[k.length-1],E??10)},c.tickFormat=function(E,k){return k==null?S:u(k)},c.nice=function(E){var k=h();return(!E||typeof E.range!="function")&&(E=e(k[0],k[k.length-1],E??10)),E?h(jN(k,E)):c},c.copy=function(){return du(c,V0(t,e,n,r,i,o,a,s,l,u))},c}function _te(){return In.apply(V0(yee,vee,Cr,H0,oh,fu,z0,F0,ji,YN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ste(){return In.apply(V0(mee,gee,Pr,q0,ah,ih,G0,B0,ji,XN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sh(){var t=0,e=1,n,r,i,o,a=Ft,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(o(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([t,e]=d,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function c(d){return function(h){var g,y;return arguments.length?([g,y]=h,a=d(g,y),u):[a(0),a(1)]}}return u.range=c(es),u.rangeRound=c(I0),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),u}}function gi(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function QN(){var t=mi(sh()(Ft));return t.copy=function(){return gi(t,QN())},jr.apply(t,arguments)}function ZN(){var t=$0(sh()).domain([1,10]);return t.copy=function(){return gi(t,ZN()).base(t.base())},jr.apply(t,arguments)}function eI(){var t=D0(sh());return t.copy=function(){return gi(t,eI()).constant(t.constant())},jr.apply(t,arguments)}function W0(){var t=j0(sh());return t.copy=function(){return gi(t,W0()).exponent(t.exponent())},jr.apply(t,arguments)}function Ete(){return W0.apply(null,arguments).exponent(.5)}function tI(){var t=[],e=Ft;function n(r){if(r!=null&&!isNaN(r=+r))return e((uu(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ai),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,o)=>cZ(t,o/r))},n.copy=function(){return tI(e).domain(t)},jr.apply(n,arguments)}function lh(){var t=0,e=.5,n=1,r=1,i,o,a,s,l,u=Ft,c,d=!1,h;function g(x){return isNaN(x=+x)?h:(x=.5+((x=+c(x))-o)*(r*x<r*o?s:l),u(d?Math.max(0,Math.min(1,x)):x))}g.domain=function(x){return arguments.length?([t,e,n]=x,i=c(t=+t),o=c(e=+e),a=c(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g):[t,e,n]},g.clamp=function(x){return arguments.length?(d=!!x,g):d},g.interpolator=function(x){return arguments.length?(u=x,g):u};function y(x){return function(v){var b,w,_;return arguments.length?([b,w,_]=v,u=DZ(x,[b,w,_]),g):[u(0),u(.5),u(1)]}}return g.range=y(es),g.rangeRound=y(I0),g.unknown=function(x){return arguments.length?(h=x,g):h},function(x){return c=x,i=x(t),o=x(e),a=x(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g}}function nI(){var t=mi(lh()(Ft));return t.copy=function(){return gi(t,nI())},jr.apply(t,arguments)}function rI(){var t=$0(lh()).domain([.1,1,10]);return t.copy=function(){return gi(t,rI()).base(t.base())},jr.apply(t,arguments)}function iI(){var t=D0(lh());return t.copy=function(){return gi(t,iI()).constant(t.constant())},jr.apply(t,arguments)}function K0(){var t=j0(lh());return t.copy=function(){return gi(t,K0()).exponent(t.exponent())},jr.apply(t,arguments)}function Tte(){return K0.apply(null,arguments).exponent(.5)}const R1=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Tl,scaleDiverging:nI,scaleDivergingLog:rI,scaleDivergingPow:K0,scaleDivergingSqrt:Tte,scaleDivergingSymlog:iI,scaleIdentity:DN,scaleImplicit:Lg,scaleLinear:Td,scaleLog:LN,scaleOrdinal:C0,scalePoint:Gs,scalePow:L0,scaleQuantile:BN,scaleQuantize:zN,scaleRadial:FN,scaleSequential:QN,scaleSequentialLog:ZN,scaleSequentialPow:W0,scaleSequentialQuantile:tI,scaleSequentialSqrt:Ete,scaleSequentialSymlog:eI,scaleSqrt:oee,scaleSymlog:UN,scaleThreshold:GN,scaleTime:_te,scaleUtc:Ste,tickFormat:$N},Symbol.toStringTag,{value:"Module"}));var kte=Ga;function Ate(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(a!=null&&(s===void 0?a===a&&!kte(a):n(a,s)))var s=a,l=o}return l}var oI=Ate;function Cte(t,e){return t>e}var Pte=Cte,Nte=oI,Ite=Pte,Ote=Xa;function Rte(t){return t&&t.length?Nte(t,Ote,Ite):void 0}var Mte=Rte;const Yr=Le(Mte);function $te(t,e){return t<e}var Dte=$te,jte=oI,Lte=Dte,Ute=Xa;function Fte(t){return t&&t.length?jte(t,Ute,Lte):void 0}var Bte=Fte;const uh=Le(Bte);var zte=s0,Gte=Qa,Hte=hN,qte=Qt;function Vte(t,e){var n=qte(t)?zte:Hte;return n(t,Gte(e))}var Wte=Vte,Kte=dN,Jte=Wte;function Yte(t,e){return Kte(Jte(t,e),1)}var Xte=Yte;const Qte=Le(Xte);var Zte=S0;function ene(t,e){return Zte(t,e)}var tne=ene;const Nl=Le(tne);var ts=1e9,nne={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Y0,He=!0,Pn="[DecimalError] ",Wi=Pn+"Invalid argument: ",J0=Pn+"Exponent out of range: ",ns=Math.floor,Ci=Math.pow,rne=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,an,mt=1e7,Be=7,aI=9007199254740991,Pd=ns(aI/Be),re={};re.absoluteValue=re.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};re.comparedTo=re.cmp=function(t){var e,n,r,i,o=this;if(t=new o.constructor(t),o.s!==t.s)return o.s||-t.s;if(o.e!==t.e)return o.e>t.e^o.s<0?1:-1;for(r=o.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(o.d[e]!==t.d[e])return o.d[e]>t.d[e]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1};re.decimalPlaces=re.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Be;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};re.dividedBy=re.div=function(t){return wr(this,new this.constructor(t))};re.dividedToIntegerBy=re.idiv=function(t){var e=this,n=e.constructor;return Re(wr(e,new n(t),0,1),n.precision)};re.equals=re.eq=function(t){return!this.cmp(t)};re.exponent=function(){return st(this)};re.greaterThan=re.gt=function(t){return this.cmp(t)>0};re.greaterThanOrEqualTo=re.gte=function(t){return this.cmp(t)>=0};re.isInteger=re.isint=function(){return this.e>this.d.length-2};re.isNegative=re.isneg=function(){return this.s<0};re.isPositive=re.ispos=function(){return this.s>0};re.isZero=function(){return this.s===0};re.lessThan=re.lt=function(t){return this.cmp(t)<0};re.lessThanOrEqualTo=re.lte=function(t){return this.cmp(t)<1};re.logarithm=re.log=function(t){var e,n=this,r=n.constructor,i=r.precision,o=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(an))throw Error(Pn+"NaN");if(n.s<1)throw Error(Pn+(n.s?"NaN":"-Infinity"));return n.eq(an)?new r(0):(He=!1,e=wr(Il(n,o),Il(t,o),o),He=!0,Re(e,i))};re.minus=re.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?uI(e,t):sI(e,(t.s=-t.s,t))};re.modulo=re.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Pn+"NaN");return n.s?(He=!1,e=wr(n,t,0,1).times(t),He=!0,n.minus(e)):Re(new r(n),i)};re.naturalExponential=re.exp=function(){return lI(this)};re.naturalLogarithm=re.ln=function(){return Il(this)};re.negated=re.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};re.plus=re.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?sI(e,t):uI(e,(t.s=-t.s,t))};re.precision=re.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Wi+t);if(e=st(i)+1,r=i.d.length-1,n=r*Be+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};re.squareRoot=re.sqrt=function(){var t,e,n,r,i,o,a,s=this,l=s.constructor;if(s.s<1){if(!s.s)return new l(0);throw Error(Pn+"NaN")}for(t=st(s),He=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=tr(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ns((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new l(e)):r=new l(i.toString()),n=l.precision,i=a=n+3;;)if(o=r,r=o.plus(wr(s,o,a+2)).times(.5),tr(o.d).slice(0,a)===(e=tr(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(Re(o,n+1,0),o.times(o).eq(s)){r=o;break}}else if(e!="9999")break;a+=4}return He=!0,Re(r,n)};re.times=re.mul=function(t){var e,n,r,i,o,a,s,l,u,c=this,d=c.constructor,h=c.d,g=(t=new d(t)).d;if(!c.s||!t.s)return new d(0);for(t.s*=c.s,n=c.e+t.e,l=h.length,u=g.length,l<u&&(o=h,h=g,g=o,a=l,l=u,u=a),o=[],a=l+u,r=a;r--;)o.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)s=o[i]+g[r]*h[i-r-1]+e,o[i--]=s%mt|0,e=s/mt|0;o[i]=(o[i]+e)%mt|0}for(;!o[--a];)o.pop();return e?++n:o.shift(),t.d=o,t.e=n,He?Re(t,d.precision):t};re.toDecimalPlaces=re.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(lr(t,0,ts),e===void 0?e=r.rounding:lr(e,0,8),Re(n,t+st(n)+1,e))};re.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=no(r,!0):(lr(t,0,ts),e===void 0?e=i.rounding:lr(e,0,8),r=Re(new i(r),t+1,e),n=no(r,!0,t+1)),n};re.toFixed=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?no(i):(lr(t,0,ts),e===void 0?e=o.rounding:lr(e,0,8),r=Re(new o(i),t+st(i)+1,e),n=no(r.abs(),!1,t+st(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};re.toInteger=re.toint=function(){var t=this,e=t.constructor;return Re(new e(t),st(t)+1,e.rounding)};re.toNumber=function(){return+this};re.toPower=re.pow=function(t){var e,n,r,i,o,a,s=this,l=s.constructor,u=12,c=+(t=new l(t));if(!t.s)return new l(an);if(s=new l(s),!s.s){if(t.s<1)throw Error(Pn+"Infinity");return s}if(s.eq(an))return s;if(r=l.precision,t.eq(an))return Re(s,r);if(e=t.e,n=t.d.length-1,a=e>=n,o=s.s,a){if((n=c<0?-c:c)<=aI){for(i=new l(an),e=Math.ceil(r/Be+4),He=!1;n%2&&(i=i.times(s),$1(i.d,e)),n=ns(n/2),n!==0;)s=s.times(s),$1(s.d,e);return He=!0,t.s<0?new l(an).div(i):Re(i,r)}}else if(o<0)throw Error(Pn+"NaN");return o=o<0&&t.d[Math.max(e,n)]&1?-1:1,s.s=1,He=!1,i=t.times(Il(s,r+u)),He=!0,i=lI(i),i.s=o,i};re.toPrecision=function(t,e){var n,r,i=this,o=i.constructor;return t===void 0?(n=st(i),r=no(i,n<=o.toExpNeg||n>=o.toExpPos)):(lr(t,1,ts),e===void 0?e=o.rounding:lr(e,0,8),i=Re(new o(i),t,e),n=st(i),r=no(i,t<=n||n<=o.toExpNeg,t)),r};re.toSignificantDigits=re.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(lr(t,1,ts),e===void 0?e=r.rounding:lr(e,0,8)),Re(new r(n),t,e)};re.toString=re.valueOf=re.val=re.toJSON=re[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=st(t),n=t.constructor;return no(t,e<=n.toExpNeg||e>=n.toExpPos)};function sI(t,e){var n,r,i,o,a,s,l,u,c=t.constructor,d=c.precision;if(!t.s||!e.s)return e.s||(e=new c(t)),He?Re(e,d):e;if(l=t.d,u=e.d,a=t.e,i=e.e,l=l.slice(),o=a-i,o){for(o<0?(r=l,o=-o,s=u.length):(r=u,i=a,s=l.length),a=Math.ceil(d/Be),s=a>s?a+1:s+1,o>s&&(o=s,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(s=l.length,o=u.length,s-o<0&&(o=s,r=u,u=l,l=r),n=0;o;)n=(l[--o]=l[o]+u[o]+n)/mt|0,l[o]%=mt;for(n&&(l.unshift(n),++i),s=l.length;l[--s]==0;)l.pop();return e.d=l,e.e=i,He?Re(e,d):e}function lr(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Wi+t)}function tr(t){var e,n,r,i=t.length-1,o="",a=t[0];if(i>0){for(o+=a,e=1;e<i;e++)r=t[e]+"",n=Be-r.length,n&&(o+=Hr(n)),o+=r;a=t[e],r=a+"",n=Be-r.length,n&&(o+=Hr(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return o+a}var wr=function(){function t(r,i){var o,a=0,s=r.length;for(r=r.slice();s--;)o=r[s]*i+a,r[s]=o%mt|0,a=o/mt|0;return a&&r.unshift(a),r}function e(r,i,o,a){var s,l;if(o!=a)l=o>a?1:-1;else for(s=l=0;s<o;s++)if(r[s]!=i[s]){l=r[s]>i[s]?1:-1;break}return l}function n(r,i,o){for(var a=0;o--;)r[o]-=a,a=r[o]<i[o]?1:0,r[o]=a*mt+r[o]-i[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,o,a){var s,l,u,c,d,h,g,y,x,v,b,w,_,T,S,E,k,A,C=r.constructor,M=r.s==i.s?1:-1,R=r.d,L=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(Pn+"Division by zero");for(l=r.e-i.e,k=L.length,S=R.length,g=new C(M),y=g.d=[],u=0;L[u]==(R[u]||0);)++u;if(L[u]>(R[u]||0)&&--l,o==null?w=o=C.precision:a?w=o+(st(r)-st(i))+1:w=o,w<0)return new C(0);if(w=w/Be+2|0,u=0,k==1)for(c=0,L=L[0],w++;(u<S||c)&&w--;u++)_=c*mt+(R[u]||0),y[u]=_/L|0,c=_%L|0;else{for(c=mt/(L[0]+1)|0,c>1&&(L=t(L,c),R=t(R,c),k=L.length,S=R.length),T=k,x=R.slice(0,k),v=x.length;v<k;)x[v++]=0;A=L.slice(),A.unshift(0),E=L[0],L[1]>=mt/2&&++E;do c=0,s=e(L,x,k,v),s<0?(b=x[0],k!=v&&(b=b*mt+(x[1]||0)),c=b/E|0,c>1?(c>=mt&&(c=mt-1),d=t(L,c),h=d.length,v=x.length,s=e(d,x,h,v),s==1&&(c--,n(d,k<h?A:L,h))):(c==0&&(s=c=1),d=L.slice()),h=d.length,h<v&&d.unshift(0),n(x,d,v),s==-1&&(v=x.length,s=e(L,x,k,v),s<1&&(c++,n(x,k<v?A:L,v))),v=x.length):s===0&&(c++,x=[0]),y[u++]=c,s&&x[0]?x[v++]=R[T]||0:(x=[R[T]],v=1);while((T++<S||x[0]!==void 0)&&w--)}return y[0]||y.shift(),g.e=l,Re(g,a?o+st(g)+1:o)}}();function lI(t,e){var n,r,i,o,a,s,l=0,u=0,c=t.constructor,d=c.precision;if(st(t)>16)throw Error(J0+st(t));if(!t.s)return new c(an);for(He=!1,s=d,a=new c(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(Ci(2,u))/Math.LN10*2+5|0,s+=r,n=i=o=new c(an),c.precision=s;;){if(i=Re(i.times(t),s),n=n.times(++l),a=o.plus(wr(i,n,s)),tr(a.d).slice(0,s)===tr(o.d).slice(0,s)){for(;u--;)o=Re(o.times(o),s);return c.precision=d,e==null?(He=!0,Re(o,d)):o}o=a}}function st(t){for(var e=t.e*Be,n=t.d[0];n>=10;n/=10)e++;return e}function Ap(t,e,n){if(e>t.LN10.sd())throw He=!0,n&&(t.precision=n),Error(Pn+"LN10 precision limit exceeded");return Re(new t(t.LN10),e)}function Hr(t){for(var e="";t--;)e+="0";return e}function Il(t,e){var n,r,i,o,a,s,l,u,c,d=1,h=10,g=t,y=g.d,x=g.constructor,v=x.precision;if(g.s<1)throw Error(Pn+(g.s?"NaN":"-Infinity"));if(g.eq(an))return new x(0);if(e==null?(He=!1,u=v):u=e,g.eq(10))return e==null&&(He=!0),Ap(x,u);if(u+=h,x.precision=u,n=tr(y),r=n.charAt(0),o=st(g),Math.abs(o)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=tr(g.d),r=n.charAt(0),d++;o=st(g),r>1?(g=new x("0."+n),o++):g=new x(r+"."+n.slice(1))}else return l=Ap(x,u+2,v).times(o+""),g=Il(new x(r+"."+n.slice(1)),u-h).plus(l),x.precision=v,e==null?(He=!0,Re(g,v)):g;for(s=a=g=wr(g.minus(an),g.plus(an),u),c=Re(g.times(g),u),i=3;;){if(a=Re(a.times(c),u),l=s.plus(wr(a,new x(i),u)),tr(l.d).slice(0,u)===tr(s.d).slice(0,u))return s=s.times(2),o!==0&&(s=s.plus(Ap(x,u+2,v).times(o+""))),s=wr(s,new x(d),u),x.precision=v,e==null?(He=!0,Re(s,v)):s;s=l,i+=2}}function M1(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ns(n/Be),t.d=[],r=(n+1)%Be,n<0&&(r+=Be),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Be;r<i;)t.d.push(+e.slice(r,r+=Be));e=e.slice(r),r=Be-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),He&&(t.e>Pd||t.e<-Pd))throw Error(J0+n)}else t.s=0,t.e=0,t.d=[0];return t}function Re(t,e,n){var r,i,o,a,s,l,u,c,d=t.d;for(a=1,o=d[0];o>=10;o/=10)a++;if(r=e-a,r<0)r+=Be,i=e,u=d[c=0];else{if(c=Math.ceil((r+1)/Be),o=d.length,c>=o)return t;for(u=o=d[c],a=1;o>=10;o/=10)a++;r%=Be,i=r-Be+a}if(n!==void 0&&(o=Ci(10,a-i-1),s=u/o%10|0,l=e<0||d[c+1]!==void 0||u%o,l=n<4?(s||l)&&(n==0||n==(t.s<0?3:2)):s>5||s==5&&(n==4||l||n==6&&(r>0?i>0?u/Ci(10,a-i):0:d[c-1])%10&1||n==(t.s<0?8:7))),e<1||!d[0])return l?(o=st(t),d.length=1,e=e-o-1,d[0]=Ci(10,(Be-e%Be)%Be),t.e=ns(-e/Be)||0):(d.length=1,d[0]=t.e=t.s=0),t;if(r==0?(d.length=c,o=1,c--):(d.length=c+1,o=Ci(10,Be-r),d[c]=i>0?(u/Ci(10,a-i)%Ci(10,i)|0)*o:0),l)for(;;)if(c==0){(d[0]+=o)==mt&&(d[0]=1,++t.e);break}else{if(d[c]+=o,d[c]!=mt)break;d[c--]=0,o=1}for(r=d.length;d[--r]===0;)d.pop();if(He&&(t.e>Pd||t.e<-Pd))throw Error(J0+st(t));return t}function uI(t,e){var n,r,i,o,a,s,l,u,c,d,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),He?Re(e,g):e;if(l=t.d,d=e.d,r=e.e,u=t.e,l=l.slice(),a=u-r,a){for(c=a<0,c?(n=l,a=-a,s=d.length):(n=d,r=u,s=l.length),i=Math.max(Math.ceil(g/Be),s)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=l.length,s=d.length,c=i<s,c&&(s=i),i=0;i<s;i++)if(l[i]!=d[i]){c=l[i]<d[i];break}a=0}for(c&&(n=l,l=d,d=n,e.s=-e.s),s=l.length,i=d.length-s;i>0;--i)l[s++]=0;for(i=d.length;i>a;){if(l[--i]<d[i]){for(o=i;o&&l[--o]===0;)l[o]=mt-1;--l[o],l[i]+=mt}l[i]-=d[i]}for(;l[--s]===0;)l.pop();for(;l[0]===0;l.shift())--r;return l[0]?(e.d=l,e.e=r,He?Re(e,g):e):new h(0)}function no(t,e,n){var r,i=st(t),o=tr(t.d),a=o.length;return e?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+Hr(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+Hr(-i-1)+o,n&&(r=n-a)>0&&(o+=Hr(r))):i>=a?(o+=Hr(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+Hr(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=Hr(r))),t.s<0?"-"+o:o}function $1(t,e){if(t.length>e)return t.length=e,!0}function cI(t){var e,n,r;function i(o){var a=this;if(!(a instanceof i))return new i(o);if(a.constructor=i,o instanceof i){a.s=o.s,a.e=o.e,a.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(Wi+o);if(o>0)a.s=1;else if(o<0)o=-o,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(o===~~o&&o<1e7){a.e=0,a.d=[o];return}return M1(a,o.toString())}else if(typeof o!="string")throw Error(Wi+o);if(o.charCodeAt(0)===45?(o=o.slice(1),a.s=-1):a.s=1,rne.test(o))M1(a,o);else throw Error(Wi+o)}if(i.prototype=re,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=cI,i.config=i.set=ine,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function ine(t){if(!t||typeof t!="object")throw Error(Pn+"Object expected");var e,n,r,i=["precision",1,ts,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ns(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Wi+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Wi+n+": "+r);return this}var Y0=cI(nne);an=new Y0(1);const Ie=Y0;function one(t){return une(t)||lne(t)||sne(t)||ane()}function ane(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sne(t,e){if(t){if(typeof t=="string")return zg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zg(t,e)}}function lne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function une(t){if(Array.isArray(t))return zg(t)}function zg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var cne=function(e){return e},dI={},fI=function(e){return e===dI},D1=function(e){return function n(){return arguments.length===0||arguments.length===1&&fI(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},dne=function t(e,n){return e===1?n:D1(function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter(function(s){return s!==dI}).length;return a>=e?n.apply(void 0,i):t(e-a,D1(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];var c=i.map(function(d){return fI(d)?l.shift():d});return n.apply(void 0,one(c).concat(l))}))})},ch=function(e){return dne(e.length,e)},Gg=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},fne=ch(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),hne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return cne;var i=n.reverse(),o=i[0],a=i.slice(1);return function(){return a.reduce(function(s,l){return l(s)},o.apply(void 0,arguments))}},Hg=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},hI=function(e){var n=null,r=null;return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&o.every(function(s,l){return s===n[l]})||(n=o,r=e.apply(void 0,o)),r}};function pne(t){var e;return t===0?e=1:e=Math.floor(new Ie(t).abs().log(10).toNumber())+1,e}function mne(t,e,n){for(var r=new Ie(t),i=0,o=[];r.lt(e)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o}var gne=ch(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),yne=ch(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),vne=ch(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const dh={rangeStep:mne,getDigitCount:pne,interpolateNumber:gne,uninterpolateNumber:yne,uninterpolateTruncation:vne};function qg(t){return wne(t)||bne(t)||pI(t)||xne()}function xne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bne(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function wne(t){if(Array.isArray(t))return Vg(t)}function Ol(t,e){return Ene(t)||Sne(t,e)||pI(t,e)||_ne()}function _ne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pI(t,e){if(t){if(typeof t=="string")return Vg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vg(t,e)}}function Vg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sne(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var a=t[Symbol.iterator](),s;!(r=(s=a.next()).done)&&(n.push(s.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw o}}return n}}function Ene(t){if(Array.isArray(t))return t}function mI(t){var e=Ol(t,2),n=e[0],r=e[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function gI(t,e,n){if(t.lte(0))return new Ie(0);var r=dh.getDigitCount(t.toNumber()),i=new Ie(10).pow(r),o=t.div(i),a=r!==1?.05:.1,s=new Ie(Math.ceil(o.div(a).toNumber())).add(n).mul(a),l=s.mul(i);return e?l:new Ie(Math.ceil(l))}function Tne(t,e,n){var r=1,i=new Ie(t);if(!i.isint()&&n){var o=Math.abs(t);o<1?(r=new Ie(10).pow(dh.getDigitCount(t)-1),i=new Ie(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new Ie(Math.floor(t)))}else t===0?i=new Ie(Math.floor((e-1)/2)):n||(i=new Ie(Math.floor(t)));var a=Math.floor((e-1)/2),s=hne(fne(function(l){return i.add(new Ie(l-a).mul(r)).toNumber()}),Gg);return s(0,e)}function yI(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new Ie(0),tickMin:new Ie(0),tickMax:new Ie(0)};var o=gI(new Ie(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new Ie(0):(a=new Ie(t).add(e).div(2),a=a.sub(new Ie(a).mod(o)));var s=Math.ceil(a.sub(t).div(o).toNumber()),l=Math.ceil(new Ie(e).sub(a).div(o).toNumber()),u=s+l+1;return u>n?yI(t,e,n,r,i+1):(u<n&&(l=e>0?l+(n-u):l,s=e>0?s:s+(n-u)),{step:o,tickMin:a.sub(new Ie(s).mul(o)),tickMax:a.add(new Ie(l).mul(o))})}function kne(t){var e=Ol(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),s=mI([n,r]),l=Ol(s,2),u=l[0],c=l[1];if(u===-1/0||c===1/0){var d=c===1/0?[u].concat(qg(Gg(0,i-1).map(function(){return 1/0}))):[].concat(qg(Gg(0,i-1).map(function(){return-1/0})),[c]);return n>r?Hg(d):d}if(u===c)return Tne(u,i,o);var h=yI(u,c,a,o),g=h.step,y=h.tickMin,x=h.tickMax,v=dh.rangeStep(y,x.add(new Ie(.1).mul(g)),g);return n>r?Hg(v):v}function Ane(t,e){var n=Ol(t,2),r=n[0],i=n[1],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=mI([r,i]),s=Ol(a,2),l=s[0],u=s[1];if(l===-1/0||u===1/0)return[r,i];if(l===u)return[l];var c=Math.max(e,2),d=gI(new Ie(u).sub(l).div(c-1),o,0),h=[].concat(qg(dh.rangeStep(new Ie(l),new Ie(u).sub(new Ie(.99).mul(d)),d)),[u]);return r>i?Hg(h):h}var Cne=hI(kne),Pne=hI(Ane),Nne="Invariant failed";function ro(t,e){throw new Error(Nne)}var Ine=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _a(t){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_a(t)}function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}function One(t,e){return Dne(t)||$ne(t,e)||Mne(t,e)||Rne()}function Rne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mne(t,e){if(t){if(typeof t=="string")return j1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j1(t,e)}}function j1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $ne(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Dne(t){if(Array.isArray(t))return t}function jne(t,e){if(t==null)return{};var n=Lne(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lne(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Une(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bI(r.key),r)}}function Bne(t,e,n){return e&&Fne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zne(t,e,n){return e=Id(e),Gne(t,vI()?Reflect.construct(e,n||[],Id(t).constructor):e.apply(t,n))}function Gne(t,e){if(e&&(_a(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hne(t)}function Hne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vI=function(){return!!t})()}function Id(t){return Id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Id(t)}function qne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wg(t,e)}function Wg(t,e){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Wg(t,e)}function xI(t,e,n){return e=bI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bI(t){var e=Vne(t,"string");return _a(e)=="symbol"?e:e+""}function Vne(t,e){if(_a(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_a(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fh=function(t){function e(){return Une(this,e),zne(this,e,arguments)}return qne(e,t),Bne(e,[{key:"render",value:function(){var r=this.props,i=r.offset,o=r.layout,a=r.width,s=r.dataKey,l=r.data,u=r.dataPointFormatter,c=r.xAxis,d=r.yAxis,h=jne(r,Ine),g=xe(h,!1);this.props.direction==="x"&&c.type!=="number"&&ro();var y=l.map(function(x){var v=u(x,s),b=v.x,w=v.y,_=v.value,T=v.errorVal;if(!T)return null;var S=[],E,k;if(Array.isArray(T)){var A=One(T,2);E=A[0],k=A[1]}else E=k=T;if(o==="vertical"){var C=c.scale,M=w+i,R=M+a,L=M-a,U=C(_-E),N=C(_+k);S.push({x1:N,y1:R,x2:N,y2:L}),S.push({x1:U,y1:M,x2:N,y2:M}),S.push({x1:U,y1:R,x2:U,y2:L})}else if(o==="horizontal"){var D=d.scale,O=b+i,F=O-a,I=O+a,$=D(_-E),B=D(_+k);S.push({x1:F,y1:B,x2:I,y2:B}),S.push({x1:O,y1:$,x2:O,y2:B}),S.push({x1:F,y1:$,x2:I,y2:$})}return j.createElement(Ke,Nd({className:"recharts-errorBar",key:"bar-".concat(S.map(function(G){return"".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))},g),S.map(function(G){return j.createElement("line",Nd({},G,{key:"line-".concat(G.x1,"-").concat(G.x2,"-").concat(G.y1,"-").concat(G.y2)}))}))});return j.createElement(Ke,{className:"recharts-errorBars"},y)}}])}(j.Component);xI(fh,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});xI(fh,"displayName","ErrorBar");function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function L1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L1(Object(n),!0).forEach(function(r){Wne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wne(t,e,n){return e=Kne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kne(t){var e=Jne(t,"string");return Rl(e)=="symbol"?e:e+""}function Jne(t,e){if(Rl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wI=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=nn(n,na);if(!a)return null;var s=na.defaultProps,l=s!==void 0?wi(wi({},s),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:o==="children"?u=(r||[]).reduce(function(c,d){var h=d.item,g=d.props,y=g.sectors||g.data||[];return c.concat(y.map(function(x){return{type:a.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):u=(r||[]).map(function(c){var d=c.item,h=d.type.defaultProps,g=h!==void 0?wi(wi({},h),d.props):{},y=g.dataKey,x=g.name,v=g.legendType,b=g.hide;return{inactive:b,dataKey:y,type:l.iconType||v||"square",color:X0(d),value:x||y,payload:g}}),wi(wi(wi({},l),na.getWithHeight(a,i)),{},{payload:u,item:a})};function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}function U1(t){return Zne(t)||Qne(t)||Xne(t)||Yne()}function Yne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xne(t,e){if(t){if(typeof t=="string")return Kg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kg(t,e)}}function Qne(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zne(t){if(Array.isArray(t))return Kg(t)}function Kg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F1(Object(n),!0).forEach(function(r){ia(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ia(t,e,n){return e=ere(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ere(t){var e=tre(t,"string");return Ml(e)=="symbol"?e:e+""}function tre(t,e){if(Ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cn(t,e,n){return be(t)||be(e)?n:ht(e)?En(t,e,n):ge(e)?e(t):n}function Hs(t,e,n,r){var i=Qte(t,function(s){return cn(s,e)});if(n==="number"){var o=i.filter(function(s){return Y(s)||parseFloat(s)});return o.length?[uh(o),Yr(o)]:[1/0,-1/0]}var a=r?i.filter(function(s){return!be(s)}):i;return a.map(function(s){return ht(s)||s instanceof Date?s:""})}var nre=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=-1,s=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(s<=1)return 0;if(o&&o.axisType==="angleAxis"&&Math.abs(Math.abs(o.range[1]-o.range[0])-360)<=1e-6)for(var l=o.range,u=0;u<s;u++){var c=u>0?i[u-1].coordinate:i[s-1].coordinate,d=i[u].coordinate,h=u>=s-1?i[0].coordinate:i[u+1].coordinate,g=void 0;if(zn(d-c)!==zn(h-d)){var y=[];if(zn(h-d)===zn(l[1]-l[0])){g=h;var x=d+l[1]-l[0];y[0]=Math.min(x,(x+c)/2),y[1]=Math.max(x,(x+c)/2)}else{g=c;var v=h+l[1]-l[0];y[0]=Math.min(d,(v+d)/2),y[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(g+d)/2),Math.max(d,(g+d)/2)];if(e>b[0]&&e<=b[1]||e>=y[0]&&e<=y[1]){a=i[u].index;break}}else{var w=Math.min(c,h),_=Math.max(c,h);if(e>(w+d)/2&&e<=(_+d)/2){a=i[u].index;break}}}else for(var T=0;T<s;T++)if(T===0&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T>0&&T<s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2&&e<=(r[T].coordinate+r[T+1].coordinate)/2||T===s-1&&e>(r[T].coordinate+r[T-1].coordinate)/2){a=r[T].index;break}return a},X0=function(e){var n,r=e,i=r.type.displayName,o=(n=e.type)!==null&&n!==void 0&&n.defaultProps?tt(tt({},e.type.defaultProps),e.props):e.props,a=o.stroke,s=o.fill,l;switch(i){case"Line":l=a;break;case"Area":case"Radar":l=a&&a!=="none"?a:s;break;default:l=s;break}return l},rre=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,o=i===void 0?{}:i;if(!o)return{};for(var a={},s=Object.keys(o),l=0,u=s.length;l<u;l++)for(var c=o[s[l]].stackGroups,d=Object.keys(c),h=0,g=d.length;h<g;h++){var y=c[d[h]],x=y.items,v=y.cateAxisId,b=x.filter(function(k){return br(k.type).indexOf("Bar")>=0});if(b&&b.length){var w=b[0].type.defaultProps,_=w!==void 0?tt(tt({},w),b[0].props):b[0].props,T=_.barSize,S=_[v];a[S]||(a[S]=[]);var E=be(T)?n:T;a[S].push({item:b[0],stackList:b.slice(1),barSize:be(E)?void 0:to(E,r,0)})}}return a},ire=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,o=e.sizeList,a=o===void 0?[]:o,s=e.maxBarSize,l=a.length;if(l<1)return null;var u=to(n,i,0,!0),c,d=[];if(a[0].barSize===+a[0].barSize){var h=!1,g=i/l,y=a.reduce(function(T,S){return T+S.barSize||0},0);y+=(l-1)*u,y>=i&&(y-=(l-1)*u,u=0),y>=i&&g>0&&(h=!0,g*=.9,y=l*g);var x=(i-y)/2>>0,v={offset:x-u,size:0};c=a.reduce(function(T,S){var E={item:S.item,position:{offset:v.offset+v.size+u,size:h?g:S.barSize}},k=[].concat(U1(T),[E]);return v=k[k.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:v})}),k},d)}else{var b=to(r,i,0,!0);i-2*b-(l-1)*u<=0&&(u=0);var w=(i-2*b-(l-1)*u)/l;w>1&&(w>>=0);var _=s===+s?Math.min(w,s):w;c=a.reduce(function(T,S,E){var k=[].concat(U1(T),[{item:S.item,position:{offset:b+(w+u)*E+(w-_)/2,size:_}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(A){k.push({item:A,position:k[k.length-1].position})}),k},d)}return c},ore=function(e,n,r,i){var o=r.children,a=r.width,s=r.margin,l=a-(s.left||0)-(s.right||0),u=wI({children:o,legendWidth:l});if(u){var c=i||{},d=c.width,h=c.height,g=u.align,y=u.verticalAlign,x=u.layout;if((x==="vertical"||x==="horizontal"&&y==="middle")&&g!=="center"&&Y(e[g]))return tt(tt({},e),{},ia({},g,e[g]+(d||0)));if((x==="horizontal"||x==="vertical"&&g==="center")&&y!=="middle"&&Y(e[y]))return tt(tt({},e),{},ia({},y,e[y]+(h||0)))}return e},are=function(e,n,r){return be(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},_I=function(e,n,r,i,o){var a=n.props.children,s=Wn(a,fh).filter(function(u){return are(i,o,u.props.direction)});if(s&&s.length){var l=s.map(function(u){return u.props.dataKey});return e.reduce(function(u,c){var d=cn(c,r);if(be(d))return u;var h=Array.isArray(d)?[uh(d),Yr(d)]:[d,d],g=l.reduce(function(y,x){var v=cn(c,x,0),b=h[0]-Math.abs(Array.isArray(v)?v[0]:v),w=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(b,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(g[0],u[0]),Math.max(g[1],u[1])]},[1/0,-1/0])}return null},sre=function(e,n,r,i,o){var a=n.map(function(s){return _I(e,s,r,o,i)}).filter(function(s){return!be(s)});return a&&a.length?a.reduce(function(s,l){return[Math.min(s[0],l[0]),Math.max(s[1],l[1])]},[1/0,-1/0]):null},SI=function(e,n,r,i,o){var a=n.map(function(l){var u=l.props.dataKey;return r==="number"&&u&&_I(e,l,u,i)||Hs(e,u,r,o)});if(r==="number")return a.reduce(function(l,u){return[Math.min(l[0],u[0]),Math.max(l[1],u[1])]},[1/0,-1/0]);var s={};return a.reduce(function(l,u){for(var c=0,d=u.length;c<d;c++)s[u[c]]||(s[u[c]]=!0,l.push(u[c]));return l},[])},EI=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},Li=function(e,n,r){if(!e)return null;var i=e.scale,o=e.duplicateDomain,a=e.type,s=e.range,l=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/l:0;if(u=e.axisType==="angleAxis"&&(s==null?void 0:s.length)>=2?zn(s[0]-s[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var c=(e.ticks||e.niceTicks).map(function(d){var h=o?o.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return c.filter(function(d){return!Ka(d.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:o?o[d]:d,index:h,offset:u}})},Cp=new WeakMap,Xu=function(e,n){if(typeof n!="function")return e;Cp.has(e)||Cp.set(e,new WeakMap);var r=Cp.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},lre=function(e,n,r){var i=e.scale,o=e.type,a=e.layout,s=e.axisType;if(i==="auto")return a==="radial"&&s==="radiusAxis"?{scale:Tl(),realScaleType:"band"}:a==="radial"&&s==="angleAxis"?{scale:Td(),realScaleType:"linear"}:o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Gs(),realScaleType:"point"}:o==="category"?{scale:Tl(),realScaleType:"band"}:{scale:Td(),realScaleType:"linear"};if(eo(i)){var l="scale".concat(Yf(i));return{scale:(R1[l]||Gs)(),realScaleType:R1[l]?l:"point"}}return ge(i)?{scale:i}:{scale:Gs(),realScaleType:"point"}},B1=1e-4,ure=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),o=Math.min(i[0],i[1])-B1,a=Math.max(i[0],i[1])+B1,s=e(n[0]),l=e(n[r-1]);(s<o||s>a||l<o||l>a)&&e.domain([n[0],n[r-1]])}},cre=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},dre=function(e,n){if(!n||n.length!==2||!Y(n[0])||!Y(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),o=[e[0],e[1]];return(!Y(e[0])||e[0]<r)&&(o[0]=r),(!Y(e[1])||e[1]>i)&&(o[1]=i),o[0]>i&&(o[0]=i),o[1]<r&&(o[1]=r),o},fre=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0,s=0;s<n;++s){var l=Ka(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=o,e[s][r][1]=o+l,o=e[s][r][1]):(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1])}},hre=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var o=0,a=0;a<n;++a){var s=Ka(e[a][r][1])?e[a][r][0]:e[a][r][1];s>=0?(e[a][r][0]=o,e[a][r][1]=o+s,o=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},pre={sign:fre,expand:AV,none:pa,silhouette:CV,wiggle:PV,positive:hre},mre=function(e,n,r){var i=n.map(function(s){return s.props.dataKey}),o=pre[r],a=kV().keys(i).value(function(s,l){return+cn(s,l,0)}).order(xg).offset(o);return a(e)},gre=function(e,n,r,i,o,a){if(!e)return null;var s=a?n.reverse():n,l={},u=s.reduce(function(d,h){var g,y=(g=h.type)!==null&&g!==void 0&&g.defaultProps?tt(tt({},h.type.defaultProps),h.props):h.props,x=y.stackId,v=y.hide;if(v)return d;var b=y[r],w=d[b]||{hasStack:!1,stackGroups:{}};if(ht(x)){var _=w.stackGroups[x]||{numericAxisId:r,cateAxisId:i,items:[]};_.items.push(h),w.hasStack=!0,w.stackGroups[x]=_}else w.stackGroups[lu("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return tt(tt({},d),{},ia({},b,w))},l),c={};return Object.keys(u).reduce(function(d,h){var g=u[h];if(g.hasStack){var y={};g.stackGroups=Object.keys(g.stackGroups).reduce(function(x,v){var b=g.stackGroups[v];return tt(tt({},x),{},ia({},v,{numericAxisId:r,cateAxisId:i,items:b.items,stackedData:mre(e,b.items,o)}))},y)}return tt(tt({},d),{},ia({},h,g))},c)},yre=function(e,n){var r=n.realScaleType,i=n.type,o=n.tickCount,a=n.originalDomain,s=n.allowDecimals,l=r||n.scale;if(l!=="auto"&&l!=="linear")return null;if(o&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var c=Cne(u,o,s);return e.domain([uh(c),Yr(c)]),{niceTicks:c}}if(o&&i==="number"){var d=e.domain(),h=Pne(d,o,s);return{niceTicks:h}}return null};function z1(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,o=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!be(i[e.dataKey])){var s=nd(n,"value",i[e.dataKey]);if(s)return s.coordinate+r/2}return n[o]?n[o].coordinate+r/2:null}var l=cn(i,be(a)?e.dataKey:a);return be(l)?null:e.scale(l)}var G1=function(e){var n=e.axis,r=e.ticks,i=e.offset,o=e.bandSize,a=e.entry,s=e.index;if(n.type==="category")return r[s]?r[s].coordinate+i:null;var l=cn(a,n.dataKey,n.domain[s]);return be(l)?null:n.scale(l)-o/2+i},vre=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),o=Math.max(r[0],r[1]);return i<=0&&o>=0?0:o<0?o:i}return r[0]},xre=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?tt(tt({},e.type.defaultProps),e.props):e.props,o=i.stackId;if(ht(o)){var a=n[o];if(a){var s=a.items.indexOf(e);return s>=0?a.stackedData[s]:null}}return null},bre=function(e){return e.reduce(function(n,r){return[uh(r.concat([n[0]]).filter(Y)),Yr(r.concat([n[1]]).filter(Y))]},[1/0,-1/0])},TI=function(e,n,r){return Object.keys(e).reduce(function(i,o){var a=e[o],s=a.stackedData,l=s.reduce(function(u,c){var d=bre(c.slice(n,r+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(l[0],i[0]),Math.max(l[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},H1=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,q1=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Jg=function(e,n,r){if(ge(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(Y(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(H1.test(e[0])){var o=+H1.exec(e[0])[1];i[0]=n[0]-o}else ge(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(Y(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(q1.test(e[1])){var a=+q1.exec(e[1])[1];i[1]=n[1]+a}else ge(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},Od=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var o=T0(n,function(d){return d.coordinate}),a=1/0,s=1,l=o.length;s<l;s++){var u=o[s],c=o[s-1];a=Math.min((u.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},V1=function(e,n,r){return!e||!e.length||Nl(e,En(r,"type.defaultProps.domain"))?n:e},kI=function(e,n){var r=e.type.defaultProps?tt(tt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,o=r.name,a=r.unit,s=r.formatter,l=r.tooltipType,u=r.chartType,c=r.hide;return tt(tt({},xe(e,!1)),{},{dataKey:i,unit:a,formatter:s,name:o||i,color:X0(e),value:cn(n,i),type:l,payload:n,chartType:u,hide:c})};function $l(t){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$l(t)}function W1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W1(Object(n),!0).forEach(function(r){wre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wre(t,e,n){return e=_re(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _re(t){var e=Sre(t,"string");return $l(e)=="symbol"?e:e+""}function Sre(t,e){if($l(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($l(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rd=Math.PI/180,Ere=function(e){return e*180/Math.PI},Tt=function(e,n,r,i){return{x:e+Math.cos(-Rd*i)*r,y:n+Math.sin(-Rd*i)*r}},Tre=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return Math.sqrt(Math.pow(r-o,2)+Math.pow(i-a,2))},kre=function(e,n){var r=e.x,i=e.y,o=n.cx,a=n.cy,s=Tre({x:r,y:i},{x:o,y:a});if(s<=0)return{radius:s};var l=(r-o)/s,u=Math.acos(l);return i>a&&(u=2*Math.PI-u),{radius:s,angle:Ere(u),angleInRadian:u}},Are=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),o=Math.floor(r/360),a=Math.min(i,o);return{startAngle:n-a*360,endAngle:r-a*360}},Cre=function(e,n){var r=n.startAngle,i=n.endAngle,o=Math.floor(r/360),a=Math.floor(i/360),s=Math.min(o,a);return e+s*360},J1=function(e,n){var r=e.x,i=e.y,o=kre({x:r,y:i},n),a=o.radius,s=o.angle,l=n.innerRadius,u=n.outerRadius;if(a<l||a>u)return!1;if(a===0)return!0;var c=Are(n),d=c.startAngle,h=c.endAngle,g=s,y;if(d<=h){for(;g>h;)g-=360;for(;g<d;)g+=360;y=g>=d&&g<=h}else{for(;g>d;)g-=360;for(;g<h;)g+=360;y=g>=h&&g<=d}return y?K1(K1({},n),{},{radius:a,angle:Cre(g,n)}):null};function Dl(t){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(t)}var Pre=["offset"];function Nre(t){return Mre(t)||Rre(t)||Ore(t)||Ire()}function Ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ore(t,e){if(t){if(typeof t=="string")return Yg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yg(t,e)}}function Rre(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mre(t){if(Array.isArray(t))return Yg(t)}function Yg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $re(t,e){if(t==null)return{};var n=Dre(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Dre(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Y1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y1(Object(n),!0).forEach(function(r){jre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jre(t,e,n){return e=Lre(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lre(t){var e=Ure(t,"string");return Dl(e)=="symbol"?e:e+""}function Ure(t,e){if(Dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jl(){return jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jl.apply(this,arguments)}var Fre=function(e){var n=e.value,r=e.formatter,i=be(e.children)?n:e.children;return ge(r)?r(i):i},Bre=function(e,n){var r=zn(n-e),i=Math.min(Math.abs(n-e),360);return r*i},zre=function(e,n,r){var i=e.position,o=e.viewBox,a=e.offset,s=e.className,l=o,u=l.cx,c=l.cy,d=l.innerRadius,h=l.outerRadius,g=l.startAngle,y=l.endAngle,x=l.clockWise,v=(d+h)/2,b=Bre(g,y),w=b>=0?1:-1,_,T;i==="insideStart"?(_=g+w*a,T=x):i==="insideEnd"?(_=y-w*a,T=!x):i==="end"&&(_=y+w*a,T=x),T=b<=0?T:!T;var S=Tt(u,c,v,_),E=Tt(u,c,v,_+(T?1:-1)*359),k="M".concat(S.x,",").concat(S.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(T?0:1,`,
    `).concat(E.x,",").concat(E.y),A=be(e.id)?lu("recharts-radial-line-"):e.id;return j.createElement("text",jl({},r,{dominantBaseline:"central",className:me("recharts-radial-bar-label",s)}),j.createElement("defs",null,j.createElement("path",{id:A,d:k})),j.createElement("textPath",{xlinkHref:"#".concat(A)},n))},Gre=function(e){var n=e.viewBox,r=e.offset,i=e.position,o=n,a=o.cx,s=o.cy,l=o.innerRadius,u=o.outerRadius,c=o.startAngle,d=o.endAngle,h=(c+d)/2;if(i==="outside"){var g=Tt(a,s,u+r,h),y=g.x,x=g.y;return{x:y,y:x,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(l+u)/2,b=Tt(a,s,v,h),w=b.x,_=b.y;return{x:w,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Hre=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,o=e.position,a=n,s=a.x,l=a.y,u=a.width,c=a.height,d=c>=0?1:-1,h=d*i,g=d>0?"end":"start",y=d>0?"start":"end",x=u>=0?1:-1,v=x*i,b=x>0?"end":"start",w=x>0?"start":"end";if(o==="top"){var _={x:s+u/2,y:l-d*i,textAnchor:"middle",verticalAnchor:g};return ut(ut({},_),r?{height:Math.max(l-r.y,0),width:u}:{})}if(o==="bottom"){var T={x:s+u/2,y:l+c+h,textAnchor:"middle",verticalAnchor:y};return ut(ut({},T),r?{height:Math.max(r.y+r.height-(l+c),0),width:u}:{})}if(o==="left"){var S={x:s-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"};return ut(ut({},S),r?{width:Math.max(S.x-r.x,0),height:c}:{})}if(o==="right"){var E={x:s+u+v,y:l+c/2,textAnchor:w,verticalAnchor:"middle"};return ut(ut({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:c}:{})}var k=r?{width:u,height:c}:{};return o==="insideLeft"?ut({x:s+v,y:l+c/2,textAnchor:w,verticalAnchor:"middle"},k):o==="insideRight"?ut({x:s+u-v,y:l+c/2,textAnchor:b,verticalAnchor:"middle"},k):o==="insideTop"?ut({x:s+u/2,y:l+h,textAnchor:"middle",verticalAnchor:y},k):o==="insideBottom"?ut({x:s+u/2,y:l+c-h,textAnchor:"middle",verticalAnchor:g},k):o==="insideTopLeft"?ut({x:s+v,y:l+h,textAnchor:w,verticalAnchor:y},k):o==="insideTopRight"?ut({x:s+u-v,y:l+h,textAnchor:b,verticalAnchor:y},k):o==="insideBottomLeft"?ut({x:s+v,y:l+c-h,textAnchor:w,verticalAnchor:g},k):o==="insideBottomRight"?ut({x:s+u-v,y:l+c-h,textAnchor:b,verticalAnchor:g},k):Ha(o)&&(Y(o.x)||$i(o.x))&&(Y(o.y)||$i(o.y))?ut({x:s+to(o.x,u),y:l+to(o.y,c),textAnchor:"end",verticalAnchor:"end"},k):ut({x:s+u/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},qre=function(e){return"cx"in e&&Y(e.cx)};function Rt(t){var e=t.offset,n=e===void 0?5:e,r=$re(t,Pre),i=ut({offset:n},r),o=i.viewBox,a=i.position,s=i.value,l=i.children,u=i.content,c=i.className,d=c===void 0?"":c,h=i.textBreakAll;if(!o||be(s)&&be(l)&&!P.isValidElement(u)&&!ge(u))return null;if(P.isValidElement(u))return P.cloneElement(u,i);var g;if(ge(u)){if(g=P.createElement(u,i),P.isValidElement(g))return g}else g=Fre(i);var y=qre(o),x=xe(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return zre(i,g,x);var v=y?Gre(i):Hre(i);return j.createElement(vd,jl({className:me("recharts-label",d)},x,v,{breakAll:h}),g)}Rt.displayName="Label";var AI=function(e){var n=e.cx,r=e.cy,i=e.angle,o=e.startAngle,a=e.endAngle,s=e.r,l=e.radius,u=e.innerRadius,c=e.outerRadius,d=e.x,h=e.y,g=e.top,y=e.left,x=e.width,v=e.height,b=e.clockWise,w=e.labelViewBox;if(w)return w;if(Y(x)&&Y(v)){if(Y(d)&&Y(h))return{x:d,y:h,width:x,height:v};if(Y(g)&&Y(y))return{x:g,y,width:x,height:v}}return Y(d)&&Y(h)?{x:d,y:h,width:0,height:0}:Y(n)&&Y(r)?{cx:n,cy:r,startAngle:o||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:c||l||s||0,clockWise:b}:e.viewBox?e.viewBox:{}},Vre=function(e,n){return e?e===!0?j.createElement(Rt,{key:"label-implicit",viewBox:n}):ht(e)?j.createElement(Rt,{key:"label-implicit",viewBox:n,value:e}):P.isValidElement(e)?e.type===Rt?P.cloneElement(e,{key:"label-implicit",viewBox:n}):j.createElement(Rt,{key:"label-implicit",content:e,viewBox:n}):ge(e)?j.createElement(Rt,{key:"label-implicit",content:e,viewBox:n}):Ha(e)?j.createElement(Rt,jl({viewBox:n},e,{key:"label-implicit"})):null:null},Wre=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,o=AI(e),a=Wn(i,Rt).map(function(l,u){return P.cloneElement(l,{viewBox:n||o,key:"label-".concat(u)})});if(!r)return a;var s=Vre(e.label,n||o);return[s].concat(Nre(a))};Rt.parseViewBox=AI;Rt.renderCallByParent=Wre;function Kre(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Jre=Kre;const Yre=Le(Jre);function Ll(t){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(t)}var Xre=["valueAccessor"],Qre=["data","dataKey","clockWise","id","textBreakAll"];function Zre(t){return rie(t)||nie(t)||tie(t)||eie()}function eie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tie(t,e){if(t){if(typeof t=="string")return Xg(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xg(t,e)}}function nie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rie(t){if(Array.isArray(t))return Xg(t)}function Xg(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Md(){return Md=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Md.apply(this,arguments)}function X1(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Q1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X1(Object(n),!0).forEach(function(r){iie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X1(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iie(t,e,n){return e=oie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oie(t){var e=aie(t,"string");return Ll(e)=="symbol"?e:e+""}function aie(t,e){if(Ll(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ll(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z1(t,e){if(t==null)return{};var n=sie(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sie(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var lie=function(e){return Array.isArray(e.value)?Yre(e.value):e.value};function si(t){var e=t.valueAccessor,n=e===void 0?lie:e,r=Z1(t,Xre),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,l=r.textBreakAll,u=Z1(r,Qre);return!i||!i.length?null:j.createElement(Ke,{className:"recharts-label-list"},i.map(function(c,d){var h=be(o)?n(c,d):cn(c&&c.payload,o),g=be(s)?{}:{id:"".concat(s,"-").concat(d)};return j.createElement(Rt,Md({},xe(c,!0),u,g,{parentViewBox:c.parentViewBox,value:h,textBreakAll:l,viewBox:Rt.parseViewBox(be(a)?c:Q1(Q1({},c),{},{clockWise:a})),key:"label-".concat(d),index:d}))}))}si.displayName="LabelList";function uie(t,e){return t?t===!0?j.createElement(si,{key:"labelList-implicit",data:e}):j.isValidElement(t)||ge(t)?j.createElement(si,{key:"labelList-implicit",data:e,content:t}):Ha(t)?j.createElement(si,Md({data:e},t,{key:"labelList-implicit"})):null:null}function cie(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Wn(r,si).map(function(a,s){return P.cloneElement(a,{data:e,key:"labelList-".concat(s)})});if(!n)return i;var o=uie(t.label,e);return[o].concat(Zre(i))}si.renderCallByParent=cie;function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qg.apply(this,arguments)}function eE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(n),!0).forEach(function(r){die(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function die(t,e,n){return e=fie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fie(t){var e=hie(t,"string");return Ul(e)=="symbol"?e:e+""}function hie(t,e){if(Ul(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ul(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pie=function(e,n){var r=zn(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},Qu=function(e){var n=e.cx,r=e.cy,i=e.radius,o=e.angle,a=e.sign,s=e.isExternal,l=e.cornerRadius,u=e.cornerIsExternal,c=l*(s?1:-1)+i,d=Math.asin(l/c)/Rd,h=u?o:o+a*d,g=Tt(n,r,c,h),y=Tt(n,r,i,h),x=u?o-a*d:o,v=Tt(n,r,c*Math.cos(d*Rd),x);return{center:g,circleTangency:y,lineTangency:v,theta:d}},CI=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.startAngle,s=e.endAngle,l=pie(a,s),u=a+l,c=Tt(n,r,o,a),d=Tt(n,r,o,u),h="M ".concat(c.x,",").concat(c.y,`
    A `).concat(o,",").concat(o,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var g=Tt(n,r,i,a),y=Tt(n,r,i,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=u),`,
            `).concat(g.x,",").concat(g.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},mie=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,o=e.outerRadius,a=e.cornerRadius,s=e.forceCornerRadius,l=e.cornerIsExternal,u=e.startAngle,c=e.endAngle,d=zn(c-u),h=Qu({cx:n,cy:r,radius:o,angle:u,sign:d,cornerRadius:a,cornerIsExternal:l}),g=h.circleTangency,y=h.lineTangency,x=h.theta,v=Qu({cx:n,cy:r,radius:o,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:l}),b=v.circleTangency,w=v.lineTangency,_=v.theta,T=l?Math.abs(u-c):Math.abs(u-c)-x-_;if(T<0)return s?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):CI({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:c});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,").concat(+(T>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var E=Qu({cx:n,cy:r,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),k=E.circleTangency,A=E.lineTangency,C=E.theta,M=Qu({cx:n,cy:r,radius:i,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),R=M.circleTangency,L=M.lineTangency,U=M.theta,N=l?Math.abs(u-c):Math.abs(u-c)-C-U;if(N<0&&a===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(L.x,",").concat(L.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(d>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(A.x,",").concat(A.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},gie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},PI=function(e){var n=tE(tE({},gie),e),r=n.cx,i=n.cy,o=n.innerRadius,a=n.outerRadius,s=n.cornerRadius,l=n.forceCornerRadius,u=n.cornerIsExternal,c=n.startAngle,d=n.endAngle,h=n.className;if(a<o||c===d)return null;var g=me("recharts-sector",h),y=a-o,x=to(s,y,0,!0),v;return x>0&&Math.abs(c-d)<360?v=mie({cx:r,cy:i,innerRadius:o,outerRadius:a,cornerRadius:Math.min(x,y/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:d}):v=CI({cx:r,cy:i,innerRadius:o,outerRadius:a,startAngle:c,endAngle:d}),j.createElement("path",Qg({},xe(n,!0),{className:g,d:v,role:"img"}))};function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function Zg(){return Zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zg.apply(this,arguments)}function nE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nE(Object(n),!0).forEach(function(r){yie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yie(t,e,n){return e=vie(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vie(t){var e=xie(t,"string");return Fl(e)=="symbol"?e:e+""}function xie(t,e){if(Fl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Fl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iE={curveBasisClosed:mV,curveBasisOpen:gV,curveBasis:pV,curveBumpX:eV,curveBumpY:tV,curveLinearClosed:yV,curveLinear:Qf,curveMonotoneX:vV,curveMonotoneY:xV,curveNatural:bV,curveStep:wV,curveStepAfter:SV,curveStepBefore:_V},Zu=function(e){return e.x===+e.x&&e.y===+e.y},bs=function(e){return e.x},ws=function(e){return e.y},bie=function(e,n){if(ge(e))return e;var r="curve".concat(Yf(e));return(r==="curveMonotone"||r==="curveBump")&&n?iE["".concat(r).concat(n==="vertical"?"Y":"X")]:iE[r]||Qf},wie=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,o=i===void 0?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,u=l===void 0?!1:l,c=bie(r,s),d=u?o.filter(function(x){return Zu(x)}):o,h;if(Array.isArray(a)){var g=u?a.filter(function(x){return Zu(x)}):a,y=d.map(function(x,v){return rE(rE({},x),{},{base:g[v]})});return s==="vertical"?h=Gu().y(ws).x1(bs).x0(function(x){return x.base.x}):h=Gu().x(bs).y1(ws).y0(function(x){return x.base.y}),h.defined(Zu).curve(c),h(y)}return s==="vertical"&&Y(a)?h=Gu().y(ws).x1(bs).x0(a):Y(a)?h=Gu().x(bs).y1(ws).y0(a):h=IP().x(bs).y(ws),h.defined(Zu).curve(c),h(d)},qs=function(e){var n=e.className,r=e.points,i=e.path,o=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?wie(e):i;return P.createElement("path",Zg({},xe(e,!1),rd(e),{className:me("recharts-curve",n),d:a,ref:o}))},NI={exports:{}},_ie="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sie=_ie,Eie=Sie;function II(){}function OI(){}OI.resetWarningCache=II;var Tie=function(){function t(r,i,o,a,s,l){if(l!==Eie){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OI,resetWarningCache:II};return n.PropTypes=n,n};NI.exports=Tie();var kie=NI.exports;const Ae=Le(kie),{getOwnPropertyNames:Aie,getOwnPropertySymbols:Cie}=Object,{hasOwnProperty:Pie}=Object.prototype;function Pp(t,e){return function(r,i,o){return t(r,i,o)&&e(r,i,o)}}function ec(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:o}=i,a=o.get(n),s=o.get(r);if(a&&s)return a===r&&s===n;o.set(n,r),o.set(r,n);const l=t(n,r,i);return o.delete(n),o.delete(r),l}}function Nie(t){return t!=null?t[Symbol.toStringTag]:void 0}function oE(t){return Aie(t).concat(Cie(t))}const Iie=Object.hasOwn||((t,e)=>Pie.call(t,e));function fo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const Oie="__v",Rie="__o",Mie="_owner",{getOwnPropertyDescriptor:aE,keys:sE}=Object;function $ie(t,e){return t.byteLength===e.byteLength&&$d(new Uint8Array(t),new Uint8Array(e))}function Die(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function jie(t,e){return t.byteLength===e.byteLength&&$d(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function Lie(t,e){return fo(t.getTime(),e.getTime())}function Uie(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Fie(t,e){return t===e}function lE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.entries();let a,s,l=0;for(;(a=o.next())&&!a.done;){const u=e.entries();let c=!1,d=0;for(;(s=u.next())&&!s.done;){if(i[d]){d++;continue}const h=a.value,g=s.value;if(n.equals(h[0],g[0],l,d,t,e,n)&&n.equals(h[1],g[1],h[0],g[0],t,e,n)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}const Bie=fo;function zie(t,e,n){const r=sE(t);let i=r.length;if(sE(e).length!==i)return!1;for(;i-- >0;)if(!RI(t,e,n,r[i]))return!1;return!0}function _s(t,e,n){const r=oE(t);let i=r.length;if(oE(e).length!==i)return!1;let o,a,s;for(;i-- >0;)if(o=r[i],!RI(t,e,n,o)||(a=aE(t,o),s=aE(e,o),(a||s)&&(!a||!s||a.configurable!==s.configurable||a.enumerable!==s.enumerable||a.writable!==s.writable)))return!1;return!0}function Gie(t,e){return fo(t.valueOf(),e.valueOf())}function Hie(t,e){return t.source===e.source&&t.flags===e.flags}function uE(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),o=t.values();let a,s;for(;(a=o.next())&&!a.done;){const l=e.values();let u=!1,c=0;for(;(s=l.next())&&!s.done;){if(!i[c]&&n.equals(a.value,s.value,a.value,s.value,t,e,n)){u=i[c]=!0;break}c++}if(!u)return!1}return!0}function $d(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function qie(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function RI(t,e,n,r){return(r===Mie||r===Rie||r===Oie)&&(t.$$typeof||e.$$typeof)?!0:Iie(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const Vie="[object ArrayBuffer]",Wie="[object Arguments]",Kie="[object Boolean]",Jie="[object DataView]",Yie="[object Date]",Xie="[object Error]",Qie="[object Map]",Zie="[object Number]",eoe="[object Object]",toe="[object RegExp]",noe="[object Set]",roe="[object String]",ioe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},ooe="[object URL]",aoe=Object.prototype.toString;function soe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:o,areMapsEqual:a,areNumbersEqual:s,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:g,unknownTagComparators:y}){return function(v,b,w){if(v===b)return!0;if(v==null||b==null)return!1;const _=typeof v;if(_!==typeof b)return!1;if(_!=="object")return _==="number"?s(v,b,w):_==="function"?o(v,b,w):!1;const T=v.constructor;if(T!==b.constructor)return!1;if(T===Object)return l(v,b,w);if(Array.isArray(v))return e(v,b,w);if(T===Date)return r(v,b,w);if(T===RegExp)return c(v,b,w);if(T===Map)return a(v,b,w);if(T===Set)return d(v,b,w);const S=aoe.call(v);if(S===Yie)return r(v,b,w);if(S===toe)return c(v,b,w);if(S===Qie)return a(v,b,w);if(S===noe)return d(v,b,w);if(S===eoe)return typeof v.then!="function"&&typeof b.then!="function"&&l(v,b,w);if(S===ooe)return g(v,b,w);if(S===Xie)return i(v,b,w);if(S===Wie)return l(v,b,w);if(ioe[S])return h(v,b,w);if(S===Vie)return t(v,b,w);if(S===Jie)return n(v,b,w);if(S===Kie||S===Zie||S===roe)return u(v,b,w);if(y){let E=y[S];if(!E){const k=Nie(v);k&&(E=y[k])}if(E)return E(v,b,w)}return!1}}function loe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:$ie,areArraysEqual:n?_s:Die,areDataViewsEqual:jie,areDatesEqual:Lie,areErrorsEqual:Uie,areFunctionsEqual:Fie,areMapsEqual:n?Pp(lE,_s):lE,areNumbersEqual:Bie,areObjectsEqual:n?_s:zie,arePrimitiveWrappersEqual:Gie,areRegExpsEqual:Hie,areSetsEqual:n?Pp(uE,_s):uE,areTypedArraysEqual:n?Pp($d,_s):$d,areUrlsEqual:qie,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=ec(r.areArraysEqual),o=ec(r.areMapsEqual),a=ec(r.areObjectsEqual),s=ec(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:a,areSetsEqual:s})}return r}function uoe(t){return function(e,n,r,i,o,a,s){return t(e,n,s)}}function coe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(s,l){const{cache:u=t?new WeakMap:void 0,meta:c}=n();return e(s,l,{cache:u,equals:r,meta:c,strict:i})};if(t)return function(s,l){return e(s,l,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const o={cache:void 0,equals:r,meta:void 0,strict:i};return function(s,l){return e(s,l,o)}}const doe=yi();yi({strict:!0});yi({circular:!0});yi({circular:!0,strict:!0});yi({createInternalComparator:()=>fo});yi({strict:!0,createInternalComparator:()=>fo});yi({circular:!0,createInternalComparator:()=>fo});yi({circular:!0,createInternalComparator:()=>fo,strict:!0});function yi(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,o=loe(t),a=soe(o),s=n?n(a):uoe(a);return coe({circular:e,comparator:a,createState:r,equals:s,strict:i})}function foe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function cE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(o){n<0&&(n=o),o-n>e?(t(o),n=-1):foe(i)};requestAnimationFrame(r)}function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}function hoe(t){return yoe(t)||goe(t)||moe(t)||poe()}function poe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(t,e){if(t){if(typeof t=="string")return dE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(t,e)}}function dE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function goe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yoe(t){if(Array.isArray(t))return t}function voe(){var t={},e=function(){return null},n=!1,r=function i(o){if(!n){if(Array.isArray(o)){if(!o.length)return;var a=o,s=hoe(a),l=s[0],u=s.slice(1);if(typeof l=="number"){cE(i.bind(null,u),l);return}i(l),cE(i.bind(null,u));return}ey(o)==="object"&&(t=o,e(t)),typeof o=="function"&&o()}};return{stop:function(){n=!0},start:function(o){n=!1,r(o)},subscribe:function(o){return e=o,function(){e=function(){return null}}}}}function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}function fE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(n),!0).forEach(function(r){MI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function MI(t,e,n){return e=xoe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xoe(t){var e=boe(t,"string");return Bl(e)==="symbol"?e:String(e)}function boe(t,e){if(Bl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var woe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(o){return i.includes(o)})})},_oe=function(e){return e},Soe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Vs=function(e,n){return Object.keys(n).reduce(function(r,i){return hE(hE({},r),{},MI({},i,e(i,n[i])))},{})},pE=function(e,n,r){return e.map(function(i){return"".concat(Soe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function Eoe(t,e){return Aoe(t)||koe(t,e)||$I(t,e)||Toe()}function Toe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function koe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Aoe(t){if(Array.isArray(t))return t}function Coe(t){return Ioe(t)||Noe(t)||$I(t)||Poe()}function Poe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $I(t,e){if(t){if(typeof t=="string")return ty(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ty(t,e)}}function Noe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ioe(t){if(Array.isArray(t))return ty(t)}function ty(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Dd=1e-4,DI=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},jI=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},mE=function(e,n){return function(r){var i=DI(e,n);return jI(i,r)}},Ooe=function(e,n){return function(r){var i=DI(e,n),o=[].concat(Coe(i.map(function(a,s){return a*s}).slice(1)),[0]);return jI(o,r)}},gE=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],o=n[1],a=n[2],s=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,o=0,a=1,s=1;break;case"ease":i=.25,o=.1,a=.25,s=1;break;case"ease-in":i=.42,o=0,a=1,s=1;break;case"ease-out":i=.42,o=0,a=.58,s=1;break;case"ease-in-out":i=0,o=0,a=.58,s=1;break;default:{var l=n[0].split("(");if(l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4){var u=l[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),c=Eoe(u,4);i=c[0],o=c[1],a=c[2],s=c[3]}}}var d=mE(i,a),h=mE(o,s),g=Ooe(i,a),y=function(b){return b>1?1:b<0?0:b},x=function(b){for(var w=b>1?1:b,_=w,T=0;T<8;++T){var S=d(_)-w,E=g(_);if(Math.abs(S-w)<Dd||E<Dd)return h(_);_=y(_-S/E)}return h(_)};return x.isStepper=!1,x},Roe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,o=i===void 0?8:i,a=e.dt,s=a===void 0?17:a,l=function(c,d,h){var g=-(c-d)*r,y=h*o,x=h+(g-y)*s/1e3,v=h*s/1e3+c;return Math.abs(v-d)<Dd&&Math.abs(x)<Dd?[d,0]:[v,x]};return l.isStepper=!0,l.dt=s,l},Moe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gE(i);case"spring":return Roe();default:if(i.split("(")[0]==="cubic-bezier")return gE(i)}return typeof i=="function"?i:null};function zl(t){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(t)}function yE(t){return joe(t)||Doe(t)||LI(t)||$oe()}function $oe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Doe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function joe(t){if(Array.isArray(t))return ry(t)}function vE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vE(Object(n),!0).forEach(function(r){ny(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ny(t,e,n){return e=Loe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Loe(t){var e=Uoe(t,"string");return zl(e)==="symbol"?e:String(e)}function Uoe(t,e){if(zl(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zl(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Foe(t,e){return Goe(t)||zoe(t,e)||LI(t,e)||Boe()}function Boe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LI(t,e){if(t){if(typeof t=="string")return ry(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ry(t,e)}}function ry(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zoe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Goe(t){if(Array.isArray(t))return t}var jd=function(e,n,r){return e+(n-e)*r},iy=function(e){var n=e.from,r=e.to;return n!==r},Hoe=function t(e,n,r){var i=Vs(function(o,a){if(iy(a)){var s=e(a.from,a.to,a.velocity),l=Foe(s,2),u=l[0],c=l[1];return St(St({},a),{},{from:u,velocity:c})}return a},n);return r<1?Vs(function(o,a){return iy(a)?St(St({},a),{},{velocity:jd(a.velocity,i[o].velocity,r),from:jd(a.from,i[o].from,r)}):a},n):t(e,i,r-1)};const qoe=function(t,e,n,r,i){var o=woe(t,e),a=o.reduce(function(v,b){return St(St({},v),{},ny({},b,[t[b],e[b]]))},{}),s=o.reduce(function(v,b){return St(St({},v),{},ny({},b,{from:t[b],velocity:0,to:e[b]}))},{}),l=-1,u,c,d=function(){return null},h=function(){return Vs(function(b,w){return w.from},s)},g=function(){return!Object.values(s).filter(iy).length},y=function(b){u||(u=b);var w=b-u,_=w/n.dt;s=Hoe(n,s,_),i(St(St(St({},t),e),h())),u=b,g()||(l=requestAnimationFrame(d))},x=function(b){c||(c=b);var w=(b-c)/r,_=Vs(function(S,E){return jd.apply(void 0,yE(E).concat([n(w)]))},a);if(i(St(St(St({},t),e),_)),w<1)l=requestAnimationFrame(d);else{var T=Vs(function(S,E){return jd.apply(void 0,yE(E).concat([n(1)]))},a);i(St(St(St({},t),e),T))}};return d=n.isStepper?y:x,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(l)}}};function Sa(t){"@babel/helpers - typeof";return Sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(t)}var Voe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Woe(t,e){if(t==null)return{};var n=Koe(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Koe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Np(t){return Qoe(t)||Xoe(t)||Yoe(t)||Joe()}function Joe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yoe(t,e){if(t){if(typeof t=="string")return oy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oy(t,e)}}function Xoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qoe(t){if(Array.isArray(t))return oy(t)}function oy(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xE(Object(n),!0).forEach(function(r){Ns(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ns(t,e,n){return e=UI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zoe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,UI(r.key),r)}}function tae(t,e,n){return e&&eae(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function UI(t){var e=nae(t,"string");return Sa(e)==="symbol"?e:String(e)}function nae(t,e){if(Sa(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sa(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rae(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ay(t,e)}function ay(t,e){return ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ay(t,e)}function iae(t){var e=oae();return function(){var r=Ld(t),i;if(e){var o=Ld(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return sy(this,i)}}function sy(t,e){if(e&&(Sa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ly(t)}function ly(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ld(t){return Ld=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ld(t)}var Nr=function(t){rae(n,t);var e=iae(n);function n(r,i){var o;Zoe(this,n),o=e.call(this,r,i);var a=o.props,s=a.isActive,l=a.attributeName,u=a.from,c=a.to,d=a.steps,h=a.children,g=a.duration;if(o.handleStyleChange=o.handleStyleChange.bind(ly(o)),o.changeStyle=o.changeStyle.bind(ly(o)),!s||g<=0)return o.state={style:{}},typeof h=="function"&&(o.state={style:c}),sy(o);if(d&&d.length)o.state={style:d[0].style};else if(u){if(typeof h=="function")return o.state={style:u},sy(o);o.state={style:l?Ns({},l,u):u}}else o.state={style:{}};return o}return tae(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.isActive,a=i.canBegin;this.mounted=!0,!(!o||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var o=this.props,a=o.isActive,s=o.canBegin,l=o.attributeName,u=o.shouldReAnimate,c=o.to,d=o.from,h=this.state.style;if(s){if(!a){var g={style:l?Ns({},l,c):c};this.state&&h&&(l&&h[l]!==c||!l&&h!==c)&&this.setState(g);return}if(!(doe(i.to,c)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=y||u?d:i.to;if(this.state&&h){var v={style:l?Ns({},l,x):x};(l&&h[l]!==x||!l&&h!==x)&&this.setState(v)}this.runAnimation(Rn(Rn({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var o=this,a=i.from,s=i.to,l=i.duration,u=i.easing,c=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,g=qoe(a,s,Moe(u),l,this.changeStyle),y=function(){o.stopJSAnimation=g()};this.manager.start([h,c,y,l,d])}},{key:"runStepAnimation",value:function(i){var o=this,a=i.steps,s=i.begin,l=i.onAnimationStart,u=a[0],c=u.style,d=u.duration,h=d===void 0?0:d,g=function(x,v,b){if(b===0)return x;var w=v.duration,_=v.easing,T=_===void 0?"ease":_,S=v.style,E=v.properties,k=v.onAnimationEnd,A=b>0?a[b-1]:v,C=E||Object.keys(S);if(typeof T=="function"||T==="spring")return[].concat(Np(x),[o.runJSAnimation.bind(o,{from:A.style,to:S,duration:w,easing:T}),w]);var M=pE(C,w,T),R=Rn(Rn(Rn({},A.style),S),{},{transition:M});return[].concat(Np(x),[R,w,k]).filter(_oe)};return this.manager.start([l].concat(Np(a.reduce(g,[c,Math.max(h,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=voe());var o=i.begin,a=i.duration,s=i.attributeName,l=i.to,u=i.easing,c=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,g=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof g=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var x=s?Ns({},s,l):l,v=pE(Object.keys(x),a,u);y.start([c,o,Rn(Rn({},x),{},{transition:v}),a,d])}},{key:"render",value:function(){var i=this.props,o=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var l=Woe(i,Voe),u=P.Children.count(o),c=this.state.style;if(typeof o=="function")return o(c);if(!s||u===0||a<=0)return o;var d=function(g){var y=g.props,x=y.style,v=x===void 0?{}:x,b=y.className,w=P.cloneElement(g,Rn(Rn({},l),{},{style:Rn(Rn({},v),c),className:b}));return w};return u===1?d(P.Children.only(o)):j.createElement("div",null,P.Children.map(o,function(h){return d(h)}))}}]),n}(P.PureComponent);Nr.displayName="Animate";Nr.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Nr.propTypes={from:Ae.oneOfType([Ae.object,Ae.string]),to:Ae.oneOfType([Ae.object,Ae.string]),attributeName:Ae.string,duration:Ae.number,begin:Ae.number,easing:Ae.oneOfType([Ae.string,Ae.func]),steps:Ae.arrayOf(Ae.shape({duration:Ae.number.isRequired,style:Ae.object.isRequired,easing:Ae.oneOfType([Ae.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ae.func]),properties:Ae.arrayOf("string"),onAnimationEnd:Ae.func})),children:Ae.oneOfType([Ae.node,Ae.func]),isActive:Ae.bool,canBegin:Ae.bool,onAnimationEnd:Ae.func,shouldReAnimate:Ae.bool,onAnimationStart:Ae.func,onAnimationReStart:Ae.func};function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}function Ud(){return Ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ud.apply(this,arguments)}function aae(t,e){return cae(t)||uae(t,e)||lae(t,e)||sae()}function sae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lae(t,e){if(t){if(typeof t=="string")return bE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bE(t,e)}}function bE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function cae(t){if(Array.isArray(t))return t}function wE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _E(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wE(Object(n),!0).forEach(function(r){dae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dae(t,e,n){return e=fae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fae(t){var e=hae(t,"string");return Gl(e)=="symbol"?e:e+""}function hae(t,e){if(Gl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SE=function(e,n,r,i,o){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),s=i>=0?1:-1,l=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,c;if(a>0&&o instanceof Array){for(var d=[0,0,0,0],h=0,g=4;h<g;h++)d[h]=o[h]>a?a:o[h];c="M".concat(e,",").concat(n+s*d[0]),d[0]>0&&(c+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(e+l*d[0],",").concat(n)),c+="L ".concat(e+r-l*d[1],",").concat(n),d[1]>0&&(c+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+s*d[1])),c+="L ".concat(e+r,",").concat(n+i-s*d[2]),d[2]>0&&(c+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(e+r-l*d[2],",").concat(n+i)),c+="L ".concat(e+l*d[3],",").concat(n+i),d[3]>0&&(c+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-s*d[3])),c+="Z"}else if(a>0&&o===+o&&o>0){var y=Math.min(a,o);c="M ".concat(e,",").concat(n+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+l*y,",").concat(n,`
            L `).concat(e+r-l*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+s*y,`
            L `).concat(e+r,",").concat(n+i-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-l*y,",").concat(n+i,`
            L `).concat(e+l*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-s*y," Z")}else c="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return c},pae=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,o=n.x,a=n.y,s=n.width,l=n.height;if(Math.abs(s)>0&&Math.abs(l)>0){var u=Math.min(o,o+s),c=Math.max(o,o+s),d=Math.min(a,a+l),h=Math.max(a,a+l);return r>=u&&r<=c&&i>=d&&i<=h}return!1},mae={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q0=function(e){var n=_E(_E({},mae),e),r=P.useRef(),i=P.useState(-1),o=aae(i,2),a=o[0],s=o[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var T=r.current.getTotalLength();T&&s(T)}catch{}},[]);var l=n.x,u=n.y,c=n.width,d=n.height,h=n.radius,g=n.className,y=n.animationEasing,x=n.animationDuration,v=n.animationBegin,b=n.isAnimationActive,w=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||c===0||d===0)return null;var _=me("recharts-rectangle",g);return w?j.createElement(Nr,{canBegin:a>0,from:{width:c,height:d,x:l,y:u},to:{width:c,height:d,x:l,y:u},duration:x,animationEasing:y,isActive:w},function(T){var S=T.width,E=T.height,k=T.x,A=T.y;return j.createElement(Nr,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,isActive:b,easing:y},j.createElement("path",Ud({},xe(n,!0),{className:_,d:SE(k,A,S,E,h),ref:r})))}):j.createElement("path",Ud({},xe(n,!0),{className:_,d:SE(l,u,c,d,h)}))};function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(this,arguments)}var Z0=function(e){var n=e.cx,r=e.cy,i=e.r,o=e.className,a=me("recharts-dot",o);return n===+n&&r===+r&&i===+i?P.createElement("circle",uy({},xe(e,!1),rd(e),{className:a,cx:n,cy:r,r:i})):null};function Hl(t){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hl(t)}var gae=["x","y","top","left","width","height","className"];function cy(){return cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)}function EE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EE(Object(n),!0).forEach(function(r){vae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vae(t,e,n){return e=xae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xae(t){var e=bae(t,"string");return Hl(e)=="symbol"?e:e+""}function bae(t,e){if(Hl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Hl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wae(t,e){if(t==null)return{};var n=_ae(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _ae(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Sae=function(e,n,r,i,o,a){return"M".concat(e,",").concat(o,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},Eae=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,o=i===void 0?0:i,a=e.top,s=a===void 0?0:a,l=e.left,u=l===void 0?0:l,c=e.width,d=c===void 0?0:c,h=e.height,g=h===void 0?0:h,y=e.className,x=wae(e,gae),v=yae({x:r,y:o,top:s,left:u,width:d,height:g},x);return!Y(r)||!Y(o)||!Y(d)||!Y(g)||!Y(s)||!Y(u)?null:j.createElement("path",cy({},xe(v,!0),{className:me("recharts-cross",y),d:Sae(r,o,d,g,s,u)}))},Tae=tN,kae=Tae(Object.getPrototypeOf,Object),Aae=kae,Cae=$r,Pae=Aae,Nae=Dr,Iae="[object Object]",Oae=Function.prototype,Rae=Object.prototype,FI=Oae.toString,Mae=Rae.hasOwnProperty,$ae=FI.call(Object);function Dae(t){if(!Nae(t)||Cae(t)!=Iae)return!1;var e=Pae(t);if(e===null)return!0;var n=Mae.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&FI.call(n)==$ae}var jae=Dae;const Lae=Le(jae);var Uae=$r,Fae=Dr,Bae="[object Boolean]";function zae(t){return t===!0||t===!1||Fae(t)&&Uae(t)==Bae}var Gae=zae;const Hae=Le(Gae);function ql(t){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(t)}function Fd(){return Fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fd.apply(this,arguments)}function qae(t,e){return Jae(t)||Kae(t,e)||Wae(t,e)||Vae()}function Vae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wae(t,e){if(t){if(typeof t=="string")return TE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TE(t,e)}}function TE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Kae(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Jae(t){if(Array.isArray(t))return t}function kE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function AE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kE(Object(n),!0).forEach(function(r){Yae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yae(t,e,n){return e=Xae(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xae(t){var e=Qae(t,"string");return ql(e)=="symbol"?e:e+""}function Qae(t,e){if(ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CE=function(e,n,r,i,o){var a=r-i,s;return s="M ".concat(e,",").concat(n),s+="L ".concat(e+r,",").concat(n),s+="L ".concat(e+r-a/2,",").concat(n+o),s+="L ".concat(e+r-a/2-i,",").concat(n+o),s+="L ".concat(e,",").concat(n," Z"),s},Zae={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ese=function(e){var n=AE(AE({},Zae),e),r=P.useRef(),i=P.useState(-1),o=qae(i,2),a=o[0],s=o[1];P.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var _=r.current.getTotalLength();_&&s(_)}catch{}},[]);var l=n.x,u=n.y,c=n.upperWidth,d=n.lowerWidth,h=n.height,g=n.className,y=n.animationEasing,x=n.animationDuration,v=n.animationBegin,b=n.isUpdateAnimationActive;if(l!==+l||u!==+u||c!==+c||d!==+d||h!==+h||c===0&&d===0||h===0)return null;var w=me("recharts-trapezoid",g);return b?j.createElement(Nr,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:l,y:u},to:{upperWidth:c,lowerWidth:d,height:h,x:l,y:u},duration:x,animationEasing:y,isActive:b},function(_){var T=_.upperWidth,S=_.lowerWidth,E=_.height,k=_.x,A=_.y;return j.createElement(Nr,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:x,easing:y},j.createElement("path",Fd({},xe(n,!0),{className:w,d:CE(k,A,T,S,E),ref:r})))}):j.createElement("g",null,j.createElement("path",Fd({},xe(n,!0),{className:w,d:CE(l,u,c,d,h)})))},tse=["option","shapeType","propTransformer","activeClassName","isActive"];function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function nse(t,e){if(t==null)return{};var n=rse(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rse(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function PE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PE(Object(n),!0).forEach(function(r){ise(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ise(t,e,n){return e=ose(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ose(t){var e=ase(t,"string");return Vl(e)=="symbol"?e:e+""}function ase(t,e){if(Vl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sse(t,e){return Bd(Bd({},e),t)}function lse(t,e){return t==="symbols"}function NE(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return j.createElement(Q0,n);case"trapezoid":return j.createElement(ese,n);case"sector":return j.createElement(PI,n);case"symbols":if(lse(e))return j.createElement(g0,n);break;default:return null}}function use(t){return P.isValidElement(t)?t.props:t}function cse(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?sse:r,o=t.activeClassName,a=o===void 0?"recharts-active-shape":o,s=t.isActive,l=nse(t,tse),u;if(P.isValidElement(e))u=P.cloneElement(e,Bd(Bd({},l),use(e)));else if(ge(e))u=e(l);else if(Lae(e)&&!Hae(e)){var c=i(e,l);u=j.createElement(NE,{shapeType:n,elementProps:c})}else{var d=l;u=j.createElement(NE,{shapeType:n,elementProps:d})}return s?j.createElement(Ke,{className:a},u):u}function hh(t,e){return e!=null&&"trapezoids"in t.props}function ph(t,e){return e!=null&&"sectors"in t.props}function Wl(t,e){return e!=null&&"points"in t.props}function dse(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,o=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&o}function fse(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function hse(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function pse(t,e){var n;return hh(t,e)?n=dse:ph(t,e)?n=fse:Wl(t,e)&&(n=hse),n}function mse(t,e){var n;return hh(t,e)?n="trapezoids":ph(t,e)?n="sectors":Wl(t,e)&&(n="points"),n}function gse(t,e){if(hh(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(ph(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Wl(t,e)?e.payload:{}}function yse(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=mse(n,e),o=gse(n,e),a=r.filter(function(l,u){var c=Nl(o,l),d=n.props[i].filter(function(y){var x=pse(n,e);return x(y,e)}),h=n.props[i].indexOf(d[d.length-1]),g=u===h;return c&&g}),s=r.indexOf(a[a.length-1]);return s}var vse=Math.ceil,xse=Math.max;function bse(t,e,n,r){for(var i=-1,o=xse(vse((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}var wse=bse,_se=xN,IE=1/0,Sse=17976931348623157e292;function Ese(t){if(!t)return t===0?t:0;if(t=_se(t),t===IE||t===-IE){var e=t<0?-1:1;return e*Sse}return t===t?t:0}var Tse=Ese,kse=wse,Ase=nh,Ip=Tse;function Cse(t){return function(e,n,r){return r&&typeof r!="number"&&Ase(e,n,r)&&(n=r=void 0),e=Ip(e),n===void 0?(n=e,e=0):n=Ip(n),r=r===void 0?e<n?1:-1:Ip(r),kse(e,n,r,t)}}var Pse=Cse,Nse=Pse,Ise=Nse(),Ose=Ise;const zd=Le(Ose);function Kl(t){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(t)}function OE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OE(Object(n),!0).forEach(function(r){BI(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BI(t,e,n){return e=Rse(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Mse(t,"string");return Kl(e)=="symbol"?e:e+""}function Mse(t,e){if(Kl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Kl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $se=["Webkit","Moz","O","ms"],Dse=function(e,n){var r=e.replace(/(\w)/,function(o){return o.toUpperCase()}),i=$se.reduce(function(o,a){return RE(RE({},o),{},BI({},a+r,n))},{});return i[e]=n,i};function Ea(t){"@babel/helpers - typeof";return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ea(t)}function Gd(){return Gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gd.apply(this,arguments)}function ME(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Op(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ME(Object(n),!0).forEach(function(r){en(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jse(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,GI(r.key),r)}}function Lse(t,e,n){return e&&$E(t.prototype,e),n&&$E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Use(t,e,n){return e=Hd(e),Fse(t,zI()?Reflect.construct(e,n||[],Hd(t).constructor):e.apply(t,n))}function Fse(t,e){if(e&&(Ea(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bse(t)}function Bse(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zI=function(){return!!t})()}function Hd(t){return Hd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hd(t)}function zse(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dy(t,e)}function dy(t,e){return dy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dy(t,e)}function en(t,e,n){return e=GI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GI(t){var e=Gse(t,"string");return Ea(e)=="symbol"?e:e+""}function Gse(t,e){if(Ea(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ea(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hse=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,o=e.x,a=e.width,s=e.travellerWidth;if(!n||!n.length)return{};var l=n.length,u=Gs().domain(zd(0,l)).range([o,o+a-s]),c=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:c}},DE=function(e){return e.changedTouches&&!!e.changedTouches.length},Ta=function(t){function e(n){var r;return jse(this,e),r=Use(this,e,[n]),en(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),en(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),en(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,o=i.endIndex,a=i.onDragEnd,s=i.startIndex;a==null||a({endIndex:o,startIndex:s})}),r.detachDragEndListener()}),en(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),en(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),en(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),en(r,"handleSlideDragStart",function(i){var o=DE(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:o.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return zse(e,t),Lse(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,o=r.endX,a=this.state.scaleValues,s=this.props,l=s.gap,u=s.data,c=u.length-1,d=Math.min(i,o),h=Math.max(i,o),g=e.getIndexInRange(a,d),y=e.getIndexInRange(a,h);return{startIndex:g-g%l,endIndex:y===c?c:y-y%l}}},{key:"getTextOfTick",value:function(r){var i=this.props,o=i.data,a=i.tickFormatter,s=i.dataKey,l=cn(o[r],s,r);return ge(a)?a(l,r):l}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,o=i.slideMoveStartX,a=i.startX,s=i.endX,l=this.props,u=l.x,c=l.width,d=l.travellerWidth,h=l.startIndex,g=l.endIndex,y=l.onChange,x=r.pageX-o;x>0?x=Math.min(x,u+c-d-s,u+c-d-a):x<0&&(x=Math.max(x,u-a,u-s));var v=this.getIndex({startX:a+x,endX:s+x});(v.startIndex!==h||v.endIndex!==g)&&y&&y(v),this.setState({startX:a+x,endX:s+x,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var o=DE(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:o.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,o=i.brushMoveStartX,a=i.movingTravellerId,s=i.endX,l=i.startX,u=this.state[a],c=this.props,d=c.x,h=c.width,g=c.travellerWidth,y=c.onChange,x=c.gap,v=c.data,b={startX:this.state.startX,endX:this.state.endX},w=r.pageX-o;w>0?w=Math.min(w,d+h-g-u):w<0&&(w=Math.max(w,d-u)),b[a]=u+w;var _=this.getIndex(b),T=_.startIndex,S=_.endIndex,E=function(){var A=v.length-1;return a==="startX"&&(s>l?T%x===0:S%x===0)||s<l&&S===A||a==="endX"&&(s>l?S%x===0:T%x===0)||s>l&&S===A};this.setState(en(en({},a,u+w),"brushMoveStartX",r.pageX),function(){y&&E()&&y(_)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var o=this,a=this.state,s=a.scaleValues,l=a.startX,u=a.endX,c=this.state[i],d=s.indexOf(c);if(d!==-1){var h=d+r;if(!(h===-1||h>=s.length)){var g=s[h];i==="startX"&&g>=u||i==="endX"&&g<=l||this.setState(en({},i,g),function(){o.props.onChange(o.getIndex({startX:o.state.startX,endX:o.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.fill,u=r.stroke;return j.createElement("rect",{stroke:u,fill:l,x:i,y:o,width:a,height:s})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.data,u=r.children,c=r.padding,d=P.Children.only(u);return d?j.cloneElement(d,{x:i,y:o,width:a,height:s,margin:c,compact:!0,data:l}):null}},{key:"renderTravellerLayer",value:function(r,i){var o,a,s=this,l=this.props,u=l.y,c=l.travellerWidth,d=l.height,h=l.traveller,g=l.ariaLabel,y=l.data,x=l.startIndex,v=l.endIndex,b=Math.max(r,this.props.x),w=Op(Op({},xe(this.props,!1)),{},{x:b,y:u,width:c,height:d}),_=g||"Min value: ".concat((o=y[x])===null||o===void 0?void 0:o.name,", Max value: ").concat((a=y[v])===null||a===void 0?void 0:a.name);return j.createElement(Ke,{tabIndex:0,role:"slider","aria-label":_,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),s.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var o=this.props,a=o.y,s=o.height,l=o.stroke,u=o.travellerWidth,c=Math.min(r,i)+u,d=Math.max(Math.abs(i-r)-u,0);return j.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:l,fillOpacity:.2,x:c,y:a,width:d,height:s})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,o=r.endIndex,a=r.y,s=r.height,l=r.travellerWidth,u=r.stroke,c=this.state,d=c.startX,h=c.endX,g=5,y={pointerEvents:"none",fill:u};return j.createElement(Ke,{className:"recharts-brush-texts"},j.createElement(vd,Gd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-g,y:a+s/2},y),this.getTextOfTick(i)),j.createElement(vd,Gd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+l+g,y:a+s/2},y),this.getTextOfTick(o)))}},{key:"render",value:function(){var r=this.props,i=r.data,o=r.className,a=r.children,s=r.x,l=r.y,u=r.width,c=r.height,d=r.alwaysShowText,h=this.state,g=h.startX,y=h.endX,x=h.isTextActive,v=h.isSlideMoving,b=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!Y(s)||!Y(l)||!Y(u)||!Y(c)||u<=0||c<=0)return null;var _=me("recharts-brush",o),T=j.Children.count(a)===1,S=Dse("userSelect","none");return j.createElement(Ke,{className:_,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),T&&this.renderPanorama(),this.renderSlide(g,y),this.renderTravellerLayer(g,"startX"),this.renderTravellerLayer(y,"endX"),(x||v||b||w||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,o=r.y,a=r.width,s=r.height,l=r.stroke,u=Math.floor(o+s/2)-1;return j.createElement(j.Fragment,null,j.createElement("rect",{x:i,y:o,width:a,height:s,fill:l,stroke:"none"}),j.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),j.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var o;return j.isValidElement(r)?o=j.cloneElement(r,i):ge(r)?o=r(i):o=e.renderDefaultTraveller(i),o}},{key:"getDerivedStateFromProps",value:function(r,i){var o=r.data,a=r.width,s=r.x,l=r.travellerWidth,u=r.updateId,c=r.startIndex,d=r.endIndex;if(o!==i.prevData||u!==i.prevUpdateId)return Op({prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a},o&&o.length?Hse({data:o,width:a,x:s,travellerWidth:l,startIndex:c,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||s!==i.prevX||l!==i.prevTravellerWidth)){i.scale.range([s,s+a-l]);var h=i.scale.domain().map(function(g){return i.scale(g)});return{prevData:o,prevTravellerWidth:l,prevUpdateId:u,prevX:s,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var o=r.length,a=0,s=o-1;s-a>1;){var l=Math.floor((a+s)/2);r[l]>i?s=l:a=l}return i>=r[s]?s:a}}])}(P.PureComponent);en(Ta,"displayName","Brush");en(Ta,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var qse=E0;function Vse(t,e){var n;return qse(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}var Wse=Vse,Kse=WP,Jse=Qa,Yse=Wse,Xse=Qt,Qse=nh;function Zse(t,e,n){var r=Xse(t)?Kse:Yse;return n&&Qse(t,e,n)&&(e=void 0),r(t,Jse(e))}var ele=Zse;const tle=Le(ele);var sr=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},jE=pN;function nle(t,e,n){e=="__proto__"&&jE?jE(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var rle=nle,ile=rle,ole=fN,ale=Qa;function sle(t,e){var n={};return e=ale(e),ole(t,function(r,i,o){ile(n,i,e(r,i,o))}),n}var lle=sle;const ule=Le(lle);function cle(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var dle=cle,fle=E0;function hle(t,e){var n=!0;return fle(t,function(r,i,o){return n=!!e(r,i,o),n}),n}var ple=hle,mle=dle,gle=ple,yle=Qa,vle=Qt,xle=nh;function ble(t,e,n){var r=vle(t)?mle:gle;return n&&xle(t,e,n)&&(e=void 0),r(t,yle(e))}var wle=ble;const _le=Le(wle);var Sle=["x","y"];function Jl(t){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(t)}function fy(){return fy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fy.apply(this,arguments)}function LE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ss(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LE(Object(n),!0).forEach(function(r){Ele(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ele(t,e,n){return e=Tle(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tle(t){var e=kle(t,"string");return Jl(e)=="symbol"?e:e+""}function kle(t,e){if(Jl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ale(t,e){if(t==null)return{};var n=Cle(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Cle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ple(t,e){var n=t.x,r=t.y,i=Ale(t,Sle),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),u="".concat(e.height||i.height),c=parseInt(u,10),d="".concat(e.width||i.width),h=parseInt(d,10);return Ss(Ss(Ss(Ss(Ss({},e),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:c,width:h,name:e.name,radius:e.radius})}function UE(t){return j.createElement(cse,fy({shapeType:"rectangle",propTransformer:Ple,activeClassName:"recharts-active-bar"},t))}var Nle=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var o=Y(r)||UH(r);return o?e(r,i):(o||ro(),n)}},Ile=["value","background"],HI;function ka(t){"@babel/helpers - typeof";return ka=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ka(t)}function Ole(t,e){if(t==null)return{};var n=Rle(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rle(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(this,arguments)}function FE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FE(Object(n),!0).forEach(function(r){Xr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function BE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VI(r.key),r)}}function $le(t,e,n){return e&&BE(t.prototype,e),n&&BE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dle(t,e,n){return e=Vd(e),jle(t,qI()?Reflect.construct(e,n||[],Vd(t).constructor):e.apply(t,n))}function jle(t,e){if(e&&(ka(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lle(t)}function Lle(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qI=function(){return!!t})()}function Vd(t){return Vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vd(t)}function Ule(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hy(t,e)}function hy(t,e){return hy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},hy(t,e)}function Xr(t,e,n){return e=VI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VI(t){var e=Fle(t,"string");return ka(e)=="symbol"?e:e+""}function Fle(t,e){if(ka(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ka(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hu=function(t){function e(){var n;Mle(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=Dle(this,e,[].concat(i)),Xr(n,"state",{isAnimationFinished:!1}),Xr(n,"id",lu("recharts-bar-")),Xr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Xr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return Ule(e,t),$le(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,o=this.props,a=o.shape,s=o.dataKey,l=o.activeIndex,u=o.activeBar,c=xe(this.props,!1);return r&&r.map(function(d,h){var g=h===l,y=g?u:a,x=it(it(it({},c),d),{},{isActive:g,option:y,index:h,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return j.createElement(Ke,qd({className:"recharts-bar-rectangle"},id(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),j.createElement(UE,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,o=i.data,a=i.layout,s=i.isAnimationActive,l=i.animationBegin,u=i.animationDuration,c=i.animationEasing,d=i.animationId,h=this.state.prevData;return j.createElement(Nr,{begin:l,duration:u,isActive:s,easing:c,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var y=g.t,x=o.map(function(v,b){var w=h&&h[b];if(w){var _=vn(w.x,v.x),T=vn(w.y,v.y),S=vn(w.width,v.width),E=vn(w.height,v.height);return it(it({},v),{},{x:_(y),y:T(y),width:S(y),height:E(y)})}if(a==="horizontal"){var k=vn(0,v.height),A=k(y);return it(it({},v),{},{y:v.y+v.height-A,height:A})}var C=vn(0,v.width),M=C(y);return it(it({},v),{},{width:M})});return j.createElement(Ke,null,r.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,o=r.isAnimationActive,a=this.state.prevData;return o&&i&&i.length&&(!a||!Nl(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,o=i.data,a=i.dataKey,s=i.activeIndex,l=xe(this.props.background,!1);return o.map(function(u,c){u.value;var d=u.background,h=Ole(u,Ile);if(!d)return null;var g=it(it(it(it(it({},h),{},{fill:"#eee"},d),l),id(r.props,u,c)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:c,className:"recharts-bar-background-rectangle"});return j.createElement(UE,qd({key:"background-bar-".concat(c),option:r.props.background,isActive:c===s},g))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.data,s=o.xAxis,l=o.yAxis,u=o.layout,c=o.children,d=Wn(c,fh);if(!d)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,g=function(v,b){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:cn(v,b)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return j.createElement(Ke,y,d.map(function(x){return j.cloneElement(x,{key:"error-bar-".concat(i,"-").concat(x.props.dataKey),data:a,xAxis:s,yAxis:l,layout:u,offset:h,dataPointFormatter:g})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,o=r.data,a=r.className,s=r.xAxis,l=r.yAxis,u=r.left,c=r.top,d=r.width,h=r.height,g=r.isAnimationActive,y=r.background,x=r.id;if(i||!o||!o.length)return null;var v=this.state.isAnimationFinished,b=me("recharts-bar",a),w=s&&s.allowDataOverflow,_=l&&l.allowDataOverflow,T=w||_,S=be(x)?this.id:x;return j.createElement(Ke,{className:b},w||_?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(S)},j.createElement("rect",{x:w?u:u-d/2,y:_?c:c-h/2,width:w?d:d*2,height:_?h:h*2}))):null,j.createElement(Ke,{className:"recharts-bar-rectangles",clipPath:T?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(T,S),(!g||v)&&si.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(P.PureComponent);HI=hu;Xr(hu,"displayName","Bar");Xr(hu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Za.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xr(hu,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,o=t.xAxis,a=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,g=cre(r,n);if(!g)return null;var y=e.layout,x=n.type.defaultProps,v=x!==void 0?it(it({},x),n.props):n.props,b=v.dataKey,w=v.children,_=v.minPointSize,T=y==="horizontal"?a:o,S=u?T.scale.domain():null,E=vre({numericAxis:T}),k=Wn(w,wN),A=d.map(function(C,M){var R,L,U,N,D,O;u?R=dre(u[c+M],S):(R=cn(C,b),Array.isArray(R)||(R=[E,R]));var F=Nle(_,HI.defaultProps.minPointSize)(R[1],M);if(y==="horizontal"){var I,$=[a.scale(R[0]),a.scale(R[1])],B=$[0],G=$[1];L=G1({axis:o,ticks:s,bandSize:i,offset:g.offset,entry:C,index:M}),U=(I=G??B)!==null&&I!==void 0?I:void 0,N=g.size;var q=B-G;if(D=Number.isNaN(q)?0:q,O={x:L,y:a.y,width:N,height:a.height},Math.abs(F)>0&&Math.abs(D)<Math.abs(F)){var X=zn(D||F)*(Math.abs(F)-Math.abs(D));U-=X,D+=X}}else{var se=[o.scale(R[0]),o.scale(R[1])],he=se[0],we=se[1];if(L=he,U=G1({axis:a,ticks:l,bandSize:i,offset:g.offset,entry:C,index:M}),N=we-he,D=g.size,O={x:o.x,y:U,width:o.width,height:D},Math.abs(F)>0&&Math.abs(N)<Math.abs(F)){var W=zn(N||F)*(Math.abs(F)-Math.abs(N));N+=W}}return it(it(it({},C),{},{x:L,y:U,width:N,height:D,value:u?R:R[1],payload:C,background:O},k&&k[M]&&k[M].props),{},{tooltipPayload:[kI(n,C)],tooltipPosition:{x:L+N/2,y:U+D/2}})});return it({data:A,layout:y},h)});function Yl(t){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl(t)}function Ble(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,WI(r.key),r)}}function zle(t,e,n){return e&&zE(t.prototype,e),n&&zE(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GE(Object(n),!0).forEach(function(r){mh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mh(t,e,n){return e=WI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function WI(t){var e=Gle(t,"string");return Yl(e)=="symbol"?e:e+""}function Gle(t,e){if(Yl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Yl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hle=function(e,n,r,i,o){var a=e.width,s=e.height,l=e.layout,u=e.children,c=Object.keys(n),d={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:s-r.bottom,bottomMirror:s-r.bottom},h=!!nn(u,hu);return c.reduce(function(g,y){var x=n[y],v=x.orientation,b=x.domain,w=x.padding,_=w===void 0?{}:w,T=x.mirror,S=x.reversed,E="".concat(v).concat(T?"Mirror":""),k,A,C,M,R;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var L=b[1]-b[0],U=1/0,N=x.categoricalDomain.sort(zH);if(N.forEach(function(se,he){he>0&&(U=Math.min((se||0)-(N[he-1]||0),U))}),Number.isFinite(U)){var D=U/L,O=x.layout==="vertical"?r.height:r.width;if(x.padding==="gap"&&(k=D*O/2),x.padding==="no-gap"){var F=to(e.barCategoryGap,D*O),I=D*O/2;k=I-F-(I-F)/O*F}}}i==="xAxis"?A=[r.left+(_.left||0)+(k||0),r.left+r.width-(_.right||0)-(k||0)]:i==="yAxis"?A=l==="horizontal"?[r.top+r.height-(_.bottom||0),r.top+(_.top||0)]:[r.top+(_.top||0)+(k||0),r.top+r.height-(_.bottom||0)-(k||0)]:A=x.range,S&&(A=[A[1],A[0]]);var $=lre(x,o,h),B=$.scale,G=$.realScaleType;B.domain(b).range(A),ure(B);var q=yre(B,Un(Un({},x),{},{realScaleType:G}));i==="xAxis"?(R=v==="top"&&!T||v==="bottom"&&T,C=r.left,M=d[E]-R*x.height):i==="yAxis"&&(R=v==="left"&&!T||v==="right"&&T,C=d[E]-R*x.width,M=r.top);var X=Un(Un(Un({},x),q),{},{realScaleType:G,x:C,y:M,scale:B,width:i==="xAxis"?r.width:x.width,height:i==="yAxis"?r.height:x.height});return X.bandSize=Od(X,q),!x.hide&&i==="xAxis"?d[E]+=(R?-1:1)*X.height:x.hide||(d[E]+=(R?-1:1)*X.width),Un(Un({},g),{},mh({},y,X))},{})},KI=function(e,n){var r=e.x,i=e.y,o=n.x,a=n.y;return{x:Math.min(r,o),y:Math.min(i,a),width:Math.abs(o-r),height:Math.abs(a-i)}},qle=function(e){var n=e.x1,r=e.y1,i=e.x2,o=e.y2;return KI({x:n,y:r},{x:i,y:o})},JI=function(){function t(e){Ble(this,t),this.scale=e}return zle(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,o=r.position;if(n!==void 0){if(o)switch(o){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(n)+s}default:return this.scale(n)}if(i){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+l}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],o=r[r.length-1];return i<=o?n>=i&&n<=o:n>=o&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();mh(JI,"EPS",1e-4);var ex=function(e){var n=Object.keys(e).reduce(function(r,i){return Un(Un({},r),{},mh({},i,JI.create(e[i])))},{});return Un(Un({},n),{},{apply:function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.bandAware,s=o.position;return ule(i,function(l,u){return n[u].apply(l,{bandAware:a,position:s})})},isInRange:function(i){return _le(i,function(o,a){return n[a].isInRange(o)})}})};function Vle(t){return(t%180+180)%180}var Wle=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=Vle(i),a=o*Math.PI/180,s=Math.atan(r/n),l=a>s&&a<Math.PI-s?r/Math.sin(a):n/Math.cos(a);return Math.abs(l)},Kle=qG(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),YI=P.createContext(void 0),XI=P.createContext(void 0),QI=P.createContext(void 0),Jle=P.createContext({}),ZI=P.createContext(void 0),eO=P.createContext(0),tO=P.createContext(0),HE=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,o=n.offset,a=e.clipPathId,s=e.children,l=e.width,u=e.height,c=Kle(o);return j.createElement(YI.Provider,{value:r},j.createElement(XI.Provider,{value:i},j.createElement(Jle.Provider,{value:o},j.createElement(QI.Provider,{value:c},j.createElement(ZI.Provider,{value:a},j.createElement(eO.Provider,{value:u},j.createElement(tO.Provider,{value:l},s)))))))},Yle=function(){return P.useContext(ZI)},nO=function(e){var n=P.useContext(YI);n==null&&ro();var r=n[e];return r==null&&ro(),r},rO=function(e){var n=P.useContext(XI);n==null&&ro();var r=n[e];return r==null&&ro(),r},Xle=function(){var e=P.useContext(QI);return e},iO=function(){return P.useContext(tO)},oO=function(){return P.useContext(eO)};function Aa(t){"@babel/helpers - typeof";return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Aa(t)}function Qle(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zle(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sO(r.key),r)}}function eue(t,e,n){return e&&Zle(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tue(t,e,n){return e=Wd(e),nue(t,aO()?Reflect.construct(e,n||[],Wd(t).constructor):e.apply(t,n))}function nue(t,e){if(e&&(Aa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rue(t)}function rue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aO=function(){return!!t})()}function Wd(t){return Wd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wd(t)}function iue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&py(t,e)}function py(t,e){return py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},py(t,e)}function qE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function VE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qE(Object(n),!0).forEach(function(r){tx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tx(t,e,n){return e=sO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sO(t){var e=oue(t,"string");return Aa(e)=="symbol"?e:e+""}function oue(t,e){if(Aa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Aa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function aue(t,e){return cue(t)||uue(t,e)||lue(t,e)||sue()}function sue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lue(t,e){if(t){if(typeof t=="string")return WE(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WE(t,e)}}function WE(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function uue(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function cue(t){if(Array.isArray(t))return t}function my(){return my=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},my.apply(this,arguments)}var due=function(e,n){var r;return j.isValidElement(e)?r=j.cloneElement(e,n):ge(e)?r=e(n):r=j.createElement("line",my({},n,{className:"recharts-reference-line-line"})),r},fue=function(e,n,r,i,o,a,s,l,u){var c=o.x,d=o.y,h=o.width,g=o.height;if(r){var y=u.y,x=e.y.apply(y,{position:a});if(sr(u,"discard")&&!e.y.isInRange(x))return null;var v=[{x:c+h,y:x},{x:c,y:x}];return l==="left"?v.reverse():v}if(n){var b=u.x,w=e.x.apply(b,{position:a});if(sr(u,"discard")&&!e.x.isInRange(w))return null;var _=[{x:w,y:d+g},{x:w,y:d}];return s==="top"?_.reverse():_}if(i){var T=u.segment,S=T.map(function(E){return e.apply(E,{position:a})});return sr(u,"discard")&&tle(S,function(E){return!e.isInRange(E)})?null:S}return null};function hue(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,o=t.yAxisId,a=t.shape,s=t.className,l=t.alwaysShow,u=Yle(),c=nO(i),d=rO(o),h=Xle();if(!u||!h)return null;qi(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var g=ex({x:c.scale,y:d.scale}),y=ht(e),x=ht(n),v=r&&r.length===2,b=fue(g,y,x,v,h,t.position,c.orientation,d.orientation,t);if(!b)return null;var w=aue(b,2),_=w[0],T=_.x,S=_.y,E=w[1],k=E.x,A=E.y,C=sr(t,"hidden")?"url(#".concat(u,")"):void 0,M=VE(VE({clipPath:C},xe(t,!0)),{},{x1:T,y1:S,x2:k,y2:A});return j.createElement(Ke,{className:me("recharts-reference-line",s)},due(a,M),Rt.renderCallByParent(t,qle({x1:T,y1:S,x2:k,y2:A})))}var nx=function(t){function e(){return Qle(this,e),tue(this,e,arguments)}return iue(e,t),eue(e,[{key:"render",value:function(){return j.createElement(hue,this.props)}}])}(j.Component);tx(nx,"displayName","ReferenceLine");tx(nx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gy.apply(this,arguments)}function Ca(t){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function KE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KE(Object(n),!0).forEach(function(r){gh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uO(r.key),r)}}function gue(t,e,n){return e&&mue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yue(t,e,n){return e=Kd(e),vue(t,lO()?Reflect.construct(e,n||[],Kd(t).constructor):e.apply(t,n))}function vue(t,e){if(e&&(Ca(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xue(t)}function xue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lO=function(){return!!t})()}function Kd(t){return Kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kd(t)}function bue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yy(t,e)}function yy(t,e){return yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yy(t,e)}function gh(t,e,n){return e=uO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uO(t){var e=wue(t,"string");return Ca(e)=="symbol"?e:e+""}function wue(t,e){if(Ca(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ca(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var _ue=function(e){var n=e.x,r=e.y,i=e.xAxis,o=e.yAxis,a=ex({x:i.scale,y:o.scale}),s=a.apply({x:n,y:r},{bandAware:!0});return sr(e,"discard")&&!a.isInRange(s)?null:s},yh=function(t){function e(){return pue(this,e),yue(this,e,arguments)}return bue(e,t),gue(e,[{key:"render",value:function(){var r=this.props,i=r.x,o=r.y,a=r.r,s=r.alwaysShow,l=r.clipPathId,u=ht(i),c=ht(o);if(qi(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!c)return null;var d=_ue(this.props);if(!d)return null;var h=d.x,g=d.y,y=this.props,x=y.shape,v=y.className,b=sr(this.props,"hidden")?"url(#".concat(l,")"):void 0,w=JE(JE({clipPath:b},xe(this.props,!0)),{},{cx:h,cy:g});return j.createElement(Ke,{className:me("recharts-reference-dot",v)},e.renderDot(x,w),Rt.renderCallByParent(this.props,{x:h-a,y:g-a,width:2*a,height:2*a}))}}])}(j.Component);gh(yh,"displayName","ReferenceDot");gh(yh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gh(yh,"renderDot",function(t,e){var n;return j.isValidElement(t)?n=j.cloneElement(t,e):ge(t)?n=t(e):n=j.createElement(Z0,gy({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function vy(){return vy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vy.apply(this,arguments)}function Pa(t){"@babel/helpers - typeof";return Pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pa(t)}function YE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function XE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YE(Object(n),!0).forEach(function(r){vh(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,dO(r.key),r)}}function Tue(t,e,n){return e&&Eue(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kue(t,e,n){return e=Jd(e),Aue(t,cO()?Reflect.construct(e,n||[],Jd(t).constructor):e.apply(t,n))}function Aue(t,e){if(e&&(Pa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cue(t)}function Cue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cO=function(){return!!t})()}function Jd(t){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jd(t)}function Pue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xy(t,e)}function xy(t,e){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},xy(t,e)}function vh(t,e,n){return e=dO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dO(t){var e=Nue(t,"string");return Pa(e)=="symbol"?e:e+""}function Nue(t,e){if(Pa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Iue=function(e,n,r,i,o){var a=o.x1,s=o.x2,l=o.y1,u=o.y2,c=o.xAxis,d=o.yAxis;if(!c||!d)return null;var h=ex({x:c.scale,y:d.scale}),g={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(l,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(s,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return sr(o,"discard")&&(!h.isInRange(g)||!h.isInRange(y))?null:KI(g,y)},xh=function(t){function e(){return Sue(this,e),kue(this,e,arguments)}return Pue(e,t),Tue(e,[{key:"render",value:function(){var r=this.props,i=r.x1,o=r.x2,a=r.y1,s=r.y2,l=r.className,u=r.alwaysShow,c=r.clipPathId;qi(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=ht(i),h=ht(o),g=ht(a),y=ht(s),x=this.props.shape;if(!d&&!h&&!g&&!y&&!x)return null;var v=Iue(d,h,g,y,this.props);if(!v&&!x)return null;var b=sr(this.props,"hidden")?"url(#".concat(c,")"):void 0;return j.createElement(Ke,{className:me("recharts-reference-area",l)},e.renderRect(x,XE(XE({clipPath:b},xe(this.props,!0)),v)),Rt.renderCallByParent(this.props,v))}}])}(j.Component);vh(xh,"displayName","ReferenceArea");vh(xh,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});vh(xh,"renderRect",function(t,e){var n;return j.isValidElement(t)?n=j.cloneElement(t,e):ge(t)?n=t(e):n=j.createElement(Q0,vy({},e,{className:"recharts-reference-area-rect"})),n});function fO(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Oue(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Wle(r,n)}function Rue(t,e,n){var r=n==="width",i=t.x,o=t.y,a=t.width,s=t.height;return e===1?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}function Yd(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var o=n();return t*(e-t*o/2-r)>=0&&t*(e+t*o/2-i)<=0}function Mue(t,e){return fO(t,e+1)}function $ue(t,e,n,r,i){for(var o=(r||[]).slice(),a=e.start,s=e.end,l=0,u=1,c=a,d=function(){var y=r==null?void 0:r[l];if(y===void 0)return{v:fO(r,u)};var x=l,v,b=function(){return v===void 0&&(v=n(y,x)),v},w=y.coordinate,_=l===0||Yd(t,w,b,c,s);_||(l=0,c=a,u+=1),_&&(c=w+t*(b()/2+i),l+=u)},h;u<=o.length;)if(h=d(),h)return h.v;return[]}function Xl(t){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xl(t)}function QE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function It(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QE(Object(n),!0).forEach(function(r){Due(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Due(t,e,n){return e=jue(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jue(t){var e=Lue(t,"string");return Xl(e)=="symbol"?e:e+""}function Lue(t,e){if(Xl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Xl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Uue(t,e,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=e.start,l=e.end,u=function(h){var g=o[h],y,x=function(){return y===void 0&&(y=n(g,h)),y};if(h===a-1){var v=t*(g.coordinate+t*x()/2-l);o[h]=g=It(It({},g),{},{tickCoord:v>0?g.coordinate-v*t:g.coordinate})}else o[h]=g=It(It({},g),{},{tickCoord:g.coordinate});var b=Yd(t,g.tickCoord,x,s,l);b&&(l=g.tickCoord-t*(x()/2+i),o[h]=It(It({},g),{},{isShow:!0}))},c=a-1;c>=0;c--)u(c);return o}function Fue(t,e,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=e.start,u=e.end;if(o){var c=r[s-1],d=n(c,s-1),h=t*(c.coordinate+t*d/2-u);a[s-1]=c=It(It({},c),{},{tickCoord:h>0?c.coordinate-h*t:c.coordinate});var g=Yd(t,c.tickCoord,function(){return d},l,u);g&&(u=c.tickCoord-t*(d/2+i),a[s-1]=It(It({},c),{},{isShow:!0}))}for(var y=o?s-1:s,x=function(w){var _=a[w],T,S=function(){return T===void 0&&(T=n(_,w)),T};if(w===0){var E=t*(_.coordinate-t*S()/2-l);a[w]=_=It(It({},_),{},{tickCoord:E<0?_.coordinate-E*t:_.coordinate})}else a[w]=_=It(It({},_),{},{tickCoord:_.coordinate});var k=Yd(t,_.tickCoord,S,l,u);k&&(l=_.tickCoord+t*(S()/2+i),a[w]=It(It({},_),{},{isShow:!0}))},v=0;v<y;v++)x(v);return a}function Bue(t,e,n){var r=t.tick,i=t.ticks,o=t.viewBox,a=t.minTickGap,s=t.orientation,l=t.interval,u=t.tickFormatter,c=t.unit,d=t.angle;if(!i||!i.length||!r)return[];if(Y(l)||Za.isSsr)return Mue(i,typeof l=="number"&&Y(l)?l:0);var h=[],g=s==="top"||s==="bottom"?"width":"height",y=c&&g==="width"?zs(c,{fontSize:e,letterSpacing:n}):{width:0,height:0},x=function(_,T){var S=ge(u)?u(_.value,T):_.value;return g==="width"?Oue(zs(S,{fontSize:e,letterSpacing:n}),y,d):zs(S,{fontSize:e,letterSpacing:n})[g]},v=i.length>=2?zn(i[1].coordinate-i[0].coordinate):1,b=Rue(o,v,g);return l==="equidistantPreserveStart"?$ue(v,b,x,i,a):(l==="preserveStart"||l==="preserveStartEnd"?h=Fue(v,b,x,i,a,l==="preserveStartEnd"):h=Uue(v,b,x,i,a),h.filter(function(w){return w.isShow}))}var zue=["viewBox"],Gue=["viewBox"],Hue=["ticks"];function Na(t){"@babel/helpers - typeof";return Na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Na(t)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(this,arguments)}function ZE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZE(Object(n),!0).forEach(function(r){rx(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rp(t,e){if(t==null)return{};var n=que(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function que(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pO(r.key),r)}}function Wue(t,e,n){return e&&eT(t.prototype,e),n&&eT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kue(t,e,n){return e=Xd(e),Jue(t,hO()?Reflect.construct(e,n||[],Xd(t).constructor):e.apply(t,n))}function Jue(t,e){if(e&&(Na(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yue(t)}function Yue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hO=function(){return!!t})()}function Xd(t){return Xd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xd(t)}function Xue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&by(t,e)}function by(t,e){return by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},by(t,e)}function rx(t,e,n){return e=pO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pO(t){var e=Que(t,"string");return Na(e)=="symbol"?e:e+""}function Que(t,e){if(Na(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Na(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var bh=function(t){function e(n){var r;return Vue(this,e),r=Kue(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return Xue(e,t),Wue(e,[{key:"shouldComponentUpdate",value:function(r,i){var o=r.viewBox,a=Rp(r,zue),s=this.props,l=s.viewBox,u=Rp(s,Gue);return!ta(o,l)||!ta(a,u)||!ta(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.x,a=i.y,s=i.width,l=i.height,u=i.orientation,c=i.tickSize,d=i.mirror,h=i.tickMargin,g,y,x,v,b,w,_=d?-1:1,T=r.tickSize||c,S=Y(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":g=y=r.coordinate,v=a+ +!d*l,x=v-_*T,w=x-_*h,b=S;break;case"left":x=v=r.coordinate,y=o+ +!d*s,g=y-_*T,b=g-_*h,w=S;break;case"right":x=v=r.coordinate,y=o+ +d*s,g=y+_*T,b=g+_*h,w=S;break;default:g=y=r.coordinate,v=a+ +d*l,x=v+_*T,w=x+_*h,b=S;break}return{line:{x1:g,y1:x,x2:y,y2:v},tick:{x:b,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a;switch(i){case"left":a=o?"start":"end";break;case"right":a=o?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,o=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=o?"start":"end";break;default:a=o?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,o=r.y,a=r.width,s=r.height,l=r.orientation,u=r.mirror,c=r.axisLine,d=lt(lt(lt({},xe(this.props,!1)),xe(c,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!u||l==="bottom"&&u);d=lt(lt({},d),{},{x1:i,y1:o+h*s,x2:i+a,y2:o+h*s})}else{var g=+(l==="left"&&!u||l==="right"&&u);d=lt(lt({},d),{},{x1:i+g*a,y1:o,x2:i+g*a,y2:o+s})}return j.createElement("line",Ho({},d,{className:me("recharts-cartesian-axis-line",En(c,"className"))}))}},{key:"renderTicks",value:function(r,i,o){var a=this,s=this.props,l=s.tickLine,u=s.stroke,c=s.tick,d=s.tickFormatter,h=s.unit,g=Bue(lt(lt({},this.props),{},{ticks:r}),i,o),y=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),v=xe(this.props,!1),b=xe(c,!1),w=lt(lt({},v),{},{fill:"none"},xe(l,!1)),_=g.map(function(T,S){var E=a.getTickLineCoord(T),k=E.line,A=E.tick,C=lt(lt(lt(lt({textAnchor:y,verticalAnchor:x},v),{},{stroke:"none",fill:u},b),A),{},{index:S,payload:T,visibleTicksCount:g.length,tickFormatter:d});return j.createElement(Ke,Ho({className:"recharts-cartesian-axis-tick",key:"tick-".concat(T.value,"-").concat(T.coordinate,"-").concat(T.tickCoord)},id(a.props,T,S)),l&&j.createElement("line",Ho({},w,k,{className:me("recharts-cartesian-axis-tick-line",En(l,"className"))})),c&&e.renderTickItem(c,C,"".concat(ge(d)?d(T.value,S):T.value).concat(h||"")))});return j.createElement("g",{className:"recharts-cartesian-axis-ticks"},_)}},{key:"render",value:function(){var r=this,i=this.props,o=i.axisLine,a=i.width,s=i.height,l=i.ticksGenerator,u=i.className,c=i.hide;if(c)return null;var d=this.props,h=d.ticks,g=Rp(d,Hue),y=h;return ge(l)&&(y=h&&h.length>0?l(this.props):l(g)),a<=0||s<=0||!y||!y.length?null:j.createElement(Ke,{className:me("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},o&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Rt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,o){var a,s=me(i.className,"recharts-cartesian-axis-tick-value");return j.isValidElement(r)?a=j.cloneElement(r,lt(lt({},i),{},{className:s})):ge(r)?a=r(lt(lt({},i),{},{className:s})):a=j.createElement(vd,Ho({},i,{className:"recharts-cartesian-axis-tick-value"}),o),a}}])}(P.Component);rx(bh,"displayName","CartesianAxis");rx(bh,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zue=["layout","type","stroke","connectNulls","isRange","ref"],ece=["key"],mO;function Ia(t){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ia(t)}function gO(t,e){if(t==null)return{};var n=tce(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ui(){return Ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ui.apply(this,arguments)}function tT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tT(Object(n),!0).forEach(function(r){nr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vO(r.key),r)}}function rce(t,e,n){return e&&nT(t.prototype,e),n&&nT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ice(t,e,n){return e=Qd(e),oce(t,yO()?Reflect.construct(e,n||[],Qd(t).constructor):e.apply(t,n))}function oce(t,e){if(e&&(Ia(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ace(t)}function ace(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yO=function(){return!!t})()}function Qd(t){return Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qd(t)}function sce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wy(t,e)}function wy(t,e){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},wy(t,e)}function nr(t,e,n){return e=vO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vO(t){var e=lce(t,"string");return Ia(e)=="symbol"?e:e+""}function lce(t,e){if(Ia(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ia(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var vi=function(t){function e(){var n;nce(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=ice(this,e,[].concat(i)),nr(n,"state",{isAnimationFinished:!0}),nr(n,"id",lu("recharts-area-")),nr(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ge(a)&&a()}),nr(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ge(a)&&a()}),n}return sce(e,t),rce(e,[{key:"renderDots",value:function(r,i,o){var a=this.props.isAnimationActive,s=this.state.isAnimationFinished;if(a&&!s)return null;var l=this.props,u=l.dot,c=l.points,d=l.dataKey,h=xe(this.props,!1),g=xe(u,!0),y=c.map(function(v,b){var w=Fr(Fr(Fr({key:"dot-".concat(b),r:3},h),g),{},{index:b,cx:v.x,cy:v.y,dataKey:d,value:v.value,payload:v.payload,points:c});return e.renderDotItem(u,w)}),x={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return j.createElement(Ke,Ui({className:"recharts-area-dots"},x),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].x,u=a[a.length-1].x,c=r*Math.abs(l-u),d=Yr(a.map(function(h){return h.y||0}));return Y(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(Yr(o.map(function(h){return h.y||0})),d)),Y(d)?j.createElement("rect",{x:l<u?l:l-c,y:0,width:c,height:Math.floor(d+(s?parseInt("".concat(s),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,o=i.baseLine,a=i.points,s=i.strokeWidth,l=a[0].y,u=a[a.length-1].y,c=r*Math.abs(l-u),d=Yr(a.map(function(h){return h.x||0}));return Y(o)&&typeof o=="number"?d=Math.max(o,d):o&&Array.isArray(o)&&o.length&&(d=Math.max(Yr(o.map(function(h){return h.x||0})),d)),Y(d)?j.createElement("rect",{x:0,y:l<u?l:l-c,width:d+(s?parseInt("".concat(s),10):1),height:Math.floor(c)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,o,a){var s=this.props,l=s.layout,u=s.type,c=s.stroke,d=s.connectNulls,h=s.isRange;s.ref;var g=gO(s,Zue);return j.createElement(Ke,{clipPath:o?"url(#clipPath-".concat(a,")"):null},j.createElement(qs,Ui({},xe(g,!0),{points:r,connectNulls:d,type:u,baseLine:i,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&j.createElement(qs,Ui({},xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:r})),c!=="none"&&h&&j.createElement(qs,Ui({},xe(this.props,!1),{className:"recharts-area-curve",layout:l,type:u,connectNulls:d,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var o=this,a=this.props,s=a.points,l=a.baseLine,u=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,h=a.animationEasing,g=a.animationId,y=this.state,x=y.prevPoints,v=y.prevBaseLine;return j.createElement(Nr,{begin:c,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var w=b.t;if(x){var _=x.length/s.length,T=s.map(function(A,C){var M=Math.floor(C*_);if(x[M]){var R=x[M],L=vn(R.x,A.x),U=vn(R.y,A.y);return Fr(Fr({},A),{},{x:L(w),y:U(w)})}return A}),S;if(Y(l)&&typeof l=="number"){var E=vn(v,l);S=E(w)}else if(be(l)||Ka(l)){var k=vn(v,0);S=k(w)}else S=l.map(function(A,C){var M=Math.floor(C*_);if(v[M]){var R=v[M],L=vn(R.x,A.x),U=vn(R.y,A.y);return Fr(Fr({},A),{},{x:L(w),y:U(w)})}return A});return o.renderAreaStatically(T,S,r,i)}return j.createElement(Ke,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(i)},o.renderClipRect(w))),j.createElement(Ke,{clipPath:"url(#animationClipPath-".concat(i,")")},o.renderAreaStatically(s,l,r,i)))})}},{key:"renderArea",value:function(r,i){var o=this.props,a=o.points,s=o.baseLine,l=o.isAnimationActive,u=this.state,c=u.prevPoints,d=u.prevBaseLine,h=u.totalLength;return l&&a&&a.length&&(!c&&h>0||!Nl(c,a)||!Nl(d,s))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,s,r,i)}},{key:"render",value:function(){var r,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,u=i.top,c=i.left,d=i.xAxis,h=i.yAxis,g=i.width,y=i.height,x=i.isAnimationActive,v=i.id;if(o||!s||!s.length)return null;var b=this.state.isAnimationFinished,w=s.length===1,_=me("recharts-area",l),T=d&&d.allowDataOverflow,S=h&&h.allowDataOverflow,E=T||S,k=be(v)?this.id:v,A=(r=xe(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=A.r,M=C===void 0?3:C,R=A.strokeWidth,L=R===void 0?2:R,U=XH(a)?a:{},N=U.clipDot,D=N===void 0?!0:N,O=M*2+L;return j.createElement(Ke,{className:_},T||S?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(k)},j.createElement("rect",{x:T?c:c-g/2,y:S?u:u-y/2,width:T?g:g*2,height:S?y:y*2})),!D&&j.createElement("clipPath",{id:"clipPath-dots-".concat(k)},j.createElement("rect",{x:c-O/2,y:u-O/2,width:g+O,height:y+O}))):null,w?null:this.renderArea(E,k),(a||w)&&this.renderDots(E,D,k),(!x||b)&&si.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(P.PureComponent);mO=vi;nr(vi,"displayName","Area");nr(vi,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Za.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});nr(vi,"getBaseValue",function(t,e,n,r){var i=t.layout,o=t.baseValue,a=e.props.baseValue,s=a??o;if(Y(s)&&typeof s=="number")return s;var l=i==="horizontal"?r:n,u=l.scale.domain();if(l.type==="number"){var c=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return s==="dataMin"?d:s==="dataMax"||c<0?c:Math.max(Math.min(u[0],u[1]),0)}return s==="dataMin"?u[0]:s==="dataMax"?u[1]:u[0]});nr(vi,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,o=t.xAxisTicks,a=t.yAxisTicks,s=t.bandSize,l=t.dataKey,u=t.stackedData,c=t.dataStartIndex,d=t.displayedData,h=t.offset,g=e.layout,y=u&&u.length,x=mO.getBaseValue(e,n,r,i),v=g==="horizontal",b=!1,w=d.map(function(T,S){var E;y?E=u[c+S]:(E=cn(T,l),Array.isArray(E)?b=!0:E=[x,E]);var k=E[1]==null||y&&cn(T,l)==null;return v?{x:z1({axis:r,ticks:o,bandSize:s,entry:T,index:S}),y:k?null:i.scale(E[1]),value:E,payload:T}:{x:k?null:r.scale(E[1]),y:z1({axis:i,ticks:a,bandSize:s,entry:T,index:S}),value:E,payload:T}}),_;return y||b?_=w.map(function(T){var S=Array.isArray(T.value)?T.value[0]:null;return v?{x:T.x,y:S!=null&&T.y!=null?i.scale(S):null}:{x:S!=null?r.scale(S):null,y:T.y}}):_=v?i.scale(x):r.scale(x),Fr({points:w,baseLine:_,layout:g,isRange:b},h)});nr(vi,"renderDotItem",function(t,e){var n;if(j.isValidElement(t))n=j.cloneElement(t,e);else if(ge(t))n=t(e);else{var r=me("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,o=gO(e,ece);n=j.createElement(Z0,Ui({},o,{key:i,className:r}))}return n});function Oa(t){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oa(t)}function uce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wO(r.key),r)}}function dce(t,e,n){return e&&cce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fce(t,e,n){return e=Zd(e),hce(t,xO()?Reflect.construct(e,n||[],Zd(t).constructor):e.apply(t,n))}function hce(t,e){if(e&&(Oa(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pce(t)}function pce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xO=function(){return!!t})()}function Zd(t){return Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zd(t)}function mce(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_y(t,e)}function _y(t,e){return _y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_y(t,e)}function bO(t,e,n){return e=wO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wO(t){var e=gce(t,"string");return Oa(e)=="symbol"?e:e+""}function gce(t,e){if(Oa(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Oa(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sy(){return Sy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sy.apply(this,arguments)}function yce(t){var e=t.xAxisId,n=iO(),r=oO(),i=nO(e);return i==null?null:P.createElement(bh,Sy({},i,{className:me("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Li(a,!0)}}))}var ix=function(t){function e(){return uce(this,e),fce(this,e,arguments)}return mce(e,t),dce(e,[{key:"render",value:function(){return P.createElement(yce,this.props)}}])}(P.Component);bO(ix,"displayName","XAxis");bO(ix,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(t)}function vce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,EO(r.key),r)}}function bce(t,e,n){return e&&xce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wce(t,e,n){return e=ef(e),_ce(t,_O()?Reflect.construct(e,n||[],ef(t).constructor):e.apply(t,n))}function _ce(t,e){if(e&&(Ra(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sce(t)}function Sce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_O=function(){return!!t})()}function ef(t){return ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ef(t)}function Ece(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ey(t,e)}function Ey(t,e){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ey(t,e)}function SO(t,e,n){return e=EO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EO(t){var e=Tce(t,"string");return Ra(e)=="symbol"?e:e+""}function Tce(t,e){if(Ra(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ra(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ty(){return Ty=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ty.apply(this,arguments)}var kce=function(e){var n=e.yAxisId,r=iO(),i=oO(),o=rO(n);return o==null?null:P.createElement(bh,Ty({},o,{className:me("recharts-".concat(o.axisType," ").concat(o.axisType),o.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(s){return Li(s,!0)}}))},ox=function(t){function e(){return vce(this,e),wce(this,e,arguments)}return Ece(e,t),bce(e,[{key:"render",value:function(){return P.createElement(kce,this.props)}}])}(P.Component);SO(ox,"displayName","YAxis");SO(ox,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function rT(t){return Nce(t)||Pce(t)||Cce(t)||Ace()}function Ace(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cce(t,e){if(t){if(typeof t=="string")return ky(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ky(t,e)}}function Pce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Nce(t){if(Array.isArray(t))return ky(t)}function ky(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ay=function(e,n,r,i,o){var a=Wn(e,nx),s=Wn(e,yh),l=[].concat(rT(a),rT(s)),u=Wn(e,xh),c="".concat(i,"Id"),d=i[0],h=n;if(l.length&&(h=l.reduce(function(x,v){if(v.props[c]===r&&sr(v.props,"extendDomain")&&Y(v.props[d])){var b=v.props[d];return[Math.min(x[0],b),Math.max(x[1],b)]}return x},h)),u.length){var g="".concat(d,"1"),y="".concat(d,"2");h=u.reduce(function(x,v){if(v.props[c]===r&&sr(v.props,"extendDomain")&&Y(v.props[g])&&Y(v.props[y])){var b=v.props[g],w=v.props[y];return[Math.min(x[0],b,w),Math.max(x[1],b,w)]}return x},h)}return o&&o.length&&(h=o.reduce(function(x,v){return Y(v)?[Math.min(x[0],v),Math.max(x[1],v)]:x},h)),h},TO={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function o(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new i(c,d||l,h),y=n?n+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],g]:l._events[y].push(g):(l._events[y]=g,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,y=new Array(g);h<g;h++)y[h]=d[h].fn;return y},s.prototype.listenerCount=function(u){var c=n?n+u:u,d=this._events[c];return d?d.fn?1:d.length:0},s.prototype.emit=function(u,c,d,h,g,y){var x=n?n+u:u;if(!this._events[x])return!1;var v=this._events[x],b=arguments.length,w,_;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,d),!0;case 4:return v.fn.call(v.context,c,d,h),!0;case 5:return v.fn.call(v.context,c,d,h,g),!0;case 6:return v.fn.call(v.context,c,d,h,g,y),!0}for(_=1,w=new Array(b-1);_<b;_++)w[_-1]=arguments[_];v.fn.apply(v.context,w)}else{var T=v.length,S;for(_=0;_<T;_++)switch(v[_].once&&this.removeListener(u,v[_].fn,void 0,!0),b){case 1:v[_].fn.call(v[_].context);break;case 2:v[_].fn.call(v[_].context,c);break;case 3:v[_].fn.call(v[_].context,c,d);break;case 4:v[_].fn.call(v[_].context,c,d,h);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];v[_].fn.apply(v[_].context,w)}}return!0},s.prototype.on=function(u,c,d){return o(this,u,c,d,!1)},s.prototype.once=function(u,c,d){return o(this,u,c,d,!0)},s.prototype.removeListener=function(u,c,d,h){var g=n?n+u:u;if(!this._events[g])return this;if(!c)return a(this,g),this;var y=this._events[g];if(y.fn)y.fn===c&&(!h||y.once)&&(!d||y.context===d)&&a(this,g);else{for(var x=0,v=[],b=y.length;x<b;x++)(y[x].fn!==c||h&&!y[x].once||d&&y[x].context!==d)&&v.push(y[x]);v.length?this._events[g]=v.length===1?v[0]:v:a(this,g)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(TO);var Ice=TO.exports;const Oce=Le(Ice);var Mp=new Oce,$p="recharts.syncMouseEvents";function Ql(t){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(t)}function Rce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kO(r.key),r)}}function $ce(t,e,n){return e&&Mce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dp(t,e,n){return e=kO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kO(t){var e=Dce(t,"string");return Ql(e)=="symbol"?e:e+""}function Dce(t,e){if(Ql(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jce=function(){function t(){Rce(this,t),Dp(this,"activeIndex",0),Dp(this,"coordinateList",[]),Dp(this,"layout","horizontal")}return $ce(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,o=i===void 0?null:i,a=n.container,s=a===void 0?null:a,l=n.layout,u=l===void 0?null:l,c=n.offset,d=c===void 0?null:c,h=n.mouseHandlerCallback,g=h===void 0?null:h;this.coordinateList=(r=o??this.coordinateList)!==null&&r!==void 0?r:[],this.container=s??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=g??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),o=i.x,a=i.y,s=i.height,l=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,c=((r=window)===null||r===void 0?void 0:r.scrollY)||0,d=o+l+u,h=a+this.offset.top+s/2+c;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Lce(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&Y(r)&&Y(i))return!0}return!1}function Uce(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function AO(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,o=t.endAngle,a=Tt(e,n,r,i),s=Tt(e,n,r,o);return{points:[a,s],cx:e,cy:n,radius:r,startAngle:i,endAngle:o}}function Fce(t,e,n){var r,i,o,a;if(t==="horizontal")r=e.x,o=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,o=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,l=e.cy,u=e.innerRadius,c=e.outerRadius,d=e.angle,h=Tt(s,l,u,d),g=Tt(s,l,c,d);r=h.x,i=h.y,o=g.x,a=g.y}else return AO(e);return[{x:r,y:i},{x:o,y:a}]}function Zl(t){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zl(t)}function iT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iT(Object(n),!0).forEach(function(r){Bce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bce(t,e,n){return e=zce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zce(t){var e=Gce(t,"string");return Zl(e)=="symbol"?e:e+""}function Gce(t,e){if(Zl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hce(t){var e,n,r=t.element,i=t.tooltipEventType,o=t.isActive,a=t.activeCoordinate,s=t.activePayload,l=t.offset,u=t.activeTooltipIndex,c=t.tooltipAxisBandSize,d=t.layout,h=t.chartName,g=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!g||!o||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,x=qs;if(h==="ScatterChart")y=a,x=Eae;else if(h==="BarChart")y=Uce(d,a,l,c),x=Q0;else if(d==="radial"){var v=AO(a),b=v.cx,w=v.cy,_=v.radius,T=v.startAngle,S=v.endAngle;y={cx:b,cy:w,startAngle:T,endAngle:S,innerRadius:_,outerRadius:_},x=PI}else y={points:Fce(d,a,l)},x=qs;var E=tc(tc(tc(tc({stroke:"#ccc",pointerEvents:"none"},l),y),xe(g,!1)),{},{payload:s,payloadIndex:u,className:me("recharts-tooltip-cursor",g.className)});return P.isValidElement(g)?P.cloneElement(g,E):P.createElement(x,E)}var qce=["item"],Vce=["children","className","width","height","style","compact","title","desc"];function Ma(t){"@babel/helpers - typeof";return Ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ma(t)}function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qo.apply(this,arguments)}function oT(t,e){return Jce(t)||Kce(t,e)||PO(t,e)||Wce()}function Wce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kce(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,e!==0)for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}function Jce(t){if(Array.isArray(t))return t}function aT(t,e){if(t==null)return{};var n=Yce(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yce(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Xce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,NO(r.key),r)}}function Zce(t,e,n){return e&&Qce(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function ede(t,e,n){return e=tf(e),tde(t,CO()?Reflect.construct(e,n||[],tf(t).constructor):e.apply(t,n))}function tde(t,e){if(e&&(Ma(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nde(t)}function nde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function CO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CO=function(){return!!t})()}function tf(t){return tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tf(t)}function rde(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cy(t,e)}function Cy(t,e){return Cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cy(t,e)}function $a(t){return ade(t)||ode(t)||PO(t)||ide()}function ide(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PO(t,e){if(t){if(typeof t=="string")return Py(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Py(t,e)}}function ode(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ade(t){if(Array.isArray(t))return Py(t)}function Py(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sT(Object(n),!0).forEach(function(r){le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function le(t,e,n){return e=NO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NO(t){var e=sde(t,"string");return Ma(e)=="symbol"?e:e+""}function sde(t,e){if(Ma(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ma(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lde={xAxis:["bottom","top"],yAxis:["left","right"]},ude={width:"100%",height:"100%"},IO={x:0,y:0};function nc(t){return t}var cde=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},dde=function(e,n,r,i){var o=n.find(function(c){return c&&c.index===r});if(o){if(e==="horizontal")return{x:o.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:o.coordinate};if(e==="centric"){var a=o.coordinate,s=i.radius;return z(z(z({},i),Tt(i.cx,i.cy,s,a)),{},{angle:a,radius:s})}var l=o.coordinate,u=i.angle;return z(z(z({},i),Tt(i.cx,i.cy,l,u)),{},{angle:u,radius:l})}return IO},wh=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,o=n.dataEndIndex,a=(r??[]).reduce(function(s,l){var u=l.props.data;return u&&u.length?[].concat($a(s),$a(u)):s},[]);return a.length>0?a:e&&e.length&&Y(i)&&Y(o)?e.slice(i,o+1):[]};function OO(t){return t==="number"?[0,"auto"]:void 0}var Ny=function(e,n,r,i){var o=e.graphicalItems,a=e.tooltipAxis,s=wh(n,e);return r<0||!o||!o.length||r>=s.length?null:o.reduce(function(l,u){var c,d=(c=u.props.data)!==null&&c!==void 0?c:n;d&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(d=d.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var g=d===void 0?s:d;h=nd(g,a.dataKey,i)}else h=d&&d[r]||s[r];return h?[].concat($a(l),[kI(u,h)]):l},[])},lT=function(e,n,r,i){var o=i||{x:e.chartX,y:e.chartY},a=cde(o,r),s=e.orderedTooltipTicks,l=e.tooltipAxis,u=e.tooltipTicks,c=nre(a,s,u,l);if(c>=0&&u){var d=u[c]&&u[c].value,h=Ny(e,n,c,d),g=dde(r,s,c,o);return{activeTooltipIndex:c,activeLabel:d,activePayload:h,activeCoordinate:g}}return null},fde=function(e,n){var r=n.axes,i=n.graphicalItems,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=e.stackOffset,g=EI(c,o);return r.reduce(function(y,x){var v,b=x.type.defaultProps!==void 0?z(z({},x.type.defaultProps),x.props):x.props,w=b.type,_=b.dataKey,T=b.allowDataOverflow,S=b.allowDuplicatedCategory,E=b.scale,k=b.ticks,A=b.includeHidden,C=b[a];if(y[C])return y;var M=wh(e.data,{graphicalItems:i.filter(function(q){var X,se=a in q.props?q.props[a]:(X=q.type.defaultProps)===null||X===void 0?void 0:X[a];return se===C}),dataStartIndex:l,dataEndIndex:u}),R=M.length,L,U,N;Lce(b.domain,T,w)&&(L=Jg(b.domain,null,T),g&&(w==="number"||E!=="auto")&&(N=Hs(M,_,"category")));var D=OO(w);if(!L||L.length===0){var O,F=(O=b.domain)!==null&&O!==void 0?O:D;if(_){if(L=Hs(M,_,w),w==="category"&&g){var I=BH(L);S&&I?(U=L,L=zd(0,R)):S||(L=V1(F,L,x).reduce(function(q,X){return q.indexOf(X)>=0?q:[].concat($a(q),[X])},[]))}else if(w==="category")S?L=L.filter(function(q){return q!==""&&!be(q)}):L=V1(F,L,x).reduce(function(q,X){return q.indexOf(X)>=0||X===""||be(X)?q:[].concat($a(q),[X])},[]);else if(w==="number"){var $=sre(M,i.filter(function(q){var X,se,he=a in q.props?q.props[a]:(X=q.type.defaultProps)===null||X===void 0?void 0:X[a],we="hide"in q.props?q.props.hide:(se=q.type.defaultProps)===null||se===void 0?void 0:se.hide;return he===C&&(A||!we)}),_,o,c);$&&(L=$)}g&&(w==="number"||E!=="auto")&&(N=Hs(M,_,"category"))}else g?L=zd(0,R):s&&s[C]&&s[C].hasStack&&w==="number"?L=h==="expand"?[0,1]:TI(s[C].stackGroups,l,u):L=SI(M,i.filter(function(q){var X=a in q.props?q.props[a]:q.type.defaultProps[a],se="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return X===C&&(A||!se)}),w,c,!0);if(w==="number")L=Ay(d,L,C,o,k),F&&(L=Jg(F,L,T));else if(w==="category"&&F){var B=F,G=L.every(function(q){return B.indexOf(q)>=0});G&&(L=B)}}return z(z({},y),{},le({},C,z(z({},b),{},{axisType:o,domain:L,categoricalDomain:N,duplicateDomain:U,originalDomain:(v=b.domain)!==null&&v!==void 0?v:D,isCategorical:g,layout:c})))},{})},hde=function(e,n){var r=n.graphicalItems,i=n.Axis,o=n.axisType,a=n.axisIdKey,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.layout,d=e.children,h=wh(e.data,{graphicalItems:r,dataStartIndex:l,dataEndIndex:u}),g=h.length,y=EI(c,o),x=-1;return r.reduce(function(v,b){var w=b.type.defaultProps!==void 0?z(z({},b.type.defaultProps),b.props):b.props,_=w[a],T=OO("number");if(!v[_]){x++;var S;return y?S=zd(0,g):s&&s[_]&&s[_].hasStack?(S=TI(s[_].stackGroups,l,u),S=Ay(d,S,_,o)):(S=Jg(T,SI(h,r.filter(function(E){var k,A,C=a in E.props?E.props[a]:(k=E.type.defaultProps)===null||k===void 0?void 0:k[a],M="hide"in E.props?E.props.hide:(A=E.type.defaultProps)===null||A===void 0?void 0:A.hide;return C===_&&!M}),"number",c),i.defaultProps.allowDataOverflow),S=Ay(d,S,_,o)),z(z({},v),{},le({},_,z(z({axisType:o},i.defaultProps),{},{hide:!0,orientation:En(lde,"".concat(o,".").concat(x%2),null),domain:S,originalDomain:T,isCategorical:y,layout:c})))}return v},{})},pde=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,o=n.AxisComp,a=n.graphicalItems,s=n.stackGroups,l=n.dataStartIndex,u=n.dataEndIndex,c=e.children,d="".concat(i,"Id"),h=Wn(c,o),g={};return h&&h.length?g=fde(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u}):a&&a.length&&(g=hde(e,{Axis:o,graphicalItems:a,axisType:i,axisIdKey:d,stackGroups:s,dataStartIndex:l,dataEndIndex:u})),g},mde=function(e){var n=Ao(e),r=Li(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:T0(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Od(n,r)}},uT=function(e){var n=e.children,r=e.defaultShowTooltip,i=nn(n,Ta),o=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(o=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},gde=function(e){return!e||!e.length?!1:e.some(function(n){var r=br(n&&n.type);return r&&r.indexOf("Bar")>=0})},cT=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},yde=function(e,n){var r=e.props,i=e.graphicalItems,o=e.xAxisMap,a=o===void 0?{}:o,s=e.yAxisMap,l=s===void 0?{}:s,u=r.width,c=r.height,d=r.children,h=r.margin||{},g=nn(d,Ta),y=nn(d,na),x=Object.keys(l).reduce(function(S,E){var k=l[E],A=k.orientation;return!k.mirror&&!k.hide?z(z({},S),{},le({},A,S[A]+k.width)):S},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(S,E){var k=a[E],A=k.orientation;return!k.mirror&&!k.hide?z(z({},S),{},le({},A,En(S,"".concat(A))+k.height)):S},{top:h.top||0,bottom:h.bottom||0}),b=z(z({},v),x),w=b.bottom;g&&(b.bottom+=g.props.height||Ta.defaultProps.height),y&&n&&(b=ore(b,i,r,n));var _=u-b.left-b.right,T=c-b.top-b.bottom;return z(z({brushBottom:w},b),{},{width:Math.max(_,0),height:Math.max(T,0)})},vde=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},xde=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=i===void 0?"axis":i,a=e.validateTooltipEventTypes,s=a===void 0?["axis"]:a,l=e.axisComponents,u=e.legendContent,c=e.formatAxisMap,d=e.defaultProps,h=function(b,w){var _=w.graphicalItems,T=w.stackGroups,S=w.offset,E=w.updateId,k=w.dataStartIndex,A=w.dataEndIndex,C=b.barSize,M=b.layout,R=b.barGap,L=b.barCategoryGap,U=b.maxBarSize,N=cT(M),D=N.numericAxisName,O=N.cateAxisName,F=gde(_),I=[];return _.forEach(function($,B){var G=wh(b.data,{graphicalItems:[$],dataStartIndex:k,dataEndIndex:A}),q=$.type.defaultProps!==void 0?z(z({},$.type.defaultProps),$.props):$.props,X=q.dataKey,se=q.maxBarSize,he=q["".concat(D,"Id")],we=q["".concat(O,"Id")],W={},Q=l.reduce(function(Qe,jt){var Lr=w["".concat(jt.axisType,"Map")],rs=q["".concat(jt.axisType,"Id")];Lr&&Lr[rs]||jt.axisType==="zAxis"||ro();var pu=Lr[rs];return z(z({},Qe),{},le(le({},jt.axisType,pu),"".concat(jt.axisType,"Ticks"),Li(pu)))},W),V=Q[O],te=Q["".concat(O,"Ticks")],ie=T&&T[he]&&T[he].hasStack&&xre($,T[he].stackGroups),H=br($.type).indexOf("Bar")>=0,ke=Od(V,te),fe=[],Oe=F&&rre({barSize:C,stackGroups:T,totalSize:vde(Q,O)});if(H){var J,Me,Ct=be(se)?U:se,Z=(J=(Me=Od(V,te,!0))!==null&&Me!==void 0?Me:Ct)!==null&&J!==void 0?J:0;fe=ire({barGap:R,barCategoryGap:L,bandSize:Z!==ke?Z:ke,sizeList:Oe[we],maxBarSize:Ct}),Z!==ke&&(fe=fe.map(function(Qe){return z(z({},Qe),{},{position:z(z({},Qe.position),{},{offset:Qe.position.offset-Z/2})})}))}var Xe=$&&$.type&&$.type.getComposedData;Xe&&I.push({props:z(z({},Xe(z(z({},Q),{},{displayedData:G,props:b,dataKey:X,item:$,bandSize:ke,barPosition:fe,offset:S,stackedData:ie,layout:M,dataStartIndex:k,dataEndIndex:A}))),{},le(le(le({key:$.key||"item-".concat(B)},D,Q[D]),O,Q[O]),"animationId",E)),childIndex:eq($,b.children),item:$})}),I},g=function(b,w){var _=b.props,T=b.dataStartIndex,S=b.dataEndIndex,E=b.updateId;if(!U_({props:_}))return null;var k=_.children,A=_.layout,C=_.stackOffset,M=_.data,R=_.reverseStackOrder,L=cT(A),U=L.numericAxisName,N=L.cateAxisName,D=Wn(k,r),O=gre(M,D,"".concat(U,"Id"),"".concat(N,"Id"),C,R),F=l.reduce(function(q,X){var se="".concat(X.axisType,"Map");return z(z({},q),{},le({},se,pde(_,z(z({},X),{},{graphicalItems:D,stackGroups:X.axisType===U&&O,dataStartIndex:T,dataEndIndex:S}))))},{}),I=yde(z(z({},F),{},{props:_,graphicalItems:D}),w==null?void 0:w.legendBBox);Object.keys(F).forEach(function(q){F[q]=c(_,F[q],I,q.replace("Map",""),n)});var $=F["".concat(N,"Map")],B=mde($),G=h(_,z(z({},F),{},{dataStartIndex:T,dataEndIndex:S,updateId:E,graphicalItems:D,stackGroups:O,offset:I}));return z(z({formattedGraphicalItems:G,graphicalItems:D,offset:I,stackGroups:O},B),F)},y=function(v){function b(w){var _,T,S;return Xce(this,b),S=ede(this,b,[w]),le(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),le(S,"accessibilityManager",new jce),le(S,"handleLegendBBoxUpdate",function(E){if(E){var k=S.state,A=k.dataStartIndex,C=k.dataEndIndex,M=k.updateId;S.setState(z({legendBBox:E},g({props:S.props,dataStartIndex:A,dataEndIndex:C,updateId:M},z(z({},S.state),{},{legendBBox:E}))))}}),le(S,"handleReceiveSyncEvent",function(E,k,A){if(S.props.syncId===E){if(A===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(k)}}),le(S,"handleBrushChange",function(E){var k=E.startIndex,A=E.endIndex;if(k!==S.state.dataStartIndex||A!==S.state.dataEndIndex){var C=S.state.updateId;S.setState(function(){return z({dataStartIndex:k,dataEndIndex:A},g({props:S.props,dataStartIndex:k,dataEndIndex:A,updateId:C},S.state))}),S.triggerSyncEvent({dataStartIndex:k,dataEndIndex:A})}}),le(S,"handleMouseEnter",function(E){var k=S.getMouseInfo(E);if(k){var A=z(z({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseEnter;ge(C)&&C(A,E)}}),le(S,"triggeredAfterMouseMove",function(E){var k=S.getMouseInfo(E),A=k?z(z({},k),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var C=S.props.onMouseMove;ge(C)&&C(A,E)}),le(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),le(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),le(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),le(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var k={isTooltipActive:!1};S.setState(k),S.triggerSyncEvent(k);var A=S.props.onMouseLeave;ge(A)&&A(k,E)}),le(S,"handleOuterEvent",function(E){var k=ZH(E),A=En(S.props,"".concat(k));if(k&&ge(A)){var C,M;/.*touch.*/i.test(k)?M=S.getMouseInfo(E.changedTouches[0]):M=S.getMouseInfo(E),A((C=M)!==null&&C!==void 0?C:{},E)}}),le(S,"handleClick",function(E){var k=S.getMouseInfo(E);if(k){var A=z(z({},k),{},{isTooltipActive:!0});S.setState(A),S.triggerSyncEvent(A);var C=S.props.onClick;ge(C)&&C(A,E)}}),le(S,"handleMouseDown",function(E){var k=S.props.onMouseDown;if(ge(k)){var A=S.getMouseInfo(E);k(A,E)}}),le(S,"handleMouseUp",function(E){var k=S.props.onMouseUp;if(ge(k)){var A=S.getMouseInfo(E);k(A,E)}}),le(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),le(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),le(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),le(S,"handleDoubleClick",function(E){var k=S.props.onDoubleClick;if(ge(k)){var A=S.getMouseInfo(E);k(A,E)}}),le(S,"handleContextMenu",function(E){var k=S.props.onContextMenu;if(ge(k)){var A=S.getMouseInfo(E);k(A,E)}}),le(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&Mp.emit($p,S.props.syncId,E,S.eventEmitterSymbol)}),le(S,"applySyncEvent",function(E){var k=S.props,A=k.layout,C=k.syncMethod,M=S.state.updateId,R=E.dataStartIndex,L=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState(z({dataStartIndex:R,dataEndIndex:L},g({props:S.props,dataStartIndex:R,dataEndIndex:L,updateId:M},S.state)));else if(E.activeTooltipIndex!==void 0){var U=E.chartX,N=E.chartY,D=E.activeTooltipIndex,O=S.state,F=O.offset,I=O.tooltipTicks;if(!F)return;if(typeof C=="function")D=C(I,E);else if(C==="value"){D=-1;for(var $=0;$<I.length;$++)if(I[$].value===E.activeLabel){D=$;break}}var B=z(z({},F),{},{x:F.left,y:F.top}),G=Math.min(U,B.x+B.width),q=Math.min(N,B.y+B.height),X=I[D]&&I[D].value,se=Ny(S.state,S.props.data,D),he=I[D]?{x:A==="horizontal"?I[D].coordinate:G,y:A==="horizontal"?q:I[D].coordinate}:IO;S.setState(z(z({},E),{},{activeLabel:X,activeCoordinate:he,activePayload:se,activeTooltipIndex:D}))}else S.setState(E)}),le(S,"renderCursor",function(E){var k,A=S.state,C=A.isTooltipActive,M=A.activeCoordinate,R=A.activePayload,L=A.offset,U=A.activeTooltipIndex,N=A.tooltipAxisBandSize,D=S.getTooltipEventType(),O=(k=E.props.active)!==null&&k!==void 0?k:C,F=S.props.layout,I=E.key||"_recharts-cursor";return j.createElement(Hce,{key:I,activeCoordinate:M,activePayload:R,activeTooltipIndex:U,chartName:n,element:E,isActive:O,layout:F,offset:L,tooltipAxisBandSize:N,tooltipEventType:D})}),le(S,"renderPolarAxis",function(E,k,A){var C=En(E,"type.axisType"),M=En(S.state,"".concat(C,"Map")),R=E.type.defaultProps,L=R!==void 0?z(z({},R),E.props):E.props,U=M&&M[L["".concat(C,"Id")]];return P.cloneElement(E,z(z({},U),{},{className:me(C,U.className),key:E.key||"".concat(k,"-").concat(A),ticks:Li(U,!0)}))}),le(S,"renderPolarGrid",function(E){var k=E.props,A=k.radialLines,C=k.polarAngles,M=k.polarRadius,R=S.state,L=R.radiusAxisMap,U=R.angleAxisMap,N=Ao(L),D=Ao(U),O=D.cx,F=D.cy,I=D.innerRadius,$=D.outerRadius;return P.cloneElement(E,{polarAngles:Array.isArray(C)?C:Li(D,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(M)?M:Li(N,!0).map(function(B){return B.coordinate}),cx:O,cy:F,innerRadius:I,outerRadius:$,key:E.key||"polar-grid",radialLines:A})}),le(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,k=S.props,A=k.children,C=k.width,M=k.height,R=S.props.margin||{},L=C-(R.left||0)-(R.right||0),U=wI({children:A,formattedGraphicalItems:E,legendWidth:L,legendContent:u});if(!U)return null;var N=U.item,D=aT(U,qce);return P.cloneElement(N,z(z({},D),{},{chartWidth:C,chartHeight:M,margin:R,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),le(S,"renderTooltip",function(){var E,k=S.props,A=k.children,C=k.accessibilityLayer,M=nn(A,hr);if(!M)return null;var R=S.state,L=R.isTooltipActive,U=R.activeCoordinate,N=R.activePayload,D=R.activeLabel,O=R.offset,F=(E=M.props.active)!==null&&E!==void 0?E:L;return P.cloneElement(M,{viewBox:z(z({},O),{},{x:O.left,y:O.top}),active:F,label:D,payload:F?N:[],coordinate:U,accessibilityLayer:C})}),le(S,"renderBrush",function(E){var k=S.props,A=k.margin,C=k.data,M=S.state,R=M.offset,L=M.dataStartIndex,U=M.dataEndIndex,N=M.updateId;return P.cloneElement(E,{key:E.key||"_recharts-brush",onChange:Xu(S.handleBrushChange,E.props.onChange),data:C,x:Y(E.props.x)?E.props.x:R.left,y:Y(E.props.y)?E.props.y:R.top+R.height+R.brushBottom-(A.bottom||0),width:Y(E.props.width)?E.props.width:R.width,startIndex:L,endIndex:U,updateId:"brush-".concat(N)})}),le(S,"renderReferenceElement",function(E,k,A){if(!E)return null;var C=S,M=C.clipPathId,R=S.state,L=R.xAxisMap,U=R.yAxisMap,N=R.offset,D=E.type.defaultProps||{},O=E.props,F=O.xAxisId,I=F===void 0?D.xAxisId:F,$=O.yAxisId,B=$===void 0?D.yAxisId:$;return P.cloneElement(E,{key:E.key||"".concat(k,"-").concat(A),xAxis:L[I],yAxis:U[B],viewBox:{x:N.left,y:N.top,width:N.width,height:N.height},clipPathId:M})}),le(S,"renderActivePoints",function(E){var k=E.item,A=E.activePoint,C=E.basePoint,M=E.childIndex,R=E.isRange,L=[],U=k.props.key,N=k.item.type.defaultProps!==void 0?z(z({},k.item.type.defaultProps),k.item.props):k.item.props,D=N.activeDot,O=N.dataKey,F=z(z({index:M,dataKey:O,cx:A.x,cy:A.y,r:4,fill:X0(k.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},xe(D,!1)),rd(D));return L.push(b.renderActiveDot(D,F,"".concat(U,"-activePoint-").concat(M))),C?L.push(b.renderActiveDot(D,z(z({},F),{},{cx:C.x,cy:C.y}),"".concat(U,"-basePoint-").concat(M))):R&&L.push(null),L}),le(S,"renderGraphicChild",function(E,k,A){var C=S.filterFormatItem(E,k,A);if(!C)return null;var M=S.getTooltipEventType(),R=S.state,L=R.isTooltipActive,U=R.tooltipAxis,N=R.activeTooltipIndex,D=R.activeLabel,O=S.props.children,F=nn(O,hr),I=C.props,$=I.points,B=I.isRange,G=I.baseLine,q=C.item.type.defaultProps!==void 0?z(z({},C.item.type.defaultProps),C.item.props):C.item.props,X=q.activeDot,se=q.hide,he=q.activeBar,we=q.activeShape,W=!!(!se&&L&&F&&(X||he||we)),Q={};M!=="axis"&&F&&F.props.trigger==="click"?Q={onClick:Xu(S.handleItemMouseEnter,E.props.onClick)}:M!=="axis"&&(Q={onMouseLeave:Xu(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:Xu(S.handleItemMouseEnter,E.props.onMouseEnter)});var V=P.cloneElement(E,z(z({},C.props),Q));function te(jt){return typeof U.dataKey=="function"?U.dataKey(jt.payload):null}if(W)if(N>=0){var ie,H;if(U.dataKey&&!U.allowDuplicatedCategory){var ke=typeof U.dataKey=="function"?te:"payload.".concat(U.dataKey.toString());ie=nd($,ke,D),H=B&&G&&nd(G,ke,D)}else ie=$==null?void 0:$[N],H=B&&G&&G[N];if(we||he){var fe=E.props.activeIndex!==void 0?E.props.activeIndex:N;return[P.cloneElement(E,z(z(z({},C.props),Q),{},{activeIndex:fe})),null,null]}if(!be(ie))return[V].concat($a(S.renderActivePoints({item:C,activePoint:ie,basePoint:H,childIndex:N,isRange:B})))}else{var Oe,J=(Oe=S.getItemByXY(S.state.activeCoordinate))!==null&&Oe!==void 0?Oe:{graphicalItem:V},Me=J.graphicalItem,Ct=Me.item,Z=Ct===void 0?E:Ct,Xe=Me.childIndex,Qe=z(z(z({},C.props),Q),{},{activeIndex:Xe});return[P.cloneElement(Z,Qe),null,null]}return B?[V,null,null]:[V,null]}),le(S,"renderCustomized",function(E,k,A){return P.cloneElement(E,z(z({key:"recharts-customized-".concat(A)},S.props),S.state))}),le(S,"renderMap",{CartesianGrid:{handler:nc,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:nc},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:nc},YAxis:{handler:nc},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((_=w.id)!==null&&_!==void 0?_:lu("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=bN(S.triggeredAfterMouseMove,(T=w.throttleDelay)!==null&&T!==void 0?T:1e3/60),S.state={},S}return rde(b,v),Zce(b,[{key:"componentDidMount",value:function(){var _,T;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(T=this.props.margin.top)!==null&&T!==void 0?T:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var _=this.props,T=_.children,S=_.data,E=_.height,k=_.layout,A=nn(T,hr);if(A){var C=A.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var M=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,R=Ny(this.state,S,C,M),L=this.state.tooltipTicks[C].coordinate,U=(this.state.offset.top+E)/2,N=k==="horizontal",D=N?{x:L,y:U}:{y:L,x:U},O=this.state.formattedGraphicalItems.find(function(I){var $=I.item;return $.type.name==="Scatter"});O&&(D=z(z({},D),O.props.points[C].tooltipPosition),R=O.props.points[C].tooltipPayload);var F={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:M,activePayload:R,activeCoordinate:D};this.setState(F),this.renderCursor(A),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(_,T){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==T.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==_.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==_.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(_){cg([nn(_.children,hr)],[nn(this.props.children,hr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var _=nn(this.props.children,hr);if(_&&typeof _.props.shared=="boolean"){var T=_.props.shared?"axis":"item";return s.indexOf(T)>=0?T:o}return o}},{key:"getMouseInfo",value:function(_){if(!this.container)return null;var T=this.container,S=T.getBoundingClientRect(),E=CQ(S),k={chartX:Math.round(_.pageX-E.left),chartY:Math.round(_.pageY-E.top)},A=S.width/T.offsetWidth||1,C=this.inRange(k.chartX,k.chartY,A);if(!C)return null;var M=this.state,R=M.xAxisMap,L=M.yAxisMap,U=this.getTooltipEventType(),N=lT(this.state,this.props.data,this.props.layout,C);if(U!=="axis"&&R&&L){var D=Ao(R).scale,O=Ao(L).scale,F=D&&D.invert?D.invert(k.chartX):null,I=O&&O.invert?O.invert(k.chartY):null;return z(z({},k),{},{xValue:F,yValue:I},N)}return N?z(z({},k),N):null}},{key:"inRange",value:function(_,T){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,k=_/S,A=T/S;if(E==="horizontal"||E==="vertical"){var C=this.state.offset,M=k>=C.left&&k<=C.left+C.width&&A>=C.top&&A<=C.top+C.height;return M?{x:k,y:A}:null}var R=this.state,L=R.angleAxisMap,U=R.radiusAxisMap;if(L&&U){var N=Ao(L);return J1({x:k,y:A},N)}return null}},{key:"parseEventsOfWrapper",value:function(){var _=this.props.children,T=this.getTooltipEventType(),S=nn(_,hr),E={};S&&T==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var k=rd(this.props,this.handleOuterEvent);return z(z({},k),E)}},{key:"addListener",value:function(){Mp.on($p,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Mp.removeListener($p,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(_,T,S){for(var E=this.state.formattedGraphicalItems,k=0,A=E.length;k<A;k++){var C=E[k];if(C.item===_||C.props.key===_.key||T===br(C.item.type)&&S===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var _=this.clipPathId,T=this.state.offset,S=T.left,E=T.top,k=T.height,A=T.width;return j.createElement("defs",null,j.createElement("clipPath",{id:_},j.createElement("rect",{x:S,y:E,height:k,width:A})))}},{key:"getXScales",value:function(){var _=this.state.xAxisMap;return _?Object.entries(_).reduce(function(T,S){var E=oT(S,2),k=E[0],A=E[1];return z(z({},T),{},le({},k,A.scale))},{}):null}},{key:"getYScales",value:function(){var _=this.state.yAxisMap;return _?Object.entries(_).reduce(function(T,S){var E=oT(S,2),k=E[0],A=E[1];return z(z({},T),{},le({},k,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(_){var T;return(T=this.state.xAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getYScaleByAxisId",value:function(_){var T;return(T=this.state.yAxisMap)===null||T===void 0||(T=T[_])===null||T===void 0?void 0:T.scale}},{key:"getItemByXY",value:function(_){var T=this.state,S=T.formattedGraphicalItems,E=T.activeItem;if(S&&S.length)for(var k=0,A=S.length;k<A;k++){var C=S[k],M=C.props,R=C.item,L=R.type.defaultProps!==void 0?z(z({},R.type.defaultProps),R.props):R.props,U=br(R.type);if(U==="Bar"){var N=(M.data||[]).find(function(I){return pae(_,I)});if(N)return{graphicalItem:C,payload:N}}else if(U==="RadialBar"){var D=(M.data||[]).find(function(I){return J1(_,I)});if(D)return{graphicalItem:C,payload:D}}else if(hh(C,E)||ph(C,E)||Wl(C,E)){var O=yse({graphicalItem:C,activeTooltipItem:E,itemData:L.data}),F=L.activeIndex===void 0?O:L.activeIndex;return{graphicalItem:z(z({},C),{},{childIndex:F}),payload:Wl(C,E)?L.data[O]:C.props.data[O]}}}return null}},{key:"render",value:function(){var _=this;if(!U_(this))return null;var T=this.props,S=T.children,E=T.className,k=T.width,A=T.height,C=T.style,M=T.compact,R=T.title,L=T.desc,U=aT(T,Vce),N=xe(U,!1);if(M)return j.createElement(HE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement(fg,qo({},N,{width:k,height:A,title:R,desc:L}),this.renderClipPath(),B_(S,this.renderMap)));if(this.props.accessibilityLayer){var D,O;N.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,N.role=(O=this.props.role)!==null&&O!==void 0?O:"application",N.onKeyDown=function(I){_.accessibilityManager.keyboardEvent(I)},N.onFocus=function(){_.accessibilityManager.focus()}}var F=this.parseEventsOfWrapper();return j.createElement(HE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},j.createElement("div",qo({className:me("recharts-wrapper",E),style:z({position:"relative",cursor:"default",width:k,height:A},C)},F,{ref:function($){_.container=$}}),j.createElement(fg,qo({},N,{width:k,height:A,title:R,desc:L,style:ude}),this.renderClipPath(),B_(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);le(y,"displayName",n),le(y,"defaultProps",z({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),le(y,"getDerivedStateFromProps",function(v,b){var w=v.dataKey,_=v.data,T=v.children,S=v.width,E=v.height,k=v.layout,A=v.stackOffset,C=v.margin,M=b.dataStartIndex,R=b.dataEndIndex;if(b.updateId===void 0){var L=uT(v);return z(z(z({},L),{},{updateId:0},g(z(z({props:v},L),{},{updateId:0}),b)),{},{prevDataKey:w,prevData:_,prevWidth:S,prevHeight:E,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:T})}if(w!==b.prevDataKey||_!==b.prevData||S!==b.prevWidth||E!==b.prevHeight||k!==b.prevLayout||A!==b.prevStackOffset||!ta(C,b.prevMargin)){var U=uT(v),N={chartX:b.chartX,chartY:b.chartY,isTooltipActive:b.isTooltipActive},D=z(z({},lT(b,_,k)),{},{updateId:b.updateId+1}),O=z(z(z({},U),N),D);return z(z(z({},O),g(z({props:v},O),b)),{},{prevDataKey:w,prevData:_,prevWidth:S,prevHeight:E,prevLayout:k,prevStackOffset:A,prevMargin:C,prevChildren:T})}if(!cg(T,b.prevChildren)){var F,I,$,B,G=nn(T,Ta),q=G&&(F=(I=G.props)===null||I===void 0?void 0:I.startIndex)!==null&&F!==void 0?F:M,X=G&&($=(B=G.props)===null||B===void 0?void 0:B.endIndex)!==null&&$!==void 0?$:R,se=q!==M||X!==R,he=!be(_),we=he&&!se?b.updateId:b.updateId+1;return z(z({updateId:we},g(z(z({props:v},b),{},{updateId:we,dataStartIndex:q,dataEndIndex:X}),b)),{},{prevChildren:T,dataStartIndex:q,dataEndIndex:X})}return null}),le(y,"renderActiveDot",function(v,b,w){var _;return P.isValidElement(v)?_=P.cloneElement(v,b):ge(v)?_=v(b):_=j.createElement(Z0,b),j.createElement(Ke,{className:"recharts-active-dot",key:w},_)});var x=P.forwardRef(function(b,w){return j.createElement(y,qo({},b,{ref:w}))});return x.displayName=y.displayName,x},bde=xde({chartName:"AreaChart",GraphicalChild:vi,axisComponents:[{axisType:"xAxis",AxisComp:ix},{axisType:"yAxis",AxisComp:ox}],formatAxisMap:Hle});const wde=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",_de=()=>{const t=wde();return new Zv({apiKey:t})},Sde=`You are a professional nutritionist and vision AI. Identify all food items in this shared meal image.

For each dish on the table, provide:
1. The dish name (be specific, e.g., "Grilled Chicken Breast" not just "Chicken")
2. A bounding box in [ymin, xmin, ymax, xmax] format with normalized coordinates (0-1000 scale)
3. Total calorie estimate for the ENTIRE portion visible on the table
4. Confidence score (0-1) based on how clearly you can identify the dish

IMPORTANT:
- Detect ALL distinct food items/dishes in the image
- Each dish should have its own bounding box
- Bounding boxes should tightly encompass each dish
- Calorie estimates are for the FULL portion shown, not per serving
- If the image contains no food, return an empty dishes array

Return ONLY a valid JSON object with this exact format:
{
  "dishes": [
    {
      "dish_name": "Dish name here",
      "bounding_box": [ymin, xmin, ymax, xmax],
      "estimated_total_calories": number,
      "confidence_score": 0.95
    }
  ]
}`,Ede=t=>{const e=(t==null?void 0:t.message)||String(t)||"",n=e.toLowerCase();return e.includes("429")||n.includes("quota")||n.includes("limit")||n.includes("exhausted")?"AI Limit Reached: You've sent too many requests. Please wait about 60 seconds for the quota to reset.":n.includes("api key")?"Configuration Error: Invalid API key. Please check your settings.":n.includes("network")||n.includes("fetch")?"Connection Error: Please check your internet connection and try again.":e||"An unexpected AI error occurred."};async function RO(t,e=2,n=2e3){try{return await t()}catch(r){const i=(r==null?void 0:r.message)||"";if((i.includes("429")||i.toLowerCase().includes("quota"))&&e>0)return console.warn(`Gemini Quota hit. Retrying in ${n}ms... (${e} retries left)`),await new Promise(a=>setTimeout(a,n)),RO(t,e-1,n*2);throw r}}const dT=async t=>{try{return await RO(async()=>{const n=await _de().models.generateContent({model:"gemini-2.0-flash-exp",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:t}},{text:"Analyze this shared meal image and identify all dishes with their locations and calorie estimates."}]},config:{systemInstruction:Sde,responseMimeType:"application/json",responseSchema:{type:pe.OBJECT,properties:{dishes:{type:pe.ARRAY,items:{type:pe.OBJECT,properties:{dish_name:{type:pe.STRING},bounding_box:{type:pe.ARRAY,items:{type:pe.INTEGER}},estimated_total_calories:{type:pe.INTEGER},confidence_score:{type:pe.NUMBER}},required:["dish_name","bounding_box","estimated_total_calories","confidence_score"]}}},required:["dishes"]},temperature:.4,topP:.95}}),r=JSON.parse(n.text||"{}");if(!r.dishes||!Array.isArray(r.dishes))throw new Error("Invalid response format from AI");if(r.dishes.forEach((i,o)=>{if(!Array.isArray(i.bounding_box)||i.bounding_box.length!==4)throw new Error(`Invalid bounding box format for dish ${o+1}`);i.bounding_box=i.bounding_box.map(a=>Math.max(0,Math.min(1e3,a)))}),r.dishes.length===0)throw new Error("No dishes detected in this image. Please ensure the photo clearly shows food items on a table.");return r})}catch(e){throw console.error("Gemini Shared Meal Analysis Error:",e),new Error(Ede(e))}},Tde=(t,e=600,n=150)=>new Promise((r,i)=>{const o=new FileReader;o.readAsDataURL(t),o.onload=a=>{var l;const s=new Image;s.src=(l=a.target)==null?void 0:l.result,s.onload=()=>{const u=document.createElement("canvas");let c=s.width,d=s.height;c>e&&(d=e/c*d,c=e),u.width=c,u.height=d;const h=u.getContext("2d");h==null||h.drawImage(s,0,0,c,d);let g=.5,y=u.toDataURL("image/jpeg",g);const x=n*1024;y.split(",")[1].length*3/4>x&&(g=.35,y=u.toDataURL("image/jpeg",g),y.split(",")[1].length*3/4>x&&(g=.25,y=u.toDataURL("image/jpeg",g))),r(y)},s.onerror=u=>i(u)},o.onerror=a=>i(a)}),kde=({onClose:t,onSuccess:e,initialImage:n})=>{const[r,i]=P.useState(n?"analyzing":"upload"),[o,a]=P.useState(n||null),[s,l]=P.useState([]),[u,c]=P.useState(new Map),[d,h]=P.useState(null),[g,y]=P.useState(50),[x,v]=P.useState(null),[b,w]=P.useState(!1),_=P.useRef(null),T=P.useRef(null),[S,E]=P.useState({width:0,height:0}),k=async N=>{if(N.target.files&&N.target.files[0]){const D=N.target.files[0];try{const O=await Tde(D,600,150);a(O),v(null)}catch{v("Failed to process image.")}}};P.useEffect(()=>{n&&r==="analyzing"&&(async()=>{try{const D=n.split(",")[1],O=await dT(D);l(O.dishes),i("selection")}catch(D){v(D.message),i("upload")}})()},[n]);const A=async()=>{if(o){i("analyzing"),v(null);try{const N=o.split(",")[1],D=await dT(N);l(D.dishes),i("selection")}catch(N){v(N.message),i("upload")}}};P.useEffect(()=>{if(T.current&&r==="selection"){const N=()=>{T.current&&E({width:T.current.offsetWidth,height:T.current.offsetHeight})};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)}},[r]);const C=N=>{if(!T.current)return{x:0,y:0};const D=T.current,O=D.offsetWidth,F=D.offsetHeight,I=D.naturalWidth,$=D.naturalHeight,B=(N[1]+N[3])/2,G=(N[0]+N[2])/2,q=B/1e3,X=G/1e3,se=I/$,he=O/F;let we=O,W=F,Q=0,V=0;return se>he?(W=O/se,V=(F-W)/2):(we=F*se,Q=(O-we)/2),{x:q*we+Q,y:X*W+V}},M=N=>{h(N),y(u.get(N)||50)},R=()=>{if(d!==null){const N=new Map(u);g>0?N.set(d,g):N.delete(d),c(N),h(null)}},L=()=>{let N=0;return u.forEach((D,O)=>{const F=s[O];N+=Math.round(F.estimated_total_calories*D/100)}),N},U=async()=>{if(u.size===0){v("Please select at least one dish portion.");return}w(!0),v(null);try{const N=new Date,D=N.toISOString(),O=Ua(),F=`${N.getHours().toString().padStart(2,"0")}:${N.getMinutes().toString().padStart(2,"0")}`;for(const[I,$]of Array.from(u.entries())){const B=s[I],G=Math.round(B.estimated_total_calories*$/100),q={id:oP(),timestamp:D,date:O,time:F,food_item:`${B.dish_name} (Shared Meal - ${$}%)`,calories:G,protein:0,carbs:0,fat:0,confidence:B.confidence_score,imageUrl:o||void 0,isManual:!1};await iC(q)}e()}catch(N){console.error("Save failed:",N),v(N.message||"Failed to save entries.")}finally{w(!1)}};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] w-full max-w-md rounded-[40px] p-6 shadow-2xl border border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300 max-h-[95vh] overflow-y-auto no-scrollbar",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h2",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:r==="upload"?"Shared Meal":r==="analyzing"?"Analyzing...":r==="selection"?"Select Portions":"Confirm"}),p.jsx("button",{onClick:t,className:"p-2 bg-gray-100 dark:bg-white/5 rounded-full hover:bg-gray-200 dark:hover:bg-white/10 transition-colors",children:p.jsx(_n,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),x&&p.jsxs("div",{className:"mb-4 p-4 rounded-3xl flex items-start gap-3 bg-red-50 dark:bg-red-950/20 border border-red-100 dark:border-red-900/30 text-red-600 dark:text-red-400 animate-in shake-1 duration-300",children:[p.jsx(kv,{className:"shrink-0 mt-0.5",size:18}),p.jsx("p",{className:"text-xs font-semibold leading-relaxed",children:x})]}),r==="upload"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 p-5 rounded-[32px] border border-royal-100 dark:border-royal-900/30",children:[p.jsx("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 mb-2",children:" Shared Meal Mode"}),p.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed",children:"Take a photo of a table with multiple dishes. The AI will identify each dish and let you specify what percentage you ate."})]}),o?p.jsxs("div",{className:"rounded-[32px] overflow-hidden h-64 relative mb-6 shadow-xl border border-white/10",children:[p.jsx("img",{src:o,className:"w-full h-full object-cover",alt:"preview"}),p.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 bg-black/40 text-white p-2 rounded-full backdrop-blur-md",children:p.jsx(_n,{size:20})})]}):p.jsxs("div",{onClick:()=>{var N;return(N=_.current)==null?void 0:N.click()},className:"border-2 border-dashed border-gray-200 dark:border-white/10 rounded-[32px] h-64 flex flex-col items-center justify-center cursor-pointer hover:border-royal-400 hover:bg-royal-50 dark:hover:bg-white/5 transition-all group",children:[p.jsx(zi,{size:48,className:"text-gray-300 group-hover:text-royal-600 mb-4 transition-colors"}),p.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold",children:"Snap or Upload Photo"}),p.jsx("p",{className:"text-gray-400 text-xs mt-1 italic",children:"Capture the whole table"})]}),p.jsx("input",{type:"file",ref:_,accept:"image/*",onChange:k,className:"hidden"}),p.jsx(rt,{className:"w-full py-5 text-lg font-black",disabled:!o,onClick:A,children:"Detect Dishes"})]}),r==="analyzing"&&p.jsxs("div",{className:"py-20 text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-royal-100 dark:bg-royal-950/30 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:p.jsx(Hi,{size:32,className:"text-royal-600 dark:text-royal-400"})}),p.jsx("p",{className:"text-gray-900 dark:text-gray-50 font-bold mb-2",children:"Analyzing dishes..."}),p.jsx("p",{className:"text-xs text-gray-400",children:"This may take a few seconds"})]}),r==="selection"&&o&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"relative rounded-[32px] overflow-hidden border border-white/10 shadow-xl",children:[p.jsx("img",{ref:T,src:o,className:"w-full h-auto object-contain max-h-[400px]",alt:"Shared meal",onLoad:()=>{T.current&&E({width:T.current.offsetWidth,height:T.current.offsetHeight})}}),s.map((N,D)=>{const O=C(N.bounding_box),F=u.has(D);return p.jsx("button",{onClick:()=>M(D),className:`absolute w-10 h-10 rounded-full flex items-center justify-center transition-all transform -translate-x-1/2 -translate-y-1/2 ${F?"bg-emerald-500 shadow-lg shadow-emerald-500/50 scale-110":"bg-royal-600 shadow-lg shadow-royal-600/50 hover:scale-110"}`,style:{left:`${O.x}px`,top:`${O.y}px`},children:F?p.jsx(vM,{size:20,className:"text-white"}):p.jsx("span",{className:"text-white text-xs font-black",children:D+1})},D)})]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-[32px] p-5 border border-gray-100 dark:border-white/5",children:[p.jsxs("p",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3",children:["Detected Dishes (",s.length,")"]}),p.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto no-scrollbar",children:s.map((N,D)=>p.jsxs("button",{onClick:()=>M(D),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all ${u.has(D)?"bg-emerald-50 dark:bg-emerald-950/30 border border-emerald-200 dark:border-emerald-900/30":"bg-white dark:bg-white/5 border border-gray-100 dark:border-white/10 hover:border-royal-300"}`,children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"w-6 h-6 rounded-full bg-royal-600 text-white text-xs font-black flex items-center justify-center",children:D+1}),p.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-50 truncate",children:N.dish_name})]}),u.has(D)&&p.jsxs("span",{className:"text-xs font-black text-emerald-600 dark:text-emerald-400",children:[u.get(D),"%"]})]},D))})]}),u.size>0&&p.jsxs(rt,{className:"w-full py-5 text-lg font-black",onClick:()=>i("confirmation"),children:["Review Selection (",u.size," ",u.size===1?"dish":"dishes",")"]})]}),r==="confirmation"&&p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"bg-royal-600 rounded-[32px] p-6 text-white shadow-xl",children:[p.jsx("p",{className:"text-royal-100 text-[10px] font-black uppercase tracking-widest mb-1",children:"Total Calories"}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-5xl font-black tracking-tighter",children:L()}),p.jsx("span",{className:"text-xl font-bold opacity-70",children:"kcal"})]}),p.jsxs("p",{className:"text-xs text-white/70 mt-2",children:["From ",u.size," portion",u.size!==1?"s":""]})]}),p.jsx("div",{className:"space-y-3",children:Array.from(u.entries()).map(([N,D])=>{const O=s[N],F=Math.round(O.estimated_total_calories*D/100);return p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-4 border border-gray-100 dark:border-white/5",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 text-sm",children:O.dish_name}),p.jsxs("span",{className:"text-xs font-black text-royal-600 dark:text-royal-400",children:[D,"%"]})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("span",{className:"text-xs text-gray-400",children:["Portion of ",O.estimated_total_calories," kcal"]}),p.jsxs("span",{className:"font-extrabold text-gray-900 dark:text-gray-50",children:[F," kcal"]})]})]},N)})}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(rt,{variant:"ghost",className:"flex-1 py-4",onClick:()=>i("selection"),children:"Edit"}),p.jsx(rt,{className:"flex-1 py-4 text-lg font-black",onClick:U,isLoading:b,disabled:b,children:"Save All"})]})]}),d!==null&&r==="selection"&&p.jsx("div",{className:"fixed inset-x-0 bottom-0 z-[110] bg-white dark:bg-[#1a1c26] rounded-t-[40px] p-6 shadow-2xl border-t border-white/50 dark:border-white/5 animate-in slide-in-from-bottom duration-300",children:p.jsxs("div",{className:"max-w-md mx-auto",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h3",{className:"text-lg font-black text-gray-900 dark:text-gray-50",children:s[d].dish_name}),p.jsx("button",{onClick:()=>h(null),className:"p-2 bg-gray-100 dark:bg-white/5 rounded-full",children:p.jsx(AA,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),p.jsxs("div",{className:"bg-royal-50 dark:bg-royal-950/40 rounded-2xl p-4 mb-4",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsxs("span",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase flex items-center gap-1",children:[p.jsx(RM,{size:14})," Your Portion"]}),p.jsxs("span",{className:"text-2xl font-black text-royal-600 dark:text-royal-400",children:[g,"%"]})]}),p.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:g,onChange:N=>y(Number(N.target.value)),className:"w-full h-2 bg-royal-200 dark:bg-royal-900/30 rounded-full appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-6 [&::-webkit-slider-thumb]:h-6 [&::-webkit-slider-thumb]:bg-royal-600 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:cursor-pointer"})]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-4 mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsx("span",{className:"text-xs text-gray-400",children:"Your Calories"}),p.jsxs("span",{className:"text-xl font-black text-gray-900 dark:text-gray-50",children:[Math.round(s[d].estimated_total_calories*g/100)," kcal"]})]}),p.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:["Total dish: ",s[d].estimated_total_calories," kcal"]})]}),p.jsx(rt,{className:"w-full py-4 text-lg font-black",onClick:R,children:"Confirm Selection"})]})})]})})},Ade=()=>{const[t,e]=P.useState([]),[n,r]=P.useState([]),[i,o]=P.useState(!1),[a,s]=P.useState(!1),[l,u]=P.useState(null),[c,d]=P.useState(null),[h,g]=P.useState(0),[y,x]=P.useState(2e3),[v,b]=P.useState(0),[w,_]=P.useState(!0),[T,S]=P.useState(""),[E,k]=P.useState(!1),[A,C]=P.useState(null),M=async()=>{try{const O=await oC(),F=Ua(),I=O.filter(X=>X.date===F);I.sort((X,se)=>se.timestamp.localeCompare(X.timestamp)),e(I),g(I.reduce((X,se)=>X+se.calories,0));const $=await Lv();x($);const B=await Uv();B!=null&&B.name&&S(B.name);const q=(await Ij()).slice(0,7).reverse().map(X=>({cal:X.totalCalories}));for(;q.length<7;)q.unshift({cal:0});r(q)}catch(O){console.error("Failed to load dashboard data",O)}finally{_(!1)}};P.useEffect(()=>{M();const O=()=>M();window.addEventListener("food-entry-updated",O);const F=()=>{console.log(" Dashboard: Midnight detected, reloading data..."),M()};return window.addEventListener("midnight-refresh",F),()=>{window.removeEventListener("food-entry-updated",O),window.removeEventListener("midnight-refresh",F)}},[]),P.useEffect(()=>{if(w)return;const O=Math.min(h/y*100,100),F=setTimeout(()=>{b(O)},100);return()=>clearTimeout(F)},[h,y,w]);const R=async O=>{await aC(O),await M()},L=O=>{u(null),d(O),o(!0)},U=async O=>{await Af(O),x(O),s(!1)},N=()=>{const O=h/y*100;if(O>=100)return{background:"repeating-linear-gradient(45deg, #facc15, #facc15 12px, #171717 12px, #171717 24px)",boxShadow:"0 0 12px rgba(250, 204, 21, 0.4)"};if(O<=60)return{background:"#10b981",boxShadow:"0 0 12px rgba(16, 185, 129, 0.4)"};if(O<=80)return{background:`linear-gradient(90deg, #10b981 0%, #10b981 ${60/O*100}%, #facc15 100%)`,boxShadow:"0 0 12px rgba(250, 204, 21, 0.3)"};const F=60/O*100,I=80/O*100;return{background:`linear-gradient(90deg, #10b981 0%, #10b981 ${F}%, #facc15 ${I}%, #f97316 100%)`,boxShadow:"0 0 12px rgba(249, 115, 22, 0.3)"}},D=O=>{if(O.isManual)return O.imageUrl?p.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-amber-50 dark:bg-amber-950/20 text-amber-600 dark:text-amber-400 text-[10px] font-bold tracking-wide",children:[p.jsx(IM,{size:10}),"EDITED"]}):p.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-gray-100 dark:bg-white/5 text-gray-500 dark:text-gray-400 text-[10px] font-bold tracking-wide",children:[p.jsx(fa,{size:10}),"MANUAL"]});const F=Math.round(O.confidence*100),I=F>80?"bg-emerald-50 dark:bg-emerald-950/20 text-emerald-600 dark:text-emerald-400":F>50?"bg-orange-50 dark:bg-orange-950/20 text-orange-600 dark:text-orange-400":"bg-rose-50 dark:bg-rose-950/20 text-rose-600 dark:text-rose-400";return p.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-[10px] font-bold tracking-wide ${I}`,children:[p.jsx(or,{size:10}),F,"% AI"]})};return p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in fade-in duration-500 overflow-hidden relative",children:[p.jsxs("div",{className:"flex-shrink-0 px-6 pt-10 space-y-8 pb-4",children:[p.jsxs("header",{className:"flex justify-between items-end",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),p.jsxs("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:["Hello ",T||"there",", ",p.jsx("br",{}),"Let's Eat Well."]})]}),p.jsx("div",{className:"w-12 h-12 bg-royal-100 dark:bg-royal-950/30 rounded-full flex items-center justify-center text-royal-600 dark:text-royal-400 shadow-sm border border-white dark:border-white/5",children:p.jsx(xb,{size:20})})]}),p.jsxs("div",{className:`relative rounded-[32px] p-6 text-white overflow-hidden shadow-xl transition-all duration-500 ${h>y?"bg-red-500 shadow-red-200 dark:shadow-red-900/40":"bg-royal-600 shadow-royal-200 dark:shadow-royal-900/40"}`,children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-black/10 rounded-full blur-3xl"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-white/70 text-xs font-bold uppercase tracking-widest mb-1",children:"Calories Consumed"}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-5xl font-bold tracking-tighter",children:w?"...":h}),p.jsx("span",{className:"text-lg text-white/60 font-medium",children:"kcal"})]})]}),p.jsx("div",{className:"text-right",children:p.jsxs("div",{className:"flex items-center justify-end gap-2 text-white/80 mb-1",children:[p.jsxs("span",{className:"text-xs font-semibold",children:["Goal: ",y]}),p.jsx("button",{onClick:()=>s(!0),className:"p-1.5 rounded-full bg-white/20 hover:bg-white/30 transition-colors backdrop-blur-sm",children:p.jsx(NA,{size:10})})]})})]}),p.jsx("div",{className:"w-full bg-black/20 rounded-full h-4 mb-3 overflow-hidden backdrop-blur-sm relative",children:p.jsx("div",{className:"h-full rounded-full transition-all duration-1000 ease-out will-change-[width] flex items-center justify-center overflow-hidden",style:{width:`${v}%`,...N()},children:h/y>=1&&p.jsx("span",{className:"text-[10px] font-black tracking-tighter text-white drop-shadow-md animate-pulse",children:"OVER LIMIT"})})}),p.jsx("div",{className:"flex justify-end",children:h>y?p.jsxs("div",{className:"flex items-center gap-1.5 bg-white/20 backdrop-blur-md px-3 py-1 rounded-full animate-pulse",children:[p.jsx(gM,{size:14,className:"text-white",fill:"white"}),p.jsxs("span",{className:"font-bold text-xs text-white",children:[Math.abs(y-h).toLocaleString()," kcal over limit"]})]}):p.jsxs("p",{className:"text-xs font-medium text-white/80",children:[Math.max(y-h,0).toLocaleString()," kcal remaining"]})})]})]}),p.jsxs(Mt,{className:"flex items-center justify-between p-4 overflow-hidden relative",children:[p.jsxs("div",{className:"z-10",children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(Hi,{size:14,className:"text-royal-600 dark:text-royal-400"}),p.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest",children:"Weekly Trend"})]}),p.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Consistent Tracking"})]}),p.jsx("div",{className:"absolute right-0 bottom-0 top-0 w-32 opacity-50 dark:opacity-30",children:p.jsx(wQ,{width:"100%",height:"100%",children:p.jsxs(bde,{data:n,children:[p.jsx("defs",{children:p.jsxs("linearGradient",{id:"colorCal",x1:"0",y1:"0",x2:"0",y2:"1",children:[p.jsx("stop",{offset:"5%",stopColor:"#7c3aed",stopOpacity:.3}),p.jsx("stop",{offset:"95%",stopColor:"#7c3aed",stopOpacity:0})]})}),p.jsx(vi,{type:"monotone",dataKey:"cal",stroke:"#7c3aed",strokeWidth:3,fillOpacity:1,fill:"url(#colorCal)"})]})})})]})]}),p.jsx("div",{className:"flex-shrink-0 px-6 mb-4",children:p.jsxs("div",{className:"flex items-center justify-between px-1",children:[p.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-gray-50",children:"Recent Meals"}),p.jsxs("span",{className:"text-xs font-medium text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-white/5 px-2 py-1 rounded-lg",children:[t.length," items"]})]})}),p.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar px-6 pb-32",children:w?p.jsx("div",{className:"space-y-4",children:[1,2].map(O=>p.jsx("div",{className:"h-24 bg-white dark:bg-[#1a1c26] rounded-[32px] animate-pulse shadow-sm border border-white/5 dark:border-white/5"},O))}):t.length===0?p.jsxs("div",{className:"text-center py-16 bg-white dark:bg-[#1a1c26] rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:[p.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4 text-gray-300 dark:text-gray-700",children:p.jsx(xb,{size:24})}),p.jsx("p",{className:"text-gray-400 dark:text-gray-500 font-medium mb-1",children:"No meals tracked today."}),p.jsx("p",{className:"text-xs text-gray-300 dark:text-gray-700",children:"Tap the + button to add one."})]}):p.jsx("div",{className:"space-y-4",children:t.map(O=>p.jsxs(Mt,{className:"flex gap-4 items-center p-4 group",onClick:()=>u(O),children:[p.jsx("div",{className:"w-16 h-16 bg-gray-50 dark:bg-white/5 rounded-2xl overflow-hidden flex-shrink-0 shadow-inner",children:O.imageUrl?p.jsx("img",{src:O.imageUrl,alt:O.food_item,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-300 dark:text-gray-700",children:p.jsx(fa,{size:20})})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"flex items-center gap-2 mb-1",children:p.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 truncate text-base",children:O.food_item})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("p",{className:"text-xs font-semibold text-gray-400 dark:text-gray-500",children:O.time}),D(O)]})]}),p.jsxs("div",{className:"text-right pl-2",children:[p.jsx("span",{className:"block font-extrabold text-gray-900 dark:text-gray-50 text-lg",children:O.calories}),p.jsx("span",{className:"text-[10px] font-bold text-gray-400 dark:text-gray-500 uppercase",children:"kcal"})]})]},O.id))})}),p.jsx("button",{onClick:()=>{d(null),o(!0)},className:"absolute bottom-28 right-6 w-16 h-16 bg-royal-600 text-white rounded-[24px] shadow-[0_12px_24px_-6px_rgba(124,58,237,0.5)] flex items-center justify-center hover:scale-105 hover:bg-royal-700 active:scale-95 transition-all z-[60]",children:p.jsx(Av,{size:32,strokeWidth:2.5})}),i&&p.jsx(aP,{editEntry:c,onClose:()=>{o(!1),d(null)},onSuccess:()=>{o(!1),d(null),M()},onOpenSharedMeal:O=>{o(!1),d(null),O&&C(O),setTimeout(()=>k(!0),100)}}),a&&p.jsx(l6,{currentGoal:y,onClose:()=>s(!1),onSave:U}),l&&p.jsx(sg,{entry:l,onClose:()=>u(null),onDelete:R,onEdit:L}),E&&p.jsx(kde,{initialImage:A,onClose:()=>{k(!1),C(null)},onSuccess:()=>{k(!1),C(null),M()}})]})},Cde=()=>"AIzaSyBe0v3rn4bATheRJCE77AmY58Op-tiJJVU",Pde=()=>{const t=Cde();return new Zv({apiKey:t})},Nde=`You are **Cal Coach**, an AI fitness and nutrition coach. Your mission is to provide simple, actionable advice to help users reach their goals.

**Core Principles:**
1. **Keep it Simple:** Use short, clear sentences. No jargon or complicated explanations.
2. **Focus on What Matters:** Only highlight the most important insights and actions.
3. **Be Encouraging:** Always stay positive and supportive, even when pointing out areas for improvement.
4. **Card-Friendly Format:** Structure responses to be visually scannable with emojis, bullet points, and short sections.

**Response Guidelines:**

When analyzing nutrition:
- Start with a simple status emoji ( Good /  Needs Work /  Excellent)
- Show only the most critical metrics (Calories, Protein)
- Use 2-3 bullet points max for observation
- Give 2-3 actionable next steps
- Keep total response under 150 words

When providing plans (workout/meal):
- Use simple bullet format, not complex tables
- Show only key exercises or meals (3-5 items max)
- Include specific numbers (reps, grams, servings)
- Add emoji indicators for visual appeal

When answering questions:
- Answer directly in 2-3 sentences
- Add one practical example if needed
- No lengthy explanations

**Formatting Style:**
 **Status**
Brief one-line summary

**Key Points:**
 Point 1 with number
 Point 2 with number
 Point 3 with number

**Action Steps:**
1. Simple action
2. Simple action

**Never:**
- Use complex tables with multiple columns
- Write long paragraphs
- Include technical disclaimers (assume user knows to consult doctors)
- Use phases like "Phase 1", "Phase 2"
- Repeat the user's data back to them

**Context Provided:**
You will receive user profile data and recent food tracking history in each message. Use this to provide personalized analysis and recommendations.`,MO=async()=>{try{const t={},e=await Uv();e&&(t.userName=e.name,t.height=e.height,t.weight=e.weight,t.age=e.age,t.gender=e.gender,t.activityLevel=e.activityLevel,t.goal=e.goal,t.equipmentAccess=e.equipmentAccess);const n=await Lv();t.dailyGoal=n;const r=await Aj(),i=new Date().toISOString().split("T")[0],o=r.filter(s=>s.date===i);t.todayCalories=o.reduce((s,l)=>s+l.calories,0),t.todayProtein=o.reduce((s,l)=>s+l.protein,0),t.todayCarbs=o.reduce((s,l)=>s+l.carbs,0),t.todayFat=o.reduce((s,l)=>s+l.fat,0);const a=new Map;return r.forEach(s=>{a.has(s.date)||a.set(s.date,[]),a.get(s.date).push(s)}),t.recentEntries=Array.from(a.entries()).slice(0,7).map(([s,l])=>({date:s,totalCalories:l.reduce((u,c)=>u+c.calories,0),totalProtein:l.reduce((u,c)=>u+c.protein,0),totalCarbs:l.reduce((u,c)=>u+c.carbs,0),totalFat:l.reduce((u,c)=>u+c.fat,0),entryCount:l.length})),t}catch(t){return console.error("Failed to build coach context:",t),{}}},Ide=t=>{let e=`**User Profile & Current Data:**

`;return t.userName&&(e+=`- Name: ${t.userName}
`),t.height&&(e+=`- Height: ${t.height} cm
`),t.weight&&(e+=`- Weight: ${t.weight} kg
`),t.age&&(e+=`- Age: ${t.age} years
`),t.gender&&(e+=`- Gender: ${t.gender.charAt(0).toUpperCase()+t.gender.slice(1)}
`),t.activityLevel&&(e+=`- Activity Level: ${{sedentary:"Sedentary",light:"Lightly Active",moderate:"Moderately Active",very:"Very Active",extra:"Extra Active"}[t.activityLevel]}
`),t.goal&&(e+=`- Goal: ${{cut:"Cut (Lose Fat)",bulk:"Bulk (Gain Muscle)",maintain:"Maintain"}[t.goal]}
`),t.equipmentAccess&&(e+=`- Equipment: ${{gym:"Gym Access",home:"Home Equipment",bodyweight:"Bodyweight Only"}[t.equipmentAccess]}
`),t.dailyGoal&&(e+=`- Daily Calorie Goal: ${t.dailyGoal} kcal
`),e+=`
**Today's Nutrition (${new Date().toLocaleDateString()}):**
`,e+=`- Calories: ${t.todayCalories||0} kcal
`,e+=`- Protein: ${t.todayProtein||0}g
`,e+=`- Carbs: ${t.todayCarbs||0}g
`,e+=`- Fat: ${t.todayFat||0}g
`,t.recentEntries&&t.recentEntries.length>0&&(e+=`
**Last 7 Days Summary:**
`,t.recentEntries.forEach(n=>{e+=`
${n.date}:
`,e+=`  - ${n.totalCalories} kcal | Protein: ${n.totalProtein}g | Carbs: ${n.totalCarbs}g | Fat: ${n.totalFat}g | Meals: ${n.entryCount}
`})),e+=`
---

`,e},jp=async(t,e)=>{try{const n=Pde(),r=await MO(),i=e.slice(-4).map(s=>`${s.role==="user"?"User":"Coach"}: ${s.content}`).join(`

`),o=`${Ide(r)}${i?`**Recent Conversation:**
${i}

`:""}**User's Current Message:**
${t}`;return(await n.models.generateContent({model:"gemini-2.0-flash-exp",contents:[{parts:[{text:o}]}],config:{systemInstruction:Nde,temperature:.7,topP:.95}})).text||"I apologize, but I couldn't generate a response. Please try again."}catch(n){console.error("Coach message error:",n);const r=(n==null?void 0:n.message)||String(n);throw r.includes("429")||r.toLowerCase().includes("quota")?new Error("Rate limit reached. Please wait a moment and try again."):r.toLowerCase().includes("api key")?new Error("Configuration error. Please check your API settings."):new Error("Failed to get coach response. Please try again.")}},Ode=t=>{t.toLowerCase();const e=/\b(workout|exercise|training|routine|fitness|gym)\b/i.test(t),n=/day\s+\d+:/i.test(t),r=/\d+\s*(sets?|reps?|x)/i.test(t)||/sets?:\s*\d+/i.test(t)||/\d+\s*x\s*\d+/i.test(t),i=/(push-?up|pull-?up|squat|deadlift|bench\s+press|plank|lunge|curl|press|row)/i.test(t);return e&&(r||n||i)},fT=t=>{const e=[];let n="AI Workout Plan";const r=t.match(/(?:^|\n)(?:##?\s*)?([A-Z][\w\s&]+(?:Day|Workout|Training|Routine))/i);r&&(n=r[1].trim());const i=t.split(`
`).map(o=>o.trim());for(let o=0;o<i.length;o++){const a=i[o];if(!a||a.startsWith("#")||a.startsWith("**Action")||a.startsWith("**Key"))continue;let s="",l=3,u="10",c="60s",d=a.replace(/^[\-\*]\s*/,"").replace(/^\d+\.\s*/,"");const h=d.match(/(\d+)\s*(?:sets?|x)/i)||d.match(/sets?:\s*(\d+)/i);h&&(l=parseInt(h[1]));const g=d.match(/(\d+(?:-\d+)?)\s*reps?/i)||d.match(/reps?:\s*(\d+(?:-\d+)?)/i);if(g)u=g[1];else{const v=d.match(/\dx(\d+(?:-\d+)?)/i);v&&(u=v[1])}const y=d.match(/(\d+(?:s|sec|seconds?|min|minutes?))/i)||d.match(/rest:\s*(\d+(?:s|sec|min)?)/i);y&&(c=y[1].toLowerCase().replace("seconds","s").replace("sec","s").replace("minutes","min").replace("minute","min"));const x=d.match(/^([A-Za-z][\w\s\-'()]+?)(?:\s*[-:|]|\s+\d)/);x?s=x[1].trim():/^[A-Za-z][\w\s\-'()]+$/.test(d)&&d.length<50&&(s=d),s&&!s.match(/^(sets?|reps?|rest|action|next|step)/i)&&e.push({id:`ex-${Date.now()}-${e.length}`,name:s,sets:l,reps:u,rest:c,completed:!1})}return{title:n,exercises:e}},Rde=t=>{const e=/Day\s+(\d+):?\s*(.+?)(?=Day\s+\d+:|$)/gis,n=Array.from(t.matchAll(e));if(n.length<2){const{title:i,exercises:o}=fT(t);return{isMultiDay:!1,days:[{dayNumber:1,title:i,exercises:o,isRestDay:o.length===0}]}}const r=n.map(i=>{const o=parseInt(i[1]),a=i[2].trim(),s=/^(rest|recovery|off)\s*$/i.test(a)||a.toLowerCase().includes("rest day"),l=a.match(/repeat\s+day\s+(\d+)/i);if(s)return{dayNumber:o,title:"Rest Day",exercises:[],isRestDay:!0};if(l)return{dayNumber:o,title:a,exercises:[],isRestDay:!1,repeatsDayNumber:parseInt(l[1])};const{title:u,exercises:c}=fT(a);return{dayNumber:o,title:u==="AI Workout Plan"?a.split(`
`)[0]:u,exercises:c,isRestDay:c.length===0}});return r.forEach(i=>{if(i.repeatsDayNumber){const o=i.repeatsDayNumber,a=r.find(s=>s.dayNumber===o);a&&(i.title=a.title,i.exercises=a.exercises.map(s=>({...s,id:`ex-${Date.now()}-${Math.random()}`}))),delete i.repeatsDayNumber}}),{isMultiDay:!0,days:r}},Mde=({isOpen:t,onClose:e,workoutText:n})=>{const[r,i]=P.useState(new Date().toISOString().split("T")[0]),[o,a]=P.useState(!1),[s,l]=P.useState(null);if(P.useEffect(()=>{if(t&&n){const x=Rde(n);l(x)}},[t,n]),!t)return null;const u=async()=>{if(s){a(!0);try{await Bj(r,s.days);const x=s.days.length,v=s.isMultiDay?`${x}-day`:"single-day";alert(`${v} workout plan saved successfully! Go check it out in the Workout Plan page.`),e()}catch(x){console.error("Failed to save workout:",x),alert("Failed to save workout plan")}finally{a(!1)}}},c=()=>{if(!s||!s.isMultiDay)return null;const x=new Date(r),v=new Date(x);return v.setDate(v.getDate()+s.days.length-1),v.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},d=new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),h=c(),g=(s==null?void 0:s.days.length)||0,y=(s==null?void 0:s.isMultiDay)||!1;return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:p.jsxs(Mt,{className:"w-full max-w-md animate-in zoom-in-95 duration-300",children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[p.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Save Workout Plan"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:p.jsx(_n,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[y&&p.jsxs("div",{className:"p-4 bg-royal-50 dark:bg-royal-950/20 border-2 border-royal-200 dark:border-royal-800/50 rounded-xl",children:[p.jsxs("p",{className:"text-sm font-bold text-royal-900 dark:text-royal-100 mb-1",children:[" ",g,"-Day Workout Plan"]}),p.jsxs("p",{className:"text-xs text-royal-700 dark:text-royal-300",children:["Will be saved from ",p.jsx("strong",{children:d})," to ",p.jsx("strong",{children:h})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:y?"Choose Start Date":"Choose Date"}),p.jsx("input",{type:"date",value:r,onChange:x=>i(x.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"}),p.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:y?`Select the first day of your ${g}-day plan`:"Select which day you want to use this workout plan"})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[p.jsx("button",{onClick:e,disabled:o,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),p.jsxs("button",{onClick:u,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:[p.jsx(Cv,{size:18}),p.jsx("span",{children:o?"Saving...":y?`Save ${g}-Day Plan`:"Save Plan"})]})]})]})})},$de=({onNavigate:t})=>{const[e,n]=P.useState([]),[r,i]=P.useState(""),[o,a]=P.useState(!1),[s,l]=P.useState(null),[u,c]=P.useState(!1),[d,h]=P.useState(new Set),[g,y]=P.useState(!1),[x,v]=P.useState(!0),[b,w]=P.useState(!1),[_,T]=P.useState(""),S=P.useRef(null),E=P.useRef(null),k=P.useRef(null),A=N=>!!(N.activityLevel&&N.goal&&N.equipmentAccess);P.useEffect(()=>{(async()=>{const D=await MO();if(l(D),!A(D)){c(!0);return}await Uj();const O=Ua(),F=await Lj();if(F.length>0)n(F),h(new Set([O]));else{const I={id:"welcome",role:"assistant",content:` ** Hi ${D.userName||"there"} !I'm Cal Coach.**

How can I help you today?`,timestamp:Date.now()};n([I])}})()},[]),P.useEffect(()=>{var N;(N=S.current)==null||N.scrollIntoView({behavior:"smooth"})},[e]);const C=async()=>{var D;if(!r.trim()||o)return;const N={id:`user-${Date.now()}`,role:"user",content:r,timestamp:Date.now()};n(O=>[...O,N]),i(""),a(!0),bo(N).catch(O=>console.error("Failed to save user message:",O));try{const O=await jp(r,e),F={id:`assistant-${Date.now()}`,role:"assistant",content:O,timestamp:Date.now()};n(I=>[...I,F]),bo(F).catch(I=>console.error("Failed to save assistant message:",I))}catch(O){const F={id:`error-${Date.now()}`,role:"assistant",content:` ${O.message||"Failed to get response. Please try again."}`,timestamp:Date.now()};n(I=>[...I,F])}finally{a(!1),(D=E.current)==null||D.focus()}},M=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),C())},R=()=>{t(Ce.PROFILE)},L=async()=>{if(!(g||!x)){y(!0);try{const D=Array.from(d).sort()[0];if(!D){v(!1);return}const O=new Date(D);O.setDate(O.getDate()-1);const F=O.toISOString().split("T")[0],I=new Date().toISOString().split("T")[0];if(Math.floor((new Date(I).getTime()-new Date(F).getTime())/(1e3*60*60*24))>=7){v(!1);return}const B=await uC(F);B.length>0?(n(G=>[...B,...G]),h(G=>new Set([...G,F]))):h(G=>new Set([...G,F]))}catch(N){console.error("Failed to load previous day messages:",N)}finally{y(!1)}}},U=()=>{const N=k.current;N&&N.scrollTop<50&&!g&&x&&L()};return u?p.jsx("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:p.jsx("div",{className:"flex-1 flex items-center justify-center px-6",children:p.jsxs(Mt,{className:"p-8 max-w-md w-full relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-32 h-32 bg-royal-100 dark:bg-royal-950/20 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-32 h-32 bg-royal-100 dark:bg-royal-950/20 rounded-full blur-3xl"}),p.jsxs("div",{className:"relative z-10",children:[p.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-lg mx-auto mb-6",children:p.jsx(vb,{size:32})}),p.jsx("h2",{className:"text-2xl font-extrabold text-gray-900 dark:text-gray-50 text-center mb-3",children:"Set Your Training Goals"}),p.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6 leading-relaxed",children:["To provide you with personalized AI coaching, please complete your"," ",p.jsx("span",{className:"font-bold text-royal-600 dark:text-royal-400",children:"Training Goal Setting"})," ","in your Profile."]}),p.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-2xl p-4 mb-6",children:[p.jsx("p",{className:"text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-3",children:"We need to know:"}),p.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),p.jsx("span",{children:"Your activity level (sedentary to extra active)"})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),p.jsx("span",{children:"Your fitness goal (cut, bulk, or maintain)"})]}),p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-royal-600 dark:text-royal-400 mt-0.5",children:""}),p.jsx("span",{children:"Your equipment access (gym, home, or bodyweight)"})]})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:R,className:"w-full flex items-center justify-center gap-2 py-4 bg-royal-600 hover:bg-royal-700 text-white rounded-[20px] font-bold transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[p.jsx(vb,{size:20}),p.jsx("span",{children:"Go to Profile"}),p.jsx(Bc,{size:20})]}),p.jsx("button",{onClick:()=>c(!1),className:"w-full py-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 rounded-[20px] font-semibold transition-all text-sm",children:"I'll do this later"})]})]})]})})}):p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:[p.jsxs("header",{className:"flex justify-between items-end mb-6 flex-shrink-0",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"Your Personal Coach"}),p.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:"Cal Coach"})]}),p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-sm",children:p.jsx(or,{size:20})})]}),p.jsxs("div",{ref:k,onScroll:U,className:"flex-1 overflow-y-auto space-y-4 mb-4 no-scrollbar",children:[g&&p.jsx("div",{className:"flex justify-center py-3 animate-in fade-in duration-300",children:p.jsxs("div",{className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 text-sm",children:[p.jsx(Jh,{size:14,className:"animate-spin"}),p.jsx("span",{children:"Loading earlier messages..."})]})}),!g&&x&&e.length>0&&d.size>0&&p.jsx("div",{className:"flex justify-center py-2",children:p.jsx("button",{onClick:L,className:"text-xs text-gray-400 dark:text-gray-500 hover:text-royal-600 dark:hover:text-royal-400 transition-colors",children:" Load previous day"})}),e.map(N=>p.jsx("div",{className:`flex ${N.role==="user"?"justify-end":"justify-start"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:p.jsx("div",{className:`max-w-[85%] ${N.role==="user"?"bg-royal-600 text-white rounded-[24px] px-5 py-3 shadow-lg":""}`,children:N.role==="assistant"?p.jsxs("div",{children:[p.jsx(Mt,{className:"p-5",children:p.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:p.jsx("div",{className:"text-gray-800 dark:text-gray-200 leading-relaxed whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:N.content.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}})})}),Ode(N.content)&&p.jsxs("button",{onClick:()=>{T(N.content),w(!0)},className:"mt-3 flex items-center gap-2 px-4 py-2 bg-royal-600 hover:bg-royal-700 text-white text-sm font-semibold rounded-xl transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[p.jsx(Cv,{size:16}),p.jsx("span",{children:"Save as Workout Plan"})]})]}):p.jsx("p",{className:"text-sm font-medium leading-relaxed",children:N.content})})},N.id)),e.length===1&&e[0].id==="welcome"&&!o&&p.jsx("div",{className:"grid grid-cols-1 gap-3 mt-4 animate-in fade-in slide-in-from-bottom-4 duration-500 delay-300",children:[{title:"Analyze Nutrition",desc:"Get insights on your recent eating habits",icon:"",text:"Analyze my recent nutrition",color:"from-blue-500/30 to-royal-500/30",baseBg:"bg-blue-50/40 dark:bg-blue-900/10",iconBg:"bg-blue-100 dark:bg-blue-900/40",iconBorder:"border-blue-200 dark:border-blue-700/50"},{title:"Workout Plan",desc:"Create a personalized fitness routine",icon:"",text:"Create a workout plan for me",color:"from-royal-500/30 to-indigo-500/30",baseBg:"bg-royal-50/40 dark:bg-royal-950/20",iconBg:"bg-royal-100 dark:bg-royal-950/40",iconBorder:"border-royal-200 dark:border-royal-700/50"},{title:"Calculate TDEE",desc:"Find out your daily energy expenditure",icon:"",text:"Calculate my TDEE",color:"from-orange-500/30 to-royal-500/30",baseBg:"bg-orange-50/40 dark:bg-orange-900/10",iconBg:"bg-orange-100 dark:bg-orange-900/40",iconBorder:"border-orange-200 dark:border-orange-700/50"},{title:"Macro Targets",desc:"Set optimal protein, carb, and fat goals",icon:"",text:"Help me set macro targets",color:"from-violet-500/30 to-fuchsia-500/30",baseBg:"bg-violet-50/40 dark:bg-violet-900/10",iconBg:"bg-violet-100 dark:bg-violet-900/40",iconBorder:"border-violet-200 dark:border-violet-700/50"}].map((N,D)=>p.jsxs("button",{onClick:()=>{(async F=>{if(o)return;const I={id:`user-${Date.now()}`,role:"user",content:F,timestamp:Date.now()};n($=>[...$,I]),a(!0),bo(I).catch($=>console.error("Failed to save user message:",$));try{const $=await jp(F,e),B={id:`assistant-${Date.now()}`,role:"assistant",content:$,timestamp:Date.now()};n(G=>[...G,B]),bo(B).catch(G=>console.error("Failed to save assistant message:",G))}catch($){const B={id:`error-${Date.now()}`,role:"assistant",content:` ${$.message||"Failed to get response."}`,timestamp:Date.now()};n(G=>[...G,B])}finally{a(!1)}})(N.text)},className:`flex items-center gap-4 p-4 ${N.baseBg} border-2 border-gray-100 dark:border-white/10 rounded-2xl hover:border-royal-500 dark:hover:border-royal-400 hover:shadow-xl hover:shadow-royal-500/10 transition-all text-left group active:scale-[0.98] relative overflow-hidden`,children:[p.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${N.color} opacity-0 group-hover:opacity-100 transition-opacity`}),p.jsx("div",{className:`relative z-10 w-12 h-12 ${N.iconBg} ${N.iconBorder} border rounded-xl flex items-center justify-center text-2xl group-hover:scale-110 transition-transform shadow-sm group-hover:shadow-md`,children:N.icon}),p.jsxs("div",{className:"relative z-10 flex-1",children:[p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 text-sm tracking-tight",children:N.title}),p.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mt-0.5 font-semibold opacity-80",children:N.desc})]}),p.jsx("div",{className:"relative z-10 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 dark:bg-white/10 group-hover:bg-royal-500 group-hover:text-white transition-all shadow-sm",children:p.jsx(Bc,{size:16,className:"text-gray-400 dark:text-gray-500 group-hover:text-white group-hover:translate-x-0.5 transition-all"})})]},D))}),o&&p.jsx("div",{className:"flex justify-start animate-in fade-in duration-300",children:p.jsx(Mt,{className:"p-5",children:p.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400",children:[p.jsx(Jh,{size:16,className:"animate-spin"}),p.jsx("span",{className:"text-sm",children:"Coach is thinking..."})]})})}),p.jsx("div",{ref:S})]}),e.length>1&&!o&&p.jsx("div",{className:"flex gap-3 overflow-x-auto pb-4 px-1 no-scrollbar animate-in fade-in slide-in-from-bottom-2 duration-500",children:[{title:"Analyze Nutrition",icon:"",text:"Analyze my recent nutrition",color:"from-blue-500/30 to-royal-500/30",baseBg:"bg-blue-50/40 dark:bg-blue-900/10",iconBg:"bg-blue-100 dark:bg-blue-900/40",iconBorder:"border-blue-200 dark:border-blue-700/50"},{title:"Workout Plan",icon:"",text:"Create a workout plan for me",color:"from-royal-500/30 to-indigo-500/30",baseBg:"bg-royal-50/40 dark:bg-royal-950/20",iconBg:"bg-royal-100 dark:bg-royal-950/40",iconBorder:"border-royal-200 dark:border-royal-700/50"},{title:"Calculate TDEE",icon:"",text:"Calculate my TDEE",color:"from-orange-500/30 to-royal-500/30",baseBg:"bg-orange-50/40 dark:bg-orange-900/10",iconBg:"bg-orange-100 dark:bg-orange-900/40",iconBorder:"border-orange-200 dark:border-orange-700/50"},{title:"Macro Targets",icon:"",text:"Help me set macro targets",color:"from-violet-500/30 to-fuchsia-500/30",baseBg:"bg-violet-50/40 dark:bg-violet-900/10",iconBg:"bg-violet-100 dark:bg-violet-900/40",iconBorder:"border-violet-200 dark:border-violet-700/50"}].map((N,D)=>p.jsxs("button",{onClick:()=>{(async F=>{if(o)return;const I={id:`user-${Date.now()}`,role:"user",content:F,timestamp:Date.now()};n($=>[...$,I]),a(!0),bo(I).catch($=>console.error("Failed to save user message:",$));try{const $=await jp(F,e),B={id:`assistant-${Date.now()}`,role:"assistant",content:$,timestamp:Date.now()};n(G=>[...G,B]),bo(B).catch(G=>console.error("Failed to save assistant message:",G))}catch($){const B={id:`error-${Date.now()}`,role:"assistant",content:` ${$.message||"Failed to get response."}`,timestamp:Date.now()};n(G=>[...G,B])}finally{a(!1)}})(N.text)},className:`flex flex-shrink-0 items-center gap-3 p-3 min-w-[180px] ${N.baseBg} border-2 border-gray-100 dark:border-white/10 rounded-2xl hover:border-royal-500 dark:hover:border-royal-400 transition-all text-left group active:scale-[0.98] relative overflow-hidden`,children:[p.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${N.color} opacity-0 group-hover:opacity-100 transition-opacity`}),p.jsx("div",{className:`relative z-10 w-10 h-10 ${N.iconBg} ${N.iconBorder} border rounded-xl flex items-center justify-center text-xl group-hover:scale-110 transition-transform shadow-sm`,children:N.icon}),p.jsx("div",{className:"relative z-10 flex-1",children:p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 text-xs tracking-tight leading-tight",children:N.title})})]},D))}),p.jsx("div",{className:"flex-shrink-0 bg-white dark:bg-[#1a1c26] rounded-[24px] p-3 shadow-diffused dark:shadow-diffused-dark border border-gray-100 dark:border-white/5",children:p.jsxs("div",{className:"flex gap-2 items-end",children:[p.jsx("textarea",{ref:E,value:r,onChange:N=>i(N.target.value),onKeyDown:M,placeholder:"Ask your coach anything...",className:"flex-1 bg-transparent text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 resize-none outline-none text-sm min-h-[40px] max-h-[120px] py-2 px-3",rows:1,disabled:o}),p.jsx("button",{onClick:C,disabled:!r.trim()||o,className:"flex-shrink-0 w-10 h-10 bg-royal-600 text-white rounded-[16px] flex items-center justify-center hover:bg-royal-700 active:scale-95 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:o?p.jsx(Jh,{size:18,className:"animate-spin"}):p.jsx(DM,{size:18})})]})}),p.jsx(Mde,{isOpen:b,onClose:()=>w(!1),workoutText:_})]})},Dde=({isOpen:t,onClose:e,defaultDate:n,onSave:r})=>{const[i,o]=P.useState(""),[a,s]=P.useState(n.toISOString().split("T")[0]),[l,u]=P.useState([{name:"",sets:3,reps:"10",rest:"60s"}]),[c,d]=P.useState(!1);if(!t)return null;const h=()=>{u([...l,{name:"",sets:3,reps:"10",rest:"60s"}])},g=v=>{u(l.filter((b,w)=>w!==v))},y=(v,b,w)=>{const _=[...l];_[v]={..._[v],[b]:w},u(_)},x=async()=>{if(!i.trim()){alert("Please enter a workout title");return}const v=l.filter(b=>b.name.trim());if(v.length===0){alert("Please add at least one exercise");return}d(!0);try{const b=v.map((w,_)=>({...w,id:`ex-${Date.now()}-${_}`,completed:!1}));await Jc(a,i,b),o(""),u([{name:"",sets:3,reps:"10",rest:"60s"}]),s(n.toISOString().split("T")[0]),r==null||r(),e()}catch(b){console.error("Failed to save workout:",b),alert("Failed to save workout plan")}finally{d(!1)}};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:p.jsxs(Mt,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[p.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Create Workout Plan"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:p.jsx(_n,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Workout Title"}),p.jsx("input",{type:"text",value:i,onChange:v=>o(v.target.value),placeholder:"e.g., Chest & Triceps, Leg Day",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Date"}),p.jsx("input",{type:"date",value:a,onChange:v=>s(v.target.value),className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Exercises"}),p.jsxs("button",{onClick:h,className:"flex items-center gap-1 px-3 py-1.5 bg-royal-600 hover:bg-royal-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[p.jsx(Av,{size:16}),p.jsx("span",{children:"Add Exercise"})]})]}),p.jsx("div",{className:"space-y-4",children:l.map((v,b)=>p.jsx("div",{className:"p-4 bg-gray-50 dark:bg-white/5 rounded-xl border-2 border-gray-100 dark:border-white/5",children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsxs("div",{className:"flex-1 space-y-3",children:[p.jsx("input",{type:"text",value:v.name,onChange:w=>y(b,"name",w.target.value),placeholder:"Exercise name",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"}),p.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Sets"}),p.jsx("input",{type:"number",value:v.sets,onChange:w=>y(b,"sets",parseInt(w.target.value)||0),min:"1",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Reps"}),p.jsx("input",{type:"text",value:v.reps,onChange:w=>y(b,"reps",w.target.value),placeholder:"8-10",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-semibold text-gray-500 dark:text-gray-400 mb-1",children:"Rest"}),p.jsx("input",{type:"text",value:v.rest,onChange:w=>y(b,"rest",w.target.value),placeholder:"60s",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]})]})]}),l.length>1&&p.jsx("button",{onClick:()=>g(b),className:"p-2 hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg transition-colors",children:p.jsx(bf,{size:18})})]})},b))})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[p.jsx("button",{onClick:e,disabled:c,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),p.jsx("button",{onClick:x,disabled:c,className:"px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:c?"Saving...":"Save Workout"})]})]})})},jde=({isOpen:t,onClose:e,exercise:n,onSave:r})=>{const[i,o]=P.useState(""),[a,s]=P.useState(3),[l,u]=P.useState("10"),[c,d]=P.useState("60s"),[h,g]=P.useState(!1);if(P.useEffect(()=>{n&&(o(n.name),s(n.sets),u(n.reps),d(n.rest))},[n]),!t||!n)return null;const y=async()=>{if(!i.trim()){alert("Please enter an exercise name");return}g(!0);const x={...n,name:i.trim(),sets:a,reps:l.trim(),rest:c.trim()};r(x),g(!1)};return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-300 px-6",children:p.jsxs(Mt,{className:"w-full max-w-md animate-in zoom-in-95 duration-300",children:[p.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100 dark:border-white/10",children:[p.jsx("h2",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50",children:"Edit Exercise"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors",children:p.jsx(_n,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Exercise Name"}),p.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),placeholder:"e.g., Bench Press",className:"w-full px-4 py-3 bg-gray-50 dark:bg-white/5 border-2 border-gray-200 dark:border-white/10 rounded-xl text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400 transition-colors"})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Sets"}),p.jsx("input",{type:"number",value:a,onChange:x=>s(parseInt(x.target.value)||0),min:"1",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Reps"}),p.jsx("input",{type:"text",value:l,onChange:x=>u(x.target.value),placeholder:"8-10",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-700 dark:text-gray-300 mb-2",children:"Rest"}),p.jsx("input",{type:"text",value:c,onChange:x=>d(x.target.value),placeholder:"60s",className:"w-full px-3 py-2 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 rounded-lg text-sm text-gray-900 dark:text-gray-50 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:border-royal-500 dark:focus:border-royal-400"})]})]})]}),p.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100 dark:border-white/10",children:[p.jsx("button",{onClick:e,disabled:h,className:"px-6 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl font-semibold transition-colors disabled:opacity-50",children:"Cancel"}),p.jsxs("button",{onClick:y,disabled:h,className:"flex items-center gap-2 px-6 py-3 bg-royal-600 hover:bg-royal-700 text-white rounded-xl font-semibold transition-colors disabled:opacity-50 shadow-lg shadow-royal-200 dark:shadow-royal-900/40",children:[p.jsx(Cv,{size:18}),p.jsx("span",{children:h?"Saving...":"Save Changes"})]})]})]})})},Lde=({onNavigate:t})=>{const[e,n]=P.useState(new Date),[r,i]=P.useState(new Date),[o,a]=P.useState(null),[s,l]=P.useState(new Set),[u,c]=P.useState(!1),[d,h]=P.useState(!1),[g,y]=P.useState(null),[x,v]=P.useState(!1),b=async()=>{const I=e.getFullYear(),$=e.getMonth()+1,B=await qb(I,$);l(new Set(B));const G=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,q=await Hb(G);a(q)};P.useEffect(()=>{(async()=>{const $=e.getFullYear(),B=e.getMonth()+1,G=await qb($,B);l(new Set(G))})()},[e]),P.useEffect(()=>{(async()=>{c(!0);const $=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,B=await Hb($);a(B),c(!1)})()},[r]);const _=(()=>{const I=e.getFullYear(),$=e.getMonth(),B=new Date(I,$,1),G=new Date(I,$+1,0),q=B.getDay(),X=G.getDate(),se=[];for(let he=0;he<q;he++)se.push(null);for(let he=1;he<=X;he++)se.push(new Date(I,$,he));return se})(),T=new Date;T.setHours(0,0,0,0);const S=(I,$)=>I.getFullYear()===$.getFullYear()&&I.getMonth()===$.getMonth()&&I.getDate()===$.getDate(),E=()=>{n(new Date(e.getFullYear(),e.getMonth()-1))},k=()=>{n(new Date(e.getFullYear(),e.getMonth()+1))},A=I=>{i(I)},C=I=>{o&&a({...o,exercises:o.exercises.map($=>$.id===I?{...$,completed:!$.completed}:$)})},M=I=>{y(I),v(!0)},R=async I=>{if(o&&confirm("Are you sure you want to delete this exercise?")){const $=o.exercises.filter(G=>G.id!==I);a({...o,exercises:$});const B=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;await Jc(B,o.title,$)}},L=async I=>{if(!o)return;const $=o.exercises.map(G=>G.id===I.id?I:G);a({...o,exercises:$});const B=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;await Jc(B,o.title,$),v(!1),y(null)},U=(o==null?void 0:o.exercises.filter(I=>I.completed).length)||0,N=(o==null?void 0:o.exercises.length)||0,D=N>0?U/N*100:0,O=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],F=["January","February","March","April","May","June","July","August","September","October","November","December"];return p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 px-6 pt-10 pb-32 animate-in fade-in duration-500",children:[p.jsxs("header",{className:"flex justify-between items-end mb-6 flex-shrink-0",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"Your Training Schedule"}),p.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight leading-none",children:"Workout Plan"})]}),p.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-500 to-royal-700 rounded-full flex items-center justify-center text-white shadow-sm",children:p.jsx(Gc,{size:20})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 no-scrollbar",children:[p.jsxs(Mt,{className:"p-6",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Zi,{size:16,className:"text-royal-600 dark:text-royal-400"}),p.jsxs("h2",{className:"text-sm font-bold text-gray-900 dark:text-gray-50 uppercase tracking-wide",children:[F[e.getMonth()]," ",e.getFullYear()]})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{onClick:E,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:p.jsx(xf,{size:18,className:"text-gray-600 dark:text-gray-400"})}),p.jsx("button",{onClick:k,className:"p-1.5 hover:bg-gray-100 dark:hover:bg-white/5 rounded-lg transition-colors",children:p.jsx(Gi,{size:18,className:"text-gray-600 dark:text-gray-400"})})]})]}),p.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:O.map((I,$)=>p.jsx("div",{className:"text-center text-xs font-bold text-gray-400 dark:text-gray-500 py-1",children:I},$))}),p.jsx("div",{className:"grid grid-cols-7 gap-1",children:_.map((I,$)=>{if(!I)return p.jsx("div",{className:"aspect-square"},`empty-${$}`);const B=S(I,r),G=S(I,T),q=`${I.getFullYear()}-${String(I.getMonth()+1).padStart(2,"0")}-${String(I.getDate()).padStart(2,"0")}`,X=s.has(q);return p.jsxs("button",{onClick:()=>A(I),className:`
                                        aspect-square flex flex-col items-center justify-center p-1 rounded-xl transition-all relative text-sm
                                        ${B?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 scale-105 font-bold":"bg-gray-50 dark:bg-white/5 text-gray-700 dark:text-gray-300 hover:bg-royal-50 dark:hover:bg-royal-900/20 hover:scale-105"}
                                    `,children:[p.jsx("span",{children:I.getDate()}),G&&!B&&p.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-royal-600 dark:bg-royal-400 rounded-full"}),X&&p.jsx("div",{className:`absolute top-1 right-1 w-1.5 h-1.5 rounded-full ${B?"bg-white":"bg-royal-600 dark:bg-royal-400"}`})]},$)})})]}),u?p.jsx(Mt,{className:"p-8",children:p.jsx("div",{className:"flex items-center justify-center",children:p.jsx("div",{className:"w-8 h-8 border-2 border-royal-600 border-t-transparent rounded-full animate-spin"})})}):o?p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-lg font-extrabold text-gray-900 dark:text-gray-50",children:S(r,T)?"Today's Workout":"Workout Plan"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold mt-0.5",children:o.title})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"text-2xl font-extrabold text-royal-600 dark:text-royal-400",children:[U,"/",N]}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-semibold",children:"Completed"})]})]}),p.jsx("div",{className:"mb-6 bg-gray-100 dark:bg-white/5 rounded-full h-2 overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-royal-500 to-royal-600 transition-all duration-500 ease-out rounded-full",style:{width:`${D}%`}})}),p.jsx("div",{className:"space-y-3",children:o.exercises.map(I=>p.jsx("button",{onClick:()=>C(I.id),className:`
                                        w-full text-left transition-all active:scale-[0.98]
                                        ${I.completed?"opacity-60":""}
                                    `,children:p.jsx(Mt,{className:`p-4 ${I.completed?"bg-royal-50/50 dark:bg-royal-900/10":""}`,children:p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("div",{className:"flex-shrink-0 mt-0.5",children:I.completed?p.jsx(Im,{size:24,className:"text-royal-600 dark:text-royal-400",strokeWidth:2.5}):p.jsx(xM,{size:24,className:"text-gray-300 dark:text-gray-600",strokeWidth:2})}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("h3",{className:`
                                                    font-bold text-sm mb-2
                                                    ${I.completed?"text-gray-500 dark:text-gray-400 line-through":"text-gray-900 dark:text-gray-50"}
                                                `,children:I.name}),p.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Sets:"}),p.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:I.sets})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Reps:"}),p.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:I.reps})]}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:"Rest:"}),p.jsx("span",{className:"font-bold text-gray-700 dark:text-gray-300",children:I.rest})]})]})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[p.jsx("button",{onClick:$=>{$.stopPropagation(),M(I)},className:"p-1.5 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:"Edit exercise",children:p.jsx(OM,{size:14,className:"text-blue-600 dark:text-blue-400"})}),p.jsx("button",{onClick:$=>{$.stopPropagation(),R(I.id)},className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete exercise",children:p.jsx(bf,{size:14,className:"text-red-600 dark:text-red-400"})})]})]})})},I.id))}),U===N&&N>0&&p.jsx(Mt,{className:"p-6 mt-6 bg-gradient-to-br from-royal-50 to-royal-100 dark:from-royal-950/30 dark:to-royal-900/20 border-2 border-royal-200 dark:border-royal-800/50 animate-in fade-in slide-in-from-bottom-4 duration-500",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-royal-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg",children:p.jsx(Im,{size:32,className:"text-white",strokeWidth:2.5})}),p.jsx("h3",{className:"text-xl font-extrabold text-royal-900 dark:text-royal-100 mb-2",children:"Workout Complete! "}),p.jsx("p",{className:"text-sm text-royal-700 dark:text-royal-300 font-semibold",children:"Great job! You've completed all exercises for today."})]})})]}):p.jsx(Mt,{className:"p-8",children:p.jsxs("div",{className:"text-center max-w-sm mx-auto",children:[p.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-white/10 dark:to-white/5 rounded-full flex items-center justify-center mx-auto mb-6",children:p.jsx(Gc,{size:32,className:"text-gray-400 dark:text-gray-500"})}),p.jsx("h3",{className:"text-xl font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"No Workout Plan Yet"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6 leading-relaxed",children:S(r,T)?"Ready to crush today's workout? Get a personalized plan from your AI coach or create your own!":"No workout plan for this date. Add one to stay on track!"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("button",{onClick:()=>t==null?void 0:t(Ce.CAL_COACH),className:"w-full flex items-center justify-center gap-2 py-4 bg-royal-600 hover:bg-royal-700 text-white rounded-[20px] font-bold transition-all shadow-lg shadow-royal-200 dark:shadow-royal-900/40 active:scale-95",children:[p.jsx(or,{size:20}),p.jsx("span",{children:"Get AI Plan from Coach"})]}),p.jsxs("button",{onClick:()=>h(!0),className:"w-full flex items-center justify-center gap-2 py-4 bg-white dark:bg-white/5 hover:bg-gray-50 dark:hover:bg-white/10 text-gray-900 dark:text-gray-50 rounded-[20px] font-bold transition-all border-2 border-gray-200 dark:border-white/10 active:scale-95",children:[p.jsx(Av,{size:20}),p.jsx("span",{children:"Create Custom Plan"})]})]})]})})]}),p.jsx(jde,{isOpen:x,onClose:()=>{v(!1),y(null)},exercise:g,onSave:L}),p.jsx(Dde,{isOpen:d,onClose:()=>h(!1),defaultDate:r,onSave:b})]})},Ude=({summary:t,onClose:e})=>{const n=new Date(t.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return p.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/40 backdrop-blur-md p-4 animate-in fade-in duration-200",children:p.jsxs("div",{className:"bg-white w-full max-w-md rounded-[40px] overflow-hidden shadow-2xl border border-white/50 animate-in slide-in-from-bottom duration-300",children:[p.jsxs("div",{className:"relative bg-royal-50 p-8 pb-10",children:[p.jsx("div",{className:"absolute top-6 right-6",children:p.jsx("button",{onClick:e,className:"p-2 bg-white text-gray-900 rounded-full shadow-sm hover:bg-gray-100 transition-colors",children:p.jsx(_n,{size:20})})}),p.jsxs("div",{className:"flex items-center gap-2 text-royal-600 mb-3",children:[p.jsx(Zi,{size:20}),p.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Daily Report"})]}),p.jsx("h2",{className:"text-3xl font-extrabold text-gray-900 leading-tight",children:n})]}),p.jsxs("div",{className:"p-8 -mt-6 bg-white rounded-t-[32px] relative shadow-[-10px_-10px_30px_rgba(0,0,0,0.02)]",children:[p.jsxs("div",{className:"bg-white rounded-[32px] p-6 border border-gray-100 shadow-[0_10px_30px_-10px_rgba(0,0,0,0.05)] mb-8 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1 block",children:"Total Consumed"}),p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-5xl font-extrabold text-gray-900 tracking-tighter",children:t.totalCalories}),p.jsx("span",{className:"text-gray-400 font-bold text-lg",children:"kcal"})]})]}),p.jsx("div",{className:"w-14 h-14 rounded-2xl bg-royal-50 flex items-center justify-center text-royal-600",children:p.jsx(Tv,{size:28})})]}),p.jsxs("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4 flex items-center gap-2",children:[p.jsx(zc,{size:16})," Macro Breakdown"]}),p.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[p.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-emerald-50 hover:border-emerald-100 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[p.jsx("div",{className:"w-1.5 h-10 bg-emerald-400 rounded-full"}),p.jsxs("div",{children:[p.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalProtein,"g"]}),p.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Protein"})]})]})}),p.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-blue-50 hover:border-blue-100 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[p.jsx("div",{className:"w-1.5 h-10 bg-blue-400 rounded-full"}),p.jsxs("div",{children:[p.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalCarbs,"g"]}),p.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Carbs"})]})]})}),p.jsx("div",{className:"bg-gray-50 p-5 rounded-[24px] border border-gray-100 flex items-center justify-between relative overflow-hidden group hover:bg-orange-50 hover:border-orange-100 transition-colors",children:p.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[p.jsx("div",{className:"w-1.5 h-10 bg-orange-400 rounded-full"}),p.jsxs("div",{children:[p.jsxs("span",{className:"block text-2xl font-bold text-gray-900",children:[t.totalFat,"g"]}),p.jsx("span",{className:"text-[10px] text-gray-400 uppercase font-bold tracking-widest",children:"Fat"})]})]})})]}),p.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-100 flex justify-between items-center text-xs font-bold text-gray-400 uppercase tracking-wider",children:[p.jsxs("span",{children:[t.entries.length," meals tracked"]}),p.jsxs("span",{className:"flex items-center gap-1.5 text-royal-600",children:[p.jsx(Hi,{size:14}),"See History Tab"]})]})]})]})})},Fde=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(2e3),[i,o]=P.useState(!0),[a,s]=P.useState("week"),[l,u]=P.useState(null),[c,d]=P.useState(null),[h,g]=P.useState(!1),[y,x]=P.useState(null),[v,b]=P.useState(Ua()),[w,_]=P.useState(new Date().toISOString().substring(0,7)),[T,S]=P.useState(!1),[E,k]=P.useState({}),[A,C]=P.useState({}),[M,R]=P.useState({}),[L,U]=P.useState({}),N=P.useRef(null);document.documentElement.classList.contains("dark");const D=P.useCallback(()=>{if(N.current){const W=N.current;W.scrollLeft=W.scrollWidth}},[]);P.useEffect(()=>{const W=setTimeout(D,100);return()=>clearTimeout(W)},[a,D]);const O=async()=>{o(!0);try{const[W,Q]=await Promise.all([Cj(),Lv()]);e(W),r(Q),F(v)}catch(W){console.error("Failed to load history data",W)}finally{o(!1)}},F=P.useCallback(async W=>{if(!A[W]){R(Q=>({...Q,[W]:!0}));try{const Q=await Pj(W);C(V=>({...V,[W]:Q}))}catch(Q){console.error(`Failed to load entries for ${W}`,Q)}finally{R(Q=>({...Q,[W]:!1}))}}},[A]),I=P.useCallback(async W=>{if(L[W]===void 0){U(Q=>({...Q,[W]:null}));try{const Q=await Nj(W);U(V=>({...V,[W]:Q}))}catch(Q){console.error(`Failed to load image for entry ${W}`,Q)}}},[L]);P.useEffect(()=>{O();const W=()=>{C({}),U({}),O()};return window.addEventListener("food-entry-updated",W),()=>window.removeEventListener("food-entry-updated",W)},[]),P.useEffect(()=>{v&&a==="week"&&F(v)},[v,F,a]);const $=async W=>{await aC(W),C({}),U({}),await O()},B=W=>{u(null),x(W),g(!0)},G=W=>(L[W.id]===void 0&&I(W.id),{...W,imageUrl:L[W.id]||void 0}),q=P.useMemo(()=>{if(a==="week"){const W=[],Q=new Date,V=new Date(Q.getFullYear(),Q.getMonth(),1);for(let te=new Date(V);te<=Q;te.setDate(te.getDate()+1)){const ie=te.getFullYear(),H=String(te.getMonth()+1).padStart(2,"0"),ke=String(te.getDate()).padStart(2,"0"),fe=`${ie}-${H}-${ke}`;W.push({id:fe,name:te.toLocaleDateString("en-US",{weekday:"short"}),label:te.getDate().toString(),date:fe})}return W}else{const W=new Set;return t.forEach(V=>{const te=V.date.substring(0,7);W.add(te)}),Array.from(W).sort().map(V=>{const[te,ie]=V.split("-"),H=new Date(parseInt(te),parseInt(ie)-1,1);return{id:V,name:H.toLocaleDateString("en-US",{year:"2-digit"}),label:H.toLocaleDateString("en-US",{month:"short"}),date:V}})}},[a,t]),X=P.useMemo(()=>{if(a==="week")return t.find(W=>W.date===v)||{date:v,totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0};{const Q=t.filter(V=>V.date.startsWith(w)).reduce((V,te)=>({totalCalories:V.totalCalories+te.totalCalories,totalProtein:V.totalProtein+te.totalProtein,totalCarbs:V.totalCarbs+te.totalCarbs,totalFat:V.totalFat+te.totalFat}),{totalCalories:0,totalProtein:0,totalCarbs:0,totalFat:0});return{date:w,...Q}}},[t,v,w,a]),se=P.useMemo(()=>a!=="month"?[]:Object.entries(A).filter(([Q])=>Q.startsWith(w)).flatMap(([Q,V])=>V).sort((Q,V)=>V.timestamp.localeCompare(Q.timestamp)),[A,w,a]),he=P.useMemo(()=>{if(a!=="month")return{};const W={};return Object.entries(A).filter(([Q])=>Q.startsWith(w)).forEach(([Q,V])=>{V.length>0&&(W[Q]=V.sort((te,ie)=>ie.timestamp.localeCompare(te.timestamp)))}),W},[A,w,a]),we=W=>{k(Q=>({...Q,[W]:!Q[W]}))};return P.useEffect(()=>{a==="month"&&t.filter(Q=>Q.date.startsWith(w)).map(Q=>Q.date).forEach(Q=>F(Q))},[a,w,t,F]),T?p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in slide-in-from-right duration-500 bg-[#F8F9FE] dark:bg-[#0F111A]",children:[p.jsxs("div",{className:"px-6 pt-10 pb-32 overflow-y-auto no-scrollbar",children:[p.jsxs("button",{onClick:()=>S(!1),className:"flex items-center gap-2 text-gray-400 dark:text-gray-500 mb-6 hover:text-royal-600 transition-colors",children:[p.jsx(xf,{size:20}),p.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Back to Report"})]}),p.jsxs("div",{className:"flex items-center justify-between mb-8",children:[p.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:"History Log"}),p.jsx("div",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 bg-royal-50 dark:bg-royal-900/20 px-3 py-1.5 rounded-xl border border-royal-100 dark:border-royal-800/50",children:a==="week"?new Date(v).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):new Date(w+"-01").toLocaleDateString(void 0,{month:"long",year:"numeric"})})]}),p.jsx("div",{className:"space-y-4",children:a==="week"?M[v]?p.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(W=>p.jsx("div",{className:"h-20 bg-white dark:bg-[#1A1C26] rounded-[24px] animate-pulse border border-gray-100 dark:border-white/5"},W))}):(A[v]||[]).length>0?(A[v]||[]).map(W=>{const Q=G(W);return p.jsxs("div",{onClick:()=>u(Q),className:"bg-white dark:bg-[#1A1C26] p-4 flex justify-between items-center rounded-[24px] shadow-sm border border-gray-100 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-white/5 transition-all cursor-pointer active:scale-[0.98]",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 dark:bg-white/5 overflow-hidden shadow-inner border border-gray-100 dark:border-white/5",children:Q.imageUrl?p.jsx("img",{src:Q.imageUrl,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-white/10 text-gray-300 dark:text-gray-700",children:p.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-700"})})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-50 font-bold",children:W.food_item}),p.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500 font-medium",children:W.time})]})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:W.calories}),p.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]},W.id)}):p.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] p-12 text-center border border-dashed border-gray-200 dark:border-white/10",children:[p.jsx(Zi,{size:32,className:"mx-auto text-gray-200 dark:text-white/5 mb-4"}),p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm font-medium",children:"No meals logged for this day."})]}):Object.keys(he).length>0?Object.entries(he).sort(([W],[Q])=>Q.localeCompare(W)).map(([W,Q])=>{const V=E[W],te=Q.reduce((ie,H)=>ie+H.calories,0);return p.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] border border-gray-100 dark:border-white/5 overflow-hidden",children:[p.jsxs("button",{onClick:()=>we(W),className:"w-full p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition-all",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`transition-transform duration-200 ${V?"rotate-90":""}`,children:p.jsx(Gi,{size:16,className:"text-gray-400"})}),p.jsxs("div",{className:"flex flex-col items-start",children:[p.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:new Date(W).toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric"})}),p.jsxs("span",{className:"text-[9px] font-medium text-gray-400",children:[Q.length," meal",Q.length!==1?"s":""]})]})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:te}),p.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]}),V&&p.jsx("div",{className:"border-t border-gray-100 dark:border-white/5",children:Q.map(ie=>{const H=G(ie);return p.jsxs("div",{onClick:()=>u(H),className:"p-4 flex justify-between items-center hover:bg-gray-50 dark:hover:bg-white/5 transition-all cursor-pointer border-b border-gray-50 dark:border-white/5 last:border-b-0",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 dark:bg-white/5 overflow-hidden shadow-inner border border-gray-100 dark:border-white/5",children:H.imageUrl?p.jsx("img",{src:H.imageUrl,className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-white/10 text-gray-300 dark:text-gray-700",children:p.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-300 dark:bg-gray-700"})})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-50 font-bold leading-tight",children:ie.food_item}),p.jsx("span",{className:"text-[9px] text-gray-400 dark:text-gray-500",children:ie.time})]})]}),p.jsxs("div",{className:"flex flex-col items-end",children:[p.jsx("span",{className:"text-sm text-royal-600 dark:text-royal-400 font-black",children:ie.calories}),p.jsx("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:"kcal"})]})]},ie.id)})})]},W)}):p.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[24px] p-12 text-center border border-dashed border-gray-200 dark:border-white/10",children:[p.jsx(Zi,{size:32,className:"mx-auto text-gray-200 dark:text-white/5 mb-4"}),p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm font-medium",children:"No data for this month."})]})})]}),l&&p.jsx(sg,{entry:l,onClose:()=>u(null),onDelete:$,onEdit:B})]}):p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 animate-in fade-in duration-500 overflow-y-auto no-scrollbar relative bg-[#F8F9FE] dark:bg-[#0F111A]",children:[p.jsxs("div",{className:"px-6 pt-10 pb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6",children:[p.jsx("h1",{className:"text-2xl font-black text-gray-900 dark:text-gray-50 tracking-tight",children:"Report"}),p.jsxs("div",{className:"flex p-1 bg-white dark:bg-[#1A1C26] rounded-xl border border-gray-100 dark:border-white/5 shadow-sm",children:[p.jsx("button",{onClick:()=>s("week"),className:`px-3 py-1 rounded-lg text-[10px] font-bold transition-all ${a==="week"?"bg-royal-600 text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-royal-500"}`,children:"Weekly"}),p.jsx("button",{onClick:()=>s("month"),className:`px-3 py-1 rounded-lg text-[10px] font-bold transition-all ${a==="month"?"bg-royal-600 text-white shadow-sm":"text-gray-400 dark:text-gray-500 hover:text-royal-500"}`,children:"Monthly"})]})]}),p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{ref:N,className:"flex gap-3 overflow-x-auto no-scrollbar pb-2 px-1 snap-x",style:{WebkitOverflowScrolling:"touch"},children:q.map(W=>{const Q=a==="week"?W.id===v:W.id===w,V=t.some(te=>a==="week"?te.date===W.id:te.date.startsWith(W.id));return p.jsxs("button",{onClick:()=>a==="week"?b(W.id):_(W.id),className:`flex-shrink-0 flex flex-col items-center justify-center w-12 py-3 rounded-2xl transition-all duration-300 snap-center ${Q?"bg-royal-600 text-white shadow-lg shadow-royal-200 dark:shadow-royal-900/40 transform scale-110":"bg-white dark:bg-[#1A1C26] text-gray-400 dark:text-gray-500 border border-gray-100 dark:border-white/5"}`,children:[p.jsx("span",{className:`text-[9px] font-bold uppercase mb-1 ${Q?"text-white/70":"text-gray-400"}`,children:W.name}),p.jsx("span",{className:"text-sm font-extrabold",children:W.label}),V&&!Q&&p.jsx("div",{className:"w-1 h-1 rounded-full bg-royal-400 mt-1"})]},W.id)})}),p.jsx("div",{className:"absolute top-0 left-0 bottom-2 w-8 bg-gradient-to-r from-[#F8F9FE] dark:from-[#0F111A] to-transparent pointer-events-none z-10"}),p.jsx("div",{className:"absolute top-0 right-0 bottom-2 w-8 bg-gradient-to-l from-[#F8F9FE] dark:from-[#0F111A] to-transparent pointer-events-none z-10"})]}),p.jsx("div",{className:"mb-8",children:p.jsxs("div",{className:"bg-white dark:bg-[#1A1C26] rounded-[28px] p-6 shadow-sm border border-gray-100 dark:border-white/5 flex flex-col items-center",children:[p.jsx("span",{className:"text-[9px] font-bold text-gray-400 dark:text-gray-500 uppercase tracking-widest mb-1",children:a==="week"?"Daily Total":"Monthly Total"}),p.jsxs("div",{className:"flex flex-col items-center mb-6",children:[p.jsx("span",{className:"text-5xl font-black text-gray-900 dark:text-gray-50 tracking-tighter",children:Math.round(X.totalCalories)}),p.jsx("span",{className:"text-[10px] font-black text-royal-600 dark:text-royal-400 uppercase tracking-widest mt-0.5",children:"KCAL"})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-2.5 w-full",children:[p.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-emerald-50/30 dark:bg-emerald-500/5 rounded-2xl border border-emerald-100/50 dark:border-emerald-500/10 transition-colors",children:[p.jsx("span",{className:"text-[8px] font-bold text-emerald-600/60 dark:text-emerald-400/60 uppercase mb-0.5",children:"Protein"}),p.jsxs("span",{className:"text-sm font-black text-emerald-600 dark:text-emerald-400",children:[Math.round(X.totalProtein),"g"]})]}),p.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-amber-50/30 dark:bg-amber-500/5 rounded-2xl border border-amber-100/50 dark:border-amber-500/10 transition-colors",children:[p.jsx("span",{className:"text-[8px] font-bold text-amber-600/60 dark:text-amber-400/60 uppercase mb-0.5",children:"Carbs"}),p.jsxs("span",{className:"text-sm font-black text-amber-600 dark:text-amber-400",children:[Math.round(X.totalCarbs),"g"]})]}),p.jsxs("div",{className:"flex flex-col items-center py-2.5 bg-rose-50/30 dark:bg-rose-500/5 rounded-2xl border border-rose-100/50 dark:border-rose-500/10 transition-colors",children:[p.jsx("span",{className:"text-[8px] font-bold text-rose-600/60 dark:text-rose-400/60 uppercase mb-0.5",children:"Fat"}),p.jsxs("span",{className:"text-sm font-black text-rose-600 dark:text-rose-400",children:[Math.round(X.totalFat),"g"]})]})]})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[p.jsxs(Mt,{className:"p-5 flex flex-col justify-between h-36 bg-gradient-to-br from-royal-500 to-royal-700 text-white border-none shadow-royal-200/50",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-bold text-white/70 uppercase mb-1",children:a==="week"?"Coach Tips":"Monthly Report"}),p.jsx("h3",{className:"text-lg font-black leading-tight",children:a==="week"?"Weekly Review":p.jsxs(p.Fragment,{children:["Your Health",p.jsx("br",{}),"Summary"]})})]}),p.jsxs("div",{className:"mt-2 py-2 bg-white/20 rounded-xl text-[10px] font-bold backdrop-blur-sm flex items-center justify-center gap-2",children:[a==="week"?"COMING SOON":"VIEW DETAILS",p.jsx(Gi,{size:12})]})]}),p.jsxs("div",{className:"grid grid-rows-2 gap-4 h-36",children:[p.jsxs(Mt,{onClick:()=>S(!0),className:"p-4 flex flex-col justify-center bg-white dark:bg-[#1A1C26] border-gray-100 dark:border-white/5 active:scale-95 transition-transform cursor-pointer",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"History Log"}),p.jsx(Gi,{size:10,className:"text-gray-300"})]}),p.jsxs("p",{className:"text-xs font-black text-gray-900 dark:text-gray-50",children:[a==="week"?(A[v]||[]).length:se.length," Meals"]})]}),p.jsxs(Mt,{className:"p-4 flex flex-col justify-center bg-white dark:bg-[#1A1C26] border-gray-100 dark:border-white/5",children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("p",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"Goal Status"}),p.jsx(kM,{size:10,className:"text-gray-300"})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("div",{className:"flex-1 h-1 bg-gray-100 dark:bg-white/5 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-royal-500 rounded-full",style:{width:`${Math.min(X.totalCalories/(a==="week"?n:n*30)*100,100)}%`}})}),p.jsxs("span",{className:"text-[10px] font-black text-gray-900 dark:text-gray-50",children:[Math.round(X.totalCalories/(a==="week"?n:n*30)*100),"%"]})]})]})]})]}),p.jsx("div",{className:"h-24"})]}),l&&p.jsx(sg,{entry:l,onClose:()=>u(null),onDelete:$,onEdit:B}),c&&p.jsx(Ude,{summary:c,onClose:()=>d(null)}),h&&p.jsx(aP,{editEntry:y,onClose:()=>{g(!1),x(null)},onSuccess:()=>{g(!1),x(null),C({}),U({}),O()},onOpenSharedMeal:()=>{g(!1)}})]})},Bde=()=>{const[t,e]=P.useState(!0),[n,r]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(null),[l,u]=P.useState(!1),[c,d]=P.useState(null),h=async g=>{g.preventDefault(),s(null),d(null),u(!0);try{t?await eC(n,i):(await bj(n,i),t||(d("Account created successfully!"),e(!0)))}catch(y){console.error(y),s(y.message||"Authentication failed")}finally{u(!1)}};return p.jsxs("div",{className:"min-h-screen bg-royal-50 flex flex-col items-center justify-center p-6 relative overflow-hidden",children:[p.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[p.jsx("div",{className:"absolute top-[-20%] right-[-20%] w-[500px] h-[500px] bg-royal-200/40 rounded-full blur-[100px]"}),p.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-pink-200/40 rounded-full blur-[80px]"})]}),p.jsxs("div",{className:"w-full max-w-sm z-10",children:[p.jsxs("div",{className:"text-center mb-10",children:[p.jsx("div",{className:"w-20 h-20 bg-white rounded-[24px] flex items-center justify-center mx-auto mb-6 shadow-xl shadow-royal-200 rotate-3 transition-transform hover:rotate-0 duration-500",children:p.jsx(RA,{size:36,className:"text-royal-600 fill-royal-600"})}),p.jsx("h1",{className:"text-4xl font-extrabold text-gray-900 tracking-tight mb-2",children:"SnapCal AI"}),p.jsx("p",{className:"text-gray-500 font-medium",children:"Track your vibe, not just calories."})]}),p.jsxs("div",{className:"bg-white/80 backdrop-blur-xl border border-white p-8 rounded-[40px] shadow-[0_20px_40px_-12px_rgba(0,0,0,0.05)]",children:[p.jsxs("div",{className:"flex p-1 bg-gray-100 rounded-[20px] mb-8",children:[p.jsx("button",{onClick:()=>{e(!0),s(null),d(null)},className:`flex-1 py-3 text-sm font-bold rounded-[16px] transition-all duration-300 ${t?"bg-white text-royal-700 shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Sign In"}),p.jsx("button",{onClick:()=>{e(!1),s(null),d(null)},className:`flex-1 py-3 text-sm font-bold rounded-[16px] transition-all duration-300 ${t?"text-gray-400 hover:text-gray-600":"bg-white text-royal-700 shadow-sm"}`,children:"Sign Up"})]}),p.jsxs("form",{onSubmit:h,className:"space-y-5",children:[a&&p.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-2xl flex items-center gap-3 text-red-600 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:[p.jsx(kv,{size:18}),a]}),c&&p.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-100 rounded-2xl flex items-center gap-3 text-emerald-600 text-sm font-medium animate-in fade-in slide-in-from-top-2",children:[p.jsx(Im,{size:18}),c]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 ml-1",children:"Email"}),p.jsx("input",{type:"email",required:!0,value:n,onChange:g=>r(g.target.value),className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 text-gray-900 transition-all placeholder:text-gray-400 font-medium",placeholder:"hello@snapcal.ai"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 ml-1",children:"Password"}),p.jsx("input",{type:"password",required:!0,value:i,onChange:g=>o(g.target.value),className:"w-full p-4 bg-gray-50 border border-gray-100 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 text-gray-900 transition-all placeholder:text-gray-400 font-medium",placeholder:"",minLength:6})]})]}),p.jsxs(rt,{className:"w-full mt-4 flex justify-between items-center group py-5",isLoading:l,children:[p.jsx("span",{children:t?"Sign In":"Create Account"}),!l&&p.jsx(Bc,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]})]}),p.jsx("p",{className:"text-center text-gray-400 text-xs mt-8 font-medium",children:t?"New here? Create an account above.":"Welcome back. Sign in above."})]})]})},hT=`
-- Run this in your Supabase SQL Editor

-- 1. Create Food Entries Table
create table if not exists food_entries (
  id uuid primary key,
  user_id uuid not null references auth.users(id),
  timestamp text not null,
  date text not null,
  time text not null,
  food_item text not null,
  calories integer not null,
  protein integer default 0,
  carbs integer default 0,
  fat integer default 0,
  confidence float default 1.0,
  is_manual boolean default false,
  image_url text,
  ingredients jsonb default '[]'::jsonb,
  original_ai_response jsonb,
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 2. Create User Profiles Table
create table if not exists user_profiles (
  user_id uuid primary key references auth.users(id),
  name text,
  height float,
  weight float,
  age integer,
  gender text check (gender in ('male', 'female')),
  activity_level text check (activity_level in ('sedentary', 'light', 'moderate', 'very', 'extra')),
  goal text check (goal in ('cut', 'bulk', 'maintain')),
  equipment_access text check (equipment_access in ('gym', 'home', 'bodyweight')),
  created_at timestamp with time zone default timezone('utc'::text, now())
);

-- 3. Create Settings Table
create table if not exists user_settings (
  user_id uuid primary key references auth.users(id),
  daily_goal integer default 2000,
  has_completed_onboarding boolean default false
);

-- 4. Create Summaries Table (Optional optimization)
create table if not exists daily_summaries (
  id text primary key, -- Composite key user_id + date usually
  user_id uuid not null references auth.users(id),
  date text not null,
  total_calories integer default 0,
  total_protein integer default 0,
  total_carbs integer default 0,
  total_fat integer default 0
);

-- 5. Enable Row Level Security (RLS)
alter table food_entries enable row level security;
alter table user_profiles enable row level security;
alter table user_settings enable row level security;
alter table daily_summaries enable row level security;

-- 6. Create Policies (Allow users to see/edit ONLY their own data)

-- Food Entries
create policy "Users can all own entries" on food_entries
  for all using (auth.uid() = user_id);

-- Profiles
create policy "Users can all own profile" on user_profiles
  for all using (auth.uid() = user_id);

-- Settings
create policy "Users can all own settings" on user_settings
  for all using (auth.uid() = user_id);

-- Summaries
create policy "Users can all own summaries" on daily_summaries
  for all using (auth.uid() = user_id);
`,zde=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[i,o]=P.useState(""),[a,s]=P.useState(""),[l,u]=P.useState(""),[c,d]=P.useState(""),[h,g]=P.useState(""),[y,x]=P.useState(""),[v,b]=P.useState(!1),[w,_]=P.useState(!1),[T,S]=P.useState(null),[E,k]=P.useState(document.documentElement.classList.contains("dark")),[A,C]=P.useState(!1),[M,R]=P.useState(!1),[L,U]=P.useState(!1),[N,D]=P.useState("checking"),[O,F]=P.useState(!1),[I,$]=P.useState(!1);P.useEffect(()=>{X(),ye?(R(Rj()),B()):D("ok")},[]);const B=async()=>{const J=await $j();J.missingTables?D("missing_tables"):J.ok?D("ok"):D("error")},G=()=>{const J=!E;k(J),J?(document.documentElement.classList.add("dark"),localStorage.setItem("snapcal-theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("snapcal-theme","light"))},q=J=>{if(J===Vm())return;confirm(J==="local"?"Switching to Local Mode means your data will stay on this device only. You will be logged out of Cloud to create a local profile.":"Switching to Cloud Mode allows you to sync data across devices. You will be redirected to log in or sign up.")&&vj(J)},X=async()=>{const J=await Uv();J&&(e(J.name),r(J.height.toString()),o(J.weight.toString()),J.age&&s(J.age.toString()),J.gender&&u(J.gender),J.activityLevel&&d(J.activityLevel),J.goal&&g(J.goal),J.equipmentAccess&&x(J.equipmentAccess))},se=()=>{const J=parseFloat(n),Me=parseFloat(i);return!J||!Me?null:Me/(J/100*(J/100))},he=J=>J<18.5?{label:"Underweight",color:"text-blue-300"}:J<25?{label:"Healthy",color:"text-emerald-300"}:J<30?{label:"Overweight",color:"text-orange-300"}:{label:"Obese",color:"text-red-300"},we=J=>{const Z=(10*parseFloat(i)+6.25*parseFloat(n)-5*25+5)*1.2;return J<18.5?Math.round(Z+400):J>25?Math.round(Z-400):Math.round(Z)},W=async()=>{if(!(!t||!n||!i)){b(!0);try{await Fv({name:t,height:parseFloat(n),weight:parseFloat(i),age:a?parseInt(a):void 0,gender:l||void 0,activityLevel:c||void 0,goal:h||void 0,equipmentAccess:y||void 0}),_(!0),setTimeout(()=>_(!1),2e3);const J=se();if(J){const Me=we(J);S(Me)}}catch(J){console.error(J)}finally{b(!1)}}},Q=async()=>{T&&(await Af(T),alert(`Daily goal updated to ${T} kcal!`))},V=async()=>{if(confirm("Are you sure you want to sign out?")){C(!0);try{await wj()}catch(J){console.error(J)}finally{C(!1)}}},te=async()=>{if(confirm("This will upload your local history to your Supabase account and clear local storage. Continue?")){U(!0);try{await Mj(),R(!1),alert("Migration successful! Your local history is now in the cloud.")}catch(J){alert("Sync failed: "+J.message)}finally{U(!1)}}},ie=()=>{navigator.clipboard.writeText(hT),alert("SQL Copied to clipboard! Paste it into the Supabase SQL Editor.")},H=se(),ke=H?he(H):null,fe=H?we(H):null,Oe=Vm();return p.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar pb-32 px-6 pt-10 space-y-8 animate-in fade-in duration-500",children:[p.jsxs("header",{children:[p.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-xs font-semibold uppercase tracking-widest mb-2",children:"My Profile"}),p.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 dark:text-gray-50 tracking-tight",children:"Personal Details"})]}),ye&&M&&p.jsx("div",{className:"bg-indigo-50 dark:bg-indigo-950/30 border border-indigo-100 dark:border-indigo-900/40 p-5 rounded-[32px] animate-in slide-in-from-top-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"p-3 bg-indigo-100 dark:bg-indigo-900/50 rounded-2xl text-indigo-600 dark:text-indigo-400",children:p.jsx(LM,{size:24})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-extrabold text-indigo-900 dark:text-indigo-200",children:"Local Data Found"}),p.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-300 mt-1 mb-3 leading-relaxed",children:"We found meal history on this device that isn't in the cloud yet. Sync now to secure your data."}),p.jsx(rt,{onClick:te,isLoading:L,className:"py-3 px-6 text-xs bg-indigo-600 hover:bg-indigo-700 shadow-lg shadow-indigo-200 dark:shadow-none",children:"Sync to Cloud"})]})]})}),ye&&N==="missing_tables"&&p.jsx("div",{className:"bg-rose-50 dark:bg-rose-950/30 border border-rose-100 dark:border-rose-900/40 p-5 rounded-[32px] animate-in slide-in-from-top-4",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900/50 rounded-2xl text-rose-600 dark:text-rose-400",children:p.jsx(gb,{size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-sm font-extrabold text-rose-900 dark:text-rose-200",children:"Database Setup Required"}),p.jsx("p",{className:"text-xs text-rose-700 dark:text-rose-300 mt-1 mb-3 leading-relaxed",children:"Your Supabase project is connected, but the required tables don't exist yet. Saving will fail until you run the setup script."}),p.jsxs("button",{onClick:()=>F(!O),className:"flex items-center gap-2 py-2 px-4 rounded-xl text-xs font-bold bg-white dark:bg-white/10 text-rose-600 dark:text-rose-200 shadow-sm",children:[p.jsx(wM,{size:14})," ",O?"Hide SQL":"View SQL Script"]}),O&&p.jsxs("div",{className:"mt-4 animate-in slide-in-from-top-2",children:[p.jsx("div",{className:"bg-gray-900 rounded-xl p-3 mb-2 overflow-x-auto border border-white/10",children:p.jsx("pre",{className:"text-[10px] text-emerald-400 font-mono leading-relaxed",children:hT})}),p.jsxs(rt,{onClick:ie,className:"w-full py-3 text-xs bg-rose-600 hover:bg-rose-700 text-white",children:[p.jsx(_M,{size:14,className:"mr-2"})," Copy SQL to Clipboard"]}),p.jsx("p",{className:"text-[10px] text-rose-600/70 dark:text-rose-400/70 mt-2 italic text-center",children:"Paste this into the SQL Editor in your Supabase Dashboard."})]})]})]})}),p.jsx("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 bg-royal-50 dark:bg-royal-950/30 rounded-2xl flex items-center justify-center text-royal-600 dark:text-royal-400",children:E?p.jsx(NM,{size:20}):p.jsx(jM,{size:20})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Dark Mode"}),p.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Optimize for low light"})]})]}),p.jsx("button",{onClick:G,className:`w-14 h-8 rounded-full transition-all duration-300 relative ${E?"bg-royal-600":"bg-gray-200 dark:bg-gray-800"}`,children:p.jsx("div",{className:`absolute top-1 left-1 w-6 h-6 bg-white rounded-full shadow-sm transition-transform duration-300 ${E?"translate-x-6":""}`})})]})}),H&&ke&&fe&&p.jsxs("div",{className:"relative rounded-[32px] p-6 text-white overflow-hidden shadow-xl bg-royal-600 shadow-royal-200 dark:shadow-royal-900/40 animate-in slide-in-from-bottom-4 duration-500",children:[p.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),p.jsx("div",{className:"absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-black/10 rounded-full blur-3xl"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex justify-between items-start mb-6",children:[p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx(Tv,{size:16,className:"text-royal-200"}),p.jsx("span",{className:"text-royal-200 text-xs font-bold uppercase tracking-widest",children:"Body Insight"})]}),p.jsxs("h2",{className:"text-3xl font-extrabold tracking-tight",children:["BMI: ",H.toFixed(1)]})]}),p.jsx("div",{className:`px-3 py-1 rounded-full bg-white/10 backdrop-blur-md border border-white/10 text-sm font-bold ${ke.color}`,children:ke.label})]}),p.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-[24px] p-5 border border-white/5",children:[p.jsx("p",{className:"text-white/70 text-xs font-medium mb-3",children:"Based on your profile, we recommend a daily calorie limit of:"}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-baseline gap-1",children:[p.jsx("span",{className:"text-4xl font-extrabold tracking-tighter",children:fe}),p.jsx("span",{className:"text-lg font-bold text-white/60",children:"kcal"})]}),p.jsx("button",{onClick:Q,className:"w-10 h-10 bg-white text-royal-600 rounded-full flex items-center justify-center hover:scale-110 active:scale-95 transition-all shadow-lg",children:p.jsx(Bc,{size:20,strokeWidth:3})})]})]})]})]}),p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark space-y-5",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",value:t,onChange:J=>e(J.target.value),placeholder:"Enter your name",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(fa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Height (cm)"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:n,onChange:J=>r(J.target.value),placeholder:"175",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(IA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Weight (kg)"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:i,onChange:J=>o(J.target.value),placeholder:"70",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(OA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Age"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:a,onChange:J=>s(J.target.value),placeholder:"25",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(Zi,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Gender"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:l,onChange:J=>u(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"})]}),p.jsx(Mm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]})]}),p.jsxs("div",{className:"pt-4 border-t border-gray-100 dark:border-white/5",children:[p.jsxs("button",{type:"button",onClick:()=>$(!I),className:"w-full flex items-center justify-between mb-3 group",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Rm,{size:16,className:"text-royal-600 dark:text-royal-400"}),p.jsx("p",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"Training Goal Setting"})]}),p.jsx(AA,{size:18,className:`text-royal-600 dark:text-royal-400 transition-transform duration-300 ${I?"rotate-180":""}`})]}),p.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-500 mb-3 ml-1",children:"Optional - Fill this for personalized AI Coach recommendations"}),I&&p.jsxs("div",{className:"space-y-5 animate-in slide-in-from-top-2 duration-300",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Activity Level"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:c,onChange:J=>d(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"sedentary",children:"Sedentary (Little or no exercise)"}),p.jsx("option",{value:"light",children:"Lightly Active (1-3 days/week)"}),p.jsx("option",{value:"moderate",children:"Moderately Active (3-5 days/week)"}),p.jsx("option",{value:"very",children:"Very Active (6-7 days/week)"}),p.jsx("option",{value:"extra",children:"Extra Active (Intense daily)"})]}),p.jsx(Hi,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Goal"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:h,onChange:J=>g(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"cut",children:"Cut (Lose Fat)"}),p.jsx("option",{value:"bulk",children:"Bulk (Gain Muscle)"}),p.jsx("option",{value:"maintain",children:"Maintain"})]}),p.jsx(Rm,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Equipment"}),p.jsxs("div",{className:"relative",children:[p.jsxs("select",{value:y,onChange:J=>x(J.target.value),className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all appearance-none cursor-pointer",children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"gym",children:"Gym Access"}),p.jsx("option",{value:"home",children:"Home Equipment"}),p.jsx("option",{value:"bodyweight",children:"Bodyweight Only"})]}),p.jsx(Gc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none",size:20})]})]})]})]})]}),p.jsx(rt,{className:"w-full py-5 text-lg shadow-lg shadow-royal-200 dark:shadow-royal-900/40",onClick:W,isLoading:v,children:w?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsx(kA,{size:20})," Saved"]}):"Save Profile"})]}),ha&&p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] p-6 rounded-[32px] border border-gray-100 dark:border-white/5 shadow-diffused dark:shadow-diffused-dark",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center ${Oe==="cloud"?"bg-emerald-50 dark:bg-emerald-950/30 text-emerald-600":"bg-gray-100 dark:bg-white/10 text-gray-500"}`,children:Oe==="cloud"?p.jsx(bM,{size:20}):p.jsx(PA,{size:20})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-gray-50",children:"Storage Mode"}),p.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:Oe==="cloud"?"Connected to Supabase":"Device Storage Only"})]})]}),ye&&p.jsx("button",{onClick:B,className:"p-2 text-gray-400 hover:text-royal-500 transition-colors",title:"Check Connection",children:p.jsx(Om,{size:16,className:N==="checking"?"animate-spin":""})})]}),p.jsxs("div",{className:"flex p-1 bg-gray-100 dark:bg-white/5 rounded-2xl",children:[p.jsx("button",{onClick:()=>q("local"),className:`flex-1 py-3 text-xs font-bold rounded-xl transition-all ${Oe==="local"?"bg-white dark:bg-white/10 text-gray-900 dark:text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Device Only"}),p.jsx("button",{onClick:()=>q("cloud"),className:`flex-1 py-3 text-xs font-bold rounded-xl transition-all ${Oe==="cloud"?"bg-emerald-500 text-white shadow-sm":"text-gray-400 hover:text-gray-600"}`,children:"Cloud Sync"})]})]}),p.jsx("div",{className:"pt-4",children:p.jsx("button",{onClick:V,disabled:A,className:"w-full flex items-center justify-center gap-3 py-5 rounded-[24px] border border-red-200 dark:border-red-900/30 text-red-500 dark:text-red-400 font-bold hover:bg-red-50 dark:hover:bg-red-950/20 active:scale-95 transition-all shadow-sm",children:A?p.jsx(Om,{size:20,className:"animate-spin"}):p.jsxs(p.Fragment,{children:[p.jsx(CM,{size:20}),p.jsx("span",{children:"Sign Out"})]})})}),p.jsx("div",{className:"text-center pt-4 pb-2",children:p.jsxs("div",{className:`inline-flex items-center gap-2 px-4 py-2 rounded-full text-[10px] font-bold border transition-colors ${ye?"bg-emerald-50 dark:bg-emerald-950/20 text-emerald-700 dark:text-emerald-400 border-emerald-100 dark:border-emerald-900/30":"bg-amber-50 dark:bg-amber-950/20 text-amber-700 dark:text-amber-400 border-amber-100 dark:border-amber-900/30"}`,children:[p.jsx(gb,{size:12}),p.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ye?"bg-emerald-500 animate-pulse":"bg-amber-500"}`}),ye?"Syncing to Supabase":"Local Storage Mode"]})})]})},Gde=({user:t,onComplete:e})=>{const[n,r]=P.useState(0),[i,o]=P.useState(""),[a,s]=P.useState(""),[l,u]=P.useState(""),[c,d]=P.useState(!1),h=5,g=()=>{const E=parseFloat(a),k=parseFloat(l);return!E||!k?null:k/(E/100*(E/100))},y=E=>{const C=(10*parseFloat(l)+6.25*parseFloat(a)-5*25+5)*1.2;return E<18.5?Math.round(C+400):E>25?Math.round(C-400):Math.round(C)},x=()=>{n<h-1&&r(n+1)},v=()=>{n>0&&r(n-1)},b=async()=>{await jj(t),e()},w=async()=>{d(!0);try{if(i&&a&&l){await Fv({name:i,height:parseFloat(a),weight:parseFloat(l)});const E=g();if(E){const k=y(E);await Af(k)}}await sC(t),e()}catch(E){console.error("Failed to save onboarding data:",E),alert("Failed to save your profile. Please try again.")}finally{d(!1)}},_=i&&a&&l,T=g(),S=T?y(T):null;return p.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-surface via-royal-50/30 to-royal-100/40 dark:from-surface-dark dark:via-royal-950/20 dark:to-black flex items-center justify-center p-4 relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-royal-200/20 dark:bg-royal-800/10 rounded-full blur-3xl animate-pulse"}),p.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-purple-200/20 dark:bg-purple-900/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),p.jsxs("button",{onClick:b,className:"absolute top-6 right-6 z-50 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors text-sm font-medium flex items-center gap-1",children:["Skip ",p.jsx(_n,{size:16})]}),p.jsxs("div",{className:"relative z-10 w-full max-w-2xl",children:[p.jsx("div",{className:"flex justify-center gap-2 mb-8",children:Array.from({length:h}).map((E,k)=>p.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${k===n?"w-12 bg-royal-600 dark:bg-royal-500":k<n?"w-8 bg-royal-400 dark:bg-royal-600":"w-8 bg-gray-200 dark:bg-gray-700"}`},k))}),p.jsxs("div",{className:"bg-white dark:bg-[#1a1c26] rounded-[40px] shadow-diffused-lg dark:shadow-diffused-dark p-8 md:p-12 min-h-[500px] flex flex-col",children:[n===0&&p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center animate-in fade-in slide-in-from-bottom-4 duration-500",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-royal-500 to-purple-600 rounded-[32px] flex items-center justify-center shadow-xl shadow-royal-200 dark:shadow-royal-900/40 animate-in zoom-in duration-700",children:p.jsx(or,{size:48,className:"text-white",strokeWidth:2})}),p.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-400 rounded-full animate-bounce"})]}),p.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-gray-50 mb-4 tracking-tight",children:"Welcome to SnapCal AI"}),p.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Your AI-Powered Nutrition Companion"}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 max-w-md leading-relaxed",children:"Track calories effortlessly with the power of artificial intelligence. Just snap a photo of your meal and let AI do the rest."}),p.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6 w-full max-w-md",children:[p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:"w-14 h-14 bg-royal-50 dark:bg-royal-950/30 rounded-2xl flex items-center justify-center",children:p.jsx(zi,{size:28,className:"text-royal-600 dark:text-royal-400"})}),p.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Snap"})]}),p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:"w-14 h-14 bg-purple-50 dark:bg-purple-950/30 rounded-2xl flex items-center justify-center",children:p.jsx(RA,{size:28,className:"text-purple-600 dark:text-purple-400"})}),p.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Analyze"})]}),p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx("div",{className:"w-14 h-14 bg-emerald-50 dark:bg-emerald-950/30 rounded-2xl flex items-center justify-center",children:p.jsx(Hi,{size:28,className:"text-emerald-600 dark:text-emerald-400"})}),p.jsx("span",{className:"text-xs font-bold text-gray-700 dark:text-gray-300",children:"Track"})]})]})]}),n===1&&p.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[p.jsxs("div",{className:"mb-8 text-center",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-royal-50 dark:bg-royal-950/30 rounded-full mb-4",children:[p.jsx(zi,{size:16,className:"text-royal-600 dark:text-royal-400"}),p.jsx("span",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"How It Works"})]}),p.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Instant Nutrition Insights"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Our AI analyzes your food photos to provide accurate calorie counts and nutritional breakdowns in seconds."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[p.jsx("div",{className:"w-12 h-12 bg-royal-100 dark:bg-royal-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:p.jsx(zi,{size:24,className:"text-royal-600 dark:text-royal-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"1. Capture Your Meal"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Take a photo of any dish, snack, or beverage"})]})]}),p.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[p.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:p.jsx(or,{size:24,className:"text-purple-600 dark:text-purple-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"2. AI Recognition"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Advanced AI identifies ingredients and portions instantly"})]})]}),p.jsxs("div",{className:"flex items-start gap-4 p-5 bg-gray-50 dark:bg-white/5 rounded-[24px] border border-gray-100 dark:border-white/5",children:[p.jsx("div",{className:"w-12 h-12 bg-emerald-100 dark:bg-emerald-900/30 rounded-2xl flex items-center justify-center flex-shrink-0",children:p.jsx(Hi,{size:24,className:"text-emerald-600 dark:text-emerald-400"})}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-50 mb-1",children:"3. Get Detailed Breakdown"}),p.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Calories, protein, carbs, and fatsall automatically calculated"})]})]})]})]}),n===2&&p.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[p.jsxs("div",{className:"mb-8 text-center",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-purple-50 dark:bg-purple-950/30 rounded-full mb-4",children:[p.jsx(yb,{size:16,className:"text-purple-600 dark:text-purple-400"}),p.jsx("span",{className:"text-xs font-bold text-purple-600 dark:text-purple-400 uppercase tracking-wider",children:"Personalization"})]}),p.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Why Your Profile Matters"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Share a few details to unlock truly personalized nutrition recommendations tailored just for you."})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"p-6 bg-gradient-to-br from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[28px] border border-royal-100 dark:border-royal-900/30",children:[p.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:p.jsx(Rm,{size:24,className:"text-royal-600 dark:text-royal-400"})}),p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Accurate Goals"}),p.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Get a science-backed daily calorie target based on your unique body metrics and health objectives."})]}),p.jsxs("div",{className:"p-6 bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-emerald-950/20 dark:to-teal-950/20 rounded-[28px] border border-emerald-100 dark:border-emerald-900/30",children:[p.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:p.jsx(Hi,{size:24,className:"text-emerald-600 dark:text-emerald-400"})}),p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Smart Insights"}),p.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Receive personalized BMI analysis and recommendations to help you reach your ideal weight."})]}),p.jsxs("div",{className:"p-6 bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-950/20 dark:to-amber-950/20 rounded-[28px] border border-orange-100 dark:border-orange-900/30",children:[p.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:p.jsx(or,{size:24,className:"text-orange-600 dark:text-orange-400"})}),p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Better Tracking"}),p.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"See how your intake compares to your goals and adjust your habits for optimal results."})]}),p.jsxs("div",{className:"p-6 bg-gradient-to-br from-pink-50 to-rose-50 dark:from-pink-950/20 dark:to-rose-950/20 rounded-[28px] border border-pink-100 dark:border-pink-900/30",children:[p.jsx("div",{className:"w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center mb-4 shadow-sm",children:p.jsx(yb,{size:24,className:"text-pink-600 dark:text-pink-400"})}),p.jsx("h3",{className:"font-extrabold text-gray-900 dark:text-gray-50 mb-2",children:"Long-term Success"}),p.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:"Build sustainable habits with data-driven feedback tailored to your wellness journey."})]})]})]}),n===3&&p.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-right-4 duration-500",children:[p.jsxs("div",{className:"mb-6 text-center",children:[p.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-royal-50 dark:bg-royal-950/30 rounded-full mb-4",children:[p.jsx(fa,{size:16,className:"text-royal-600 dark:text-royal-400"}),p.jsx("span",{className:"text-xs font-bold text-royal-600 dark:text-royal-400 uppercase tracking-wider",children:"Your Details"})]}),p.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-50 mb-3",children:"Set Up Your Profile"}),p.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm max-w-lg mx-auto",children:"Just a few quick details to personalize your experience"})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Display Name"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"text",value:i,onChange:E=>o(E.target.value),placeholder:"Enter your name",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(fa,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Height (cm)"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:a,onChange:E=>s(E.target.value),placeholder:"175",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(IA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-2 ml-1",children:"Weight (kg)"}),p.jsxs("div",{className:"relative",children:[p.jsx("input",{type:"number",value:l,onChange:E=>u(E.target.value),placeholder:"70",className:"w-full p-4 pl-12 bg-gray-50 dark:bg-white/5 border border-gray-100 dark:border-white/5 rounded-[20px] focus:outline-none focus:ring-2 focus:ring-royal-200 focus:border-royal-400 font-bold text-gray-900 dark:text-gray-50 transition-all placeholder:text-gray-300 dark:placeholder:text-gray-600"}),p.jsx(OA,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",size:20})]})]})]}),T&&p.jsxs("div",{className:"p-5 bg-gradient-to-r from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[24px] border border-royal-100 dark:border-royal-900/30 animate-in slide-in-from-bottom-2",children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("span",{className:"text-xs font-bold text-royal-700 dark:text-royal-300 uppercase tracking-wider",children:"Your BMI"}),p.jsx("span",{className:"text-2xl font-extrabold text-royal-900 dark:text-royal-100",children:T.toFixed(1)})]}),S&&p.jsxs("p",{className:"text-xs text-royal-600 dark:text-royal-400",children:["Recommended daily goal: ",p.jsxs("span",{className:"font-bold",children:[S," kcal"]})]})]})]})]}),n===4&&p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center animate-in fade-in zoom-in duration-500",children:[p.jsxs("div",{className:"relative mb-8",children:[p.jsx("div",{className:"w-28 h-28 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center shadow-2xl shadow-emerald-200 dark:shadow-emerald-900/40 animate-in zoom-in duration-700",children:p.jsx(kA,{size:56,className:"text-white",strokeWidth:3})}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full animate-ping opacity-20"})]}),p.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-gray-900 dark:text-gray-50 mb-4 tracking-tight",children:"You're All Set!"}),p.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Your personalized nutrition journey begins now"}),i&&S&&p.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-royal-50 to-purple-50 dark:from-royal-950/20 dark:to-purple-950/20 rounded-[28px] border border-royal-100 dark:border-royal-900/30 max-w-md w-full",children:[p.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:["Welcome, ",p.jsx("span",{className:"font-bold text-royal-600 dark:text-royal-400",children:i}),"!"]}),p.jsxs("div",{className:"flex items-baseline gap-2 justify-center",children:[p.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-500 font-medium",children:"Daily Goal:"}),p.jsx("span",{className:"text-3xl font-extrabold text-royal-900 dark:text-royal-100",children:S}),p.jsx("span",{className:"text-sm font-bold text-gray-500 dark:text-gray-500",children:"kcal"})]})]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-6 max-w-md leading-relaxed",children:"Start snapping photos of your meals to track your nutrition effortlessly. We'll help you stay on track!"})]}),p.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-100 dark:border-white/5",children:[p.jsxs("button",{onClick:v,disabled:n===0,className:`flex items-center gap-2 px-5 py-3 rounded-[16px] font-bold text-sm transition-all ${n===0?"opacity-0 pointer-events-none":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5"}`,children:[p.jsx(xf,{size:20}),"Back"]}),n===h-1?p.jsxs(rt,{onClick:w,isLoading:c,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Start Tracking",p.jsx(Gi,{size:20,className:"ml-1"})]}):n===3?p.jsxs(rt,{onClick:x,disabled:!_,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Continue",p.jsx(Gi,{size:20,className:"ml-1"})]}):p.jsxs(rt,{onClick:x,className:"px-8 py-4 text-base shadow-xl shadow-royal-200 dark:shadow-royal-900/40",children:["Next",p.jsx(Gi,{size:20,className:"ml-1"})]})]})]})]})]})};function Hde(){const[t,e]=P.useState(Ce.DASHBOARD),[n,r]=P.useState(null),[i,o]=P.useState(!0),[a,s]=P.useState(!1),[l,u]=P.useState(!0);P.useEffect(()=>{qe().then(h=>{r(h),o(!1),h&&Gb().catch(g=>console.error("Cleanup failed:",g))});const d=_j(h=>{r(h),o(!1),h&&Gb().catch(g=>console.error("Cleanup failed:",g))});return()=>d()},[]),P.useEffect(()=>{Hj()&&(console.log(" New day detected on app load! Clearing stale caches..."),Xt.clearDateSensitiveCaches(),window.dispatchEvent(new CustomEvent("midnight-refresh")));const d=Gj(()=>{console.log(" Midnight! Clearing caches and broadcasting refresh event..."),Xt.clearDateSensitiveCaches(),window.dispatchEvent(new CustomEvent("midnight-refresh"))});return()=>{d()}},[]),P.useEffect(()=>{(async()=>{if(n){u(!0);const h=await Dj(n);s(!h),u(!1)}else s(!1),u(!1)})()},[n]);const c=()=>{s(!1),e(Ce.DASHBOARD)};return i||l?p.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:p.jsx("div",{className:"w-8 h-8 border-2 border-white/20 border-t-white rounded-full animate-spin"})}):n?a?p.jsx(Gde,{user:n,onComplete:c}):p.jsxs(UM,{currentView:t,onNavigate:e,children:[t===Ce.DASHBOARD&&p.jsx(Ade,{}),t===Ce.CAL_COACH&&p.jsx($de,{onNavigate:e}),t===Ce.WORKOUT_PLAN&&p.jsx(Lde,{onNavigate:e}),t===Ce.HISTORY&&p.jsx(Fde,{}),t===Ce.PROFILE&&p.jsx(zde,{})]}):p.jsx(Bde,{})}const $O=document.getElementById("root");if(!$O)throw new Error("Could not find root element to mount to");const qde=Lp.createRoot($O);qde.render(p.jsx(j.StrictMode,{children:p.jsx(Hde,{})}));
